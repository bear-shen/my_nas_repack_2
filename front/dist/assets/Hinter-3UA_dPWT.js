import{d as T,r as i,o as h,z as x,b as c,c as f,e as d,F as y,f as E,n as H,G as L}from"./basic-cwdvCeQw.js";import{_ as F}from"./index-D4dQ6tpz.js";const V={class:"hinter"},M=["innerHTML","onClick"],I=T({__name:"Hinter",props:{modelValue:{},getList:{type:Function},submit:{type:Function},parseText:{type:Function},meta:{}},setup(_){const l=_,r=i(null);h(()=>{r.value&&l.modelValue&&(console.info(l.modelValue),r.value.innerHTML=l.parseText(l.modelValue))});async function m(e){e.isComposing||L.debounce(async()=>{var t;n.value=await l.getList((t=r.value)==null?void 0:t.innerHTML),n.value.length&&(n.value[0]._sel=!0)},200,"hinterDebounce")}async function g(e){let a,t;switch(e.code){case"ArrowDown":if(e.stopPropagation(),e.preventDefault(),!n.value.length)break;for(a=-1,n.value.forEach((o,u)=>{o._sel&&(a=u)}),t=a+1;t<0;)t+=n.value.length;for(;t>=n.value.length;)t-=n.value.length;n.value.forEach((o,u)=>{o._sel=u==t});break;case"ArrowUp":if(e.stopPropagation(),e.preventDefault(),!n.value.length)break;for(a=0,n.value.forEach((o,u)=>{o._sel&&(a=u)}),t=a-1;t<0;)t+=n.value.length;for(;t>=n.value.length;)t-=n.value.length;n.value.forEach((o,u)=>{o._sel=u==t});break;case"NumpadEnter":case"Enter":if(e.stopPropagation(),e.preventDefault(),!n.value.length||(a=-1,n.value.forEach((o,u)=>{o._sel&&(a=u)}),a==-1))break;const s=n.value[a];p(s);break}}x(()=>l.modelValue,async e=>{console.info(e),v.value=e,r.value&&(r.value.innerHTML=l.parseText(e))});const v=i(null);h(()=>{var e;(e=r.value)==null||e.focus()});const n=i([]);function b(e){return l.parseText?l.parseText(e):e}async function p(e){v.value=null,r.value&&(r.value.innerHTML=""),n.value=[],await l.submit(e,l.meta)}function k(){}function w(){}return(e,a)=>(c(),f("div",V,[d("div",{contenteditable:"true",onInput:m,onKeydown:g,onFocus:w,onBlur:k,ref_key:"editor",ref:r},null,544),d("ul",null,[(c(!0),f(y,null,E(n.value,(t,s)=>(c(),f("li",{key:`hinter_${s}`,innerHTML:b(t),onClick:o=>p(t),class:H({active:t._sel})},null,10,M))),128))])]))}}),D=F(I,[["__scopeId","data-v-ebf75b93"]]);export{D as H};

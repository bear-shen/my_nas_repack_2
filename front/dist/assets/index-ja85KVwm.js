const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./FileView_N-BK3K-j2A.js","./FileView.vue_vue_type_style_index_0_lang-J66ZpQml.js","./FileItem-DuONDfzA.js","./ContentEditable.vue_vue_type_script_setup_true_lang-BSTYySKN.js","./Hinter-B4VjXcuM.js","./Hinter-mAwqbGPx.css","./FileItem-BJTKtmlU.css","./FileView-4q7gxgk7.css","./Favourite-BK6aeDa8.js","./Favourite-Cu3IAfx1.css","./FileView_R-DlCZrZHJ.js","./TagView-DacCZUEC.js","./TagView-B_sbdW8e.css","./UserView-D887aMJR.js","./UserView-DIJNqfb7.css","./LogView-CyvOF3eI.js","./LogView-B_-u2chg.css","./SettingView-IZhb-v59.js","./SettingView-BRg7qwMd.css"])))=>i.map(i=>d[i]);
var wa=Object.defineProperty;var ba=(e,t,n)=>t in e?wa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ee=(e,t,n)=>ba(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function as(e,t){const n=new Set(e.split(","));return r=>n.has(r)}const Re={},tn=[],it=()=>{},xa=()=>!1,lr=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),ls=e=>e.startsWith("onUpdate:"),Ve=Object.assign,cs=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},ka=Object.prototype.hasOwnProperty,we=(e,t)=>ka.call(e,t),me=Array.isArray,nn=e=>Tn(e)==="[object Map]",un=e=>Tn(e)==="[object Set]",Rs=e=>Tn(e)==="[object Date]",ye=e=>typeof e=="function",He=e=>typeof e=="string",xt=e=>typeof e=="symbol",Le=e=>e!==null&&typeof e=="object",$i=e=>(Le(e)||ye(e))&&ye(e.then)&&ye(e.catch),Ni=Object.prototype.toString,Tn=e=>Ni.call(e),Ea=e=>Tn(e).slice(8,-1),Bi=e=>Tn(e)==="[object Object]",us=e=>He(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,vn=as(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cr=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Sa=/-(\w)/g,gt=cr(e=>e.replace(Sa,(t,n)=>n?n.toUpperCase():"")),Oa=/\B([A-Z])/g,fn=cr(e=>e.replace(Oa,"-$1").toLowerCase()),ur=cr(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ir=cr(e=>e?`on${ur(e)}`:""),Mt=(e,t)=>!Object.is(e,t),Xn=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Fi=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},tr=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Ts;const ji=()=>Ts||(Ts=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ge(e){if(me(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=He(r)?Da(r):Ge(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(He(e)||Le(e))return e}const Ca=/;(?![^(]*\))/g,Ia=/:([^]+)/,Aa=/\/\*[^]*?\*\//g;function Da(e){const t={};return e.replace(Aa,"").split(Ca).forEach(n=>{if(n){const r=n.split(Ia);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Ae(e){let t="";if(He(e))t=e;else if(me(e))for(let n=0;n<e.length;n++){const r=Ae(e[n]);r&&(t+=r+" ")}else if(Le(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const La="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Ra=as(La);function Hi(e){return!!e||e===""}function Ta(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=Xt(e[r],t[r]);return n}function Xt(e,t){if(e===t)return!0;let n=Rs(e),r=Rs(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=xt(e),r=xt(t),n||r)return e===t;if(n=me(e),r=me(t),n||r)return n&&r?Ta(e,t):!1;if(n=Le(e),r=Le(t),n||r){if(!n||!r)return!1;const s=Object.keys(e).length,i=Object.keys(t).length;if(s!==i)return!1;for(const a in e){const o=e.hasOwnProperty(a),c=t.hasOwnProperty(a);if(o&&!c||!o&&c||!Xt(e[a],t[a]))return!1}}return String(e)===String(t)}function fs(e,t){return e.findIndex(n=>Xt(n,t))}const Ce=e=>He(e)?e:e==null?"":me(e)||Le(e)&&(e.toString===Ni||!ye(e.toString))?JSON.stringify(e,Ui,2):String(e),Ui=(e,t)=>t&&t.__v_isRef?Ui(e,t.value):nn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],i)=>(n[Ar(r,i)+" =>"]=s,n),{})}:un(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Ar(n))}:xt(t)?Ar(t):Le(t)&&!me(t)&&!Bi(t)?String(t):t,Ar=(e,t="")=>{var n;return xt(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let et;class Wi{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=et,!t&&et&&(this.index=(et.scopes||(et.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=et;try{return et=this,t()}finally{et=n}}}on(){et=this}off(){et=this.parent}stop(t){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function Vi(e){return new Wi(e)}function Pa(e,t=et){t&&t.active&&t.effects.push(e)}function Ki(){return et}function za(e){et&&et.cleanups.push(e)}let Vt;class ds{constructor(t,n,r,s){this.fn=t,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=5,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,Pa(this,s)}get dirty(){if(this._dirtyLevel===2)return!1;if(this._dirtyLevel===3||this._dirtyLevel===4){this._dirtyLevel=1,Bt();for(let t=0;t<this._depsLength;t++){const n=this.deps[t];if(n.computed){if(n.computed.effect._dirtyLevel===2)return!0;if(Ma(n.computed),this._dirtyLevel>=5)break}}this._dirtyLevel===1&&(this._dirtyLevel=0),Ft()}return this._dirtyLevel>=5}set dirty(t){this._dirtyLevel=t?5:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=Tt,n=Vt;try{return Tt=!0,Vt=this,this._runnings++,Ps(this),this.fn()}finally{zs(this),this._runnings--,Vt=n,Tt=t}}stop(){this.active&&(Ps(this),zs(this),this.onStop&&this.onStop(),this.active=!1)}}function Ma(e){return e.value}function Ps(e){e._trackId++,e._depsLength=0}function zs(e){if(e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)Yi(e.deps[t],e);e.deps.length=e._depsLength}}function Yi(e,t){const n=e.get(t);n!==void 0&&t._trackId!==n&&(e.delete(t),e.size===0&&e.cleanup())}let Tt=!0,jr=0;const Xi=[];function Bt(){Xi.push(Tt),Tt=!1}function Ft(){const e=Xi.pop();Tt=e===void 0?!0:e}function hs(){jr++}function ps(){for(jr--;!jr&&Hr.length;)Hr.shift()()}function qi(e,t,n){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const r=e.deps[e._depsLength];r!==t?(r&&Yi(r,e),e.deps[e._depsLength++]=t):e._depsLength++}}const Hr=[];function Zi(e,t,n){hs();for(const r of e.keys()){if(!e.computed&&r.computed&&e.get(r)===r._trackId&&r._runnings>0){r._dirtyLevel=2;continue}let s;r._dirtyLevel<t&&(s??(s=e.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r.computed&&r._dirtyLevel===2&&(r._shouldSchedule=!0),r._dirtyLevel=t),r._shouldSchedule&&(s??(s=e.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==3&&(r._shouldSchedule=!1,r.scheduler&&Hr.push(r.scheduler)))}ps()}const Gi=(e,t)=>{const n=new Map;return n.cleanup=e,n.computed=t,n},nr=new WeakMap,Kt=Symbol(""),Ur=Symbol("");function Je(e,t,n){if(Tt&&Vt){let r=nr.get(e);r||nr.set(e,r=new Map);let s=r.get(n);s||r.set(n,s=Gi(()=>r.delete(n))),qi(Vt,s)}}function bt(e,t,n,r,s,i){const a=nr.get(e);if(!a)return;let o=[];if(t==="clear")o=[...a.values()];else if(n==="length"&&me(e)){const c=Number(r);a.forEach((u,d)=>{(d==="length"||!xt(d)&&d>=c)&&o.push(u)})}else switch(n!==void 0&&o.push(a.get(n)),t){case"add":me(e)?us(n)&&o.push(a.get("length")):(o.push(a.get(Kt)),nn(e)&&o.push(a.get(Ur)));break;case"delete":me(e)||(o.push(a.get(Kt)),nn(e)&&o.push(a.get(Ur)));break;case"set":nn(e)&&o.push(a.get(Kt));break}hs();for(const c of o)c&&Zi(c,5);ps()}function $a(e,t){const n=nr.get(e);return n&&n.get(t)}const Na=as("__proto__,__v_isRef,__isVue"),Ji=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(xt)),Ms=Ba();function Ba(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=xe(this);for(let i=0,a=this.length;i<a;i++)Je(r,"get",i+"");const s=r[t](...n);return s===-1||s===!1?r[t](...n.map(xe)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Bt(),hs();const r=xe(this)[t].apply(this,n);return ps(),Ft(),r}}),e}function Fa(e){xt(e)||(e=String(e));const t=xe(this);return Je(t,"has",e),t.hasOwnProperty(e)}class Qi{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?Qa:ro:i?no:to).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const a=me(t);if(!s){if(a&&we(Ms,n))return Reflect.get(Ms,n,r);if(n==="hasOwnProperty")return Fa}const o=Reflect.get(t,n,r);return(xt(n)?Ji.has(n):Na(n))||(s||Je(t,"get",n),i)?o:$e(o)?a&&us(n)?o:o.value:Le(o)?s?io(o):Pn(o):o}}class eo extends Qi{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];if(!this._isShallow){const c=Sn(i);if(!rr(r)&&!Sn(r)&&(i=xe(i),r=xe(r)),!me(t)&&$e(i)&&!$e(r))return c?!1:(i.value=r,!0)}const a=me(t)&&us(n)?Number(n)<t.length:we(t,n),o=Reflect.set(t,n,r,s);return t===xe(s)&&(a?Mt(r,i)&&bt(t,"set",n,r):bt(t,"add",n,r)),o}deleteProperty(t,n){const r=we(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&bt(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!xt(n)||!Ji.has(n))&&Je(t,"has",n),r}ownKeys(t){return Je(t,"iterate",me(t)?"length":Kt),Reflect.ownKeys(t)}}class ja extends Qi{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Ha=new eo,Ua=new ja,Wa=new eo(!0);const ms=e=>e,fr=e=>Reflect.getPrototypeOf(e);function Nn(e,t,n=!1,r=!1){e=e.__v_raw;const s=xe(e),i=xe(t);n||(Mt(t,i)&&Je(s,"get",t),Je(s,"get",i));const{has:a}=fr(s),o=r?ms:n?ys:On;if(a.call(s,t))return o(e.get(t));if(a.call(s,i))return o(e.get(i));e!==s&&e.get(t)}function Bn(e,t=!1){const n=this.__v_raw,r=xe(n),s=xe(e);return t||(Mt(e,s)&&Je(r,"has",e),Je(r,"has",s)),e===s?n.has(e):n.has(e)||n.has(s)}function Fn(e,t=!1){return e=e.__v_raw,!t&&Je(xe(e),"iterate",Kt),Reflect.get(e,"size",e)}function $s(e){e=xe(e);const t=xe(this);return fr(t).has.call(t,e)||(t.add(e),bt(t,"add",e,e)),this}function Ns(e,t){t=xe(t);const n=xe(this),{has:r,get:s}=fr(n);let i=r.call(n,e);i||(e=xe(e),i=r.call(n,e));const a=s.call(n,e);return n.set(e,t),i?Mt(t,a)&&bt(n,"set",e,t):bt(n,"add",e,t),this}function Bs(e){const t=xe(this),{has:n,get:r}=fr(t);let s=n.call(t,e);s||(e=xe(e),s=n.call(t,e)),r&&r.call(t,e);const i=t.delete(e);return s&&bt(t,"delete",e,void 0),i}function Fs(){const e=xe(this),t=e.size!==0,n=e.clear();return t&&bt(e,"clear",void 0,void 0),n}function jn(e,t){return function(r,s){const i=this,a=i.__v_raw,o=xe(a),c=t?ms:e?ys:On;return!e&&Je(o,"iterate",Kt),a.forEach((u,d)=>r.call(s,c(u),c(d),i))}}function Hn(e,t,n){return function(...r){const s=this.__v_raw,i=xe(s),a=nn(i),o=e==="entries"||e===Symbol.iterator&&a,c=e==="keys"&&a,u=s[e](...r),d=n?ms:t?ys:On;return!t&&Je(i,"iterate",c?Ur:Kt),{next(){const{value:m,done:y}=u.next();return y?{value:m,done:y}:{value:o?[d(m[0]),d(m[1])]:d(m),done:y}},[Symbol.iterator](){return this}}}}function Et(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Va(){const e={get(i){return Nn(this,i)},get size(){return Fn(this)},has:Bn,add:$s,set:Ns,delete:Bs,clear:Fs,forEach:jn(!1,!1)},t={get(i){return Nn(this,i,!1,!0)},get size(){return Fn(this)},has:Bn,add:$s,set:Ns,delete:Bs,clear:Fs,forEach:jn(!1,!0)},n={get(i){return Nn(this,i,!0)},get size(){return Fn(this,!0)},has(i){return Bn.call(this,i,!0)},add:Et("add"),set:Et("set"),delete:Et("delete"),clear:Et("clear"),forEach:jn(!0,!1)},r={get(i){return Nn(this,i,!0,!0)},get size(){return Fn(this,!0)},has(i){return Bn.call(this,i,!0)},add:Et("add"),set:Et("set"),delete:Et("delete"),clear:Et("clear"),forEach:jn(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=Hn(i,!1,!1),n[i]=Hn(i,!0,!1),t[i]=Hn(i,!1,!0),r[i]=Hn(i,!0,!0)}),[e,n,t,r]}const[Ka,Ya,Xa,qa]=Va();function _s(e,t){const n=t?e?qa:Xa:e?Ya:Ka;return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(we(n,s)&&s in r?n:r,s,i)}const Za={get:_s(!1,!1)},Ga={get:_s(!1,!0)},Ja={get:_s(!0,!1)};const to=new WeakMap,no=new WeakMap,ro=new WeakMap,Qa=new WeakMap;function el(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function tl(e){return e.__v_skip||!Object.isExtensible(e)?0:el(Ea(e))}function Pn(e){return Sn(e)?e:gs(e,!1,Ha,Za,to)}function so(e){return gs(e,!1,Wa,Ga,no)}function io(e){return gs(e,!0,Ua,Ja,ro)}function gs(e,t,n,r,s){if(!Le(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=s.get(e);if(i)return i;const a=tl(e);if(a===0)return e;const o=new Proxy(e,a===2?r:n);return s.set(e,o),o}function Yt(e){return Sn(e)?Yt(e.__v_raw):!!(e&&e.__v_isReactive)}function Sn(e){return!!(e&&e.__v_isReadonly)}function rr(e){return!!(e&&e.__v_isShallow)}function oo(e){return e?!!e.__v_raw:!1}function xe(e){const t=e&&e.__v_raw;return t?xe(t):e}function vs(e){return Object.isExtensible(e)&&Fi(e,"__v_skip",!0),e}const On=e=>Le(e)?Pn(e):e,ys=e=>Le(e)?io(e):e;class ao{constructor(t,n,r,s){this.getter=t,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new ds(()=>t(this._value),()=>qn(this,this.effect._dirtyLevel===3?3:4)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const t=xe(this);return(!t._cacheable||t.effect.dirty)&&Mt(t._value,t._value=t.effect.run())&&qn(t,5),lo(t),t.effect._dirtyLevel>=2&&qn(t,3),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function nl(e,t,n=!1){let r,s;const i=ye(e);return i?(r=e,s=it):(r=e.get,s=e.set),new ao(r,s,i||!s,n)}function lo(e){var t;Tt&&Vt&&(e=xe(e),qi(Vt,(t=e.dep)!=null?t:e.dep=Gi(()=>e.dep=void 0,e instanceof ao?e:void 0)))}function qn(e,t=5,n,r){e=xe(e);const s=e.dep;s&&Zi(s,t)}function $e(e){return!!(e&&e.__v_isRef===!0)}function pe(e){return co(e,!1)}function rl(e){return co(e,!0)}function co(e,t){return $e(e)?e:new sl(e,t)}class sl{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:xe(t),this._value=n?t:On(t)}get value(){return lo(this),this._value}set value(t){const n=this.__v_isShallow||rr(t)||Sn(t);t=n?t:xe(t),Mt(t,this._rawValue)&&(this._rawValue,this._rawValue=t,this._value=n?t:On(t),qn(this,5))}}function ke(e){return $e(e)?e.value:e}const il={get:(e,t,n)=>ke(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return $e(s)&&!$e(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function uo(e){return Yt(e)?e:new Proxy(e,il)}function ol(e){const t=me(e)?new Array(e.length):{};for(const n in e)t[n]=ll(e,n);return t}class al{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return $a(xe(this._object),this._key)}}function ll(e,t,n){const r=e[t];return $e(r)?r:new al(e,t,n)}/**
* @vue/runtime-core v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Pt(e,t,n,r){try{return r?e(...r):e()}catch(s){dr(s,t,n)}}function lt(e,t,n,r){if(ye(e)){const s=Pt(e,t,n,r);return s&&$i(s)&&s.catch(i=>{dr(i,t,n)}),s}if(me(e)){const s=[];for(let i=0;i<e.length;i++)s.push(lt(e[i],t,n,r));return s}}function dr(e,t,n,r=!0){const s=t?t.vnode:null;if(t){let i=t.parent;const a=t.proxy,o=`https://vuejs.org/error-reference/#runtime-${n}`;for(;i;){const u=i.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](e,a,o)===!1)return}i=i.parent}const c=t.appContext.config.errorHandler;if(c){Bt(),Pt(c,null,10,[e,a,o]),Ft();return}}cl(e,n,s,r)}function cl(e,t,n,r=!0){console.error(e)}let Cn=!1,Wr=!1;const Xe=[];let mt=0;const rn=[];let It=null,Wt=0;const fo=Promise.resolve();let ws=null;function hr(e){const t=ws||fo;return e?t.then(this?e.bind(this):e):t}function ul(e){let t=mt+1,n=Xe.length;for(;t<n;){const r=t+n>>>1,s=Xe[r],i=In(s);i<e||i===e&&s.pre?t=r+1:n=r}return t}function bs(e){(!Xe.length||!Xe.includes(e,Cn&&e.allowRecurse?mt+1:mt))&&(e.id==null?Xe.push(e):Xe.splice(ul(e.id),0,e),ho())}function ho(){!Cn&&!Wr&&(Wr=!0,ws=fo.then(mo))}function fl(e){const t=Xe.indexOf(e);t>mt&&Xe.splice(t,1)}function dl(e){me(e)?rn.push(...e):(!It||!It.includes(e,e.allowRecurse?Wt+1:Wt))&&rn.push(e),ho()}function js(e,t,n=Cn?mt+1:0){for(;n<Xe.length;n++){const r=Xe[n];if(r&&r.pre){if(e&&r.id!==e.uid)continue;Xe.splice(n,1),n--,r()}}}function po(e){if(rn.length){const t=[...new Set(rn)].sort((n,r)=>In(n)-In(r));if(rn.length=0,It){It.push(...t);return}for(It=t,Wt=0;Wt<It.length;Wt++){const n=It[Wt];n.active!==!1&&n()}It=null,Wt=0}}const In=e=>e.id==null?1/0:e.id,hl=(e,t)=>{const n=In(e)-In(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function mo(e){Wr=!1,Cn=!0,Xe.sort(hl);try{for(mt=0;mt<Xe.length;mt++){const t=Xe[mt];t&&t.active!==!1&&Pt(t,null,14)}}finally{mt=0,Xe.length=0,po(),Cn=!1,ws=null,(Xe.length||rn.length)&&mo()}}function pl(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||Re;let s=n;const i=t.startsWith("update:"),a=i&&t.slice(7);if(a&&a in r){const d=`${a==="modelValue"?"model":a}Modifiers`,{number:m,trim:y}=r[d]||Re;y&&(s=n.map(f=>He(f)?f.trim():f)),m&&(s=n.map(tr))}let o,c=r[o=Ir(t)]||r[o=Ir(gt(t))];!c&&i&&(c=r[o=Ir(fn(t))]),c&&lt(c,e,6,s);const u=r[o+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,lt(u,e,6,s)}}function _o(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let a={},o=!1;if(!ye(e)){const c=u=>{const d=_o(u,t,!0);d&&(o=!0,Ve(a,d))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!i&&!o?(Le(e)&&r.set(e,null),null):(me(i)?i.forEach(c=>a[c]=null):Ve(a,i),Le(e)&&r.set(e,a),a)}function pr(e,t){return!e||!lr(t)?!1:(t=t.slice(2).replace(/Once$/,""),we(e,t[0].toLowerCase()+t.slice(1))||we(e,fn(t))||we(e,t))}let We=null,mr=null;function sr(e){const t=We;return We=e,mr=e&&e.type.__scopeId||null,t}function ml(e){mr=e}function _l(){mr=null}function Zn(e,t=We,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&Qs(-1);const i=sr(t);let a;try{a=e(...s)}finally{sr(i),r._d&&Qs(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function Dr(e){const{type:t,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:a,attrs:o,emit:c,render:u,renderCache:d,props:m,data:y,setupState:f,ctx:g,inheritAttrs:h}=e,_=sr(e);let p,b;try{if(n.shapeFlag&4){const S=s||r,x=S;p=pt(u.call(x,S,d,m,f,y,g)),b=o}else{const S=t;p=pt(S.length>1?S(m,{attrs:o,slots:a,emit:c}):S(m,null)),b=t.props?o:gl(o)}}catch(S){bn.length=0,dr(S,e,1),p=Fe($t)}let v=p;if(b&&h!==!1){const S=Object.keys(b),{shapeFlag:x}=v;S.length&&x&7&&(i&&S.some(ls)&&(b=vl(b,i)),v=on(v,b,!1,!0))}return n.dirs&&(v=on(v,null,!1,!0),v.dirs=v.dirs?v.dirs.concat(n.dirs):n.dirs),n.transition&&(v.transition=n.transition),p=v,sr(_),p}const gl=e=>{let t;for(const n in e)(n==="class"||n==="style"||lr(n))&&((t||(t={}))[n]=e[n]);return t},vl=(e,t)=>{const n={};for(const r in e)(!ls(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function yl(e,t,n){const{props:r,children:s,component:i}=e,{props:a,children:o,patchFlag:c}=t,u=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?Hs(r,a,u):!!a;if(c&8){const d=t.dynamicProps;for(let m=0;m<d.length;m++){const y=d[m];if(a[y]!==r[y]&&!pr(u,y))return!0}}}else return(s||o)&&(!o||!o.$stable)?!0:r===a?!1:r?a?Hs(r,a,u):!0:!!a;return!1}function Hs(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!pr(n,i))return!0}return!1}function wl({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const go="components";function bl(e,t){return wo(go,e,!0,t)||e}const vo=Symbol.for("v-ndc");function yo(e){return He(e)?wo(go,e,!1)||e:e||vo}function wo(e,t,n=!0,r=!1){const s=We||Ke;if(s){const i=s.type;{const o=fc(i,!1);if(o&&(o===t||o===gt(t)||o===ur(gt(t))))return i}const a=Us(s[e]||i[e],t)||Us(s.appContext[e],t);return!a&&r?i:a}}function Us(e,t){return e&&(e[t]||e[gt(t)]||e[ur(gt(t))])}const xl=e=>e.__isSuspense;function kl(e,t){t&&t.pendingBranch?me(e)?t.effects.push(...e):t.effects.push(e):dl(e)}function _r(e,t,n=Ke,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...a)=>{Bt();const o=zn(n),c=lt(t,n,e,a);return o(),Ft(),c});return r?s.unshift(i):s.push(i),i}}const kt=e=>(t,n=Ke)=>{(!wr||e==="sp")&&_r(e,(...r)=>t(...r),n)},El=kt("bm"),nt=kt("m"),Sl=kt("bu"),Ol=kt("u"),gr=kt("bum"),ft=kt("um"),Cl=kt("sp"),Il=kt("rtg"),Al=kt("rtc");function Dl(e,t=Ke){_r("ec",e,t)}function Ye(e,t){if(We===null)return e;const n=br(We),r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[i,a,o,c=Re]=t[s];i&&(ye(i)&&(i={mounted:i,updated:i}),i.deep&&Lt(a),r.push({dir:i,instance:n,value:a,oldValue:void 0,arg:o,modifiers:c}))}return e}function jt(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let a=0;a<s.length;a++){const o=s[a];i&&(o.oldValue=i[a].value);let c=o.dir[r];c&&(Bt(),lt(c,n,8,[e.el,o,e,t]),Ft())}}function Be(e,t,n,r){let s;const i=n;if(me(e)||He(e)){s=new Array(e.length);for(let a=0,o=e.length;a<o;a++)s[a]=t(e[a],a,void 0,i)}else if(typeof e=="number"){s=new Array(e);for(let a=0;a<e;a++)s[a]=t(a+1,a,void 0,i)}else if(Le(e))if(e[Symbol.iterator])s=Array.from(e,(a,o)=>t(a,o,void 0,i));else{const a=Object.keys(e);s=new Array(a.length);for(let o=0,c=a.length;o<c;o++){const u=a[o];s[o]=t(e[u],u,o,i)}}else s=[];return s}/*! #__NO_SIDE_EFFECTS__ */function Ue(e,t){return ye(e)?Ve({name:e.name},t,{setup:e}):e}const yn=e=>!!e.type.__asyncLoader;function je(e,t,n={},r,s){if(We.isCE||We.parent&&yn(We.parent)&&We.parent.isCE)return t!=="default"&&(n.name=t),Fe("slot",n,r);let i=e[t];i&&i._c&&(i._d=!1),ae();const a=i&&bo(i(n)),o=yr(_e,{key:n.key||a&&a.key||`_${t}`},a||[],a&&e._===1?64:-2);return o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),i&&i._c&&(i._d=!0),o}function bo(e){return e.some(t=>or(t)?!(t.type===$t||t.type===_e&&!bo(t.children)):!0)?e:null}const Vr=e=>e?Wo(e)?br(e):Vr(e.parent):null,wn=Ve(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Vr(e.parent),$root:e=>Vr(e.root),$emit:e=>e.emit,$options:e=>xs(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,bs(e.update)}),$nextTick:e=>e.n||(e.n=hr.bind(e.proxy)),$watch:e=>Gl.bind(e)}),Lr=(e,t)=>e!==Re&&!e.__isScriptSetup&&we(e,t),Ll={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:a,type:o,appContext:c}=e;let u;if(t[0]!=="$"){const f=a[t];if(f!==void 0)switch(f){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(Lr(r,t))return a[t]=1,r[t];if(s!==Re&&we(s,t))return a[t]=2,s[t];if((u=e.propsOptions[0])&&we(u,t))return a[t]=3,i[t];if(n!==Re&&we(n,t))return a[t]=4,n[t];Kr&&(a[t]=0)}}const d=wn[t];let m,y;if(d)return t==="$attrs"&&Je(e.attrs,"get",""),d(e);if((m=o.__cssModules)&&(m=m[t]))return m;if(n!==Re&&we(n,t))return a[t]=4,n[t];if(y=c.config.globalProperties,we(y,t))return y[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return Lr(s,t)?(s[t]=n,!0):r!==Re&&we(r,t)?(r[t]=n,!0):we(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i}},a){let o;return!!n[a]||e!==Re&&we(e,a)||Lr(t,a)||(o=i[0])&&we(o,a)||we(r,a)||we(wn,a)||we(s.config.globalProperties,a)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:we(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Ws(e){return me(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Kr=!0;function Rl(e){const t=xs(e),n=e.proxy,r=e.ctx;Kr=!1,t.beforeCreate&&Vs(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:a,watch:o,provide:c,inject:u,created:d,beforeMount:m,mounted:y,beforeUpdate:f,updated:g,activated:h,deactivated:_,beforeDestroy:p,beforeUnmount:b,destroyed:v,unmounted:S,render:x,renderTracked:C,renderTriggered:z,errorCaptured:P,serverPrefetch:A,expose:U,inheritAttrs:J,components:R,directives:V,filters:w}=t;if(u&&Tl(u,r,null),a)for(const G in a){const q=a[G];ye(q)&&(r[G]=q.bind(n))}if(s){const G=s.call(n,n);Le(G)&&(e.data=Pn(G))}if(Kr=!0,i)for(const G in i){const q=i[G],j=ye(q)?q.bind(n,n):ye(q.get)?q.get.bind(n,n):it,se=!ye(q)&&ye(q.set)?q.set.bind(n):it,N=st({get:j,set:se});Object.defineProperty(r,G,{enumerable:!0,configurable:!0,get:()=>N.value,set:M=>N.value=M})}if(o)for(const G in o)xo(o[G],r,n,G);if(c){const G=ye(c)?c.call(n):c;Reflect.ownKeys(G).forEach(q=>{Gn(q,G[q])})}d&&Vs(d,e,"c");function oe(G,q){me(q)?q.forEach(j=>G(j.bind(n))):q&&G(q.bind(n))}if(oe(El,m),oe(nt,y),oe(Sl,f),oe(Ol,g),oe($o,h),oe(No,_),oe(Dl,P),oe(Al,C),oe(Il,z),oe(gr,b),oe(ft,S),oe(Cl,A),me(U))if(U.length){const G=e.exposed||(e.exposed={});U.forEach(q=>{Object.defineProperty(G,q,{get:()=>n[q],set:j=>n[q]=j})})}else e.exposed||(e.exposed={});x&&e.render===it&&(e.render=x),J!=null&&(e.inheritAttrs=J),R&&(e.components=R),V&&(e.directives=V)}function Tl(e,t,n=it){me(e)&&(e=Yr(e));for(const r in e){const s=e[r];let i;Le(s)?"default"in s?i=tt(s.from||r,s.default,!0):i=tt(s.from||r):i=tt(s),$e(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):t[r]=i}}function Vs(e,t,n){lt(me(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function xo(e,t,n,r){const s=r.includes(".")?zo(n,r):()=>n[r];if(He(e)){const i=t[e];ye(i)&&ct(s,i)}else if(ye(e))ct(s,e.bind(n));else if(Le(e))if(me(e))e.forEach(i=>xo(i,t,n,r));else{const i=ye(e.handler)?e.handler.bind(n):t[e.handler];ye(i)&&ct(s,i,e)}}function xs(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=e.appContext,o=i.get(t);let c;return o?c=o:!s.length&&!n&&!r?c=t:(c={},s.length&&s.forEach(u=>ir(c,u,a,!0)),ir(c,t,a)),Le(t)&&i.set(t,c),c}function ir(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&ir(e,i,n,!0),s&&s.forEach(a=>ir(e,a,n,!0));for(const a in t)if(!(r&&a==="expose")){const o=Pl[a]||n&&n[a];e[a]=o?o(e[a],t[a]):t[a]}return e}const Pl={data:Ks,props:Ys,emits:Ys,methods:_n,computed:_n,beforeCreate:qe,created:qe,beforeMount:qe,mounted:qe,beforeUpdate:qe,updated:qe,beforeDestroy:qe,beforeUnmount:qe,destroyed:qe,unmounted:qe,activated:qe,deactivated:qe,errorCaptured:qe,serverPrefetch:qe,components:_n,directives:_n,watch:Ml,provide:Ks,inject:zl};function Ks(e,t){return t?e?function(){return Ve(ye(e)?e.call(this,this):e,ye(t)?t.call(this,this):t)}:t:e}function zl(e,t){return _n(Yr(e),Yr(t))}function Yr(e){if(me(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function qe(e,t){return e?[...new Set([].concat(e,t))]:t}function _n(e,t){return e?Ve(Object.create(null),e,t):t}function Ys(e,t){return e?me(e)&&me(t)?[...new Set([...e,...t])]:Ve(Object.create(null),Ws(e),Ws(t??{})):t}function Ml(e,t){if(!e)return t;if(!t)return e;const n=Ve(Object.create(null),e);for(const r in t)n[r]=qe(e[r],t[r]);return n}function ko(){return{app:null,config:{isNativeTag:xa,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let $l=0;function Nl(e,t){return function(r,s=null){ye(r)||(r=Ve({},r)),s!=null&&!Le(s)&&(s=null);const i=ko(),a=new WeakSet;let o=!1;const c=i.app={_uid:$l++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:hc,get config(){return i.config},set config(u){},use(u,...d){return a.has(u)||(u&&ye(u.install)?(a.add(u),u.install(c,...d)):ye(u)&&(a.add(u),u(c,...d))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,d){return d?(i.components[u]=d,c):i.components[u]},directive(u,d){return d?(i.directives[u]=d,c):i.directives[u]},mount(u,d,m){if(!o){const y=Fe(r,s);return y.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),d&&t?t(y,u):e(y,u,m),o=!0,c._container=u,u.__vue_app__=c,br(y.component)}},unmount(){o&&(e(null,c._container),delete c._container.__vue_app__)},provide(u,d){return i.provides[u]=d,c},runWithContext(u){const d=sn;sn=c;try{return u()}finally{sn=d}}};return c}}let sn=null;function Gn(e,t){if(Ke){let n=Ke.provides;const r=Ke.parent&&Ke.parent.provides;r===n&&(n=Ke.provides=Object.create(r)),n[e]=t}}function tt(e,t,n=!1){const r=Ke||We;if(r||sn){const s=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:sn._context.provides;if(s&&e in s)return s[e];if(arguments.length>1)return n&&ye(t)?t.call(r&&r.proxy):t}}function Bl(){return!!(Ke||We||sn)}const Eo={},So=()=>Object.create(Eo),Oo=e=>Object.getPrototypeOf(e)===Eo;function Fl(e,t,n,r=!1){const s={},i=So();e.propsDefaults=Object.create(null),Co(e,t,s,i);for(const a in e.propsOptions[0])a in s||(s[a]=void 0);n?e.props=r?s:so(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function jl(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:a}}=e,o=xe(s),[c]=e.propsOptions;let u=!1;if((r||a>0)&&!(a&16)){if(a&8){const d=e.vnode.dynamicProps;for(let m=0;m<d.length;m++){let y=d[m];if(pr(e.emitsOptions,y))continue;const f=t[y];if(c)if(we(i,y))f!==i[y]&&(i[y]=f,u=!0);else{const g=gt(y);s[g]=Xr(c,o,g,f,e,!1)}else f!==i[y]&&(i[y]=f,u=!0)}}}else{Co(e,t,s,i)&&(u=!0);let d;for(const m in o)(!t||!we(t,m)&&((d=fn(m))===m||!we(t,d)))&&(c?n&&(n[m]!==void 0||n[d]!==void 0)&&(s[m]=Xr(c,o,m,void 0,e,!0)):delete s[m]);if(i!==o)for(const m in i)(!t||!we(t,m))&&(delete i[m],u=!0)}u&&bt(e.attrs,"set","")}function Co(e,t,n,r){const[s,i]=e.propsOptions;let a=!1,o;if(t)for(let c in t){if(vn(c))continue;const u=t[c];let d;s&&we(s,d=gt(c))?!i||!i.includes(d)?n[d]=u:(o||(o={}))[d]=u:pr(e.emitsOptions,c)||(!(c in r)||u!==r[c])&&(r[c]=u,a=!0)}if(i){const c=xe(n),u=o||Re;for(let d=0;d<i.length;d++){const m=i[d];n[m]=Xr(s,c,m,u[m],e,!we(u,m))}}return a}function Xr(e,t,n,r,s,i){const a=e[n];if(a!=null){const o=we(a,"default");if(o&&r===void 0){const c=a.default;if(a.type!==Function&&!a.skipFactory&&ye(c)){const{propsDefaults:u}=s;if(n in u)r=u[n];else{const d=zn(s);r=u[n]=c.call(null,t),d()}}else r=c}a[0]&&(i&&!o?r=!1:a[1]&&(r===""||r===fn(n))&&(r=!0))}return r}function Io(e,t,n=!1){const r=t.propsCache,s=r.get(e);if(s)return s;const i=e.props,a={},o=[];let c=!1;if(!ye(e)){const d=m=>{c=!0;const[y,f]=Io(m,t,!0);Ve(a,y),f&&o.push(...f)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!i&&!c)return Le(e)&&r.set(e,tn),tn;if(me(i))for(let d=0;d<i.length;d++){const m=gt(i[d]);Xs(m)&&(a[m]=Re)}else if(i)for(const d in i){const m=gt(d);if(Xs(m)){const y=i[d],f=a[m]=me(y)||ye(y)?{type:y}:Ve({},y);if(f){const g=Gs(Boolean,f.type),h=Gs(String,f.type);f[0]=g>-1,f[1]=h<0||g<h,(g>-1||we(f,"default"))&&o.push(m)}}}const u=[a,o];return Le(e)&&r.set(e,u),u}function Xs(e){return e[0]!=="$"&&!vn(e)}function qs(e){return e===null?"null":typeof e=="function"?e.name||"":typeof e=="object"&&e.constructor&&e.constructor.name||""}function Zs(e,t){return qs(e)===qs(t)}function Gs(e,t){return me(t)?t.findIndex(n=>Zs(n,e)):ye(t)&&Zs(t,e)?0:-1}const Ao=e=>e[0]==="_"||e==="$stable",ks=e=>me(e)?e.map(pt):[pt(e)],Hl=(e,t,n)=>{if(t._n)return t;const r=Zn((...s)=>ks(t(...s)),n);return r._c=!1,r},Do=(e,t,n)=>{const r=e._ctx;for(const s in e){if(Ao(s))continue;const i=e[s];if(ye(i))t[s]=Hl(s,i,r);else if(i!=null){const a=ks(i);t[s]=()=>a}}},Lo=(e,t)=>{const n=ks(t);e.slots.default=()=>n},Ul=(e,t)=>{const n=e.slots=So();if(e.vnode.shapeFlag&32){const r=t._;r?(Ve(n,t),Fi(n,"_",r,!0)):Do(t,n)}else t&&Lo(e,t)},Wl=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,a=Re;if(r.shapeFlag&32){const o=t._;o?n&&o===1?i=!1:(Ve(s,t),!n&&o===1&&delete s._):(i=!t.$stable,Do(t,s)),a=t}else t&&(Lo(e,t),a={default:1});if(i)for(const o in s)!Ao(o)&&a[o]==null&&delete s[o]};function qr(e,t,n,r,s=!1){if(me(e)){e.forEach((y,f)=>qr(y,t&&(me(t)?t[f]:t),n,r,s));return}if(yn(r)&&!s)return;const i=r.shapeFlag&4?br(r.component):r.el,a=s?null:i,{i:o,r:c}=e,u=t&&t.r,d=o.refs===Re?o.refs={}:o.refs,m=o.setupState;if(u!=null&&u!==c&&(He(u)?(d[u]=null,we(m,u)&&(m[u]=null)):$e(u)&&(u.value=null)),ye(c))Pt(c,o,12,[a,d]);else{const y=He(c),f=$e(c);if(y||f){const g=()=>{if(e.f){const h=y?we(m,c)?m[c]:d[c]:c.value;s?me(h)&&cs(h,i):me(h)?h.includes(i)||h.push(i):y?(d[c]=[i],we(m,c)&&(m[c]=d[c])):(c.value=[i],e.k&&(d[e.k]=c.value))}else y?(d[c]=a,we(m,c)&&(m[c]=a)):f&&(c.value=a,e.k&&(d[e.k]=a))};a?(g.id=-1,Ze(g,n)):g()}}}const Ze=kl;function Vl(e){return Kl(e)}function Kl(e,t){const n=ji();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:a,createText:o,createComment:c,setText:u,setElementText:d,parentNode:m,nextSibling:y,setScopeId:f=it,insertStaticContent:g}=e,h=(O,l,I,T=null,k=null,E=null,D=void 0,B=null,H=!!l.dynamicChildren)=>{if(O===l)return;O&&!pn(O,l)&&(T=X(O),M(O,k,E,!0),O=null),l.patchFlag===-2&&(H=!1,l.dynamicChildren=null);const{type:L,ref:Y,shapeFlag:ne}=l;switch(L){case vr:_(O,l,I,T);break;case $t:p(O,l,I,T);break;case Jn:O==null&&b(l,I,T,D);break;case _e:R(O,l,I,T,k,E,D,B,H);break;default:ne&1?x(O,l,I,T,k,E,D,B,H):ne&6?V(O,l,I,T,k,E,D,B,H):(ne&64||ne&128)&&L.process(O,l,I,T,k,E,D,B,H,te)}Y!=null&&k&&qr(Y,O&&O.ref,E,l||O,!l)},_=(O,l,I,T)=>{if(O==null)r(l.el=o(l.children),I,T);else{const k=l.el=O.el;l.children!==O.children&&u(k,l.children)}},p=(O,l,I,T)=>{O==null?r(l.el=c(l.children||""),I,T):l.el=O.el},b=(O,l,I,T)=>{[O.el,O.anchor]=g(O.children,l,I,T,O.el,O.anchor)},v=({el:O,anchor:l},I,T)=>{let k;for(;O&&O!==l;)k=y(O),r(O,I,T),O=k;r(l,I,T)},S=({el:O,anchor:l})=>{let I;for(;O&&O!==l;)I=y(O),s(O),O=I;s(l)},x=(O,l,I,T,k,E,D,B,H)=>{l.type==="svg"?D="svg":l.type==="math"&&(D="mathml"),O==null?C(l,I,T,k,E,D,B,H):A(O,l,k,E,D,B,H)},C=(O,l,I,T,k,E,D,B)=>{let H,L;const{props:Y,shapeFlag:ne,transition:Z,dirs:ce}=O;if(H=O.el=a(O.type,E,Y&&Y.is,Y),ne&8?d(H,O.children):ne&16&&P(O.children,H,null,T,k,Rr(O,E),D,B),ce&&jt(O,null,T,"created"),z(H,O,O.scopeId,D,T),Y){for(const he in Y)he!=="value"&&!vn(he)&&i(H,he,null,Y[he],E,O.children,T,k,ue);"value"in Y&&i(H,"value",null,Y.value,E),(L=Y.onVnodeBeforeMount)&&ht(L,T,O)}ce&&jt(O,null,T,"beforeMount");const de=Yl(k,Z);de&&Z.beforeEnter(H),r(H,l,I),((L=Y&&Y.onVnodeMounted)||de||ce)&&Ze(()=>{L&&ht(L,T,O),de&&Z.enter(H),ce&&jt(O,null,T,"mounted")},k)},z=(O,l,I,T,k)=>{if(I&&f(O,I),T)for(let E=0;E<T.length;E++)f(O,T[E]);if(k){let E=k.subTree;if(l===E){const D=k.vnode;z(O,D,D.scopeId,D.slotScopeIds,k.parent)}}},P=(O,l,I,T,k,E,D,B,H=0)=>{for(let L=H;L<O.length;L++){const Y=O[L]=B?At(O[L]):pt(O[L]);h(null,Y,l,I,T,k,E,D,B)}},A=(O,l,I,T,k,E,D)=>{const B=l.el=O.el;let{patchFlag:H,dynamicChildren:L,dirs:Y}=l;H|=O.patchFlag&16;const ne=O.props||Re,Z=l.props||Re;let ce;if(I&&Ht(I,!1),(ce=Z.onVnodeBeforeUpdate)&&ht(ce,I,l,O),Y&&jt(l,O,I,"beforeUpdate"),I&&Ht(I,!0),L?U(O.dynamicChildren,L,B,I,T,Rr(l,k),E):D||q(O,l,B,null,I,T,Rr(l,k),E,!1),H>0){if(H&16)J(B,l,ne,Z,I,T,k);else if(H&2&&ne.class!==Z.class&&i(B,"class",null,Z.class,k),H&4&&i(B,"style",ne.style,Z.style,k),H&8){const de=l.dynamicProps;for(let he=0;he<de.length;he++){const ge=de[he],Pe=ne[ge],Ne=Z[ge];(Ne!==Pe||ge==="value")&&i(B,ge,Pe,Ne,k,O.children,I,T,ue)}}H&1&&O.children!==l.children&&d(B,l.children)}else!D&&L==null&&J(B,l,ne,Z,I,T,k);((ce=Z.onVnodeUpdated)||Y)&&Ze(()=>{ce&&ht(ce,I,l,O),Y&&jt(l,O,I,"updated")},T)},U=(O,l,I,T,k,E,D)=>{for(let B=0;B<l.length;B++){const H=O[B],L=l[B],Y=H.el&&(H.type===_e||!pn(H,L)||H.shapeFlag&70)?m(H.el):I;h(H,L,Y,null,T,k,E,D,!0)}},J=(O,l,I,T,k,E,D)=>{if(I!==T){if(I!==Re)for(const B in I)!vn(B)&&!(B in T)&&i(O,B,I[B],null,D,l.children,k,E,ue);for(const B in T){if(vn(B))continue;const H=T[B],L=I[B];H!==L&&B!=="value"&&i(O,B,L,H,D,l.children,k,E,ue)}"value"in T&&i(O,"value",I.value,T.value,D)}},R=(O,l,I,T,k,E,D,B,H)=>{const L=l.el=O?O.el:o(""),Y=l.anchor=O?O.anchor:o("");let{patchFlag:ne,dynamicChildren:Z,slotScopeIds:ce}=l;ce&&(B=B?B.concat(ce):ce),O==null?(r(L,I,T),r(Y,I,T),P(l.children||[],I,Y,k,E,D,B,H)):ne>0&&ne&64&&Z&&O.dynamicChildren?(U(O.dynamicChildren,Z,I,k,E,D,B),(l.key!=null||k&&l===k.subTree)&&Ro(O,l,!0)):q(O,l,I,Y,k,E,D,B,H)},V=(O,l,I,T,k,E,D,B,H)=>{l.slotScopeIds=B,O==null?l.shapeFlag&512?k.ctx.activate(l,I,T,D,H):w(l,I,T,k,E,D,H):Q(O,l,H)},w=(O,l,I,T,k,E,D)=>{const B=O.component=oc(O,T,k);if(Mo(O)&&(B.ctx.renderer=te),ac(B),B.asyncDep){if(k&&k.registerDep(B,oe,D),!O.el){const H=B.subTree=Fe($t);p(null,H,l,I)}}else oe(B,O,l,I,k,E,D)},Q=(O,l,I)=>{const T=l.component=O.component;if(yl(O,l,I))if(T.asyncDep&&!T.asyncResolved){G(T,l,I);return}else T.next=l,fl(T.update),T.effect.dirty=!0,T.update();else l.el=O.el,T.vnode=l},oe=(O,l,I,T,k,E,D)=>{const B=()=>{if(O.isMounted){let{next:Y,bu:ne,u:Z,parent:ce,vnode:de}=O;{const rt=To(O);if(rt){Y&&(Y.el=de.el,G(O,Y,D)),rt.asyncDep.then(()=>{O.isUnmounted||B()});return}}let he=Y,ge;Ht(O,!1),Y?(Y.el=de.el,G(O,Y,D)):Y=de,ne&&Xn(ne),(ge=Y.props&&Y.props.onVnodeBeforeUpdate)&&ht(ge,ce,Y,de),Ht(O,!0);const Pe=Dr(O),Ne=O.subTree;O.subTree=Pe,h(Ne,Pe,m(Ne.el),X(Ne),O,k,E),Y.el=Pe.el,he===null&&wl(O,Pe.el),Z&&Ze(Z,k),(ge=Y.props&&Y.props.onVnodeUpdated)&&Ze(()=>ht(ge,ce,Y,de),k)}else{let Y;const{el:ne,props:Z}=l,{bm:ce,m:de,parent:he}=O,ge=yn(l);if(Ht(O,!1),ce&&Xn(ce),!ge&&(Y=Z&&Z.onVnodeBeforeMount)&&ht(Y,he,l),Ht(O,!0),ne&&fe){const Pe=()=>{O.subTree=Dr(O),fe(ne,O.subTree,O,k,null)};ge?l.type.__asyncLoader().then(()=>!O.isUnmounted&&Pe()):Pe()}else{const Pe=O.subTree=Dr(O);h(null,Pe,I,T,O,k,E),l.el=Pe.el}if(de&&Ze(de,k),!ge&&(Y=Z&&Z.onVnodeMounted)){const Pe=l;Ze(()=>ht(Y,he,Pe),k)}(l.shapeFlag&256||he&&yn(he.vnode)&&he.vnode.shapeFlag&256)&&O.a&&Ze(O.a,k),O.isMounted=!0,l=I=T=null}},H=O.effect=new ds(B,it,()=>bs(L),O.scope),L=O.update=()=>{H.dirty&&H.run()};L.id=O.uid,Ht(O,!0),L()},G=(O,l,I)=>{l.component=O;const T=O.vnode.props;O.vnode=l,O.next=null,jl(O,l.props,T,I),Wl(O,l.children,I),Bt(),js(O),Ft()},q=(O,l,I,T,k,E,D,B,H=!1)=>{const L=O&&O.children,Y=O?O.shapeFlag:0,ne=l.children,{patchFlag:Z,shapeFlag:ce}=l;if(Z>0){if(Z&128){se(L,ne,I,T,k,E,D,B,H);return}else if(Z&256){j(L,ne,I,T,k,E,D,B,H);return}}ce&8?(Y&16&&ue(L,k,E),ne!==L&&d(I,ne)):Y&16?ce&16?se(L,ne,I,T,k,E,D,B,H):ue(L,k,E,!0):(Y&8&&d(I,""),ce&16&&P(ne,I,T,k,E,D,B,H))},j=(O,l,I,T,k,E,D,B,H)=>{O=O||tn,l=l||tn;const L=O.length,Y=l.length,ne=Math.min(L,Y);let Z;for(Z=0;Z<ne;Z++){const ce=l[Z]=H?At(l[Z]):pt(l[Z]);h(O[Z],ce,I,null,k,E,D,B,H)}L>Y?ue(O,k,E,!0,!1,ne):P(l,I,T,k,E,D,B,H,ne)},se=(O,l,I,T,k,E,D,B,H)=>{let L=0;const Y=l.length;let ne=O.length-1,Z=Y-1;for(;L<=ne&&L<=Z;){const ce=O[L],de=l[L]=H?At(l[L]):pt(l[L]);if(pn(ce,de))h(ce,de,I,null,k,E,D,B,H);else break;L++}for(;L<=ne&&L<=Z;){const ce=O[ne],de=l[Z]=H?At(l[Z]):pt(l[Z]);if(pn(ce,de))h(ce,de,I,null,k,E,D,B,H);else break;ne--,Z--}if(L>ne){if(L<=Z){const ce=Z+1,de=ce<Y?l[ce].el:T;for(;L<=Z;)h(null,l[L]=H?At(l[L]):pt(l[L]),I,de,k,E,D,B,H),L++}}else if(L>Z)for(;L<=ne;)M(O[L],k,E,!0),L++;else{const ce=L,de=L,he=new Map;for(L=de;L<=Z;L++){const Me=l[L]=H?At(l[L]):pt(l[L]);Me.key!=null&&he.set(Me.key,L)}let ge,Pe=0;const Ne=Z-de+1;let rt=!1,ze=0;const dt=new Array(Ne);for(L=0;L<Ne;L++)dt[L]=0;for(L=ce;L<=ne;L++){const Me=O[L];if(Pe>=Ne){M(Me,k,E,!0);continue}let Qe;if(Me.key!=null)Qe=he.get(Me.key);else for(ge=de;ge<=Z;ge++)if(dt[ge-de]===0&&pn(Me,l[ge])){Qe=ge;break}Qe===void 0?M(Me,k,E,!0):(dt[Qe-de]=L+1,Qe>=ze?ze=Qe:rt=!0,h(Me,l[Qe],I,null,k,E,D,B,H),Pe++)}const Zt=rt?Xl(dt):tn;for(ge=Zt.length-1,L=Ne-1;L>=0;L--){const Me=de+L,Qe=l[Me],Mn=Me+1<Y?l[Me+1].el:T;dt[L]===0?h(null,Qe,I,Mn,k,E,D,B,H):rt&&(ge<0||L!==Zt[ge]?N(Qe,I,Mn,2):ge--)}}},N=(O,l,I,T,k=null)=>{const{el:E,type:D,transition:B,children:H,shapeFlag:L}=O;if(L&6){N(O.component.subTree,l,I,T);return}if(L&128){O.suspense.move(l,I,T);return}if(L&64){D.move(O,l,I,te);return}if(D===_e){r(E,l,I);for(let ne=0;ne<H.length;ne++)N(H[ne],l,I,T);r(O.anchor,l,I);return}if(D===Jn){v(O,l,I);return}if(T!==2&&L&1&&B)if(T===0)B.beforeEnter(E),r(E,l,I),Ze(()=>B.enter(E),k);else{const{leave:ne,delayLeave:Z,afterLeave:ce}=B,de=()=>r(E,l,I),he=()=>{ne(E,()=>{de(),ce&&ce()})};Z?Z(E,de,he):he()}else r(E,l,I)},M=(O,l,I,T=!1,k=!1)=>{const{type:E,props:D,ref:B,children:H,dynamicChildren:L,shapeFlag:Y,patchFlag:ne,dirs:Z,memoIndex:ce}=O;if(B!=null&&qr(B,null,I,O,!0),ce!=null&&(l.renderCache[ce]=void 0),Y&256){l.ctx.deactivate(O);return}const de=Y&1&&Z,he=!yn(O);let ge;if(he&&(ge=D&&D.onVnodeBeforeUnmount)&&ht(ge,l,O),Y&6)ee(O.component,I,T);else{if(Y&128){O.suspense.unmount(I,T);return}de&&jt(O,null,l,"beforeUnmount"),Y&64?O.type.remove(O,l,I,k,te,T):L&&(E!==_e||ne>0&&ne&64)?ue(L,l,I,!1,!0):(E===_e&&ne&384||!k&&Y&16)&&ue(H,l,I),T&&K(O)}(he&&(ge=D&&D.onVnodeUnmounted)||de)&&Ze(()=>{ge&&ht(ge,l,O),de&&jt(O,null,l,"unmounted")},I)},K=O=>{const{type:l,el:I,anchor:T,transition:k}=O;if(l===_e){W(I,T);return}if(l===Jn){S(O);return}const E=()=>{s(I),k&&!k.persisted&&k.afterLeave&&k.afterLeave()};if(O.shapeFlag&1&&k&&!k.persisted){const{leave:D,delayLeave:B}=k,H=()=>D(I,E);B?B(O.el,E,H):H()}else E()},W=(O,l)=>{let I;for(;O!==l;)I=y(O),s(O),O=I;s(l)},ee=(O,l,I)=>{const{bum:T,scope:k,update:E,subTree:D,um:B,m:H,a:L}=O;Js(H),Js(L),T&&Xn(T),k.stop(),E&&(E.active=!1,M(D,O,l,I)),B&&Ze(B,l),Ze(()=>{O.isUnmounted=!0},l),l&&l.pendingBranch&&!l.isUnmounted&&O.asyncDep&&!O.asyncResolved&&O.suspenseId===l.pendingId&&(l.deps--,l.deps===0&&l.resolve())},ue=(O,l,I,T=!1,k=!1,E=0)=>{for(let D=E;D<O.length;D++)M(O[D],l,I,T,k)},X=O=>O.shapeFlag&6?X(O.component.subTree):O.shapeFlag&128?O.suspense.next():y(O.anchor||O.el);let $=!1;const F=(O,l,I)=>{O==null?l._vnode&&M(l._vnode,null,null,!0):h(l._vnode||null,O,l,null,null,null,I),$||($=!0,js(),po(),$=!1),l._vnode=O},te={p:h,um:M,m:N,r:K,mt:w,mc:P,pc:q,pbc:U,n:X,o:e};let ie,fe;return{render:F,hydrate:ie,createApp:Nl(F,ie)}}function Rr({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Ht({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function Yl(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Ro(e,t,n=!1){const r=e.children,s=t.children;if(me(r)&&me(s))for(let i=0;i<r.length;i++){const a=r[i];let o=s[i];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=s[i]=At(s[i]),o.el=a.el),!n&&o.patchFlag!==-2&&Ro(a,o)),o.type===vr&&(o.el=a.el)}}function Xl(e){const t=e.slice(),n=[0];let r,s,i,a,o;const c=e.length;for(r=0;r<c;r++){const u=e[r];if(u!==0){if(s=n[n.length-1],e[s]<u){t[r]=s,n.push(r);continue}for(i=0,a=n.length-1;i<a;)o=i+a>>1,e[n[o]]<u?i=o+1:a=o;u<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,a=n[i-1];i-- >0;)n[i]=a,a=t[a];return n}function To(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:To(t)}function Js(e){if(e)for(let t=0;t<e.length;t++)e[t].active=!1}const ql=Symbol.for("v-scx"),Zl=()=>tt(ql),Un={};function ct(e,t,n){return Po(e,t,n)}function Po(e,t,{immediate:n,deep:r,flush:s,once:i,onTrack:a,onTrigger:o}=Re){if(t&&i){const C=t;t=(...z)=>{C(...z),x()}}const c=Ke,u=C=>r===!0?C:Lt(C,r===!1?1:void 0);let d,m=!1,y=!1;if($e(e)?(d=()=>e.value,m=rr(e)):Yt(e)?(d=()=>u(e),m=!0):me(e)?(y=!0,m=e.some(C=>Yt(C)||rr(C)),d=()=>e.map(C=>{if($e(C))return C.value;if(Yt(C))return u(C);if(ye(C))return Pt(C,c,2)})):ye(e)?t?d=()=>Pt(e,c,2):d=()=>(f&&f(),lt(e,c,3,[g])):d=it,t&&r){const C=d;d=()=>Lt(C())}let f,g=C=>{f=v.onStop=()=>{Pt(C,c,4),f=v.onStop=void 0}},h;if(wr)if(g=it,t?n&&lt(t,c,3,[d(),y?[]:void 0,g]):d(),s==="sync"){const C=Zl();h=C.__watcherHandles||(C.__watcherHandles=[])}else return it;let _=y?new Array(e.length).fill(Un):Un;const p=()=>{if(!(!v.active||!v.dirty))if(t){const C=v.run();(r||m||(y?C.some((z,P)=>Mt(z,_[P])):Mt(C,_)))&&(f&&f(),lt(t,c,3,[C,_===Un?void 0:y&&_[0]===Un?[]:_,g]),_=C)}else v.run()};p.allowRecurse=!!t;let b;s==="sync"?b=p:s==="post"?b=()=>Ze(p,c&&c.suspense):(p.pre=!0,c&&(p.id=c.uid),b=()=>bs(p));const v=new ds(d,it,b),S=Ki(),x=()=>{v.stop(),S&&cs(S.effects,v)};return t?n?p():_=v.run():s==="post"?Ze(v.run.bind(v),c&&c.suspense):v.run(),h&&h.push(x),x}function Gl(e,t,n){const r=this.proxy,s=He(e)?e.includes(".")?zo(r,e):()=>r[e]:e.bind(r,r);let i;ye(t)?i=t:(i=t.handler,n=t);const a=zn(this),o=Po(s,i.bind(r),n);return a(),o}function zo(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function Lt(e,t=1/0,n){if(t<=0||!Le(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,$e(e))Lt(e.value,t,n);else if(me(e))for(let r=0;r<e.length;r++)Lt(e[r],t,n);else if(un(e)||nn(e))e.forEach(r=>{Lt(r,t,n)});else if(Bi(e)){for(const r in e)Lt(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Lt(e[r],t,n)}return e}const Mo=e=>e.type.__isKeepAlive;function $o(e,t){Bo(e,"a",t)}function No(e,t){Bo(e,"da",t)}function Bo(e,t,n=Ke){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(_r(t,r,n),n){let s=n.parent;for(;s&&s.parent;)Mo(s.parent.vnode)&&Jl(r,t,n,s),s=s.parent}}function Jl(e,t,n,r){const s=_r(t,e,r,!0);ft(()=>{cs(r[t],s)},n)}function Fo(e,t){e.shapeFlag&6&&e.component?Fo(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}const Ql=e=>e.__isTeleport,_e=Symbol.for("v-fgt"),vr=Symbol.for("v-txt"),$t=Symbol.for("v-cmt"),Jn=Symbol.for("v-stc"),bn=[];let at=null;function ae(e=!1){bn.push(at=e?null:[])}function ec(){bn.pop(),at=bn[bn.length-1]||null}let An=1;function Qs(e){An+=e}function jo(e){return e.dynamicChildren=An>0?at||tn:null,ec(),An>0&&at&&at.push(e),e}function le(e,t,n,r,s,i){return jo(re(e,t,n,r,s,i,!0))}function yr(e,t,n,r,s){return jo(Fe(e,t,n,r,s,!0))}function or(e){return e?e.__v_isVNode===!0:!1}function pn(e,t){return e.type===t.type&&e.key===t.key}const Ho=({key:e})=>e??null,Qn=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?He(e)||$e(e)||ye(e)?{i:We,r:e,k:t,f:!!n}:e:null);function re(e,t=null,n=null,r=0,s=null,i=e===_e?0:1,a=!1,o=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Ho(t),ref:t&&Qn(t),scopeId:mr,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:We};return o?(Es(c,n),i&128&&e.normalize(c)):n&&(c.shapeFlag|=He(n)?8:16),An>0&&!a&&at&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&at.push(c),c}const Fe=tc;function tc(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===vo)&&(e=$t),or(e)){const o=on(e,t,!0);return n&&Es(o,n),An>0&&!i&&at&&(o.shapeFlag&6?at[at.indexOf(e)]=o:at.push(o)),o.patchFlag=-2,o}if(dc(e)&&(e=e.__vccOpts),t){t=nc(t);let{class:o,style:c}=t;o&&!He(o)&&(t.class=Ae(o)),Le(c)&&(oo(c)&&!me(c)&&(c=Ve({},c)),t.style=Ge(c))}const a=He(e)?1:xl(e)?128:Ql(e)?64:Le(e)?4:ye(e)?2:0;return re(e,t,n,r,s,a,i,!0)}function nc(e){return e?oo(e)||Oo(e)?Ve({},e):e:null}function on(e,t,n=!1,r=!1){const{props:s,ref:i,patchFlag:a,children:o,transition:c}=e,u=t?rc(s||{},t):s,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Ho(u),ref:t&&t.ref?n&&i?me(i)?i.concat(Qn(t)):[i,Qn(t)]:Qn(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==_e?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&on(e.ssContent),ssFallback:e.ssFallback&&on(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&r&&Fo(d,c.clone(d)),d}function Zr(e=" ",t=0){return Fe(vr,null,e,t)}function Uo(e,t){const n=Fe(Jn,null,e);return n.staticCount=t,n}function Ie(e="",t=!1){return t?(ae(),yr($t,null,e)):Fe($t,null,e)}function pt(e){return e==null||typeof e=="boolean"?Fe($t):me(e)?Fe(_e,null,e.slice()):typeof e=="object"?At(e):Fe(vr,null,String(e))}function At(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:on(e)}function Es(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(me(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),Es(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!Oo(t)?t._ctx=We:s===3&&We&&(We.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ye(t)?(t={default:t,_ctx:We},n=32):(t=String(t),r&64?(n=16,t=[Zr(t)]):n=8);e.children=t,e.shapeFlag|=n}function rc(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=Ae([t.class,r.class]));else if(s==="style")t.style=Ge([t.style,r.style]);else if(lr(s)){const i=t[s],a=r[s];a&&i!==a&&!(me(i)&&i.includes(a))&&(t[s]=i?[].concat(i,a):a)}else s!==""&&(t[s]=r[s])}return t}function ht(e,t,n,r=null){lt(e,t,7,[n,r])}const sc=ko();let ic=0;function oc(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||sc,i={uid:ic++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new Wi(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Io(r,s),emitsOptions:_o(r,s),emit:null,emitted:null,propsDefaults:Re,inheritAttrs:r.inheritAttrs,ctx:Re,data:Re,props:Re,attrs:Re,slots:Re,refs:Re,setupState:Re,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=pl.bind(null,i),e.ce&&e.ce(i),i}let Ke=null,ar,Gr;{const e=ji(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};ar=t("__VUE_INSTANCE_SETTERS__",n=>Ke=n),Gr=t("__VUE_SSR_SETTERS__",n=>wr=n)}const zn=e=>{const t=Ke;return ar(e),e.scope.on(),()=>{e.scope.off(),ar(t)}},ei=()=>{Ke&&Ke.scope.off(),ar(null)};function Wo(e){return e.vnode.shapeFlag&4}let wr=!1;function ac(e,t=!1){t&&Gr(t);const{props:n,children:r}=e.vnode,s=Wo(e);Fl(e,n,s,t),Ul(e,r);const i=s?lc(e,t):void 0;return t&&Gr(!1),i}function lc(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Ll);const{setup:r}=n;if(r){const s=e.setupContext=r.length>1?uc(e):null,i=zn(e);Bt();const a=Pt(r,e,0,[e.props,s]);if(Ft(),i(),$i(a)){if(a.then(ei,ei),t)return a.then(o=>{ti(e,o,t)}).catch(o=>{dr(o,e,0)});e.asyncDep=a}else ti(e,a,t)}else Vo(e,t)}function ti(e,t,n){ye(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Le(t)&&(e.setupState=uo(t)),Vo(e,n)}let ni;function Vo(e,t,n){const r=e.type;if(!e.render){if(!t&&ni&&!r.render){const s=r.template||xs(e).template;if(s){const{isCustomElement:i,compilerOptions:a}=e.appContext.config,{delimiters:o,compilerOptions:c}=r,u=Ve(Ve({isCustomElement:i,delimiters:o},a),c);r.render=ni(s,u)}}e.render=r.render||it}{const s=zn(e);Bt();try{Rl(e)}finally{Ft(),s()}}}const cc={get(e,t){return Je(e,"get",""),e[t]}};function uc(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,cc),slots:e.slots,emit:e.emit,expose:t}}function br(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(uo(vs(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in wn)return wn[n](e)},has(t,n){return n in t||n in wn}})):e.proxy}function fc(e,t=!0){return ye(e)?e.displayName||e.name:e.name||t&&e.__name}function dc(e){return ye(e)&&"__vccOpts"in e}const st=(e,t)=>nl(e,t,wr);function Ko(e,t,n){const r=arguments.length;return r===2?Le(t)&&!me(t)?or(t)?Fe(e,null,[t]):Fe(e,t):Fe(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&or(n)&&(n=[n]),Fe(e,t,n))}const hc="3.4.29";/**
* @vue/runtime-dom v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const pc="http://www.w3.org/2000/svg",mc="http://www.w3.org/1998/Math/MathML",yt=typeof document<"u"?document:null,ri=yt&&yt.createElement("template"),_c={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?yt.createElementNS(pc,e):t==="mathml"?yt.createElementNS(mc,e):n?yt.createElement(e,{is:n}):yt.createElement(e);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>yt.createTextNode(e),createComment:e=>yt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>yt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const a=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{ri.innerHTML=r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e;const o=ri.content;if(r==="svg"||r==="mathml"){const c=o.firstChild;for(;c.firstChild;)o.appendChild(c.firstChild);o.removeChild(c)}t.insertBefore(o,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},gc=Symbol("_vtc");function vc(e,t,n){const r=e[gc];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const si=Symbol("_vod"),yc=Symbol("_vsh"),wc=Symbol(""),bc=/(^|;)\s*display\s*:/;function xc(e,t,n){const r=e.style,s=He(n);let i=!1;if(n&&!s){if(t)if(He(t))for(const a of t.split(";")){const o=a.slice(0,a.indexOf(":")).trim();n[o]==null&&er(r,o,"")}else for(const a in t)n[a]==null&&er(r,a,"");for(const a in n)a==="display"&&(i=!0),er(r,a,n[a])}else if(s){if(t!==n){const a=r[wc];a&&(n+=";"+a),r.cssText=n,i=bc.test(n)}}else t&&e.removeAttribute("style");si in e&&(e[si]=i?r.display:"",e[yc]&&(r.display="none"))}const ii=/\s*!important$/;function er(e,t,n){if(me(n))n.forEach(r=>er(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=kc(e,t);ii.test(n)?e.setProperty(fn(r),n.replace(ii,""),"important"):e[r]=n}}const oi=["Webkit","Moz","ms"],Tr={};function kc(e,t){const n=Tr[t];if(n)return n;let r=gt(t);if(r!=="filter"&&r in e)return Tr[t]=r;r=ur(r);for(let s=0;s<oi.length;s++){const i=oi[s]+r;if(i in e)return Tr[t]=i}return t}const ai="http://www.w3.org/1999/xlink";function li(e,t,n,r,s,i=Ra(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(ai,t.slice(6,t.length)):e.setAttributeNS(ai,t,n):n==null||i&&!Hi(n)?e.removeAttribute(t):e.setAttribute(t,i?"":String(n))}function Ec(e,t,n,r,s,i,a){if(t==="innerHTML"||t==="textContent"){r&&a(r,s,i),e[t]=n??"";return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){const u=o==="OPTION"?e.getAttribute("value")||"":e.value,d=n==null?"":String(n);(u!==d||!("_value"in e))&&(e.value=d),n==null&&e.removeAttribute(t),e._value=n;return}let c=!1;if(n===""||n==null){const u=typeof e[t];u==="boolean"?n=Hi(n):n==null&&u==="string"?(n="",c=!0):u==="number"&&(n=0,c=!0)}try{e[t]=n}catch{}c&&e.removeAttribute(t)}function wt(e,t,n,r){e.addEventListener(t,n,r)}function Sc(e,t,n,r){e.removeEventListener(t,n,r)}const ci=Symbol("_vei");function Oc(e,t,n,r,s=null){const i=e[ci]||(e[ci]={}),a=i[t];if(r&&a)a.value=r;else{const[o,c]=Cc(t);if(r){const u=i[t]=Dc(r,s);wt(e,o,u,c)}else a&&(Sc(e,o,a,c),i[t]=void 0)}}const ui=/(?:Once|Passive|Capture)$/;function Cc(e){let t;if(ui.test(e)){t={};let r;for(;r=e.match(ui);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):fn(e.slice(2)),t]}let Pr=0;const Ic=Promise.resolve(),Ac=()=>Pr||(Ic.then(()=>Pr=0),Pr=Date.now());function Dc(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;lt(Lc(r,n.value),t,5,[r])};return n.value=e,n.attached=Ac(),n}function Lc(e,t){if(me(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const fi=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Rc=(e,t,n,r,s,i,a,o,c)=>{const u=s==="svg";t==="class"?vc(e,r,u):t==="style"?xc(e,n,r):lr(t)?ls(t)||Oc(e,t,n,r,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Tc(e,t,r,u))?(Ec(e,t,r,i,a,o,c),(t==="value"||t==="checked"||t==="selected")&&li(e,t,r,u,a,t!=="value")):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),li(e,t,r,u))};function Tc(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&fi(t)&&ye(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return fi(t)&&He(n)?!1:t in e}const Nt=e=>{const t=e.props["onUpdate:modelValue"]||!1;return me(t)?n=>Xn(t,n):t};function Pc(e){e.target.composing=!0}function di(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const ot=Symbol("_assign"),Qt={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[ot]=Nt(s);const i=r||s.props&&s.props.type==="number";wt(e,t?"change":"input",a=>{if(a.target.composing)return;let o=e.value;n&&(o=o.trim()),i&&(o=tr(o)),e[ot](o)}),n&&wt(e,"change",()=>{e.value=e.value.trim()}),t||(wt(e,"compositionstart",Pc),wt(e,"compositionend",di),wt(e,"change",di))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},a){if(e[ot]=Nt(a),e.composing)return;const o=(i||e.type==="number")&&!/^0\d/.test(e.value)?tr(e.value):e.value,c=t??"";o!==c&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||s&&e.value.trim()===c)||(e.value=c))}},zc={deep:!0,created(e,t,n){e[ot]=Nt(n),wt(e,"change",()=>{const r=e._modelValue,s=an(e),i=e.checked,a=e[ot];if(me(r)){const o=fs(r,s),c=o!==-1;if(i&&!c)a(r.concat(s));else if(!i&&c){const u=[...r];u.splice(o,1),a(u)}}else if(un(r)){const o=new Set(r);i?o.add(s):o.delete(s),a(o)}else a(Yo(e,i))})},mounted:hi,beforeUpdate(e,t,n){e[ot]=Nt(n),hi(e,t,n)}};function hi(e,{value:t,oldValue:n},r){e._modelValue=t,me(t)?e.checked=fs(t,r.props.value)>-1:un(t)?e.checked=t.has(r.props.value):t!==n&&(e.checked=Xt(t,Yo(e,!0)))}const Jr={created(e,{value:t},n){e.checked=Xt(t,n.props.value),e[ot]=Nt(n),wt(e,"change",()=>{e[ot](an(e))})},beforeUpdate(e,{value:t,oldValue:n},r){e[ot]=Nt(r),t!==n&&(e.checked=Xt(t,r.props.value))}},en={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const s=un(t);wt(e,"change",()=>{const i=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>n?tr(an(a)):an(a));e[ot](e.multiple?s?new Set(i):i:i[0]),e._assigning=!0,hr(()=>{e._assigning=!1})}),e[ot]=Nt(r)},mounted(e,{value:t,modifiers:{number:n}}){pi(e,t)},beforeUpdate(e,t,n){e[ot]=Nt(n)},updated(e,{value:t,modifiers:{number:n}}){e._assigning||pi(e,t)}};function pi(e,t,n){const r=e.multiple,s=me(t);if(!(r&&!s&&!un(t))){for(let i=0,a=e.options.length;i<a;i++){const o=e.options[i],c=an(o);if(r)if(s){const u=typeof c;u==="string"||u==="number"?o.selected=t.some(d=>String(d)===String(c)):o.selected=fs(t,c)>-1}else o.selected=t.has(c);else if(Xt(an(o),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!r&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function an(e){return"_value"in e?e._value:e.value}function Yo(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const Mc=["ctrl","shift","alt","meta"],$c={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Mc.some(n=>e[`${n}Key`]&&!t.includes(n))},Nc=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(s,...i)=>{for(let a=0;a<t.length;a++){const o=$c[t[a]];if(o&&o(s,t))return}return e(s,...i)})},Bc=Ve({patchProp:Rc},_c);let mi;function Fc(){return mi||(mi=Vl(Bc))}const jc=(...e)=>{const t=Fc().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=Uc(r);if(!s)return;const i=t._component;!ye(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const a=n(s,!1,Hc(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},t};function Hc(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Uc(e){return He(e)?document.querySelector(e):e}var Wc=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let Xo;const xr=e=>Xo=e,qo=Symbol();function Qr(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var xn;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(xn||(xn={}));function Vc(){const e=Vi(!0),t=e.run(()=>pe({}));let n=[],r=[];const s=vs({install(i){xr(s),s._a=i,i.provide(qo,s),i.config.globalProperties.$pinia=s,r.forEach(a=>n.push(a)),r=[]},use(i){return!this._a&&!Wc?r.push(i):n.push(i),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return s}const Zo=()=>{};function _i(e,t,n,r=Zo){e.push(t);const s=()=>{const i=e.indexOf(t);i>-1&&(e.splice(i,1),r())};return!n&&Ki()&&za(s),s}function Gt(e,...t){e.slice().forEach(n=>{n(...t)})}const Kc=e=>e();function es(e,t){e instanceof Map&&t instanceof Map&&t.forEach((n,r)=>e.set(r,n)),e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],s=e[n];Qr(s)&&Qr(r)&&e.hasOwnProperty(n)&&!$e(r)&&!Yt(r)?e[n]=es(s,r):e[n]=r}return e}const Yc=Symbol();function Xc(e){return!Qr(e)||!e.hasOwnProperty(Yc)}const{assign:Ct}=Object;function qc(e){return!!($e(e)&&e.effect)}function Zc(e,t,n,r){const{state:s,actions:i,getters:a}=t,o=n.state.value[e];let c;function u(){o||(n.state.value[e]=s?s():{});const d=ol(n.state.value[e]);return Ct(d,i,Object.keys(a||{}).reduce((m,y)=>(m[y]=vs(st(()=>{xr(n);const f=n._s.get(e);return a[y].call(f,f)})),m),{}))}return c=Go(e,u,t,n,r,!0),c}function Go(e,t,n={},r,s,i){let a;const o=Ct({actions:{}},n),c={deep:!0};let u,d,m=[],y=[],f;const g=r.state.value[e];!i&&!g&&(r.state.value[e]={}),pe({});let h;function _(P){let A;u=d=!1,typeof P=="function"?(P(r.state.value[e]),A={type:xn.patchFunction,storeId:e,events:f}):(es(r.state.value[e],P),A={type:xn.patchObject,payload:P,storeId:e,events:f});const U=h=Symbol();hr().then(()=>{h===U&&(u=!0)}),d=!0,Gt(m,A,r.state.value[e])}const p=i?function(){const{state:A}=n,U=A?A():{};this.$patch(J=>{Ct(J,U)})}:Zo;function b(){a.stop(),m=[],y=[],r._s.delete(e)}function v(P,A){return function(){xr(r);const U=Array.from(arguments),J=[],R=[];function V(oe){J.push(oe)}function w(oe){R.push(oe)}Gt(y,{args:U,name:P,store:x,after:V,onError:w});let Q;try{Q=A.apply(this&&this.$id===e?this:x,U)}catch(oe){throw Gt(R,oe),oe}return Q instanceof Promise?Q.then(oe=>(Gt(J,oe),oe)).catch(oe=>(Gt(R,oe),Promise.reject(oe))):(Gt(J,Q),Q)}}const S={_p:r,$id:e,$onAction:_i.bind(null,y),$patch:_,$reset:p,$subscribe(P,A={}){const U=_i(m,P,A.detached,()=>J()),J=a.run(()=>ct(()=>r.state.value[e],R=>{(A.flush==="sync"?d:u)&&P({storeId:e,type:xn.direct,events:f},R)},Ct({},c,A)));return U},$dispose:b},x=Pn(S);r._s.set(e,x);const z=(r._a&&r._a.runWithContext||Kc)(()=>r._e.run(()=>(a=Vi()).run(t)));for(const P in z){const A=z[P];if($e(A)&&!qc(A)||Yt(A))i||(g&&Xc(A)&&($e(A)?A.value=g[P]:es(A,g[P])),r.state.value[e][P]=A);else if(typeof A=="function"){const U=v(P,A);z[P]=U,o.actions[P]=A}}return Ct(x,z),Ct(xe(x),z),Object.defineProperty(x,"$state",{get:()=>r.state.value[e],set:P=>{_(A=>{Ct(A,P)})}}),r._p.forEach(P=>{Ct(x,a.run(()=>P({store:x,app:r._a,pinia:r,options:o})))}),g&&i&&n.hydrate&&n.hydrate(x.$state,g),u=!0,d=!0,x}function kr(e,t,n){let r,s;const i=typeof t=="function";typeof e=="string"?(r=e,s=i?n:t):(s=e,r=e.id);function a(o,c){const u=Bl();return o=o||(u?tt(qo,null):null),o&&xr(o),o=Xo,o._s.has(r)||(i?Go(r,t,s,o):Zc(r,s,o)),o._s.get(r)}return a.$id=r,a}const gi="tosho_user",qt=kr("userStore",()=>{let e=null;function t(){if(e)return e;const r=localStorage.getItem(gi);if(!r)return null;try{e=JSON.parse(r)}catch{e=null}return e}function n(r){return e=r,localStorage.setItem(gi,JSON.stringify(r)),r}return{get:t,set:n}}),De={apiPath:"/api/",fileType:["any","directory","file","audio","video","image","binary","text","pdf","office"],indexedDBName:"tosho_db",timeouts:{sort:50,selectEvt:50,clearEvt:100,scrollEvt:100,scrollSave:500,offsetDebounce:50},sort:{id_asc:"id ↑",id_desc:"id ↓",name_asc:"name ↑",name_desc:"name ↓",crt_asc:"crt time ↑",crt_desc:"crt time ↓",upd_asc:"upd time ↑",upd_desc:"upd time ↓",rate_asc:"rate ↑",rate_desc:"rate ↓"},rate:{0:"&#xe69f;&#xe69f;&#xe69f;&#xe69f;&#xe69f;",1:"&#xe6b6;&#xe69f;&#xe69f;&#xe69f;&#xe69f;",2:"&#xe69e;&#xe69f;&#xe69f;&#xe69f;&#xe69f;",3:"&#xe69e;&#xe6b6;&#xe69f;&#xe69f;&#xe69f;",4:"&#xe69e;&#xe69e;&#xe69f;&#xe69f;&#xe69f;",5:"&#xe69e;&#xe69e;&#xe6b6;&#xe69f;&#xe69f;",6:"&#xe69e;&#xe69e;&#xe69e;&#xe69f;&#xe69f;",7:"&#xe69e;&#xe69e;&#xe69e;&#xe6b6;&#xe69f;",8:"&#xe69e;&#xe69e;&#xe69e;&#xe69e;&#xe69f;",9:"&#xe69e;&#xe69e;&#xe69e;&#xe69e;&#xe6b6;",10:"&#xe69e;&#xe69e;&#xe69e;&#xe69e;&#xe69e;"},rateMobile:{0:"☆☆☆☆☆",1:"※☆☆☆☆",2:"★☆☆☆☆",3:"★※☆☆☆",4:"★★☆☆☆",5:"★★※☆☆",6:"★★★☆☆",7:"★★★※☆",8:"★★★★☆",9:"★★★★※",10:"★★★★★"},listType:["detail","text","img"],playMode:["loop","single","shuffle"],ignoreFileType:["directory","subtitle"],onlyOffice:{origin:"",enabled:!1,apiSrc:"",jwtSecret:""}};let Dn={set:null,close:null};const dn=kr("modalStore",()=>({set:Gc,close:Jc,handleEvent:Qc}));function Gc(e){return Dn.set?Dn.set(e):null}function Jc(e){return Dn.close?Dn.close(e):null}function Qc(e,t){return Dn[e]=t}function Se(e,t,n){return new Promise((r,s)=>{let i;if(t instanceof FormData)i=t;else{i=new FormData;for(const u in t)Object.prototype.hasOwnProperty.call(t,u)&&i.append(u,t[u])}const a=new XMLHttpRequest;a.withCredentials=!0,a.onreadystatechange=function(){if(a.readyState!==4)return;if(a.status>=400)return ns(`${a.status}:${a.statusText}`);const u=JSON.parse(a.responseText);switch(console.info(u),u.code){case 10:ts(),r(!1);break;case 100:ns(u.msg),r(!1);break;default:r(u.data);break}},n&&n.upload&&(a.upload.onprogress=n.upload),a.open("POST",De.apiPath+e);const c=qt().get();c&&c.token&&a.setRequestHeader("Auth-Token",c.token),a.send(i)})}function ts(){console.info("throwLogin"),dn().set({title:"login required",alpha:!0,key:"",single:!1,w:360,h:120,minW:360,minH:120,allow_resize:!1,allow_move:!0,allow_escape:!1,allow_fullscreen:!1,auto_focus:!0,form:[{type:"text",label:"username",key:"username"},{type:"text",label:"password",key:"password"}],callback:{login:async function(t){console.info(t);const n=await Se("user/login",{username:t.content.form[0].value,password:t.content.form[1].value});if(!n)return!0;qt().set(n),location.reload()}}})}function ns(e){dn().set({title:"error",alpha:!1,key:"",single:!1,w:360,h:100,minW:360,minH:100,allow_resize:!1,allow_move:!0,allow_escape:!0,allow_fullscreen:!1,auto_focus:!0,text:e,callback:{close:n=>{}}})}function Rt(e){if(!e)return!1;let t=e;for(;;){if(t.tagName==="BODY")return!1;if(t.tagName==="HTML")return!1;if(t.tagName==="TEXTAREA")return!0;if(t.tagName==="INPUT")switch(t.type){case"input":case"date":case"datetime":case"datetime-local":case"file":case"number":case"password":case"search":case"text":case"time":case"tel":case"url":return!0}else{if(t.contentEditable&&t.contentEditable.toLowerCase()==="true")return!0;if(!t.parentElement)return!1}t=t.parentElement}return!1}function gn(e){if(!e)return!1;let t=e;for(;;){if(t.classList.contains("modal_dom"))return!0;if(t.tagName=="BODY")return!1;if(t.tagName=="HTML")return!1;if(!t.parentElement)return!1;t=t.parentElement}return!1}const eu=e=>(ml("data-v-c4df4dc8"),e=e(),_l(),e),tu={class:"fr_header"},nu=eu(()=>re("div",{class:"logo"},"Hentai.",-1)),ru={class:"navi"},su=["innerHTML"],iu={class:"user"},ou={class:"pointer"},au=Ue({__name:"Header",setup(e){const t=[{name:"Nas",meta:{cur:!0},path:"/"},{name:"Hyper",meta:{cur:!1},path:""},{name:"Router",meta:{cur:!1},path:""},{name:"Spider",meta:{cur:!1},path:""},{name:"Git",meta:{cur:!1},path:""},{name:"Torrent",meta:{cur:!1},path:""}],n=qt();let r=n.get();function s(){n.set(null),location.reload()}return(i,a)=>(ae(),le("div",tu,[nu,re("div",ru,[(ae(),le(_e,null,Be(t,o=>{var c;return re("div",{class:Ae({active:(c=o.meta)==null?void 0:c.cur,pointer:1}),innerHTML:o.name},null,10,su)}),64))]),re("div",iu,[ke(r)&&ke(r).id?(ae(),le(_e,{key:0},[re("div",ou,Ce(ke(r).name),1),re("ul",{class:"action pointer"},[re("li",{onClick:s},"logout")])],64)):(ae(),le("div",{key:1,class:"pointer",onClick:a[0]||(a[0]=(...o)=>ke(ts)&&ke(ts)(...o))},"login"))])]))}}),Jo=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},lu=Jo(au,[["__scopeId","data-v-c4df4dc8"]]),cu="modulepreload",uu=function(e,t){return new URL(e,t).href},vi={},Ut=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){const a=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=uu(u,r),u in vi)return;vi[u]=!0;const d=u.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(!!r)for(let g=a.length-1;g>=0;g--){const h=a[g];if(h.href===u&&(!d||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${m}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":cu,d||(f.as="script"),f.crossOrigin="",f.href=u,c&&f.setAttribute("nonce",c),document.head.appendChild(f),d)return new Promise((g,h)=>{f.addEventListener("load",g),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return t().catch(i)})};/*!
  * vue-router v4.4.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Jt=typeof document<"u";function fu(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const Oe=Object.assign;function zr(e,t){const n={};for(const r in t){const s=t[r];n[r]=ut(s)?s.map(e):e(s)}return n}const kn=()=>{},ut=Array.isArray,Qo=/#/g,du=/&/g,hu=/\//g,pu=/=/g,mu=/\?/g,ea=/\+/g,_u=/%5B/g,gu=/%5D/g,ta=/%5E/g,vu=/%60/g,na=/%7B/g,yu=/%7C/g,ra=/%7D/g,wu=/%20/g;function Ss(e){return encodeURI(""+e).replace(yu,"|").replace(_u,"[").replace(gu,"]")}function bu(e){return Ss(e).replace(na,"{").replace(ra,"}").replace(ta,"^")}function rs(e){return Ss(e).replace(ea,"%2B").replace(wu,"+").replace(Qo,"%23").replace(du,"%26").replace(vu,"`").replace(na,"{").replace(ra,"}").replace(ta,"^")}function xu(e){return rs(e).replace(pu,"%3D")}function ku(e){return Ss(e).replace(Qo,"%23").replace(mu,"%3F")}function Eu(e){return e==null?"":ku(e).replace(hu,"%2F")}function Ln(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const Su=/\/$/,Ou=e=>e.replace(Su,"");function Mr(e,t,n="/"){let r,s={},i="",a="";const o=t.indexOf("#");let c=t.indexOf("?");return o<c&&o>=0&&(c=-1),c>-1&&(r=t.slice(0,c),i=t.slice(c+1,o>-1?o:t.length),s=e(i)),o>-1&&(r=r||t.slice(0,o),a=t.slice(o,t.length)),r=Du(r??t,n),{fullPath:r+(i&&"?")+i+a,path:r,query:s,hash:Ln(a)}}function Cu(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function yi(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Iu(e,t,n){const r=t.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&ln(t.matched[r],n.matched[s])&&sa(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function ln(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function sa(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!Au(e[n],t[n]))return!1;return!0}function Au(e,t){return ut(e)?wi(e,t):ut(t)?wi(t,e):e===t}function wi(e,t){return ut(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function Du(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,a,o;for(a=0;a<r.length;a++)if(o=r[a],o!==".")if(o==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(a).join("/")}const St={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Rn;(function(e){e.pop="pop",e.push="push"})(Rn||(Rn={}));var En;(function(e){e.back="back",e.forward="forward",e.unknown=""})(En||(En={}));function Lu(e){if(!e)if(Jt){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Ou(e)}const Ru=/^[^#]+#/;function Tu(e,t){return e.replace(Ru,"#")+t}function Pu(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const Er=()=>({left:window.scrollX,top:window.scrollY});function zu(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;t=Pu(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function bi(e,t){return(history.state?history.state.position-t:-1)+e}const ss=new Map;function Mu(e,t){ss.set(e,t)}function $u(e){const t=ss.get(e);return ss.delete(e),t}let Nu=()=>location.protocol+"//"+location.host;function ia(e,t){const{pathname:n,search:r,hash:s}=t,i=e.indexOf("#");if(i>-1){let o=s.includes(e.slice(i))?e.slice(i).length:1,c=s.slice(o);return c[0]!=="/"&&(c="/"+c),yi(c,"")}return yi(n,e)+r+s}function Bu(e,t,n,r){let s=[],i=[],a=null;const o=({state:y})=>{const f=ia(e,location),g=n.value,h=t.value;let _=0;if(y){if(n.value=f,t.value=y,a&&a===g){a=null;return}_=h?y.position-h.position:0}else r(f);s.forEach(p=>{p(n.value,g,{delta:_,type:Rn.pop,direction:_?_>0?En.forward:En.back:En.unknown})})};function c(){a=n.value}function u(y){s.push(y);const f=()=>{const g=s.indexOf(y);g>-1&&s.splice(g,1)};return i.push(f),f}function d(){const{history:y}=window;y.state&&y.replaceState(Oe({},y.state,{scroll:Er()}),"")}function m(){for(const y of i)y();i=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:c,listen:u,destroy:m}}function xi(e,t,n,r=!1,s=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:s?Er():null}}function Fu(e){const{history:t,location:n}=window,r={value:ia(e,n)},s={value:t.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(c,u,d){const m=e.indexOf("#"),y=m>-1?(n.host&&document.querySelector("base")?e:e.slice(m))+c:Nu()+e+c;try{t[d?"replaceState":"pushState"](u,"",y),s.value=u}catch(f){console.error(f),n[d?"replace":"assign"](y)}}function a(c,u){const d=Oe({},t.state,xi(s.value.back,c,s.value.forward,!0),u,{position:s.value.position});i(c,d,!0),r.value=c}function o(c,u){const d=Oe({},s.value,t.state,{forward:c,scroll:Er()});i(d.current,d,!0);const m=Oe({},xi(r.value,c,null),{position:d.position+1},u);i(c,m,!1),r.value=c}return{location:r,state:s,push:o,replace:a}}function ju(e){e=Lu(e);const t=Fu(e),n=Bu(e,t.state,t.location,t.replace);function r(i,a=!0){a||n.pauseListeners(),history.go(i)}const s=Oe({location:"",base:e,go:r,createHref:Tu.bind(null,e)},t,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function Hu(e){return typeof e=="string"||e&&typeof e=="object"}function oa(e){return typeof e=="string"||typeof e=="symbol"}const aa=Symbol("");var ki;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(ki||(ki={}));function cn(e,t){return Oe(new Error,{type:e,[aa]:!0},t)}function vt(e,t){return e instanceof Error&&aa in e&&(t==null||!!(e.type&t))}const Ei="[^/]+?",Uu={sensitive:!1,strict:!1,start:!0,end:!0},Wu=/[.+*?^${}()[\]/\\]/g;function Vu(e,t){const n=Oe({},Uu,t),r=[];let s=n.start?"^":"";const i=[];for(const u of e){const d=u.length?[]:[90];n.strict&&!u.length&&(s+="/");for(let m=0;m<u.length;m++){const y=u[m];let f=40+(n.sensitive?.25:0);if(y.type===0)m||(s+="/"),s+=y.value.replace(Wu,"\\$&"),f+=40;else if(y.type===1){const{value:g,repeatable:h,optional:_,regexp:p}=y;i.push({name:g,repeatable:h,optional:_});const b=p||Ei;if(b!==Ei){f+=10;try{new RegExp(`(${b})`)}catch(S){throw new Error(`Invalid custom RegExp for param "${g}" (${b}): `+S.message)}}let v=h?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;m||(v=_&&u.length<2?`(?:/${v})`:"/"+v),_&&(v+="?"),s+=v,f+=20,_&&(f+=-8),h&&(f+=-20),b===".*"&&(f+=-50)}d.push(f)}r.push(d)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const a=new RegExp(s,n.sensitive?"":"i");function o(u){const d=u.match(a),m={};if(!d)return null;for(let y=1;y<d.length;y++){const f=d[y]||"",g=i[y-1];m[g.name]=f&&g.repeatable?f.split("/"):f}return m}function c(u){let d="",m=!1;for(const y of e){(!m||!d.endsWith("/"))&&(d+="/"),m=!1;for(const f of y)if(f.type===0)d+=f.value;else if(f.type===1){const{value:g,repeatable:h,optional:_}=f,p=g in u?u[g]:"";if(ut(p)&&!h)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const b=ut(p)?p.join("/"):p;if(!b)if(_)y.length<2&&(d.endsWith("/")?d=d.slice(0,-1):m=!0);else throw new Error(`Missing required param "${g}"`);d+=b}}return d||"/"}return{re:a,score:r,keys:i,parse:o,stringify:c}}function Ku(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function la(e,t){let n=0;const r=e.score,s=t.score;for(;n<r.length&&n<s.length;){const i=Ku(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Si(r))return 1;if(Si(s))return-1}return s.length-r.length}function Si(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Yu={type:0,value:""},Xu=/[a-zA-Z0-9_]/;function qu(e){if(!e)return[[]];if(e==="/")return[[Yu]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(f){throw new Error(`ERR (${n})/"${u}": ${f}`)}let n=0,r=n;const s=[];let i;function a(){i&&s.push(i),i=[]}let o=0,c,u="",d="";function m(){u&&(n===0?i.push({type:0,value:u}):n===1||n===2||n===3?(i.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:d,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),u="")}function y(){u+=c}for(;o<e.length;){if(c=e[o++],c==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:c==="/"?(u&&m(),a()):c===":"?(m(),n=1):y();break;case 4:y(),n=r;break;case 1:c==="("?n=2:Xu.test(c)?y():(m(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&o--);break;case 2:c===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+c:n=3:d+=c;break;case 3:m(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&o--,d="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${u}"`),m(),a(),s}function Zu(e,t,n){const r=Vu(qu(e.path),n),s=Oe(r,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function Gu(e,t){const n=[],r=new Map;t=Ii({strict:!1,end:!0,sensitive:!1},t);function s(m){return r.get(m)}function i(m,y,f){const g=!f,h=Ju(m);h.aliasOf=f&&f.record;const _=Ii(t,m),p=[h];if("alias"in m){const S=typeof m.alias=="string"?[m.alias]:m.alias;for(const x of S)p.push(Oe({},h,{components:f?f.record.components:h.components,path:x,aliasOf:f?f.record:h}))}let b,v;for(const S of p){const{path:x}=S;if(y&&x[0]!=="/"){const C=y.record.path,z=C[C.length-1]==="/"?"":"/";S.path=y.record.path+(x&&z+x)}if(b=Zu(S,y,_),f?f.alias.push(b):(v=v||b,v!==b&&v.alias.push(b),g&&m.name&&!Ci(b)&&a(m.name)),ca(b)&&c(b),h.children){const C=h.children;for(let z=0;z<C.length;z++)i(C[z],b,f&&f.children[z])}f=f||b}return v?()=>{a(v)}:kn}function a(m){if(oa(m)){const y=r.get(m);y&&(r.delete(m),n.splice(n.indexOf(y),1),y.children.forEach(a),y.alias.forEach(a))}else{const y=n.indexOf(m);y>-1&&(n.splice(y,1),m.record.name&&r.delete(m.record.name),m.children.forEach(a),m.alias.forEach(a))}}function o(){return n}function c(m){const y=tf(m,n);n.splice(y,0,m),m.record.name&&!Ci(m)&&r.set(m.record.name,m)}function u(m,y){let f,g={},h,_;if("name"in m&&m.name){if(f=r.get(m.name),!f)throw cn(1,{location:m});_=f.record.name,g=Oe(Oi(y.params,f.keys.filter(v=>!v.optional).concat(f.parent?f.parent.keys.filter(v=>v.optional):[]).map(v=>v.name)),m.params&&Oi(m.params,f.keys.map(v=>v.name))),h=f.stringify(g)}else if(m.path!=null)h=m.path,f=n.find(v=>v.re.test(h)),f&&(g=f.parse(h),_=f.record.name);else{if(f=y.name?r.get(y.name):n.find(v=>v.re.test(y.path)),!f)throw cn(1,{location:m,currentLocation:y});_=f.record.name,g=Oe({},y.params,m.params),h=f.stringify(g)}const p=[];let b=f;for(;b;)p.unshift(b.record),b=b.parent;return{name:_,path:h,params:g,matched:p,meta:ef(p)}}e.forEach(m=>i(m));function d(){n.length=0,r.clear()}return{addRoute:i,resolve:u,removeRoute:a,clearRoutes:d,getRoutes:o,getRecordMatcher:s}}function Oi(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function Ju(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:Qu(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function Qu(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function Ci(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function ef(e){return e.reduce((t,n)=>Oe(t,n.meta),{})}function Ii(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function tf(e,t){let n=0,r=t.length;for(;n!==r;){const i=n+r>>1;la(e,t[i])<0?r=i:n=i+1}const s=nf(e);return s&&(r=t.lastIndexOf(s,r-1)),r}function nf(e){let t=e;for(;t=t.parent;)if(ca(t)&&la(e,t)===0)return t}function ca({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function rf(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(ea," "),a=i.indexOf("="),o=Ln(a<0?i:i.slice(0,a)),c=a<0?null:Ln(i.slice(a+1));if(o in t){let u=t[o];ut(u)||(u=t[o]=[u]),u.push(c)}else t[o]=c}return t}function Ai(e){let t="";for(let n in e){const r=e[n];if(n=xu(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(ut(r)?r.map(i=>i&&rs(i)):[r&&rs(r)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+n,i!=null&&(t+="="+i))})}return t}function sf(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=ut(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return t}const ua=Symbol(""),Di=Symbol(""),Sr=Symbol(""),Os=Symbol(""),is=Symbol("");function mn(){let e=[];function t(r){return e.push(r),()=>{const s=e.indexOf(r);s>-1&&e.splice(s,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function of(e,t,n){const r=()=>{e[t].delete(n)};ft(r),No(r),$o(()=>{e[t].add(n)}),e[t].add(n)}function dp(e){const t=tt(ua,{}).value;t&&of(t,"updateGuards",e)}function Dt(e,t,n,r,s,i=a=>a()){const a=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((o,c)=>{const u=y=>{y===!1?c(cn(4,{from:n,to:t})):y instanceof Error?c(y):Hu(y)?c(cn(2,{from:t,to:y})):(a&&r.enterCallbacks[s]===a&&typeof y=="function"&&a.push(y),o())},d=i(()=>e.call(r&&r.instances[s],t,n,u));let m=Promise.resolve(d);e.length<3&&(m=m.then(u)),m.catch(y=>c(y))})}function $r(e,t,n,r,s=i=>i()){const i=[];for(const a of e)for(const o in a.components){let c=a.components[o];if(!(t!=="beforeRouteEnter"&&!a.instances[o]))if(af(c)){const d=(c.__vccOpts||c)[t];d&&i.push(Dt(d,n,r,a,o,s))}else{let u=c();i.push(()=>u.then(d=>{if(!d)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${a.path}"`));const m=fu(d)?d.default:d;a.components[o]=m;const f=(m.__vccOpts||m)[t];return f&&Dt(f,n,r,a,o,s)()}))}}return i}function af(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Li(e){const t=tt(Sr),n=tt(Os),r=st(()=>{const c=ke(e.to);return t.resolve(c)}),s=st(()=>{const{matched:c}=r.value,{length:u}=c,d=c[u-1],m=n.matched;if(!d||!m.length)return-1;const y=m.findIndex(ln.bind(null,d));if(y>-1)return y;const f=Ri(c[u-2]);return u>1&&Ri(d)===f&&m[m.length-1].path!==f?m.findIndex(ln.bind(null,c[u-2])):y}),i=st(()=>s.value>-1&&ff(n.params,r.value.params)),a=st(()=>s.value>-1&&s.value===n.matched.length-1&&sa(n.params,r.value.params));function o(c={}){return uf(c)?t[ke(e.replace)?"replace":"push"](ke(e.to)).catch(kn):Promise.resolve()}return{route:r,href:st(()=>r.value.href),isActive:i,isExactActive:a,navigate:o}}const lf=Ue({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Li,setup(e,{slots:t}){const n=Pn(Li(e)),{options:r}=tt(Sr),s=st(()=>({[Ti(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Ti(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=t.default&&t.default(n);return e.custom?i:Ko("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),cf=lf;function uf(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function ff(e,t){for(const n in t){const r=t[n],s=e[n];if(typeof r=="string"){if(r!==s)return!1}else if(!ut(s)||s.length!==r.length||r.some((i,a)=>i!==s[a]))return!1}return!0}function Ri(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Ti=(e,t,n)=>e??t??n,df=Ue({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=tt(is),s=st(()=>e.route||r.value),i=tt(Di,0),a=st(()=>{let u=ke(i);const{matched:d}=s.value;let m;for(;(m=d[u])&&!m.components;)u++;return u}),o=st(()=>s.value.matched[a.value]);Gn(Di,st(()=>a.value+1)),Gn(ua,o),Gn(is,s);const c=pe();return ct(()=>[c.value,o.value,e.name],([u,d,m],[y,f,g])=>{d&&(d.instances[m]=u,f&&f!==d&&u&&u===y&&(d.leaveGuards.size||(d.leaveGuards=f.leaveGuards),d.updateGuards.size||(d.updateGuards=f.updateGuards))),u&&d&&(!f||!ln(d,f)||!y)&&(d.enterCallbacks[m]||[]).forEach(h=>h(u))},{flush:"post"}),()=>{const u=s.value,d=e.name,m=o.value,y=m&&m.components[d];if(!y)return Pi(n.default,{Component:y,route:u});const f=m.props[d],g=f?f===!0?u.params:typeof f=="function"?f(u):f:null,_=Ko(y,Oe({},g,t,{onVnodeUnmounted:p=>{p.component.isUnmounted&&(m.instances[d]=null)},ref:c}));return Pi(n.default,{Component:_,route:u})||_}}});function Pi(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const hf=df;function pf(e){const t=Gu(e.routes,e),n=e.parseQuery||rf,r=e.stringifyQuery||Ai,s=e.history,i=mn(),a=mn(),o=mn(),c=rl(St);let u=St;Jt&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=zr.bind(null,X=>""+X),m=zr.bind(null,Eu),y=zr.bind(null,Ln);function f(X,$){let F,te;return oa(X)?(F=t.getRecordMatcher(X),te=$):te=X,t.addRoute(te,F)}function g(X){const $=t.getRecordMatcher(X);$&&t.removeRoute($)}function h(){return t.getRoutes().map(X=>X.record)}function _(X){return!!t.getRecordMatcher(X)}function p(X,$){if($=Oe({},$||c.value),typeof X=="string"){const l=Mr(n,X,$.path),I=t.resolve({path:l.path},$),T=s.createHref(l.fullPath);return Oe(l,I,{params:y(I.params),hash:Ln(l.hash),redirectedFrom:void 0,href:T})}let F;if(X.path!=null)F=Oe({},X,{path:Mr(n,X.path,$.path).path});else{const l=Oe({},X.params);for(const I in l)l[I]==null&&delete l[I];F=Oe({},X,{params:m(l)}),$.params=m($.params)}const te=t.resolve(F,$),ie=X.hash||"";te.params=d(y(te.params));const fe=Cu(r,Oe({},X,{hash:bu(ie),path:te.path})),O=s.createHref(fe);return Oe({fullPath:fe,hash:ie,query:r===Ai?sf(X.query):X.query||{}},te,{redirectedFrom:void 0,href:O})}function b(X){return typeof X=="string"?Mr(n,X,c.value.path):Oe({},X)}function v(X,$){if(u!==X)return cn(8,{from:$,to:X})}function S(X){return z(X)}function x(X){return S(Oe(b(X),{replace:!0}))}function C(X){const $=X.matched[X.matched.length-1];if($&&$.redirect){const{redirect:F}=$;let te=typeof F=="function"?F(X):F;return typeof te=="string"&&(te=te.includes("?")||te.includes("#")?te=b(te):{path:te},te.params={}),Oe({query:X.query,hash:X.hash,params:te.path!=null?{}:X.params},te)}}function z(X,$){const F=u=p(X),te=c.value,ie=X.state,fe=X.force,O=X.replace===!0,l=C(F);if(l)return z(Oe(b(l),{state:typeof l=="object"?Oe({},ie,l.state):ie,force:fe,replace:O}),$||F);const I=F;I.redirectedFrom=$;let T;return!fe&&Iu(r,te,F)&&(T=cn(16,{to:I,from:te}),N(te,te,!0,!1)),(T?Promise.resolve(T):U(I,te)).catch(k=>vt(k)?vt(k,2)?k:se(k):q(k,I,te)).then(k=>{if(k){if(vt(k,2))return z(Oe({replace:O},b(k.to),{state:typeof k.to=="object"?Oe({},ie,k.to.state):ie,force:fe}),$||I)}else k=R(I,te,!0,O,ie);return J(I,te,k),k})}function P(X,$){const F=v(X,$);return F?Promise.reject(F):Promise.resolve()}function A(X){const $=W.values().next().value;return $&&typeof $.runWithContext=="function"?$.runWithContext(X):X()}function U(X,$){let F;const[te,ie,fe]=mf(X,$);F=$r(te.reverse(),"beforeRouteLeave",X,$);for(const l of te)l.leaveGuards.forEach(I=>{F.push(Dt(I,X,$))});const O=P.bind(null,X,$);return F.push(O),ue(F).then(()=>{F=[];for(const l of i.list())F.push(Dt(l,X,$));return F.push(O),ue(F)}).then(()=>{F=$r(ie,"beforeRouteUpdate",X,$);for(const l of ie)l.updateGuards.forEach(I=>{F.push(Dt(I,X,$))});return F.push(O),ue(F)}).then(()=>{F=[];for(const l of fe)if(l.beforeEnter)if(ut(l.beforeEnter))for(const I of l.beforeEnter)F.push(Dt(I,X,$));else F.push(Dt(l.beforeEnter,X,$));return F.push(O),ue(F)}).then(()=>(X.matched.forEach(l=>l.enterCallbacks={}),F=$r(fe,"beforeRouteEnter",X,$,A),F.push(O),ue(F))).then(()=>{F=[];for(const l of a.list())F.push(Dt(l,X,$));return F.push(O),ue(F)}).catch(l=>vt(l,8)?l:Promise.reject(l))}function J(X,$,F){o.list().forEach(te=>A(()=>te(X,$,F)))}function R(X,$,F,te,ie){const fe=v(X,$);if(fe)return fe;const O=$===St,l=Jt?history.state:{};F&&(te||O?s.replace(X.fullPath,Oe({scroll:O&&l&&l.scroll},ie)):s.push(X.fullPath,ie)),c.value=X,N(X,$,F,O),se()}let V;function w(){V||(V=s.listen((X,$,F)=>{if(!ee.listening)return;const te=p(X),ie=C(te);if(ie){z(Oe(ie,{replace:!0}),te).catch(kn);return}u=te;const fe=c.value;Jt&&Mu(bi(fe.fullPath,F.delta),Er()),U(te,fe).catch(O=>vt(O,12)?O:vt(O,2)?(z(O.to,te).then(l=>{vt(l,20)&&!F.delta&&F.type===Rn.pop&&s.go(-1,!1)}).catch(kn),Promise.reject()):(F.delta&&s.go(-F.delta,!1),q(O,te,fe))).then(O=>{O=O||R(te,fe,!1),O&&(F.delta&&!vt(O,8)?s.go(-F.delta,!1):F.type===Rn.pop&&vt(O,20)&&s.go(-1,!1)),J(te,fe,O)}).catch(kn)}))}let Q=mn(),oe=mn(),G;function q(X,$,F){se(X);const te=oe.list();return te.length?te.forEach(ie=>ie(X,$,F)):console.error(X),Promise.reject(X)}function j(){return G&&c.value!==St?Promise.resolve():new Promise((X,$)=>{Q.add([X,$])})}function se(X){return G||(G=!X,w(),Q.list().forEach(([$,F])=>X?F(X):$()),Q.reset()),X}function N(X,$,F,te){const{scrollBehavior:ie}=e;if(!Jt||!ie)return Promise.resolve();const fe=!F&&$u(bi(X.fullPath,0))||(te||!F)&&history.state&&history.state.scroll||null;return hr().then(()=>ie(X,$,fe)).then(O=>O&&zu(O)).catch(O=>q(O,X,$))}const M=X=>s.go(X);let K;const W=new Set,ee={currentRoute:c,listening:!0,addRoute:f,removeRoute:g,clearRoutes:t.clearRoutes,hasRoute:_,getRoutes:h,resolve:p,options:e,push:S,replace:x,go:M,back:()=>M(-1),forward:()=>M(1),beforeEach:i.add,beforeResolve:a.add,afterEach:o.add,onError:oe.add,isReady:j,install(X){const $=this;X.component("RouterLink",cf),X.component("RouterView",hf),X.config.globalProperties.$router=$,Object.defineProperty(X.config.globalProperties,"$route",{enumerable:!0,get:()=>ke(c)}),Jt&&!K&&c.value===St&&(K=!0,S(s.location).catch(ie=>{}));const F={};for(const ie in St)Object.defineProperty(F,ie,{get:()=>c.value[ie],enumerable:!0});X.provide(Sr,$),X.provide(Os,so(F)),X.provide(is,c);const te=X.unmount;W.add(X),X.unmount=function(){W.delete(X),W.size<1&&(u=St,V&&V(),V=null,c.value=St,K=!1,G=!1),te()}}};function ue(X){return X.reduce(($,F)=>$.then(()=>A(F)),Promise.resolve())}return ee}function mf(e,t){const n=[],r=[],s=[],i=Math.max(t.matched.length,e.matched.length);for(let a=0;a<i;a++){const o=t.matched[a];o&&(e.matched.find(u=>ln(u,o))?r.push(o):n.push(o));const c=e.matched[a];c&&(t.matched.find(u=>ln(u,c))||s.push(c))}return[n,r,s]}function _f(){return tt(Sr)}function gf(e){return tt(Os)}const fa=[{path:"/",name:"Directory",component:()=>Ut(()=>import("./FileView_N-BK3K-j2A.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url),meta:{icon:"sysIcon_folderopen",deny_user:!1,deny_guest:!1}},{path:"/favourite",name:"Favourite",component:()=>Ut(()=>import("./Favourite-BK6aeDa8.js"),__vite__mapDeps([8,3,2,4,5,6,9]),import.meta.url),meta:{icon:"sysIcon_star-o",deny_user:!1,deny_guest:!0}},{path:"/recycle",name:"Recycle",component:()=>Ut(()=>import("./FileView_R-DlCZrZHJ.js"),__vite__mapDeps([10,1,2,3,4,5,6,7]),import.meta.url),meta:{icon:"sysIcon_delete",deny_user:!1,deny_guest:!0}},{path:"/tag",name:"Tag",component:()=>Ut(()=>import("./TagView-DacCZUEC.js"),__vite__mapDeps([11,3,4,5,12]),import.meta.url),meta:{icon:"sysIcon_tagso",deny_user:!1,deny_guest:!0}},{path:"/group",name:"User",component:()=>Ut(()=>import("./UserView-D887aMJR.js"),__vite__mapDeps([13,3,4,5,14]),import.meta.url),meta:{icon:"sysIcon_team",deny_user:!0,deny_guest:!0}},{path:"/log",name:"ProcessLog",component:()=>Ut(()=>import("./LogView-CyvOF3eI.js"),__vite__mapDeps([15,16]),import.meta.url),meta:{icon:"sysIcon_filetext",deny_user:!0,deny_guest:!0}},{path:"/setting",name:"Setting",component:()=>Ut(()=>import("./SettingView-IZhb-v59.js"),__vite__mapDeps([17,3,18]),import.meta.url),meta:{icon:"sysIcon_setting",deny_user:!0,deny_guest:!0}}],vf=pf({history:ju("./"),routes:fa}),yf=["onClick"],wf={class:"content"},bf=Ue({__name:"NaviContent",props:{depth:{},records:{}},setup(e){const t=e;t.depth&&t.depth;const n=t.records,r=_f(),s=gf();async function i(c){console.info("go",c);const u=await r.push(c.path);console.info(u)}const o=qt().get();return(c,u)=>(ae(!0),le(_e,null,Be(ke(n),(d,m)=>{var y,f,g,h,_,p;return ae(),le(_e,{key:m},[(y=d.meta)!=null&&y.hide?(ae(),le(_e,{key:0},[],64)):(f=d.meta)!=null&&f.deny_guest&&((g=ke(o))==null?void 0:g.group.title)=="guest"?(ae(),le(_e,{key:1},[],64)):(h=d.meta)!=null&&h.deny_user&&!((_=ke(o))!=null&&_.group.admin)?(ae(),le(_e,{key:2},[],64)):(ae(),le("p",{key:3,onClick:b=>i(d),class:Ae({title:!0,active:d.path===ke(s).path})},[re("span",{class:Ae(["icon","sysIcon",(p=d.meta)==null?void 0:p.icon])},null,2),re("span",wf,Ce(d.name),1)],10,yf))],64)}),128))}}),xf=Jo(bf,[["__scopeId","data-v-8438e462"]]),kf=Ue({__name:"Navi",setup(e){return(t,n)=>(ae(),le("div",{class:Ae(["fr_navi",{folded:!1}])},[Fe(xf,{records:ke(fa),depth:1},null,8,["records"])]))}}),Wn=new Map,Te={send:function(e){const t=new XMLHttpRequest;t.withCredentials=!!e.withCredentials;{if(e.get instanceof Array){const s={};for(let i=0;i<e.get.length;i++)s[e.get[i].k]=e.get[i].v;e.get=s}let n=e.path.split(/#/ig);n=n[0].split(/\?/ig),(n.length===1||n[n.length-1].length===0)&&(e.path+="?");let r=0;for(const s in e.get)Object.prototype.hasOwnProperty.call(e.get,s)&&(r++!==0&&(e.path+="&"),e.path+=`${s}=${e.get[s]}`)}if(e.post instanceof Array){const n=new FormData;for(let r=0;r<e.post.length;r++)n.append(e.post[r].k,e.post[r].v);e.post=n}else if(typeof e.post!="string"){if(!(e.post instanceof FormData)){const n=new FormData;let r=!1;for(const s in e.post)Object.prototype.hasOwnProperty.call(e.post,s)&&(r=!0,n.append(s,e.post[s]));r&&(e.post=n)}}if(e.method||(e.method="get"),e.post&&(e.method="post"),e.method=e.method.toLocaleUpperCase(),e.header instanceof Array){const n={};for(let r=0;r<e.header.length;r++){const s=e.header[r].indexOf(":");s!==-1&&(n[e.header[r].slice(0,s).trim()]=e.header[r].slice(s+1).trim())}e.header=n}t.onreadystatechange=function(){if(t.readyState===4&&e.async)return t.status<400?e.success?e.success(t.responseText,t.status):!0:e.error?e.error(t.responseText,t.status):!1},e.onUploadProgress&&(t.upload.onprogress=e.onUploadProgress),e.onProgress&&(t.onprogress=e.onProgress),t.open(e.method,e.path,!!e.async);for(const n in e.header)Object.prototype.hasOwnProperty.call(e.header,n)&&t.setRequestHeader(n,e.header[n]);return e.method==="GET"?t.send():t.send(e.post),e.async?t:t.responseText},mergeArray:function(...e){const t={};for(let n=0;n<e.length;n++)for(const r in e[n])Object.prototype.hasOwnProperty.call(e[n],r)&&(t[r]=e[n][r]);return t},explode:function(e,t,n){return e.split(t,n)},implode:function(e,t){t||(t=",");let n="";for(let r=0;r<e.length;r++)n+=e[r],r!==e.length-1&&(n+=t);return n},removeVal:function(e,t){if(typeof t=="string")t=[t];else if(typeof t!="object"||!t.length)return[];const n=e.slice();for(let r=0;r<t.length;r++)for(let s=0;s<n.length;s++)n[s]===t[r]&&(n.splice(s,1),--s);return n},sort2DTable:function(e,t,n,r){return e.sort(function(s,i){return n?r?s[t]-i[t]:i[t]-s[t]:r?s[t].localeCompare(i[t]):i[t].localeCompare(s[t])})},toMap:function(e,t,n){const r=new Map;return e.forEach(s=>{n&&n(s),r.set(s[t],s)}),r},setCookie:function(e,t,n,r){console.warn("setCookie");const s=new Date;s.setDate(s.getDate()+n),document.cookie=e+"="+escape(t)+";"+(n==null?"":"expires="+s.toUTCString())+";"+(r==null?"":";path="+r)+";"},getCookie:function(e){if(console.info(document.cookie),document.cookie.length>0){let t=document.cookie.indexOf(e+"=");if(t!==-1){t=t+e.length+1;let n=document.cookie.indexOf(";",t);return n===-1&&(n=document.cookie.length),unescape(document.cookie.substring(t,n))}}return""},getRequests:function(){const e=location.search,t={};if(e.indexOf("?")!==-1){const r=e.substr(1).split("&");for(let s=0;s<r.length;s++){const i=r[s].split("=");i.length===2&&(t[i[0]]=unescape(i[1]))}}return t},mergeRequests:function(e){const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n+"="+e[n]);return Te.implode(t,"&")},trim:function(e,t){t||(t="\\s");const n="^["+t+"]*(.*?)["+t+"]*$";return e.replace(new RegExp(n,"igm"),"$1")},prefix:function(e,t,n){return(Array(t).join(n)+e).slice(-t)},encodeGBKurl:function(e){const t=document.createElement("img");function n(r){return r?(t.src="nothing.action?separator="+r,t.src.split("?separator=").pop()):""}return e.replace(/([^\x00-\xff]+)|([\x00-\xff]+)/g,function(r,s,i){return n(s)+encodeURIComponent(i||"")})},getUrlParam:function(e){const t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substring(1).match(t);return n!=null?unescape(n[2]):null},randStr:function(e,t){e=e||32;const n=t||"abcdefghijklmnopqrstuvwxyz0123456789",r=n.length;let s="";for(let i=0;i<e;i++)s+=n.charAt(Math.floor(Math.random()*r));return s},randInt:function(e,t){const n=Math.random(),r=e;return e>t&&(e=t,t=r),Math.floor(e+n*(t-e))},kmgt:function(e,t){typeof e!="number"&&(e=parseFloat(e)),t||(t=0);const n=e<0;n&&(t=-1*t);let r;return e<1e3?r=e.toFixed(t):e<1e3*1e3?r=(e/1e3).toFixed(t)+" K":e<1e3*1e3*1e3?r=(e/(1e3*1e3)).toFixed(t)+" M":r=(e/(1e3*1e3*1e3)).toFixed(t)+" G",(n?"-":"")+r},nodeOffsetX:function(e){let t=e.offsetLeft?e.offsetLeft:0;return e.offsetParent&&(t+=this.nodeOffsetX(e.offsetParent)),t},nodeOffsetY:function(e){let t=e.offsetTop?e.offsetTop:0;return e.offsetParent&&(t+=this.nodeOffsetY(e.offsetParent)),t},nodeOffsetXY:function(e){let t=e.offsetLeft?e.offsetLeft:0,n=e.offsetTop?e.offsetTop:0;if(e.offsetParent){let{x:r,y:s}=this.nodeOffsetXY(e.offsetParent);t+=r,n+=s}return{x:t,y:n}},isEmpty:function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!0;return!1},copyObject:function(e){return JSON.parse(JSON.stringify(e))},toggleClass:function(e,t){const n=e.className;if(!n||!n.trim().length){e.className=t;return}const r=n.split(" ");let s=!1;for(let i=0;i<r.length;i++)r[i]===t&&(r.splice(i,1),s=!0);s||r.push(t),e.className=Array.prototype.join.call(r," ")},template:function(e,t){let n=e;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.replace("{"+r+"}",t[r]);return n},debounce:function(e,t,n){const r=Wn.get(n);r&&(clearTimeout(r),Wn.delete(n));const s=setTimeout(()=>{Wn.delete(n),e()},t);Wn.set(n,s)}},Nr="tosho_config_",Or=kr("localConfigure",()=>{let e=pe({});const t={};function n(a){if(a=Nr+a,e[a])return e[a];const o=localStorage.getItem(a);if(!o)return null;try{e[a]=JSON.parse(o)}catch{e[a]=null}return e[a]}function r(a,o,c){return a=Nr+a,c||(c=new Date().valueOf().toString(32)+Math.random().toString(32)),t[a]||(t[a]=new Map),t[a].set(c,o),c}function s(a,o){t[a]&&(t[a].delete(o),t[a].size==0&&delete t[a])}function i(a,o){a=Nr+a,e[a]=o,t[a]&&t[a].forEach(c=>c(o)),localStorage.setItem(a,JSON.stringify(o))}return{get:n,set:i,listen:r,release:s}});let os=null;const da=kr("useContext",()=>({register:Ef,trigger:Sf}));function Ef(e){os=e}function Sf(e,t){os&&os(e,t)}var Vn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ha(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Kn(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pa={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,s,i){function a(u,d){if(!s[u]){if(!r[u]){var m=typeof Kn=="function"&&Kn;if(!d&&m)return m(u,!0);if(o)return o(u,!0);var y=new Error("Cannot find module '"+u+"'");throw y.code="MODULE_NOT_FOUND",y}var f=s[u]={exports:{}};r[u][0].call(f.exports,function(g){var h=r[u][1][g];return a(h||g)},f,f.exports,n,r,s,i)}return s[u].exports}for(var o=typeof Kn=="function"&&Kn,c=0;c<i.length;c++)a(i[c]);return a}({1:[function(n,r,s){var i=n("./utils"),a=n("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(c){for(var u,d,m,y,f,g,h,_=[],p=0,b=c.length,v=b,S=i.getTypeOf(c)!=="string";p<c.length;)v=b-p,m=S?(u=c[p++],d=p<b?c[p++]:0,p<b?c[p++]:0):(u=c.charCodeAt(p++),d=p<b?c.charCodeAt(p++):0,p<b?c.charCodeAt(p++):0),y=u>>2,f=(3&u)<<4|d>>4,g=1<v?(15&d)<<2|m>>6:64,h=2<v?63&m:64,_.push(o.charAt(y)+o.charAt(f)+o.charAt(g)+o.charAt(h));return _.join("")},s.decode=function(c){var u,d,m,y,f,g,h=0,_=0,p="data:";if(c.substr(0,p.length)===p)throw new Error("Invalid base64 input, it looks like a data url.");var b,v=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===o.charAt(64)&&v--,c.charAt(c.length-2)===o.charAt(64)&&v--,v%1!=0)throw new Error("Invalid base64 input, bad content length.");for(b=a.uint8array?new Uint8Array(0|v):new Array(0|v);h<c.length;)u=o.indexOf(c.charAt(h++))<<2|(y=o.indexOf(c.charAt(h++)))>>4,d=(15&y)<<4|(f=o.indexOf(c.charAt(h++)))>>2,m=(3&f)<<6|(g=o.indexOf(c.charAt(h++))),b[_++]=u,f!==64&&(b[_++]=d),g!==64&&(b[_++]=m);return b}},{"./support":30,"./utils":32}],2:[function(n,r,s){var i=n("./external"),a=n("./stream/DataWorker"),o=n("./stream/Crc32Probe"),c=n("./stream/DataLengthProbe");function u(d,m,y,f,g){this.compressedSize=d,this.uncompressedSize=m,this.crc32=y,this.compression=f,this.compressedContent=g}u.prototype={getContentWorker:function(){var d=new a(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),m=this;return d.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new a(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(d,m,y){return d.pipe(new o).pipe(new c("uncompressedSize")).pipe(m.compressWorker(y)).pipe(new c("compressedSize")).withStreamInfo("compression",m)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,s){var i=n("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},s.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,s){var i=n("./utils"),a=function(){for(var o,c=[],u=0;u<256;u++){o=u;for(var d=0;d<8;d++)o=1&o?3988292384^o>>>1:o>>>1;c[u]=o}return c}();r.exports=function(o,c){return o!==void 0&&o.length?i.getTypeOf(o)!=="string"?function(u,d,m,y){var f=a,g=y+m;u^=-1;for(var h=y;h<g;h++)u=u>>>8^f[255&(u^d[h])];return-1^u}(0|c,o,o.length,0):function(u,d,m,y){var f=a,g=y+m;u^=-1;for(var h=y;h<g;h++)u=u>>>8^f[255&(u^d.charCodeAt(h))];return-1^u}(0|c,o,o.length,0):0}},{"./utils":32}],5:[function(n,r,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(n,r,s){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=n("pako"),o=n("./utils"),c=n("./stream/GenericWorker"),u=i?"uint8array":"array";function d(m,y){c.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=y,this.meta={}}s.magic="\b\0",o.inherits(d,c),d.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(u,m.data),!1)},d.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(y){m.push({data:y,meta:m.meta})}},s.compressWorker=function(m){return new d("Deflate",m)},s.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,s){function i(f,g){var h,_="";for(h=0;h<g;h++)_+=String.fromCharCode(255&f),f>>>=8;return _}function a(f,g,h,_,p,b){var v,S,x=f.file,C=f.compression,z=b!==u.utf8encode,P=o.transformTo("string",b(x.name)),A=o.transformTo("string",u.utf8encode(x.name)),U=x.comment,J=o.transformTo("string",b(U)),R=o.transformTo("string",u.utf8encode(U)),V=A.length!==x.name.length,w=R.length!==U.length,Q="",oe="",G="",q=x.dir,j=x.date,se={crc32:0,compressedSize:0,uncompressedSize:0};g&&!h||(se.crc32=f.crc32,se.compressedSize=f.compressedSize,se.uncompressedSize=f.uncompressedSize);var N=0;g&&(N|=8),z||!V&&!w||(N|=2048);var M=0,K=0;q&&(M|=16),p==="UNIX"?(K=798,M|=function(ee,ue){var X=ee;return ee||(X=ue?16893:33204),(65535&X)<<16}(x.unixPermissions,q)):(K=20,M|=function(ee){return 63&(ee||0)}(x.dosPermissions)),v=j.getUTCHours(),v<<=6,v|=j.getUTCMinutes(),v<<=5,v|=j.getUTCSeconds()/2,S=j.getUTCFullYear()-1980,S<<=4,S|=j.getUTCMonth()+1,S<<=5,S|=j.getUTCDate(),V&&(oe=i(1,1)+i(d(P),4)+A,Q+="up"+i(oe.length,2)+oe),w&&(G=i(1,1)+i(d(J),4)+R,Q+="uc"+i(G.length,2)+G);var W="";return W+=`
\0`,W+=i(N,2),W+=C.magic,W+=i(v,2),W+=i(S,2),W+=i(se.crc32,4),W+=i(se.compressedSize,4),W+=i(se.uncompressedSize,4),W+=i(P.length,2),W+=i(Q.length,2),{fileRecord:m.LOCAL_FILE_HEADER+W+P+Q,dirRecord:m.CENTRAL_FILE_HEADER+i(K,2)+W+i(J.length,2)+"\0\0\0\0"+i(M,4)+i(_,4)+P+Q+J}}var o=n("../utils"),c=n("../stream/GenericWorker"),u=n("../utf8"),d=n("../crc32"),m=n("../signature");function y(f,g,h,_){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=g,this.zipPlatform=h,this.encodeFileName=_,this.streamFiles=f,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(y,c),y.prototype.push=function(f){var g=f.meta.percent||0,h=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(f):(this.bytesWritten+=f.data.length,c.prototype.push.call(this,{data:f.data,meta:{currentFile:this.currentFile,percent:h?(g+100*(h-_-1))/h:100}}))},y.prototype.openedSource=function(f){this.currentSourceOffset=this.bytesWritten,this.currentFile=f.file.name;var g=this.streamFiles&&!f.file.dir;if(g){var h=a(f,g,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:h.fileRecord,meta:{percent:0}})}else this.accumulate=!0},y.prototype.closedSource=function(f){this.accumulate=!1;var g=this.streamFiles&&!f.file.dir,h=a(f,g,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(h.dirRecord),g)this.push({data:function(_){return m.DATA_DESCRIPTOR+i(_.crc32,4)+i(_.compressedSize,4)+i(_.uncompressedSize,4)}(f),meta:{percent:100}});else for(this.push({data:h.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},y.prototype.flush=function(){for(var f=this.bytesWritten,g=0;g<this.dirRecords.length;g++)this.push({data:this.dirRecords[g],meta:{percent:100}});var h=this.bytesWritten-f,_=function(p,b,v,S,x){var C=o.transformTo("string",x(S));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(p,2)+i(p,2)+i(b,4)+i(v,4)+i(C.length,2)+C}(this.dirRecords.length,h,f,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},y.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},y.prototype.registerPrevious=function(f){this._sources.push(f);var g=this;return f.on("data",function(h){g.processChunk(h)}),f.on("end",function(){g.closedSource(g.previous.streamInfo),g._sources.length?g.prepareNextSource():g.end()}),f.on("error",function(h){g.error(h)}),this},y.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},y.prototype.error=function(f){var g=this._sources;if(!c.prototype.error.call(this,f))return!1;for(var h=0;h<g.length;h++)try{g[h].error(f)}catch{}return!0},y.prototype.lock=function(){c.prototype.lock.call(this);for(var f=this._sources,g=0;g<f.length;g++)f[g].lock()},r.exports=y},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,s){var i=n("../compressions"),a=n("./ZipFileWorker");s.generateWorker=function(o,c,u){var d=new a(c.streamFiles,u,c.platform,c.encodeFileName),m=0;try{o.forEach(function(y,f){m++;var g=function(b,v){var S=b||v,x=i[S];if(!x)throw new Error(S+" is not a valid compression method !");return x}(f.options.compression,c.compression),h=f.options.compressionOptions||c.compressionOptions||{},_=f.dir,p=f.date;f._compressWorker(g,h).withStreamInfo("file",{name:y,dir:_,date:p,comment:f.comment||"",unixPermissions:f.unixPermissions,dosPermissions:f.dosPermissions}).pipe(d)}),d.entriesCount=m}catch(y){d.error(y)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,s){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new i;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(a,o){return new i().loadAsync(a,o)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,s){var i=n("./utils"),a=n("./external"),o=n("./utf8"),c=n("./zipEntries"),u=n("./stream/Crc32Probe"),d=n("./nodejsUtils");function m(y){return new a.Promise(function(f,g){var h=y.decompressed.getContentWorker().pipe(new u);h.on("error",function(_){g(_)}).on("end",function(){h.streamInfo.crc32!==y.decompressed.crc32?g(new Error("Corrupted zip : CRC32 mismatch")):f()}).resume()})}r.exports=function(y,f){var g=this;return f=i.extend(f||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),d.isNode&&d.isStream(y)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",y,!0,f.optimizedBinaryString,f.base64).then(function(h){var _=new c(f);return _.load(h),_}).then(function(h){var _=[a.Promise.resolve(h)],p=h.files;if(f.checkCRC32)for(var b=0;b<p.length;b++)_.push(m(p[b]));return a.Promise.all(_)}).then(function(h){for(var _=h.shift(),p=_.files,b=0;b<p.length;b++){var v=p[b],S=v.fileNameStr,x=i.resolve(v.fileNameStr);g.file(x,v.decompressed,{binary:!0,optimizedBinaryString:!0,date:v.date,dir:v.dir,comment:v.fileCommentStr.length?v.fileCommentStr:null,unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions,createFolders:f.createFolders}),v.dir||(g.file(x).unsafeOriginalName=S)}return _.zipComment.length&&(g.comment=_.zipComment),g})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,s){var i=n("../utils"),a=n("../stream/GenericWorker");function o(c,u){a.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(u)}i.inherits(o,a),o.prototype._bindStream=function(c){var u=this;(this._stream=c).pause(),c.on("data",function(d){u.push({data:d,meta:{percent:0}})}).on("error",function(d){u.isPaused?this.generatedError=d:u.error(d)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},o.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,s){var i=n("readable-stream").Readable;function a(o,c,u){i.call(this,c),this._helper=o;var d=this;o.on("data",function(m,y){d.push(m)||d._helper.pause(),u&&u(y)}).on("error",function(m){d.emit("error",m)}).on("end",function(){d.push(null)})}n("../utils").inherits(a,i),a.prototype._read=function(){this._helper.resume()},r.exports=a},{"../utils":32,"readable-stream":16}],14:[function(n,r,s){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,a);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,a)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var a=new Buffer(i);return a.fill(0),a},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,s){function i(x,C,z){var P,A=o.getTypeOf(C),U=o.extend(z||{},d);U.date=U.date||new Date,U.compression!==null&&(U.compression=U.compression.toUpperCase()),typeof U.unixPermissions=="string"&&(U.unixPermissions=parseInt(U.unixPermissions,8)),U.unixPermissions&&16384&U.unixPermissions&&(U.dir=!0),U.dosPermissions&&16&U.dosPermissions&&(U.dir=!0),U.dir&&(x=p(x)),U.createFolders&&(P=_(x))&&b.call(this,P,!0);var J=A==="string"&&U.binary===!1&&U.base64===!1;z&&z.binary!==void 0||(U.binary=!J),(C instanceof m&&C.uncompressedSize===0||U.dir||!C||C.length===0)&&(U.base64=!1,U.binary=!0,C="",U.compression="STORE",A="string");var R=null;R=C instanceof m||C instanceof c?C:g.isNode&&g.isStream(C)?new h(x,C):o.prepareContent(x,C,U.binary,U.optimizedBinaryString,U.base64);var V=new y(x,R,U);this.files[x]=V}var a=n("./utf8"),o=n("./utils"),c=n("./stream/GenericWorker"),u=n("./stream/StreamHelper"),d=n("./defaults"),m=n("./compressedObject"),y=n("./zipObject"),f=n("./generate"),g=n("./nodejsUtils"),h=n("./nodejs/NodejsStreamInputAdapter"),_=function(x){x.slice(-1)==="/"&&(x=x.substring(0,x.length-1));var C=x.lastIndexOf("/");return 0<C?x.substring(0,C):""},p=function(x){return x.slice(-1)!=="/"&&(x+="/"),x},b=function(x,C){return C=C!==void 0?C:d.createFolders,x=p(x),this.files[x]||i.call(this,x,null,{dir:!0,createFolders:C}),this.files[x]};function v(x){return Object.prototype.toString.call(x)==="[object RegExp]"}var S={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(x){var C,z,P;for(C in this.files)P=this.files[C],(z=C.slice(this.root.length,C.length))&&C.slice(0,this.root.length)===this.root&&x(z,P)},filter:function(x){var C=[];return this.forEach(function(z,P){x(z,P)&&C.push(P)}),C},file:function(x,C,z){if(arguments.length!==1)return x=this.root+x,i.call(this,x,C,z),this;if(v(x)){var P=x;return this.filter(function(U,J){return!J.dir&&P.test(U)})}var A=this.files[this.root+x];return A&&!A.dir?A:null},folder:function(x){if(!x)return this;if(v(x))return this.filter(function(A,U){return U.dir&&x.test(A)});var C=this.root+x,z=b.call(this,C),P=this.clone();return P.root=z.name,P},remove:function(x){x=this.root+x;var C=this.files[x];if(C||(x.slice(-1)!=="/"&&(x+="/"),C=this.files[x]),C&&!C.dir)delete this.files[x];else for(var z=this.filter(function(A,U){return U.name.slice(0,x.length)===x}),P=0;P<z.length;P++)delete this.files[z[P].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(x){var C,z={};try{if((z=o.extend(x||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=z.type.toLowerCase(),z.compression=z.compression.toUpperCase(),z.type==="binarystring"&&(z.type="string"),!z.type)throw new Error("No output type specified.");o.checkSupport(z.type),z.platform!=="darwin"&&z.platform!=="freebsd"&&z.platform!=="linux"&&z.platform!=="sunos"||(z.platform="UNIX"),z.platform==="win32"&&(z.platform="DOS");var P=z.comment||this.comment||"";C=f.generateWorker(this,z,P)}catch(A){(C=new c("error")).error(A)}return new u(C,z.type||"string",z.mimeType)},generateAsync:function(x,C){return this.generateInternalStream(x).accumulate(C)},generateNodeStream:function(x,C){return(x=x||{}).type||(x.type="nodebuffer"),this.generateInternalStream(x).toNodejsStream(C)}};r.exports=S},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,s){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,s){var i=n("./DataReader");function a(o){i.call(this,o);for(var c=0;c<this.data.length;c++)o[c]=255&o[c]}n("../utils").inherits(a,i),a.prototype.byteAt=function(o){return this.data[this.zero+o]},a.prototype.lastIndexOfSignature=function(o){for(var c=o.charCodeAt(0),u=o.charCodeAt(1),d=o.charCodeAt(2),m=o.charCodeAt(3),y=this.length-4;0<=y;--y)if(this.data[y]===c&&this.data[y+1]===u&&this.data[y+2]===d&&this.data[y+3]===m)return y-this.zero;return-1},a.prototype.readAndCheckSignature=function(o){var c=o.charCodeAt(0),u=o.charCodeAt(1),d=o.charCodeAt(2),m=o.charCodeAt(3),y=this.readData(4);return c===y[0]&&u===y[1]&&d===y[2]&&m===y[3]},a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},r.exports=a},{"../utils":32,"./DataReader":18}],18:[function(n,r,s){var i=n("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var c,u=0;for(this.checkOffset(o),c=this.index+o-1;c>=this.index;c--)u=(u<<8)+this.byteAt(c);return this.index+=o,u},readString:function(o){return i.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},r.exports=a},{"../utils":32}],19:[function(n,r,s){var i=n("./Uint8ArrayReader");function a(o){i.call(this,o)}n("../utils").inherits(a,i),a.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},r.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,s){var i=n("./DataReader");function a(o){i.call(this,o)}n("../utils").inherits(a,i),a.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},a.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},a.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},a.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},r.exports=a},{"../utils":32,"./DataReader":18}],21:[function(n,r,s){var i=n("./ArrayReader");function a(o){i.call(this,o)}n("../utils").inherits(a,i),a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},r.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,s){var i=n("../utils"),a=n("../support"),o=n("./ArrayReader"),c=n("./StringReader"),u=n("./NodeBufferReader"),d=n("./Uint8ArrayReader");r.exports=function(m){var y=i.getTypeOf(m);return i.checkSupport(y),y!=="string"||a.uint8array?y==="nodebuffer"?new u(m):a.uint8array?new d(i.transformTo("uint8array",m)):new o(i.transformTo("array",m)):new c(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,s){var i=n("./GenericWorker"),a=n("../utils");function o(c){i.call(this,"ConvertWorker to "+c),this.destType=c}a.inherits(o,i),o.prototype.processChunk=function(c){this.push({data:a.transformTo(this.destType,c.data),meta:c.meta})},r.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,s){var i=n("./GenericWorker"),a=n("../crc32");function o(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(o,i),o.prototype.processChunk=function(c){this.streamInfo.crc32=a(c.data,this.streamInfo.crc32||0),this.push(c)},r.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,s){var i=n("../utils"),a=n("./GenericWorker");function o(c){a.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}i.inherits(o,a),o.prototype.processChunk=function(c){if(c){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+c.data.length}a.prototype.processChunk.call(this,c)},r.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,s){var i=n("../utils"),a=n("./GenericWorker");function o(c){a.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(d){u.dataIsReady=!0,u.data=d,u.max=d&&d.length||0,u.type=i.getTypeOf(d),u.isPaused||u._tickAndRepeat()},function(d){u.error(d)})}i.inherits(o,a),o.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,u);break;case"uint8array":c=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":c=this.data.slice(this.index,u)}return this.index=u,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,s){function i(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var c=0;c<this._listeners[a].length;c++)this._listeners[a][c].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(c){o.processChunk(c)}),a.on("end",function(){o.end()}),a.on("error",function(c){o.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},r.exports=i},{}],29:[function(n,r,s){var i=n("../utils"),a=n("./ConvertWorker"),o=n("./GenericWorker"),c=n("../base64"),u=n("../support"),d=n("../external"),m=null;if(u.nodestream)try{m=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function y(g,h){return new d.Promise(function(_,p){var b=[],v=g._internalType,S=g._outputType,x=g._mimeType;g.on("data",function(C,z){b.push(C),h&&h(z)}).on("error",function(C){b=[],p(C)}).on("end",function(){try{var C=function(z,P,A){switch(z){case"blob":return i.newBlob(i.transformTo("arraybuffer",P),A);case"base64":return c.encode(P);default:return i.transformTo(z,P)}}(S,function(z,P){var A,U=0,J=null,R=0;for(A=0;A<P.length;A++)R+=P[A].length;switch(z){case"string":return P.join("");case"array":return Array.prototype.concat.apply([],P);case"uint8array":for(J=new Uint8Array(R),A=0;A<P.length;A++)J.set(P[A],U),U+=P[A].length;return J;case"nodebuffer":return Buffer.concat(P);default:throw new Error("concat : unsupported type '"+z+"'")}}(v,b),x);_(C)}catch(z){p(z)}b=[]}).resume()})}function f(g,h,_){var p=h;switch(h){case"blob":case"arraybuffer":p="uint8array";break;case"base64":p="string"}try{this._internalType=p,this._outputType=h,this._mimeType=_,i.checkSupport(p),this._worker=g.pipe(new a(p)),g.lock()}catch(b){this._worker=new o("error"),this._worker.error(b)}}f.prototype={accumulate:function(g){return y(this,g)},on:function(g,h){var _=this;return g==="data"?this._worker.on(g,function(p){h.call(_,p.data,p.meta)}):this._worker.on(g,function(){i.delay(h,arguments,_)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(g){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},g)}},r.exports=f},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var i=new ArrayBuffer(0);try{s.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(i),s.blob=a.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!n("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,s){for(var i=n("./utils"),a=n("./support"),o=n("./nodejsUtils"),c=n("./stream/GenericWorker"),u=new Array(256),d=0;d<256;d++)u[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;u[254]=u[254]=1;function m(){c.call(this,"utf-8 decode"),this.leftOver=null}function y(){c.call(this,"utf-8 encode")}s.utf8encode=function(f){return a.nodebuffer?o.newBufferFrom(f,"utf-8"):function(g){var h,_,p,b,v,S=g.length,x=0;for(b=0;b<S;b++)(64512&(_=g.charCodeAt(b)))==55296&&b+1<S&&(64512&(p=g.charCodeAt(b+1)))==56320&&(_=65536+(_-55296<<10)+(p-56320),b++),x+=_<128?1:_<2048?2:_<65536?3:4;for(h=a.uint8array?new Uint8Array(x):new Array(x),b=v=0;v<x;b++)(64512&(_=g.charCodeAt(b)))==55296&&b+1<S&&(64512&(p=g.charCodeAt(b+1)))==56320&&(_=65536+(_-55296<<10)+(p-56320),b++),_<128?h[v++]=_:(_<2048?h[v++]=192|_>>>6:(_<65536?h[v++]=224|_>>>12:(h[v++]=240|_>>>18,h[v++]=128|_>>>12&63),h[v++]=128|_>>>6&63),h[v++]=128|63&_);return h}(f)},s.utf8decode=function(f){return a.nodebuffer?i.transformTo("nodebuffer",f).toString("utf-8"):function(g){var h,_,p,b,v=g.length,S=new Array(2*v);for(h=_=0;h<v;)if((p=g[h++])<128)S[_++]=p;else if(4<(b=u[p]))S[_++]=65533,h+=b-1;else{for(p&=b===2?31:b===3?15:7;1<b&&h<v;)p=p<<6|63&g[h++],b--;1<b?S[_++]=65533:p<65536?S[_++]=p:(p-=65536,S[_++]=55296|p>>10&1023,S[_++]=56320|1023&p)}return S.length!==_&&(S.subarray?S=S.subarray(0,_):S.length=_),i.applyFromCharCode(S)}(f=i.transformTo(a.uint8array?"uint8array":"array",f))},i.inherits(m,c),m.prototype.processChunk=function(f){var g=i.transformTo(a.uint8array?"uint8array":"array",f.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var h=g;(g=new Uint8Array(h.length+this.leftOver.length)).set(this.leftOver,0),g.set(h,this.leftOver.length)}else g=this.leftOver.concat(g);this.leftOver=null}var _=function(b,v){var S;for((v=v||b.length)>b.length&&(v=b.length),S=v-1;0<=S&&(192&b[S])==128;)S--;return S<0||S===0?v:S+u[b[S]]>v?S:v}(g),p=g;_!==g.length&&(a.uint8array?(p=g.subarray(0,_),this.leftOver=g.subarray(_,g.length)):(p=g.slice(0,_),this.leftOver=g.slice(_,g.length))),this.push({data:s.utf8decode(p),meta:f.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=m,i.inherits(y,c),y.prototype.processChunk=function(f){this.push({data:s.utf8encode(f.data),meta:f.meta})},s.Utf8EncodeWorker=y},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,s){var i=n("./support"),a=n("./base64"),o=n("./nodejsUtils"),c=n("./external");function u(h){return h}function d(h,_){for(var p=0;p<h.length;++p)_[p]=255&h.charCodeAt(p);return _}n("setimmediate"),s.newBlob=function(h,_){s.checkSupport("blob");try{return new Blob([h],{type:_})}catch{try{var p=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return p.append(h),p.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(h,_,p){var b=[],v=0,S=h.length;if(S<=p)return String.fromCharCode.apply(null,h);for(;v<S;)_==="array"||_==="nodebuffer"?b.push(String.fromCharCode.apply(null,h.slice(v,Math.min(v+p,S)))):b.push(String.fromCharCode.apply(null,h.subarray(v,Math.min(v+p,S)))),v+=p;return b.join("")},stringifyByChar:function(h){for(var _="",p=0;p<h.length;p++)_+=String.fromCharCode(h[p]);return _},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function y(h){var _=65536,p=s.getTypeOf(h),b=!0;if(p==="uint8array"?b=m.applyCanBeUsed.uint8array:p==="nodebuffer"&&(b=m.applyCanBeUsed.nodebuffer),b)for(;1<_;)try{return m.stringifyByChunk(h,p,_)}catch{_=Math.floor(_/2)}return m.stringifyByChar(h)}function f(h,_){for(var p=0;p<h.length;p++)_[p]=h[p];return _}s.applyFromCharCode=y;var g={};g.string={string:u,array:function(h){return d(h,new Array(h.length))},arraybuffer:function(h){return g.string.uint8array(h).buffer},uint8array:function(h){return d(h,new Uint8Array(h.length))},nodebuffer:function(h){return d(h,o.allocBuffer(h.length))}},g.array={string:y,array:u,arraybuffer:function(h){return new Uint8Array(h).buffer},uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return o.newBufferFrom(h)}},g.arraybuffer={string:function(h){return y(new Uint8Array(h))},array:function(h){return f(new Uint8Array(h),new Array(h.byteLength))},arraybuffer:u,uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return o.newBufferFrom(new Uint8Array(h))}},g.uint8array={string:y,array:function(h){return f(h,new Array(h.length))},arraybuffer:function(h){return h.buffer},uint8array:u,nodebuffer:function(h){return o.newBufferFrom(h)}},g.nodebuffer={string:y,array:function(h){return f(h,new Array(h.length))},arraybuffer:function(h){return g.nodebuffer.uint8array(h).buffer},uint8array:function(h){return f(h,new Uint8Array(h.length))},nodebuffer:u},s.transformTo=function(h,_){if(_=_||"",!h)return _;s.checkSupport(h);var p=s.getTypeOf(_);return g[p][h](_)},s.resolve=function(h){for(var _=h.split("/"),p=[],b=0;b<_.length;b++){var v=_[b];v==="."||v===""&&b!==0&&b!==_.length-1||(v===".."?p.pop():p.push(v))}return p.join("/")},s.getTypeOf=function(h){return typeof h=="string"?"string":Object.prototype.toString.call(h)==="[object Array]"?"array":i.nodebuffer&&o.isBuffer(h)?"nodebuffer":i.uint8array&&h instanceof Uint8Array?"uint8array":i.arraybuffer&&h instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(h){if(!i[h.toLowerCase()])throw new Error(h+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(h){var _,p,b="";for(p=0;p<(h||"").length;p++)b+="\\x"+((_=h.charCodeAt(p))<16?"0":"")+_.toString(16).toUpperCase();return b},s.delay=function(h,_,p){setImmediate(function(){h.apply(p||null,_||[])})},s.inherits=function(h,_){function p(){}p.prototype=_.prototype,h.prototype=new p},s.extend=function(){var h,_,p={};for(h=0;h<arguments.length;h++)for(_ in arguments[h])Object.prototype.hasOwnProperty.call(arguments[h],_)&&p[_]===void 0&&(p[_]=arguments[h][_]);return p},s.prepareContent=function(h,_,p,b,v){return c.Promise.resolve(_).then(function(S){return i.blob&&(S instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(S))!==-1)&&typeof FileReader<"u"?new c.Promise(function(x,C){var z=new FileReader;z.onload=function(P){x(P.target.result)},z.onerror=function(P){C(P.target.error)},z.readAsArrayBuffer(S)}):S}).then(function(S){var x=s.getTypeOf(S);return x?(x==="arraybuffer"?S=s.transformTo("uint8array",S):x==="string"&&(v?S=a.decode(S):p&&b!==!0&&(S=function(C){return d(C,i.uint8array?new Uint8Array(C.length):new Array(C.length))}(S))),S):c.Promise.reject(new Error("Can't read the data of '"+h+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,s){var i=n("./reader/readerFor"),a=n("./utils"),o=n("./signature"),c=n("./zipEntry"),u=n("./support");function d(m){this.files=[],this.loadOptions=m}d.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var y=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(y)+", expected "+a.pretty(m)+")")}},isSignature:function(m,y){var f=this.reader.index;this.reader.setIndex(m);var g=this.reader.readString(4)===y;return this.reader.setIndex(f),g},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),y=u.uint8array?"uint8array":"array",f=a.transformTo(y,m);this.zipComment=this.loadOptions.decodeFileName(f)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,y,f,g=this.zip64EndOfCentralSize-44;0<g;)m=this.reader.readInt(2),y=this.reader.readInt(4),f=this.reader.readData(y),this.zip64ExtensibleData[m]={id:m,length:y,value:f}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,y;for(m=0;m<this.files.length;m++)y=this.files[m],this.reader.setIndex(y.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),y.readLocalPart(this.reader),y.handleUTF8(),y.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(m=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var y=m;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var f=this.centralDirOffset+this.centralDirSize;this.zip64&&(f+=20,f+=12+this.zip64EndOfCentralSize);var g=y-f;if(0<g)this.isSignature(y,o.CENTRAL_FILE_HEADER)||(this.reader.zero=g);else if(g<0)throw new Error("Corrupted zip: missing "+Math.abs(g)+" bytes.")},prepareReader:function(m){this.reader=i(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,s){var i=n("./reader/readerFor"),a=n("./utils"),o=n("./compressedObject"),c=n("./crc32"),u=n("./utf8"),d=n("./compressions"),m=n("./support");function y(f,g){this.options=f,this.loadOptions=g}y.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(f){var g,h;if(f.skip(22),this.fileNameLength=f.readInt(2),h=f.readInt(2),this.fileName=f.readData(this.fileNameLength),f.skip(h),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((g=function(_){for(var p in d)if(Object.prototype.hasOwnProperty.call(d,p)&&d[p].magic===_)return d[p];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,g,f.readData(this.compressedSize))},readCentralPart:function(f){this.versionMadeBy=f.readInt(2),f.skip(2),this.bitFlag=f.readInt(2),this.compressionMethod=f.readString(2),this.date=f.readDate(),this.crc32=f.readInt(4),this.compressedSize=f.readInt(4),this.uncompressedSize=f.readInt(4);var g=f.readInt(2);if(this.extraFieldsLength=f.readInt(2),this.fileCommentLength=f.readInt(2),this.diskNumberStart=f.readInt(2),this.internalFileAttributes=f.readInt(2),this.externalFileAttributes=f.readInt(4),this.localHeaderOffset=f.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");f.skip(g),this.readExtraFields(f),this.parseZIP64ExtraField(f),this.fileComment=f.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var f=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),f==0&&(this.dosPermissions=63&this.externalFileAttributes),f==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var f=i(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=f.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=f.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=f.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=f.readInt(4))}},readExtraFields:function(f){var g,h,_,p=f.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});f.index+4<p;)g=f.readInt(2),h=f.readInt(2),_=f.readData(h),this.extraFields[g]={id:g,length:h,value:_};f.setIndex(p)},handleUTF8:function(){var f=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var g=this.findExtraFieldUnicodePath();if(g!==null)this.fileNameStr=g;else{var h=a.transformTo(f,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(h)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var p=a.transformTo(f,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(p)}}},findExtraFieldUnicodePath:function(){var f=this.extraFields[28789];if(f){var g=i(f.value);return g.readInt(1)!==1||c(this.fileName)!==g.readInt(4)?null:u.utf8decode(g.readData(f.length-5))}return null},findExtraFieldUnicodeComment:function(){var f=this.extraFields[25461];if(f){var g=i(f.value);return g.readInt(1)!==1||c(this.fileComment)!==g.readInt(4)?null:u.utf8decode(g.readData(f.length-5))}return null}},r.exports=y},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,s){function i(g,h,_){this.name=g,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=h,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var a=n("./stream/StreamHelper"),o=n("./stream/DataWorker"),c=n("./utf8"),u=n("./compressedObject"),d=n("./stream/GenericWorker");i.prototype={internalStream:function(g){var h=null,_="string";try{if(!g)throw new Error("No output type specified.");var p=(_=g.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),h=this._decompressWorker();var b=!this._dataBinary;b&&!p&&(h=h.pipe(new c.Utf8EncodeWorker)),!b&&p&&(h=h.pipe(new c.Utf8DecodeWorker))}catch(v){(h=new d("error")).error(v)}return new a(h,_,"")},async:function(g,h){return this.internalStream(g).accumulate(h)},nodeStream:function(g,h){return this.internalStream(g||"nodebuffer").toNodejsStream(h)},_compressWorker:function(g,h){if(this._data instanceof u&&this._data.compression.magic===g.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new c.Utf8EncodeWorker)),u.createWorkerFrom(_,g,h)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof d?this._data:new o(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],y=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<m.length;f++)i.prototype[m[f]]=y;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,s){(function(i){var a,o,c=i.MutationObserver||i.WebKitMutationObserver;if(c){var u=0,d=new c(g),m=i.document.createTextNode("");d.observe(m,{characterData:!0}),a=function(){m.data=u=++u%2}}else if(i.setImmediate||i.MessageChannel===void 0)a="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var h=i.document.createElement("script");h.onreadystatechange=function(){g(),h.onreadystatechange=null,h.parentNode.removeChild(h),h=null},i.document.documentElement.appendChild(h)}:function(){setTimeout(g,0)};else{var y=new i.MessageChannel;y.port1.onmessage=g,a=function(){y.port2.postMessage(0)}}var f=[];function g(){var h,_;o=!0;for(var p=f.length;p;){for(_=f,f=[],h=-1;++h<p;)_[h]();p=f.length}o=!1}r.exports=function(h){f.push(h)!==1||o||a()}}).call(this,typeof Vn<"u"?Vn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,s){var i=n("immediate");function a(){}var o={},c=["REJECTED"],u=["FULFILLED"],d=["PENDING"];function m(p){if(typeof p!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,p!==a&&h(this,p)}function y(p,b,v){this.promise=p,typeof b=="function"&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),typeof v=="function"&&(this.onRejected=v,this.callRejected=this.otherCallRejected)}function f(p,b,v){i(function(){var S;try{S=b(v)}catch(x){return o.reject(p,x)}S===p?o.reject(p,new TypeError("Cannot resolve promise with itself")):o.resolve(p,S)})}function g(p){var b=p&&p.then;if(p&&(typeof p=="object"||typeof p=="function")&&typeof b=="function")return function(){b.apply(p,arguments)}}function h(p,b){var v=!1;function S(z){v||(v=!0,o.reject(p,z))}function x(z){v||(v=!0,o.resolve(p,z))}var C=_(function(){b(x,S)});C.status==="error"&&S(C.value)}function _(p,b){var v={};try{v.value=p(b),v.status="success"}catch(S){v.status="error",v.value=S}return v}(r.exports=m).prototype.finally=function(p){if(typeof p!="function")return this;var b=this.constructor;return this.then(function(v){return b.resolve(p()).then(function(){return v})},function(v){return b.resolve(p()).then(function(){throw v})})},m.prototype.catch=function(p){return this.then(null,p)},m.prototype.then=function(p,b){if(typeof p!="function"&&this.state===u||typeof b!="function"&&this.state===c)return this;var v=new this.constructor(a);return this.state!==d?f(v,this.state===u?p:b,this.outcome):this.queue.push(new y(v,p,b)),v},y.prototype.callFulfilled=function(p){o.resolve(this.promise,p)},y.prototype.otherCallFulfilled=function(p){f(this.promise,this.onFulfilled,p)},y.prototype.callRejected=function(p){o.reject(this.promise,p)},y.prototype.otherCallRejected=function(p){f(this.promise,this.onRejected,p)},o.resolve=function(p,b){var v=_(g,b);if(v.status==="error")return o.reject(p,v.value);var S=v.value;if(S)h(p,S);else{p.state=u,p.outcome=b;for(var x=-1,C=p.queue.length;++x<C;)p.queue[x].callFulfilled(b)}return p},o.reject=function(p,b){p.state=c,p.outcome=b;for(var v=-1,S=p.queue.length;++v<S;)p.queue[v].callRejected(b);return p},m.resolve=function(p){return p instanceof this?p:o.resolve(new this(a),p)},m.reject=function(p){var b=new this(a);return o.reject(b,p)},m.all=function(p){var b=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var v=p.length,S=!1;if(!v)return this.resolve([]);for(var x=new Array(v),C=0,z=-1,P=new this(a);++z<v;)A(p[z],z);return P;function A(U,J){b.resolve(U).then(function(R){x[J]=R,++C!==v||S||(S=!0,o.resolve(P,x))},function(R){S||(S=!0,o.reject(P,R))})}},m.race=function(p){var b=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var v=p.length,S=!1;if(!v)return this.resolve([]);for(var x=-1,C=new this(a);++x<v;)z=p[x],b.resolve(z).then(function(P){S||(S=!0,o.resolve(C,P))},function(P){S||(S=!0,o.reject(C,P))});var z;return C}},{immediate:36}],38:[function(n,r,s){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,s){var i=n("./zlib/deflate"),a=n("./utils/common"),o=n("./utils/strings"),c=n("./zlib/messages"),u=n("./zlib/zstream"),d=Object.prototype.toString,m=0,y=-1,f=0,g=8;function h(p){if(!(this instanceof h))return new h(p);this.options=a.assign({level:y,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},p||{});var b=this.options;b.raw&&0<b.windowBits?b.windowBits=-b.windowBits:b.gzip&&0<b.windowBits&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var v=i.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(v!==m)throw new Error(c[v]);if(b.header&&i.deflateSetHeader(this.strm,b.header),b.dictionary){var S;if(S=typeof b.dictionary=="string"?o.string2buf(b.dictionary):d.call(b.dictionary)==="[object ArrayBuffer]"?new Uint8Array(b.dictionary):b.dictionary,(v=i.deflateSetDictionary(this.strm,S))!==m)throw new Error(c[v]);this._dict_set=!0}}function _(p,b){var v=new h(b);if(v.push(p,!0),v.err)throw v.msg||c[v.err];return v.result}h.prototype.push=function(p,b){var v,S,x=this.strm,C=this.options.chunkSize;if(this.ended)return!1;S=b===~~b?b:b===!0?4:0,typeof p=="string"?x.input=o.string2buf(p):d.call(p)==="[object ArrayBuffer]"?x.input=new Uint8Array(p):x.input=p,x.next_in=0,x.avail_in=x.input.length;do{if(x.avail_out===0&&(x.output=new a.Buf8(C),x.next_out=0,x.avail_out=C),(v=i.deflate(x,S))!==1&&v!==m)return this.onEnd(v),!(this.ended=!0);x.avail_out!==0&&(x.avail_in!==0||S!==4&&S!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(x.output,x.next_out))):this.onData(a.shrinkBuf(x.output,x.next_out)))}while((0<x.avail_in||x.avail_out===0)&&v!==1);return S===4?(v=i.deflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===m):S!==2||(this.onEnd(m),!(x.avail_out=0))},h.prototype.onData=function(p){this.chunks.push(p)},h.prototype.onEnd=function(p){p===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},s.Deflate=h,s.deflate=_,s.deflateRaw=function(p,b){return(b=b||{}).raw=!0,_(p,b)},s.gzip=function(p,b){return(b=b||{}).gzip=!0,_(p,b)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,s){var i=n("./zlib/inflate"),a=n("./utils/common"),o=n("./utils/strings"),c=n("./zlib/constants"),u=n("./zlib/messages"),d=n("./zlib/zstream"),m=n("./zlib/gzheader"),y=Object.prototype.toString;function f(h){if(!(this instanceof f))return new f(h);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},h||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||h&&h.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&!(15&_.windowBits)&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var p=i.inflateInit2(this.strm,_.windowBits);if(p!==c.Z_OK)throw new Error(u[p]);this.header=new m,i.inflateGetHeader(this.strm,this.header)}function g(h,_){var p=new f(_);if(p.push(h,!0),p.err)throw p.msg||u[p.err];return p.result}f.prototype.push=function(h,_){var p,b,v,S,x,C,z=this.strm,P=this.options.chunkSize,A=this.options.dictionary,U=!1;if(this.ended)return!1;b=_===~~_?_:_===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof h=="string"?z.input=o.binstring2buf(h):y.call(h)==="[object ArrayBuffer]"?z.input=new Uint8Array(h):z.input=h,z.next_in=0,z.avail_in=z.input.length;do{if(z.avail_out===0&&(z.output=new a.Buf8(P),z.next_out=0,z.avail_out=P),(p=i.inflate(z,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&A&&(C=typeof A=="string"?o.string2buf(A):y.call(A)==="[object ArrayBuffer]"?new Uint8Array(A):A,p=i.inflateSetDictionary(this.strm,C)),p===c.Z_BUF_ERROR&&U===!0&&(p=c.Z_OK,U=!1),p!==c.Z_STREAM_END&&p!==c.Z_OK)return this.onEnd(p),!(this.ended=!0);z.next_out&&(z.avail_out!==0&&p!==c.Z_STREAM_END&&(z.avail_in!==0||b!==c.Z_FINISH&&b!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(v=o.utf8border(z.output,z.next_out),S=z.next_out-v,x=o.buf2string(z.output,v),z.next_out=S,z.avail_out=P-S,S&&a.arraySet(z.output,z.output,v,S,0),this.onData(x)):this.onData(a.shrinkBuf(z.output,z.next_out)))),z.avail_in===0&&z.avail_out===0&&(U=!0)}while((0<z.avail_in||z.avail_out===0)&&p!==c.Z_STREAM_END);return p===c.Z_STREAM_END&&(b=c.Z_FINISH),b===c.Z_FINISH?(p=i.inflateEnd(this.strm),this.onEnd(p),this.ended=!0,p===c.Z_OK):b!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(z.avail_out=0))},f.prototype.onData=function(h){this.chunks.push(h)},f.prototype.onEnd=function(h){h===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg},s.Inflate=f,s.inflate=g,s.inflateRaw=function(h,_){return(_=_||{}).raw=!0,g(h,_)},s.ungzip=g},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(c){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var d=u.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var m in d)d.hasOwnProperty(m)&&(c[m]=d[m])}}return c},s.shrinkBuf=function(c,u){return c.length===u?c:c.subarray?c.subarray(0,u):(c.length=u,c)};var a={arraySet:function(c,u,d,m,y){if(u.subarray&&c.subarray)c.set(u.subarray(d,d+m),y);else for(var f=0;f<m;f++)c[y+f]=u[d+f]},flattenChunks:function(c){var u,d,m,y,f,g;for(u=m=0,d=c.length;u<d;u++)m+=c[u].length;for(g=new Uint8Array(m),u=y=0,d=c.length;u<d;u++)f=c[u],g.set(f,y),y+=f.length;return g}},o={arraySet:function(c,u,d,m,y){for(var f=0;f<m;f++)c[y+f]=u[d+f]},flattenChunks:function(c){return[].concat.apply([],c)}};s.setTyped=function(c){c?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,a)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,o))},s.setTyped(i)},{}],42:[function(n,r,s){var i=n("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var c=new i.Buf8(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function d(m,y){if(y<65537&&(m.subarray&&o||!m.subarray&&a))return String.fromCharCode.apply(null,i.shrinkBuf(m,y));for(var f="",g=0;g<y;g++)f+=String.fromCharCode(m[g]);return f}c[254]=c[254]=1,s.string2buf=function(m){var y,f,g,h,_,p=m.length,b=0;for(h=0;h<p;h++)(64512&(f=m.charCodeAt(h)))==55296&&h+1<p&&(64512&(g=m.charCodeAt(h+1)))==56320&&(f=65536+(f-55296<<10)+(g-56320),h++),b+=f<128?1:f<2048?2:f<65536?3:4;for(y=new i.Buf8(b),h=_=0;_<b;h++)(64512&(f=m.charCodeAt(h)))==55296&&h+1<p&&(64512&(g=m.charCodeAt(h+1)))==56320&&(f=65536+(f-55296<<10)+(g-56320),h++),f<128?y[_++]=f:(f<2048?y[_++]=192|f>>>6:(f<65536?y[_++]=224|f>>>12:(y[_++]=240|f>>>18,y[_++]=128|f>>>12&63),y[_++]=128|f>>>6&63),y[_++]=128|63&f);return y},s.buf2binstring=function(m){return d(m,m.length)},s.binstring2buf=function(m){for(var y=new i.Buf8(m.length),f=0,g=y.length;f<g;f++)y[f]=m.charCodeAt(f);return y},s.buf2string=function(m,y){var f,g,h,_,p=y||m.length,b=new Array(2*p);for(f=g=0;f<p;)if((h=m[f++])<128)b[g++]=h;else if(4<(_=c[h]))b[g++]=65533,f+=_-1;else{for(h&=_===2?31:_===3?15:7;1<_&&f<p;)h=h<<6|63&m[f++],_--;1<_?b[g++]=65533:h<65536?b[g++]=h:(h-=65536,b[g++]=55296|h>>10&1023,b[g++]=56320|1023&h)}return d(b,g)},s.utf8border=function(m,y){var f;for((y=y||m.length)>m.length&&(y=m.length),f=y-1;0<=f&&(192&m[f])==128;)f--;return f<0||f===0?y:f+c[m[f]]>y?f:y}},{"./common":41}],43:[function(n,r,s){r.exports=function(i,a,o,c){for(var u=65535&i|0,d=i>>>16&65535|0,m=0;o!==0;){for(o-=m=2e3<o?2e3:o;d=d+(u=u+a[c++]|0)|0,--m;);u%=65521,d%=65521}return u|d<<16|0}},{}],44:[function(n,r,s){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,s){var i=function(){for(var a,o=[],c=0;c<256;c++){a=c;for(var u=0;u<8;u++)a=1&a?3988292384^a>>>1:a>>>1;o[c]=a}return o}();r.exports=function(a,o,c,u){var d=i,m=u+c;a^=-1;for(var y=u;y<m;y++)a=a>>>8^d[255&(a^o[y])];return-1^a}},{}],46:[function(n,r,s){var i,a=n("../utils/common"),o=n("./trees"),c=n("./adler32"),u=n("./crc32"),d=n("./messages"),m=0,y=4,f=0,g=-2,h=-1,_=4,p=2,b=8,v=9,S=286,x=30,C=19,z=2*S+1,P=15,A=3,U=258,J=U+A+1,R=42,V=113,w=1,Q=2,oe=3,G=4;function q(l,I){return l.msg=d[I],I}function j(l){return(l<<1)-(4<l?9:0)}function se(l){for(var I=l.length;0<=--I;)l[I]=0}function N(l){var I=l.state,T=I.pending;T>l.avail_out&&(T=l.avail_out),T!==0&&(a.arraySet(l.output,I.pending_buf,I.pending_out,T,l.next_out),l.next_out+=T,I.pending_out+=T,l.total_out+=T,l.avail_out-=T,I.pending-=T,I.pending===0&&(I.pending_out=0))}function M(l,I){o._tr_flush_block(l,0<=l.block_start?l.block_start:-1,l.strstart-l.block_start,I),l.block_start=l.strstart,N(l.strm)}function K(l,I){l.pending_buf[l.pending++]=I}function W(l,I){l.pending_buf[l.pending++]=I>>>8&255,l.pending_buf[l.pending++]=255&I}function ee(l,I){var T,k,E=l.max_chain_length,D=l.strstart,B=l.prev_length,H=l.nice_match,L=l.strstart>l.w_size-J?l.strstart-(l.w_size-J):0,Y=l.window,ne=l.w_mask,Z=l.prev,ce=l.strstart+U,de=Y[D+B-1],he=Y[D+B];l.prev_length>=l.good_match&&(E>>=2),H>l.lookahead&&(H=l.lookahead);do if(Y[(T=I)+B]===he&&Y[T+B-1]===de&&Y[T]===Y[D]&&Y[++T]===Y[D+1]){D+=2,T++;do;while(Y[++D]===Y[++T]&&Y[++D]===Y[++T]&&Y[++D]===Y[++T]&&Y[++D]===Y[++T]&&Y[++D]===Y[++T]&&Y[++D]===Y[++T]&&Y[++D]===Y[++T]&&Y[++D]===Y[++T]&&D<ce);if(k=U-(ce-D),D=ce-U,B<k){if(l.match_start=I,H<=(B=k))break;de=Y[D+B-1],he=Y[D+B]}}while((I=Z[I&ne])>L&&--E!=0);return B<=l.lookahead?B:l.lookahead}function ue(l){var I,T,k,E,D,B,H,L,Y,ne,Z=l.w_size;do{if(E=l.window_size-l.lookahead-l.strstart,l.strstart>=Z+(Z-J)){for(a.arraySet(l.window,l.window,Z,Z,0),l.match_start-=Z,l.strstart-=Z,l.block_start-=Z,I=T=l.hash_size;k=l.head[--I],l.head[I]=Z<=k?k-Z:0,--T;);for(I=T=Z;k=l.prev[--I],l.prev[I]=Z<=k?k-Z:0,--T;);E+=Z}if(l.strm.avail_in===0)break;if(B=l.strm,H=l.window,L=l.strstart+l.lookahead,Y=E,ne=void 0,ne=B.avail_in,Y<ne&&(ne=Y),T=ne===0?0:(B.avail_in-=ne,a.arraySet(H,B.input,B.next_in,ne,L),B.state.wrap===1?B.adler=c(B.adler,H,ne,L):B.state.wrap===2&&(B.adler=u(B.adler,H,ne,L)),B.next_in+=ne,B.total_in+=ne,ne),l.lookahead+=T,l.lookahead+l.insert>=A)for(D=l.strstart-l.insert,l.ins_h=l.window[D],l.ins_h=(l.ins_h<<l.hash_shift^l.window[D+1])&l.hash_mask;l.insert&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[D+A-1])&l.hash_mask,l.prev[D&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=D,D++,l.insert--,!(l.lookahead+l.insert<A)););}while(l.lookahead<J&&l.strm.avail_in!==0)}function X(l,I){for(var T,k;;){if(l.lookahead<J){if(ue(l),l.lookahead<J&&I===m)return w;if(l.lookahead===0)break}if(T=0,l.lookahead>=A&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+A-1])&l.hash_mask,T=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart),T!==0&&l.strstart-T<=l.w_size-J&&(l.match_length=ee(l,T)),l.match_length>=A)if(k=o._tr_tally(l,l.strstart-l.match_start,l.match_length-A),l.lookahead-=l.match_length,l.match_length<=l.max_lazy_match&&l.lookahead>=A){for(l.match_length--;l.strstart++,l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+A-1])&l.hash_mask,T=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart,--l.match_length!=0;);l.strstart++}else l.strstart+=l.match_length,l.match_length=0,l.ins_h=l.window[l.strstart],l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+1])&l.hash_mask;else k=o._tr_tally(l,0,l.window[l.strstart]),l.lookahead--,l.strstart++;if(k&&(M(l,!1),l.strm.avail_out===0))return w}return l.insert=l.strstart<A-1?l.strstart:A-1,I===y?(M(l,!0),l.strm.avail_out===0?oe:G):l.last_lit&&(M(l,!1),l.strm.avail_out===0)?w:Q}function $(l,I){for(var T,k,E;;){if(l.lookahead<J){if(ue(l),l.lookahead<J&&I===m)return w;if(l.lookahead===0)break}if(T=0,l.lookahead>=A&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+A-1])&l.hash_mask,T=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart),l.prev_length=l.match_length,l.prev_match=l.match_start,l.match_length=A-1,T!==0&&l.prev_length<l.max_lazy_match&&l.strstart-T<=l.w_size-J&&(l.match_length=ee(l,T),l.match_length<=5&&(l.strategy===1||l.match_length===A&&4096<l.strstart-l.match_start)&&(l.match_length=A-1)),l.prev_length>=A&&l.match_length<=l.prev_length){for(E=l.strstart+l.lookahead-A,k=o._tr_tally(l,l.strstart-1-l.prev_match,l.prev_length-A),l.lookahead-=l.prev_length-1,l.prev_length-=2;++l.strstart<=E&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+A-1])&l.hash_mask,T=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart),--l.prev_length!=0;);if(l.match_available=0,l.match_length=A-1,l.strstart++,k&&(M(l,!1),l.strm.avail_out===0))return w}else if(l.match_available){if((k=o._tr_tally(l,0,l.window[l.strstart-1]))&&M(l,!1),l.strstart++,l.lookahead--,l.strm.avail_out===0)return w}else l.match_available=1,l.strstart++,l.lookahead--}return l.match_available&&(k=o._tr_tally(l,0,l.window[l.strstart-1]),l.match_available=0),l.insert=l.strstart<A-1?l.strstart:A-1,I===y?(M(l,!0),l.strm.avail_out===0?oe:G):l.last_lit&&(M(l,!1),l.strm.avail_out===0)?w:Q}function F(l,I,T,k,E){this.good_length=l,this.max_lazy=I,this.nice_length=T,this.max_chain=k,this.func=E}function te(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=b,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*z),this.dyn_dtree=new a.Buf16(2*(2*x+1)),this.bl_tree=new a.Buf16(2*(2*C+1)),se(this.dyn_ltree),se(this.dyn_dtree),se(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(P+1),this.heap=new a.Buf16(2*S+1),se(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*S+1),se(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ie(l){var I;return l&&l.state?(l.total_in=l.total_out=0,l.data_type=p,(I=l.state).pending=0,I.pending_out=0,I.wrap<0&&(I.wrap=-I.wrap),I.status=I.wrap?R:V,l.adler=I.wrap===2?0:1,I.last_flush=m,o._tr_init(I),f):q(l,g)}function fe(l){var I=ie(l);return I===f&&function(T){T.window_size=2*T.w_size,se(T.head),T.max_lazy_match=i[T.level].max_lazy,T.good_match=i[T.level].good_length,T.nice_match=i[T.level].nice_length,T.max_chain_length=i[T.level].max_chain,T.strstart=0,T.block_start=0,T.lookahead=0,T.insert=0,T.match_length=T.prev_length=A-1,T.match_available=0,T.ins_h=0}(l.state),I}function O(l,I,T,k,E,D){if(!l)return g;var B=1;if(I===h&&(I=6),k<0?(B=0,k=-k):15<k&&(B=2,k-=16),E<1||v<E||T!==b||k<8||15<k||I<0||9<I||D<0||_<D)return q(l,g);k===8&&(k=9);var H=new te;return(l.state=H).strm=l,H.wrap=B,H.gzhead=null,H.w_bits=k,H.w_size=1<<H.w_bits,H.w_mask=H.w_size-1,H.hash_bits=E+7,H.hash_size=1<<H.hash_bits,H.hash_mask=H.hash_size-1,H.hash_shift=~~((H.hash_bits+A-1)/A),H.window=new a.Buf8(2*H.w_size),H.head=new a.Buf16(H.hash_size),H.prev=new a.Buf16(H.w_size),H.lit_bufsize=1<<E+6,H.pending_buf_size=4*H.lit_bufsize,H.pending_buf=new a.Buf8(H.pending_buf_size),H.d_buf=1*H.lit_bufsize,H.l_buf=3*H.lit_bufsize,H.level=I,H.strategy=D,H.method=T,fe(l)}i=[new F(0,0,0,0,function(l,I){var T=65535;for(T>l.pending_buf_size-5&&(T=l.pending_buf_size-5);;){if(l.lookahead<=1){if(ue(l),l.lookahead===0&&I===m)return w;if(l.lookahead===0)break}l.strstart+=l.lookahead,l.lookahead=0;var k=l.block_start+T;if((l.strstart===0||l.strstart>=k)&&(l.lookahead=l.strstart-k,l.strstart=k,M(l,!1),l.strm.avail_out===0)||l.strstart-l.block_start>=l.w_size-J&&(M(l,!1),l.strm.avail_out===0))return w}return l.insert=0,I===y?(M(l,!0),l.strm.avail_out===0?oe:G):(l.strstart>l.block_start&&(M(l,!1),l.strm.avail_out),w)}),new F(4,4,8,4,X),new F(4,5,16,8,X),new F(4,6,32,32,X),new F(4,4,16,16,$),new F(8,16,32,32,$),new F(8,16,128,128,$),new F(8,32,128,256,$),new F(32,128,258,1024,$),new F(32,258,258,4096,$)],s.deflateInit=function(l,I){return O(l,I,b,15,8,0)},s.deflateInit2=O,s.deflateReset=fe,s.deflateResetKeep=ie,s.deflateSetHeader=function(l,I){return l&&l.state?l.state.wrap!==2?g:(l.state.gzhead=I,f):g},s.deflate=function(l,I){var T,k,E,D;if(!l||!l.state||5<I||I<0)return l?q(l,g):g;if(k=l.state,!l.output||!l.input&&l.avail_in!==0||k.status===666&&I!==y)return q(l,l.avail_out===0?-5:g);if(k.strm=l,T=k.last_flush,k.last_flush=I,k.status===R)if(k.wrap===2)l.adler=0,K(k,31),K(k,139),K(k,8),k.gzhead?(K(k,(k.gzhead.text?1:0)+(k.gzhead.hcrc?2:0)+(k.gzhead.extra?4:0)+(k.gzhead.name?8:0)+(k.gzhead.comment?16:0)),K(k,255&k.gzhead.time),K(k,k.gzhead.time>>8&255),K(k,k.gzhead.time>>16&255),K(k,k.gzhead.time>>24&255),K(k,k.level===9?2:2<=k.strategy||k.level<2?4:0),K(k,255&k.gzhead.os),k.gzhead.extra&&k.gzhead.extra.length&&(K(k,255&k.gzhead.extra.length),K(k,k.gzhead.extra.length>>8&255)),k.gzhead.hcrc&&(l.adler=u(l.adler,k.pending_buf,k.pending,0)),k.gzindex=0,k.status=69):(K(k,0),K(k,0),K(k,0),K(k,0),K(k,0),K(k,k.level===9?2:2<=k.strategy||k.level<2?4:0),K(k,3),k.status=V);else{var B=b+(k.w_bits-8<<4)<<8;B|=(2<=k.strategy||k.level<2?0:k.level<6?1:k.level===6?2:3)<<6,k.strstart!==0&&(B|=32),B+=31-B%31,k.status=V,W(k,B),k.strstart!==0&&(W(k,l.adler>>>16),W(k,65535&l.adler)),l.adler=1}if(k.status===69)if(k.gzhead.extra){for(E=k.pending;k.gzindex<(65535&k.gzhead.extra.length)&&(k.pending!==k.pending_buf_size||(k.gzhead.hcrc&&k.pending>E&&(l.adler=u(l.adler,k.pending_buf,k.pending-E,E)),N(l),E=k.pending,k.pending!==k.pending_buf_size));)K(k,255&k.gzhead.extra[k.gzindex]),k.gzindex++;k.gzhead.hcrc&&k.pending>E&&(l.adler=u(l.adler,k.pending_buf,k.pending-E,E)),k.gzindex===k.gzhead.extra.length&&(k.gzindex=0,k.status=73)}else k.status=73;if(k.status===73)if(k.gzhead.name){E=k.pending;do{if(k.pending===k.pending_buf_size&&(k.gzhead.hcrc&&k.pending>E&&(l.adler=u(l.adler,k.pending_buf,k.pending-E,E)),N(l),E=k.pending,k.pending===k.pending_buf_size)){D=1;break}D=k.gzindex<k.gzhead.name.length?255&k.gzhead.name.charCodeAt(k.gzindex++):0,K(k,D)}while(D!==0);k.gzhead.hcrc&&k.pending>E&&(l.adler=u(l.adler,k.pending_buf,k.pending-E,E)),D===0&&(k.gzindex=0,k.status=91)}else k.status=91;if(k.status===91)if(k.gzhead.comment){E=k.pending;do{if(k.pending===k.pending_buf_size&&(k.gzhead.hcrc&&k.pending>E&&(l.adler=u(l.adler,k.pending_buf,k.pending-E,E)),N(l),E=k.pending,k.pending===k.pending_buf_size)){D=1;break}D=k.gzindex<k.gzhead.comment.length?255&k.gzhead.comment.charCodeAt(k.gzindex++):0,K(k,D)}while(D!==0);k.gzhead.hcrc&&k.pending>E&&(l.adler=u(l.adler,k.pending_buf,k.pending-E,E)),D===0&&(k.status=103)}else k.status=103;if(k.status===103&&(k.gzhead.hcrc?(k.pending+2>k.pending_buf_size&&N(l),k.pending+2<=k.pending_buf_size&&(K(k,255&l.adler),K(k,l.adler>>8&255),l.adler=0,k.status=V)):k.status=V),k.pending!==0){if(N(l),l.avail_out===0)return k.last_flush=-1,f}else if(l.avail_in===0&&j(I)<=j(T)&&I!==y)return q(l,-5);if(k.status===666&&l.avail_in!==0)return q(l,-5);if(l.avail_in!==0||k.lookahead!==0||I!==m&&k.status!==666){var H=k.strategy===2?function(L,Y){for(var ne;;){if(L.lookahead===0&&(ue(L),L.lookahead===0)){if(Y===m)return w;break}if(L.match_length=0,ne=o._tr_tally(L,0,L.window[L.strstart]),L.lookahead--,L.strstart++,ne&&(M(L,!1),L.strm.avail_out===0))return w}return L.insert=0,Y===y?(M(L,!0),L.strm.avail_out===0?oe:G):L.last_lit&&(M(L,!1),L.strm.avail_out===0)?w:Q}(k,I):k.strategy===3?function(L,Y){for(var ne,Z,ce,de,he=L.window;;){if(L.lookahead<=U){if(ue(L),L.lookahead<=U&&Y===m)return w;if(L.lookahead===0)break}if(L.match_length=0,L.lookahead>=A&&0<L.strstart&&(Z=he[ce=L.strstart-1])===he[++ce]&&Z===he[++ce]&&Z===he[++ce]){de=L.strstart+U;do;while(Z===he[++ce]&&Z===he[++ce]&&Z===he[++ce]&&Z===he[++ce]&&Z===he[++ce]&&Z===he[++ce]&&Z===he[++ce]&&Z===he[++ce]&&ce<de);L.match_length=U-(de-ce),L.match_length>L.lookahead&&(L.match_length=L.lookahead)}if(L.match_length>=A?(ne=o._tr_tally(L,1,L.match_length-A),L.lookahead-=L.match_length,L.strstart+=L.match_length,L.match_length=0):(ne=o._tr_tally(L,0,L.window[L.strstart]),L.lookahead--,L.strstart++),ne&&(M(L,!1),L.strm.avail_out===0))return w}return L.insert=0,Y===y?(M(L,!0),L.strm.avail_out===0?oe:G):L.last_lit&&(M(L,!1),L.strm.avail_out===0)?w:Q}(k,I):i[k.level].func(k,I);if(H!==oe&&H!==G||(k.status=666),H===w||H===oe)return l.avail_out===0&&(k.last_flush=-1),f;if(H===Q&&(I===1?o._tr_align(k):I!==5&&(o._tr_stored_block(k,0,0,!1),I===3&&(se(k.head),k.lookahead===0&&(k.strstart=0,k.block_start=0,k.insert=0))),N(l),l.avail_out===0))return k.last_flush=-1,f}return I!==y?f:k.wrap<=0?1:(k.wrap===2?(K(k,255&l.adler),K(k,l.adler>>8&255),K(k,l.adler>>16&255),K(k,l.adler>>24&255),K(k,255&l.total_in),K(k,l.total_in>>8&255),K(k,l.total_in>>16&255),K(k,l.total_in>>24&255)):(W(k,l.adler>>>16),W(k,65535&l.adler)),N(l),0<k.wrap&&(k.wrap=-k.wrap),k.pending!==0?f:1)},s.deflateEnd=function(l){var I;return l&&l.state?(I=l.state.status)!==R&&I!==69&&I!==73&&I!==91&&I!==103&&I!==V&&I!==666?q(l,g):(l.state=null,I===V?q(l,-3):f):g},s.deflateSetDictionary=function(l,I){var T,k,E,D,B,H,L,Y,ne=I.length;if(!l||!l.state||(D=(T=l.state).wrap)===2||D===1&&T.status!==R||T.lookahead)return g;for(D===1&&(l.adler=c(l.adler,I,ne,0)),T.wrap=0,ne>=T.w_size&&(D===0&&(se(T.head),T.strstart=0,T.block_start=0,T.insert=0),Y=new a.Buf8(T.w_size),a.arraySet(Y,I,ne-T.w_size,T.w_size,0),I=Y,ne=T.w_size),B=l.avail_in,H=l.next_in,L=l.input,l.avail_in=ne,l.next_in=0,l.input=I,ue(T);T.lookahead>=A;){for(k=T.strstart,E=T.lookahead-(A-1);T.ins_h=(T.ins_h<<T.hash_shift^T.window[k+A-1])&T.hash_mask,T.prev[k&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=k,k++,--E;);T.strstart=k,T.lookahead=A-1,ue(T)}return T.strstart+=T.lookahead,T.block_start=T.strstart,T.insert=T.lookahead,T.lookahead=0,T.match_length=T.prev_length=A-1,T.match_available=0,l.next_in=H,l.input=L,l.avail_in=B,T.wrap=D,f},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,s){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,s){r.exports=function(i,a){var o,c,u,d,m,y,f,g,h,_,p,b,v,S,x,C,z,P,A,U,J,R,V,w,Q;o=i.state,c=i.next_in,w=i.input,u=c+(i.avail_in-5),d=i.next_out,Q=i.output,m=d-(a-i.avail_out),y=d+(i.avail_out-257),f=o.dmax,g=o.wsize,h=o.whave,_=o.wnext,p=o.window,b=o.hold,v=o.bits,S=o.lencode,x=o.distcode,C=(1<<o.lenbits)-1,z=(1<<o.distbits)-1;e:do{v<15&&(b+=w[c++]<<v,v+=8,b+=w[c++]<<v,v+=8),P=S[b&C];t:for(;;){if(b>>>=A=P>>>24,v-=A,(A=P>>>16&255)===0)Q[d++]=65535&P;else{if(!(16&A)){if(!(64&A)){P=S[(65535&P)+(b&(1<<A)-1)];continue t}if(32&A){o.mode=12;break e}i.msg="invalid literal/length code",o.mode=30;break e}U=65535&P,(A&=15)&&(v<A&&(b+=w[c++]<<v,v+=8),U+=b&(1<<A)-1,b>>>=A,v-=A),v<15&&(b+=w[c++]<<v,v+=8,b+=w[c++]<<v,v+=8),P=x[b&z];n:for(;;){if(b>>>=A=P>>>24,v-=A,!(16&(A=P>>>16&255))){if(!(64&A)){P=x[(65535&P)+(b&(1<<A)-1)];continue n}i.msg="invalid distance code",o.mode=30;break e}if(J=65535&P,v<(A&=15)&&(b+=w[c++]<<v,(v+=8)<A&&(b+=w[c++]<<v,v+=8)),f<(J+=b&(1<<A)-1)){i.msg="invalid distance too far back",o.mode=30;break e}if(b>>>=A,v-=A,(A=d-m)<J){if(h<(A=J-A)&&o.sane){i.msg="invalid distance too far back",o.mode=30;break e}if(V=p,(R=0)===_){if(R+=g-A,A<U){for(U-=A;Q[d++]=p[R++],--A;);R=d-J,V=Q}}else if(_<A){if(R+=g+_-A,(A-=_)<U){for(U-=A;Q[d++]=p[R++],--A;);if(R=0,_<U){for(U-=A=_;Q[d++]=p[R++],--A;);R=d-J,V=Q}}}else if(R+=_-A,A<U){for(U-=A;Q[d++]=p[R++],--A;);R=d-J,V=Q}for(;2<U;)Q[d++]=V[R++],Q[d++]=V[R++],Q[d++]=V[R++],U-=3;U&&(Q[d++]=V[R++],1<U&&(Q[d++]=V[R++]))}else{for(R=d-J;Q[d++]=Q[R++],Q[d++]=Q[R++],Q[d++]=Q[R++],2<(U-=3););U&&(Q[d++]=Q[R++],1<U&&(Q[d++]=Q[R++]))}break}}break}}while(c<u&&d<y);c-=U=v>>3,b&=(1<<(v-=U<<3))-1,i.next_in=c,i.next_out=d,i.avail_in=c<u?u-c+5:5-(c-u),i.avail_out=d<y?y-d+257:257-(d-y),o.hold=b,o.bits=v}},{}],49:[function(n,r,s){var i=n("../utils/common"),a=n("./adler32"),o=n("./crc32"),c=n("./inffast"),u=n("./inftrees"),d=1,m=2,y=0,f=-2,g=1,h=852,_=592;function p(R){return(R>>>24&255)+(R>>>8&65280)+((65280&R)<<8)+((255&R)<<24)}function b(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function v(R){var V;return R&&R.state?(V=R.state,R.total_in=R.total_out=V.total=0,R.msg="",V.wrap&&(R.adler=1&V.wrap),V.mode=g,V.last=0,V.havedict=0,V.dmax=32768,V.head=null,V.hold=0,V.bits=0,V.lencode=V.lendyn=new i.Buf32(h),V.distcode=V.distdyn=new i.Buf32(_),V.sane=1,V.back=-1,y):f}function S(R){var V;return R&&R.state?((V=R.state).wsize=0,V.whave=0,V.wnext=0,v(R)):f}function x(R,V){var w,Q;return R&&R.state?(Q=R.state,V<0?(w=0,V=-V):(w=1+(V>>4),V<48&&(V&=15)),V&&(V<8||15<V)?f:(Q.window!==null&&Q.wbits!==V&&(Q.window=null),Q.wrap=w,Q.wbits=V,S(R))):f}function C(R,V){var w,Q;return R?(Q=new b,(R.state=Q).window=null,(w=x(R,V))!==y&&(R.state=null),w):f}var z,P,A=!0;function U(R){if(A){var V;for(z=new i.Buf32(512),P=new i.Buf32(32),V=0;V<144;)R.lens[V++]=8;for(;V<256;)R.lens[V++]=9;for(;V<280;)R.lens[V++]=7;for(;V<288;)R.lens[V++]=8;for(u(d,R.lens,0,288,z,0,R.work,{bits:9}),V=0;V<32;)R.lens[V++]=5;u(m,R.lens,0,32,P,0,R.work,{bits:5}),A=!1}R.lencode=z,R.lenbits=9,R.distcode=P,R.distbits=5}function J(R,V,w,Q){var oe,G=R.state;return G.window===null&&(G.wsize=1<<G.wbits,G.wnext=0,G.whave=0,G.window=new i.Buf8(G.wsize)),Q>=G.wsize?(i.arraySet(G.window,V,w-G.wsize,G.wsize,0),G.wnext=0,G.whave=G.wsize):(Q<(oe=G.wsize-G.wnext)&&(oe=Q),i.arraySet(G.window,V,w-Q,oe,G.wnext),(Q-=oe)?(i.arraySet(G.window,V,w-Q,Q,0),G.wnext=Q,G.whave=G.wsize):(G.wnext+=oe,G.wnext===G.wsize&&(G.wnext=0),G.whave<G.wsize&&(G.whave+=oe))),0}s.inflateReset=S,s.inflateReset2=x,s.inflateResetKeep=v,s.inflateInit=function(R){return C(R,15)},s.inflateInit2=C,s.inflate=function(R,V){var w,Q,oe,G,q,j,se,N,M,K,W,ee,ue,X,$,F,te,ie,fe,O,l,I,T,k,E=0,D=new i.Buf8(4),B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!R||!R.state||!R.output||!R.input&&R.avail_in!==0)return f;(w=R.state).mode===12&&(w.mode=13),q=R.next_out,oe=R.output,se=R.avail_out,G=R.next_in,Q=R.input,j=R.avail_in,N=w.hold,M=w.bits,K=j,W=se,I=y;e:for(;;)switch(w.mode){case g:if(w.wrap===0){w.mode=13;break}for(;M<16;){if(j===0)break e;j--,N+=Q[G++]<<M,M+=8}if(2&w.wrap&&N===35615){D[w.check=0]=255&N,D[1]=N>>>8&255,w.check=o(w.check,D,2,0),M=N=0,w.mode=2;break}if(w.flags=0,w.head&&(w.head.done=!1),!(1&w.wrap)||(((255&N)<<8)+(N>>8))%31){R.msg="incorrect header check",w.mode=30;break}if((15&N)!=8){R.msg="unknown compression method",w.mode=30;break}if(M-=4,l=8+(15&(N>>>=4)),w.wbits===0)w.wbits=l;else if(l>w.wbits){R.msg="invalid window size",w.mode=30;break}w.dmax=1<<l,R.adler=w.check=1,w.mode=512&N?10:12,M=N=0;break;case 2:for(;M<16;){if(j===0)break e;j--,N+=Q[G++]<<M,M+=8}if(w.flags=N,(255&w.flags)!=8){R.msg="unknown compression method",w.mode=30;break}if(57344&w.flags){R.msg="unknown header flags set",w.mode=30;break}w.head&&(w.head.text=N>>8&1),512&w.flags&&(D[0]=255&N,D[1]=N>>>8&255,w.check=o(w.check,D,2,0)),M=N=0,w.mode=3;case 3:for(;M<32;){if(j===0)break e;j--,N+=Q[G++]<<M,M+=8}w.head&&(w.head.time=N),512&w.flags&&(D[0]=255&N,D[1]=N>>>8&255,D[2]=N>>>16&255,D[3]=N>>>24&255,w.check=o(w.check,D,4,0)),M=N=0,w.mode=4;case 4:for(;M<16;){if(j===0)break e;j--,N+=Q[G++]<<M,M+=8}w.head&&(w.head.xflags=255&N,w.head.os=N>>8),512&w.flags&&(D[0]=255&N,D[1]=N>>>8&255,w.check=o(w.check,D,2,0)),M=N=0,w.mode=5;case 5:if(1024&w.flags){for(;M<16;){if(j===0)break e;j--,N+=Q[G++]<<M,M+=8}w.length=N,w.head&&(w.head.extra_len=N),512&w.flags&&(D[0]=255&N,D[1]=N>>>8&255,w.check=o(w.check,D,2,0)),M=N=0}else w.head&&(w.head.extra=null);w.mode=6;case 6:if(1024&w.flags&&(j<(ee=w.length)&&(ee=j),ee&&(w.head&&(l=w.head.extra_len-w.length,w.head.extra||(w.head.extra=new Array(w.head.extra_len)),i.arraySet(w.head.extra,Q,G,ee,l)),512&w.flags&&(w.check=o(w.check,Q,ee,G)),j-=ee,G+=ee,w.length-=ee),w.length))break e;w.length=0,w.mode=7;case 7:if(2048&w.flags){if(j===0)break e;for(ee=0;l=Q[G+ee++],w.head&&l&&w.length<65536&&(w.head.name+=String.fromCharCode(l)),l&&ee<j;);if(512&w.flags&&(w.check=o(w.check,Q,ee,G)),j-=ee,G+=ee,l)break e}else w.head&&(w.head.name=null);w.length=0,w.mode=8;case 8:if(4096&w.flags){if(j===0)break e;for(ee=0;l=Q[G+ee++],w.head&&l&&w.length<65536&&(w.head.comment+=String.fromCharCode(l)),l&&ee<j;);if(512&w.flags&&(w.check=o(w.check,Q,ee,G)),j-=ee,G+=ee,l)break e}else w.head&&(w.head.comment=null);w.mode=9;case 9:if(512&w.flags){for(;M<16;){if(j===0)break e;j--,N+=Q[G++]<<M,M+=8}if(N!==(65535&w.check)){R.msg="header crc mismatch",w.mode=30;break}M=N=0}w.head&&(w.head.hcrc=w.flags>>9&1,w.head.done=!0),R.adler=w.check=0,w.mode=12;break;case 10:for(;M<32;){if(j===0)break e;j--,N+=Q[G++]<<M,M+=8}R.adler=w.check=p(N),M=N=0,w.mode=11;case 11:if(w.havedict===0)return R.next_out=q,R.avail_out=se,R.next_in=G,R.avail_in=j,w.hold=N,w.bits=M,2;R.adler=w.check=1,w.mode=12;case 12:if(V===5||V===6)break e;case 13:if(w.last){N>>>=7&M,M-=7&M,w.mode=27;break}for(;M<3;){if(j===0)break e;j--,N+=Q[G++]<<M,M+=8}switch(w.last=1&N,M-=1,3&(N>>>=1)){case 0:w.mode=14;break;case 1:if(U(w),w.mode=20,V!==6)break;N>>>=2,M-=2;break e;case 2:w.mode=17;break;case 3:R.msg="invalid block type",w.mode=30}N>>>=2,M-=2;break;case 14:for(N>>>=7&M,M-=7&M;M<32;){if(j===0)break e;j--,N+=Q[G++]<<M,M+=8}if((65535&N)!=(N>>>16^65535)){R.msg="invalid stored block lengths",w.mode=30;break}if(w.length=65535&N,M=N=0,w.mode=15,V===6)break e;case 15:w.mode=16;case 16:if(ee=w.length){if(j<ee&&(ee=j),se<ee&&(ee=se),ee===0)break e;i.arraySet(oe,Q,G,ee,q),j-=ee,G+=ee,se-=ee,q+=ee,w.length-=ee;break}w.mode=12;break;case 17:for(;M<14;){if(j===0)break e;j--,N+=Q[G++]<<M,M+=8}if(w.nlen=257+(31&N),N>>>=5,M-=5,w.ndist=1+(31&N),N>>>=5,M-=5,w.ncode=4+(15&N),N>>>=4,M-=4,286<w.nlen||30<w.ndist){R.msg="too many length or distance symbols",w.mode=30;break}w.have=0,w.mode=18;case 18:for(;w.have<w.ncode;){for(;M<3;){if(j===0)break e;j--,N+=Q[G++]<<M,M+=8}w.lens[B[w.have++]]=7&N,N>>>=3,M-=3}for(;w.have<19;)w.lens[B[w.have++]]=0;if(w.lencode=w.lendyn,w.lenbits=7,T={bits:w.lenbits},I=u(0,w.lens,0,19,w.lencode,0,w.work,T),w.lenbits=T.bits,I){R.msg="invalid code lengths set",w.mode=30;break}w.have=0,w.mode=19;case 19:for(;w.have<w.nlen+w.ndist;){for(;F=(E=w.lencode[N&(1<<w.lenbits)-1])>>>16&255,te=65535&E,!(($=E>>>24)<=M);){if(j===0)break e;j--,N+=Q[G++]<<M,M+=8}if(te<16)N>>>=$,M-=$,w.lens[w.have++]=te;else{if(te===16){for(k=$+2;M<k;){if(j===0)break e;j--,N+=Q[G++]<<M,M+=8}if(N>>>=$,M-=$,w.have===0){R.msg="invalid bit length repeat",w.mode=30;break}l=w.lens[w.have-1],ee=3+(3&N),N>>>=2,M-=2}else if(te===17){for(k=$+3;M<k;){if(j===0)break e;j--,N+=Q[G++]<<M,M+=8}M-=$,l=0,ee=3+(7&(N>>>=$)),N>>>=3,M-=3}else{for(k=$+7;M<k;){if(j===0)break e;j--,N+=Q[G++]<<M,M+=8}M-=$,l=0,ee=11+(127&(N>>>=$)),N>>>=7,M-=7}if(w.have+ee>w.nlen+w.ndist){R.msg="invalid bit length repeat",w.mode=30;break}for(;ee--;)w.lens[w.have++]=l}}if(w.mode===30)break;if(w.lens[256]===0){R.msg="invalid code -- missing end-of-block",w.mode=30;break}if(w.lenbits=9,T={bits:w.lenbits},I=u(d,w.lens,0,w.nlen,w.lencode,0,w.work,T),w.lenbits=T.bits,I){R.msg="invalid literal/lengths set",w.mode=30;break}if(w.distbits=6,w.distcode=w.distdyn,T={bits:w.distbits},I=u(m,w.lens,w.nlen,w.ndist,w.distcode,0,w.work,T),w.distbits=T.bits,I){R.msg="invalid distances set",w.mode=30;break}if(w.mode=20,V===6)break e;case 20:w.mode=21;case 21:if(6<=j&&258<=se){R.next_out=q,R.avail_out=se,R.next_in=G,R.avail_in=j,w.hold=N,w.bits=M,c(R,W),q=R.next_out,oe=R.output,se=R.avail_out,G=R.next_in,Q=R.input,j=R.avail_in,N=w.hold,M=w.bits,w.mode===12&&(w.back=-1);break}for(w.back=0;F=(E=w.lencode[N&(1<<w.lenbits)-1])>>>16&255,te=65535&E,!(($=E>>>24)<=M);){if(j===0)break e;j--,N+=Q[G++]<<M,M+=8}if(F&&!(240&F)){for(ie=$,fe=F,O=te;F=(E=w.lencode[O+((N&(1<<ie+fe)-1)>>ie)])>>>16&255,te=65535&E,!(ie+($=E>>>24)<=M);){if(j===0)break e;j--,N+=Q[G++]<<M,M+=8}N>>>=ie,M-=ie,w.back+=ie}if(N>>>=$,M-=$,w.back+=$,w.length=te,F===0){w.mode=26;break}if(32&F){w.back=-1,w.mode=12;break}if(64&F){R.msg="invalid literal/length code",w.mode=30;break}w.extra=15&F,w.mode=22;case 22:if(w.extra){for(k=w.extra;M<k;){if(j===0)break e;j--,N+=Q[G++]<<M,M+=8}w.length+=N&(1<<w.extra)-1,N>>>=w.extra,M-=w.extra,w.back+=w.extra}w.was=w.length,w.mode=23;case 23:for(;F=(E=w.distcode[N&(1<<w.distbits)-1])>>>16&255,te=65535&E,!(($=E>>>24)<=M);){if(j===0)break e;j--,N+=Q[G++]<<M,M+=8}if(!(240&F)){for(ie=$,fe=F,O=te;F=(E=w.distcode[O+((N&(1<<ie+fe)-1)>>ie)])>>>16&255,te=65535&E,!(ie+($=E>>>24)<=M);){if(j===0)break e;j--,N+=Q[G++]<<M,M+=8}N>>>=ie,M-=ie,w.back+=ie}if(N>>>=$,M-=$,w.back+=$,64&F){R.msg="invalid distance code",w.mode=30;break}w.offset=te,w.extra=15&F,w.mode=24;case 24:if(w.extra){for(k=w.extra;M<k;){if(j===0)break e;j--,N+=Q[G++]<<M,M+=8}w.offset+=N&(1<<w.extra)-1,N>>>=w.extra,M-=w.extra,w.back+=w.extra}if(w.offset>w.dmax){R.msg="invalid distance too far back",w.mode=30;break}w.mode=25;case 25:if(se===0)break e;if(ee=W-se,w.offset>ee){if((ee=w.offset-ee)>w.whave&&w.sane){R.msg="invalid distance too far back",w.mode=30;break}ue=ee>w.wnext?(ee-=w.wnext,w.wsize-ee):w.wnext-ee,ee>w.length&&(ee=w.length),X=w.window}else X=oe,ue=q-w.offset,ee=w.length;for(se<ee&&(ee=se),se-=ee,w.length-=ee;oe[q++]=X[ue++],--ee;);w.length===0&&(w.mode=21);break;case 26:if(se===0)break e;oe[q++]=w.length,se--,w.mode=21;break;case 27:if(w.wrap){for(;M<32;){if(j===0)break e;j--,N|=Q[G++]<<M,M+=8}if(W-=se,R.total_out+=W,w.total+=W,W&&(R.adler=w.check=w.flags?o(w.check,oe,W,q-W):a(w.check,oe,W,q-W)),W=se,(w.flags?N:p(N))!==w.check){R.msg="incorrect data check",w.mode=30;break}M=N=0}w.mode=28;case 28:if(w.wrap&&w.flags){for(;M<32;){if(j===0)break e;j--,N+=Q[G++]<<M,M+=8}if(N!==(4294967295&w.total)){R.msg="incorrect length check",w.mode=30;break}M=N=0}w.mode=29;case 29:I=1;break e;case 30:I=-3;break e;case 31:return-4;case 32:default:return f}return R.next_out=q,R.avail_out=se,R.next_in=G,R.avail_in=j,w.hold=N,w.bits=M,(w.wsize||W!==R.avail_out&&w.mode<30&&(w.mode<27||V!==4))&&J(R,R.output,R.next_out,W-R.avail_out)?(w.mode=31,-4):(K-=R.avail_in,W-=R.avail_out,R.total_in+=K,R.total_out+=W,w.total+=W,w.wrap&&W&&(R.adler=w.check=w.flags?o(w.check,oe,W,R.next_out-W):a(w.check,oe,W,R.next_out-W)),R.data_type=w.bits+(w.last?64:0)+(w.mode===12?128:0)+(w.mode===20||w.mode===15?256:0),(K==0&&W===0||V===4)&&I===y&&(I=-5),I)},s.inflateEnd=function(R){if(!R||!R.state)return f;var V=R.state;return V.window&&(V.window=null),R.state=null,y},s.inflateGetHeader=function(R,V){var w;return R&&R.state&&2&(w=R.state).wrap?((w.head=V).done=!1,y):f},s.inflateSetDictionary=function(R,V){var w,Q=V.length;return R&&R.state?(w=R.state).wrap!==0&&w.mode!==11?f:w.mode===11&&a(1,V,Q,0)!==w.check?-3:J(R,V,Q,Q)?(w.mode=31,-4):(w.havedict=1,y):f},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,s){var i=n("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(d,m,y,f,g,h,_,p){var b,v,S,x,C,z,P,A,U,J=p.bits,R=0,V=0,w=0,Q=0,oe=0,G=0,q=0,j=0,se=0,N=0,M=null,K=0,W=new i.Buf16(16),ee=new i.Buf16(16),ue=null,X=0;for(R=0;R<=15;R++)W[R]=0;for(V=0;V<f;V++)W[m[y+V]]++;for(oe=J,Q=15;1<=Q&&W[Q]===0;Q--);if(Q<oe&&(oe=Q),Q===0)return g[h++]=20971520,g[h++]=20971520,p.bits=1,0;for(w=1;w<Q&&W[w]===0;w++);for(oe<w&&(oe=w),R=j=1;R<=15;R++)if(j<<=1,(j-=W[R])<0)return-1;if(0<j&&(d===0||Q!==1))return-1;for(ee[1]=0,R=1;R<15;R++)ee[R+1]=ee[R]+W[R];for(V=0;V<f;V++)m[y+V]!==0&&(_[ee[m[y+V]]++]=V);if(z=d===0?(M=ue=_,19):d===1?(M=a,K-=257,ue=o,X-=257,256):(M=c,ue=u,-1),R=w,C=h,q=V=N=0,S=-1,x=(se=1<<(G=oe))-1,d===1&&852<se||d===2&&592<se)return 1;for(;;){for(P=R-q,U=_[V]<z?(A=0,_[V]):_[V]>z?(A=ue[X+_[V]],M[K+_[V]]):(A=96,0),b=1<<R-q,w=v=1<<G;g[C+(N>>q)+(v-=b)]=P<<24|A<<16|U|0,v!==0;);for(b=1<<R-1;N&b;)b>>=1;if(b!==0?(N&=b-1,N+=b):N=0,V++,--W[R]==0){if(R===Q)break;R=m[y+_[V]]}if(oe<R&&(N&x)!==S){for(q===0&&(q=oe),C+=w,j=1<<(G=R-q);G+q<Q&&!((j-=W[G+q])<=0);)G++,j<<=1;if(se+=1<<G,d===1&&852<se||d===2&&592<se)return 1;g[S=N&x]=oe<<24|G<<16|C-h|0}}return N!==0&&(g[C+N]=R-q<<24|64<<16|0),p.bits=oe,0}},{"../utils/common":41}],51:[function(n,r,s){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,s){var i=n("../utils/common"),a=0,o=1;function c(E){for(var D=E.length;0<=--D;)E[D]=0}var u=0,d=29,m=256,y=m+1+d,f=30,g=19,h=2*y+1,_=15,p=16,b=7,v=256,S=16,x=17,C=18,z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],P=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],J=new Array(2*(y+2));c(J);var R=new Array(2*f);c(R);var V=new Array(512);c(V);var w=new Array(256);c(w);var Q=new Array(d);c(Q);var oe,G,q,j=new Array(f);function se(E,D,B,H,L){this.static_tree=E,this.extra_bits=D,this.extra_base=B,this.elems=H,this.max_length=L,this.has_stree=E&&E.length}function N(E,D){this.dyn_tree=E,this.max_code=0,this.stat_desc=D}function M(E){return E<256?V[E]:V[256+(E>>>7)]}function K(E,D){E.pending_buf[E.pending++]=255&D,E.pending_buf[E.pending++]=D>>>8&255}function W(E,D,B){E.bi_valid>p-B?(E.bi_buf|=D<<E.bi_valid&65535,K(E,E.bi_buf),E.bi_buf=D>>p-E.bi_valid,E.bi_valid+=B-p):(E.bi_buf|=D<<E.bi_valid&65535,E.bi_valid+=B)}function ee(E,D,B){W(E,B[2*D],B[2*D+1])}function ue(E,D){for(var B=0;B|=1&E,E>>>=1,B<<=1,0<--D;);return B>>>1}function X(E,D,B){var H,L,Y=new Array(_+1),ne=0;for(H=1;H<=_;H++)Y[H]=ne=ne+B[H-1]<<1;for(L=0;L<=D;L++){var Z=E[2*L+1];Z!==0&&(E[2*L]=ue(Y[Z]++,Z))}}function $(E){var D;for(D=0;D<y;D++)E.dyn_ltree[2*D]=0;for(D=0;D<f;D++)E.dyn_dtree[2*D]=0;for(D=0;D<g;D++)E.bl_tree[2*D]=0;E.dyn_ltree[2*v]=1,E.opt_len=E.static_len=0,E.last_lit=E.matches=0}function F(E){8<E.bi_valid?K(E,E.bi_buf):0<E.bi_valid&&(E.pending_buf[E.pending++]=E.bi_buf),E.bi_buf=0,E.bi_valid=0}function te(E,D,B,H){var L=2*D,Y=2*B;return E[L]<E[Y]||E[L]===E[Y]&&H[D]<=H[B]}function ie(E,D,B){for(var H=E.heap[B],L=B<<1;L<=E.heap_len&&(L<E.heap_len&&te(D,E.heap[L+1],E.heap[L],E.depth)&&L++,!te(D,H,E.heap[L],E.depth));)E.heap[B]=E.heap[L],B=L,L<<=1;E.heap[B]=H}function fe(E,D,B){var H,L,Y,ne,Z=0;if(E.last_lit!==0)for(;H=E.pending_buf[E.d_buf+2*Z]<<8|E.pending_buf[E.d_buf+2*Z+1],L=E.pending_buf[E.l_buf+Z],Z++,H===0?ee(E,L,D):(ee(E,(Y=w[L])+m+1,D),(ne=z[Y])!==0&&W(E,L-=Q[Y],ne),ee(E,Y=M(--H),B),(ne=P[Y])!==0&&W(E,H-=j[Y],ne)),Z<E.last_lit;);ee(E,v,D)}function O(E,D){var B,H,L,Y=D.dyn_tree,ne=D.stat_desc.static_tree,Z=D.stat_desc.has_stree,ce=D.stat_desc.elems,de=-1;for(E.heap_len=0,E.heap_max=h,B=0;B<ce;B++)Y[2*B]!==0?(E.heap[++E.heap_len]=de=B,E.depth[B]=0):Y[2*B+1]=0;for(;E.heap_len<2;)Y[2*(L=E.heap[++E.heap_len]=de<2?++de:0)]=1,E.depth[L]=0,E.opt_len--,Z&&(E.static_len-=ne[2*L+1]);for(D.max_code=de,B=E.heap_len>>1;1<=B;B--)ie(E,Y,B);for(L=ce;B=E.heap[1],E.heap[1]=E.heap[E.heap_len--],ie(E,Y,1),H=E.heap[1],E.heap[--E.heap_max]=B,E.heap[--E.heap_max]=H,Y[2*L]=Y[2*B]+Y[2*H],E.depth[L]=(E.depth[B]>=E.depth[H]?E.depth[B]:E.depth[H])+1,Y[2*B+1]=Y[2*H+1]=L,E.heap[1]=L++,ie(E,Y,1),2<=E.heap_len;);E.heap[--E.heap_max]=E.heap[1],function(he,ge){var Pe,Ne,rt,ze,dt,Zt,Me=ge.dyn_tree,Qe=ge.max_code,Mn=ge.stat_desc.static_tree,va=ge.stat_desc.has_stree,ya=ge.stat_desc.extra_bits,Ls=ge.stat_desc.extra_base,hn=ge.stat_desc.max_length,$n=0;for(ze=0;ze<=_;ze++)he.bl_count[ze]=0;for(Me[2*he.heap[he.heap_max]+1]=0,Pe=he.heap_max+1;Pe<h;Pe++)hn<(ze=Me[2*Me[2*(Ne=he.heap[Pe])+1]+1]+1)&&(ze=hn,$n++),Me[2*Ne+1]=ze,Qe<Ne||(he.bl_count[ze]++,dt=0,Ls<=Ne&&(dt=ya[Ne-Ls]),Zt=Me[2*Ne],he.opt_len+=Zt*(ze+dt),va&&(he.static_len+=Zt*(Mn[2*Ne+1]+dt)));if($n!==0){do{for(ze=hn-1;he.bl_count[ze]===0;)ze--;he.bl_count[ze]--,he.bl_count[ze+1]+=2,he.bl_count[hn]--,$n-=2}while(0<$n);for(ze=hn;ze!==0;ze--)for(Ne=he.bl_count[ze];Ne!==0;)Qe<(rt=he.heap[--Pe])||(Me[2*rt+1]!==ze&&(he.opt_len+=(ze-Me[2*rt+1])*Me[2*rt],Me[2*rt+1]=ze),Ne--)}}(E,D),X(Y,de,E.bl_count)}function l(E,D,B){var H,L,Y=-1,ne=D[1],Z=0,ce=7,de=4;for(ne===0&&(ce=138,de=3),D[2*(B+1)+1]=65535,H=0;H<=B;H++)L=ne,ne=D[2*(H+1)+1],++Z<ce&&L===ne||(Z<de?E.bl_tree[2*L]+=Z:L!==0?(L!==Y&&E.bl_tree[2*L]++,E.bl_tree[2*S]++):Z<=10?E.bl_tree[2*x]++:E.bl_tree[2*C]++,Y=L,de=(Z=0)===ne?(ce=138,3):L===ne?(ce=6,3):(ce=7,4))}function I(E,D,B){var H,L,Y=-1,ne=D[1],Z=0,ce=7,de=4;for(ne===0&&(ce=138,de=3),H=0;H<=B;H++)if(L=ne,ne=D[2*(H+1)+1],!(++Z<ce&&L===ne)){if(Z<de)for(;ee(E,L,E.bl_tree),--Z!=0;);else L!==0?(L!==Y&&(ee(E,L,E.bl_tree),Z--),ee(E,S,E.bl_tree),W(E,Z-3,2)):Z<=10?(ee(E,x,E.bl_tree),W(E,Z-3,3)):(ee(E,C,E.bl_tree),W(E,Z-11,7));Y=L,de=(Z=0)===ne?(ce=138,3):L===ne?(ce=6,3):(ce=7,4)}}c(j);var T=!1;function k(E,D,B,H){W(E,(u<<1)+(H?1:0),3),function(L,Y,ne,Z){F(L),K(L,ne),K(L,~ne),i.arraySet(L.pending_buf,L.window,Y,ne,L.pending),L.pending+=ne}(E,D,B)}s._tr_init=function(E){T||(function(){var D,B,H,L,Y,ne=new Array(_+1);for(L=H=0;L<d-1;L++)for(Q[L]=H,D=0;D<1<<z[L];D++)w[H++]=L;for(w[H-1]=L,L=Y=0;L<16;L++)for(j[L]=Y,D=0;D<1<<P[L];D++)V[Y++]=L;for(Y>>=7;L<f;L++)for(j[L]=Y<<7,D=0;D<1<<P[L]-7;D++)V[256+Y++]=L;for(B=0;B<=_;B++)ne[B]=0;for(D=0;D<=143;)J[2*D+1]=8,D++,ne[8]++;for(;D<=255;)J[2*D+1]=9,D++,ne[9]++;for(;D<=279;)J[2*D+1]=7,D++,ne[7]++;for(;D<=287;)J[2*D+1]=8,D++,ne[8]++;for(X(J,y+1,ne),D=0;D<f;D++)R[2*D+1]=5,R[2*D]=ue(D,5);oe=new se(J,z,m+1,y,_),G=new se(R,P,0,f,_),q=new se(new Array(0),A,0,g,b)}(),T=!0),E.l_desc=new N(E.dyn_ltree,oe),E.d_desc=new N(E.dyn_dtree,G),E.bl_desc=new N(E.bl_tree,q),E.bi_buf=0,E.bi_valid=0,$(E)},s._tr_stored_block=k,s._tr_flush_block=function(E,D,B,H){var L,Y,ne=0;0<E.level?(E.strm.data_type===2&&(E.strm.data_type=function(Z){var ce,de=4093624447;for(ce=0;ce<=31;ce++,de>>>=1)if(1&de&&Z.dyn_ltree[2*ce]!==0)return a;if(Z.dyn_ltree[18]!==0||Z.dyn_ltree[20]!==0||Z.dyn_ltree[26]!==0)return o;for(ce=32;ce<m;ce++)if(Z.dyn_ltree[2*ce]!==0)return o;return a}(E)),O(E,E.l_desc),O(E,E.d_desc),ne=function(Z){var ce;for(l(Z,Z.dyn_ltree,Z.l_desc.max_code),l(Z,Z.dyn_dtree,Z.d_desc.max_code),O(Z,Z.bl_desc),ce=g-1;3<=ce&&Z.bl_tree[2*U[ce]+1]===0;ce--);return Z.opt_len+=3*(ce+1)+5+5+4,ce}(E),L=E.opt_len+3+7>>>3,(Y=E.static_len+3+7>>>3)<=L&&(L=Y)):L=Y=B+5,B+4<=L&&D!==-1?k(E,D,B,H):E.strategy===4||Y===L?(W(E,2+(H?1:0),3),fe(E,J,R)):(W(E,4+(H?1:0),3),function(Z,ce,de,he){var ge;for(W(Z,ce-257,5),W(Z,de-1,5),W(Z,he-4,4),ge=0;ge<he;ge++)W(Z,Z.bl_tree[2*U[ge]+1],3);I(Z,Z.dyn_ltree,ce-1),I(Z,Z.dyn_dtree,de-1)}(E,E.l_desc.max_code+1,E.d_desc.max_code+1,ne+1),fe(E,E.dyn_ltree,E.dyn_dtree)),$(E),H&&F(E)},s._tr_tally=function(E,D,B){return E.pending_buf[E.d_buf+2*E.last_lit]=D>>>8&255,E.pending_buf[E.d_buf+2*E.last_lit+1]=255&D,E.pending_buf[E.l_buf+E.last_lit]=255&B,E.last_lit++,D===0?E.dyn_ltree[2*B]++:(E.matches++,D--,E.dyn_ltree[2*(w[B]+m+1)]++,E.dyn_dtree[2*M(D)]++),E.last_lit===E.lit_bufsize-1},s._tr_align=function(E){W(E,2,3),ee(E,v,J),function(D){D.bi_valid===16?(K(D,D.bi_buf),D.bi_buf=0,D.bi_valid=0):8<=D.bi_valid&&(D.pending_buf[D.pending++]=255&D.bi_buf,D.bi_buf>>=8,D.bi_valid-=8)}(E)}},{"../utils/common":41}],53:[function(n,r,s){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,s){(function(i){(function(a,o){if(!a.setImmediate){var c,u,d,m,y=1,f={},g=!1,h=a.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(a);_=_&&_.setTimeout?_:a,c={}.toString.call(a.process)==="[object process]"?function(S){process.nextTick(function(){b(S)})}:function(){if(a.postMessage&&!a.importScripts){var S=!0,x=a.onmessage;return a.onmessage=function(){S=!1},a.postMessage("","*"),a.onmessage=x,S}}()?(m="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",v,!1):a.attachEvent("onmessage",v),function(S){a.postMessage(m+S,"*")}):a.MessageChannel?((d=new MessageChannel).port1.onmessage=function(S){b(S.data)},function(S){d.port2.postMessage(S)}):h&&"onreadystatechange"in h.createElement("script")?(u=h.documentElement,function(S){var x=h.createElement("script");x.onreadystatechange=function(){b(S),x.onreadystatechange=null,u.removeChild(x),x=null},u.appendChild(x)}):function(S){setTimeout(b,0,S)},_.setImmediate=function(S){typeof S!="function"&&(S=new Function(""+S));for(var x=new Array(arguments.length-1),C=0;C<x.length;C++)x[C]=arguments[C+1];var z={callback:S,args:x};return f[y]=z,c(y),y++},_.clearImmediate=p}function p(S){delete f[S]}function b(S){if(g)setTimeout(b,0,S);else{var x=f[S];if(x){g=!0;try{(function(C){var z=C.callback,P=C.args;switch(P.length){case 0:z();break;case 1:z(P[0]);break;case 2:z(P[0],P[1]);break;case 3:z(P[0],P[1],P[2]);break;default:z.apply(o,P)}})(x)}finally{p(S),g=!1}}}}function v(S){S.source===a&&typeof S.data=="string"&&S.data.indexOf(m)===0&&b(+S.data.slice(m.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof Vn<"u"?Vn:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(pa);var Of=pa.exports;const Cf=ha(Of);class If{constructor(t){Ee(this,"nodeList");Ee(this,"title","");Ee(this,"downTotal",0);Ee(this,"downFile",0);Ee(this,"downCur",0);Ee(this,"fileMap",new Map);Ee(this,"zipRoot");this.nodeList=t,this.title=this.buildTitle()}async prepare(){this.nodeList=await this.getFullSubList(),console.info(this.nodeList)}buildTitle(){let t="";if(this.nodeList.length==1)t=this.nodeList[0].title??"";else{let n=[];for(let r=0;r<this.nodeList.length&&(n.push(this.nodeList[r].title??""),!(r>3));r++);t=n.join("，")}return t.length>150&&(t=t.substring(0,150)+"…"),t+=".zip",t}async getFullSubList(){const t=new Set;this.nodeList.forEach(r=>{r.type==="directory"&&r.id&&t.add(r.id)});const n=Array.from(t);for(let r=0;r<n.length;r++){const s=n[r],i=await Se("file/get",Object.assign({mode:"directory",cascade_dir:"1",id_dir:s.toString(),with:"file"}));i&&this.nodeList.push(...i.list)}return this.nodeList.sort((r,s)=>{let i=r.type==="directory"?"0":"1";r.node_id_list&&r.node_id_list.forEach(o=>i+=o.toString().padStart(15,"0"));let a=s.type==="directory"?"0":"1";return s.node_id_list&&s.node_id_list.forEach(o=>a+=o.toString().padStart(15,"0")),i>a?1:-1}),this.nodeList.forEach(r=>{var s,i;return this.downTotal+=((i=(s=r.file_index)==null?void 0:s.raw)==null?void 0:i.size)??0}),this.nodeList}async download(){for(let t=0;t<this.nodeList.length;t++){const n=this.nodeList[t];if(!n.id||!n.type==="directory"||!n.file_index.raw)continue;const r=n.file_index.raw;if(!r.path)continue;const s=r.path+"?filename="+n.title,i=await this.downloadFile(s,this.downloadProcess.bind(this));this.fileMap.set(n.id,i),this.downCur=0,this.downFile+=r.size}}downloadProcess(t){this.downCur=t.loaded}downloadFile(t,n){return new Promise(r=>{const s=new XMLHttpRequest;s.withCredentials=!0,s.responseType="arraybuffer",s.onreadystatechange=function(){if(s.readyState===4){if(s.status>=400)return ns(`${s.status}:${s.statusText}`);r(s.response)}},n&&(s.onprogress=n),s.open("GET",t),s.send()})}async build(){this.zipRoot=new Cf;const t=new Map;this.nodeList.forEach(n=>{if(!n.id)return;let r=n.title??"";const s=t.get(n.id_parent??0);if(s&&(r=s[0]+"/"+r),n.type!="directory"){const i=this.fileMap.get(n.id);if(!i)return;t.set(n.id,[r,this.zipRoot.file(r,i)])}else t.set(n.id,[r,this.zipRoot.folder(r)])})}complete(){return new Promise(t=>{var n;(n=this.zipRoot)==null||n.generateAsync({type:"blob"}).then(r=>{let s=document.createElement("a");s.style.display="none",s.href=URL.createObjectURL(r),s.target="_blank",s.setAttribute("download",this.title),s.click(),t(!0)})})}}const Br=["scroll_log","image_rotate"];let Yn=null,zt=null;function Af(){Yn=window.indexedDB.open(De.indexedDBName,4),Yn.onupgradeneeded=Df,Yn.onerror=e=>{},Yn.onsuccess=e=>{zt=e.target.result}}function Df(e){return console.info("onupgradeneeded",e),new Promise(t=>{zt=e.target.result,Lf(zt);let n=0;for(let r=0;r<Br.length;r++){const s=Br[r],i=zt.createObjectStore(s,{keyPath:"key"});i.transaction.oncomplete=a=>{n+=1,n==Br.length-1&&t()}}})}function Lf(e){if(!e)return;const t=e==null?void 0:e.objectStoreNames;if(t)for(let n=0;n<t.length;n++)e.deleteObjectStore(t[n])}function Cs(e,t){return new Promise(n=>{if(!zt)return n(null);const r=zt.transaction([e],"readonly").objectStore(e).get(t);r.onerror=s=>n(null),r.onsuccess=s=>s.target.result?n(s.target.result.val):n(null)})}function Is(e,t,n){return new Promise(r=>{if(!zt)return r(null);const s=zt.transaction([e],"readwrite").objectStore(e).put({key:t,val:n});s.onerror=i=>r(null),s.onsuccess=i=>r(null)})}var ma={};Object.defineProperty(ma,"__esModule",{value:!0});function Rf(e){e===void 0&&(e={});var t=/^0/,n=/\s+/g,r=/^\s+|\s+$/g,s=/[^\x00-\x80]/,i=/^0x[0-9a-f]+$/i,a=/(0x[\da-fA-F]+|(^[\+\-]?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?(?=\D|\s|$))|\d+)/g,o=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,c=String.prototype.toLocaleLowerCase||String.prototype.toLowerCase,u=e.desc?-1:1,d=-u,m=e.insensitive?function(g){return c.call(""+g).replace(r,"")}:function(g){return(""+g).replace(r,"")};function y(g){return g.replace(a,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0")}function f(g,h){return(!g.match(t)||h===1)&&parseFloat(g)||g.replace(n," ").replace(r,"")||0}return function(g,h){var _=m(g),p=m(h);if(!_&&!p)return 0;if(!_&&p)return d;if(_&&!p)return u;var b=y(_),v=y(p),S=_.match(i),x=p.match(i),C=S&&x?parseInt(S[0],16):b.length!==1&&Date.parse(_),z=S&&x?parseInt(x[0],16):C&&p.match(o)&&Date.parse(p)||null;if(z){if(C===z)return 0;if(C<z)return d;if(C>z)return u}for(var P=b.length,A=v.length,U=0,J=Math.max(P,A);U<J;U+=1){var R=f(b[U]||"",P),V=f(v[U]||"",A);if(isNaN(R)!==isNaN(V))return isNaN(R)?u:d;if(s.test(R+V)&&R.localeCompare){var w=R.localeCompare(V);if(w>0)return u;if(w<0)return d;if(U===J-1)return 0}if(R<V)return d;if(R>V)return u;if(""+R<""+V)return d;if(""+R>""+V)return u}return 0}}var Tf=ma.default=Rf;let ve;class hp{constructor(t){Ee(this,"nodeList",pe([]));Ee(this,"getList");Ee(this,"route");Ee(this,"router");Ee(this,"contentDOM");Ee(this,"emitGo");Ee(this,"modalStore");Ee(this,"localConfigure");Ee(this,"contextStore");Ee(this,"mode",pe(""));Ee(this,"modeKey","");Ee(this,"sortVal",pe(""));Ee(this,"selecting",!1);Ee(this,"selectingMovEvtCount",0);Ee(this,"selectingOffset",[[0,0],[0,0]]);Ee(this,"preSelectedNodeIndexSet",new Set);Ee(this,"selectingKeyDef","");Ee(this,"showSelectionOp",pe(!1));Ee(this,"lastSelectIndex",-1);Ee(this,"reloadOffset_timer",0);Ee(this,"reloadOffset_count",0);Ee(this,"startScroll",!1);console.info(t),this.contentDOM=t.contentDOM,this.getList=t.getList,this.route=t.route,this.router=t.router,this.emitGo=t.emitGo,this.modalStore=dn(),this.localConfigure=Or(),this.contextStore=da(),this.mode.value=this.localConfigure.get("file_view_mode")??"detail",this.modeKey=this.localConfigure.listen("file_view_mode",n=>this.mode.value=n),this.sortVal=pe(this.localConfigure.get("file_view_sort")??"name_asc"),this.contextMenuEvt=this.contextMenuEvt.bind(this),this.mouseDownEvt=this.mouseDownEvt.bind(this),this.mouseMoveEvt=this.mouseMoveEvt.bind(this),this.mouseUpEvt=this.mouseUpEvt.bind(this),this.keymap=this.keymap.bind(this),this.reloadOffset=this.reloadOffset.bind(this),this.scrollEvt=this.scrollEvt.bind(this),addEventListener("contextmenu",this.contextMenuEvt),addEventListener("pointerdown",this.mouseDownEvt),addEventListener("pointermove",this.mouseMoveEvt),addEventListener("pointerup",this.mouseUpEvt),addEventListener("keydown",this.keymap),addEventListener("resize",this.reloadOffset),this.contentDOM.addEventListener("scroll",this.scrollEvt),ve=this}destructor(){console.info("destructor loaded"),this.localConfigure.release("file_view_mode",this.modeKey),removeEventListener("contextmenu",this.contextMenuEvt),removeEventListener("mousedown",this.mouseDownEvt),removeEventListener("mousemove",this.mouseMoveEvt),removeEventListener("mouseup",this.mouseUpEvt),removeEventListener("keydown",this.keymap),removeEventListener("resize",this.reloadOffset),this.contentDOM&&this.contentDOM.removeEventListener("scroll",this.scrollEvt),ve=null}setList(t){this.nodeList.value=t,setTimeout(()=>{this.reloadOffset(void 0)},De.timeouts.offsetDebounce)}deleteFromList(t){const n=[];this.nodeList.value.forEach(r=>n.push(r)),t.forEach(r=>{for(let s=0;s<n.length;s++)if(r===n[s].id){n.splice(s,1);break}}),this.getList(n)}inDetailView(t){let n=!1,r=t.target;for(;r;){if(r.contentEditable==="true"){n=!1;break}if(r.classList.contains("rater")){n=!1;break}if(r.classList.contains("list_fav")){n=!0;break}if(r.classList.contains("view_fav")){n=!1;break}if(r.classList.contains("content_meta")){n=!1;break}if(r.classList.contains("fr_content")){n=!0;break}if(!r.parentElement)break;r=r.parentElement}return n}inTaggingDOM(t){let n=!1,r=t.target;for(;r;){if(r.classList.contains("content_detail"))return!1;if(r.classList.contains("tag_list")){n=!0;break}if(!r.parentElement)break;r=r.parentElement}return n}mouseDownEvt(t){var a,o,c,u;if(!this.inDetailView(t)||t.button===1)return;if(this.selectingOffset[0]=[t.x+(((a=this.contentDOM)==null?void 0:a.scrollLeft)??0),t.y+(((o=this.contentDOM)==null?void 0:o.scrollTop)??0)],this.selectingOffset[1]=[t.x+(((c=this.contentDOM)==null?void 0:c.scrollLeft)??0),t.y+(((u=this.contentDOM)==null?void 0:u.scrollTop)??0)],this.preSelectedNodeIndexSet.clear(),t.preventDefault(),t.button!==0)return this.rightMouseDownEvt(t);this.nodeList.value.forEach((d,m)=>{d._selected&&this.preSelectedNodeIndexSet.add(m)}),this.selecting=!0,this.selectingMovEvtCount=0;const n=this.getSelection(this.selectingOffset),r=[];t.ctrlKey&&r.push("ctrl"),t.shiftKey&&r.push("shift"),this.selectingKeyDef=r.join("_");let s=-1;const i=Array.from(n);switch(i.length&&(s=i.pop()??-1),this.selectingKeyDef){case"shift":this.preSelectedNodeIndexSet.clear();case"ctrl_shift":if(s==-1||this.lastSelectIndex==-1)break;const d=Math.min(s,this.lastSelectIndex),m=Math.max(s,this.lastSelectIndex);for(let y=d;y<=m;y++)n.has(y)||this.preSelectedNodeIndexSet.add(y);break;default:this.preSelectedNodeIndexSet.clear();break;case"ctrl":break}this.nodeList.value.forEach((d,m)=>{let y=0;this.preSelectedNodeIndexSet.has(m)&&(y+=1),n.has(m)&&(y+=1),d._selected=y===1}),this.lastSelectIndex=s,this.showSelectionOp.value=this.preSelectedNodeIndexSet.size+n.size>0}rightMouseDownEvt(t){const n=this.getSelection(this.selectingOffset);let r=!1;const s=new Set;this.nodeList.value.forEach((i,a)=>{i._selected&&(s.add(a),n.has(a)&&(r=!0))}),r?this.preSelectedNodeIndexSet=s:this.preSelectedNodeIndexSet=n,this.nodeList.value.forEach((i,a)=>{i._selected=this.preSelectedNodeIndexSet.has(a)})}mouseMoveEvt(t){var s,i;if(!this.selecting||(this.selectingMovEvtCount+=1,this.selectingMovEvtCount<10))return;t.preventDefault(),this.selectingOffset[1]=[t.x+(((s=this.contentDOM)==null?void 0:s.scrollLeft)??0),t.y+(((i=this.contentDOM)==null?void 0:i.scrollTop)??0)];const n=this.getSelection(this.selectingOffset);this.nodeList.value.forEach((a,o)=>{let c=0;this.preSelectedNodeIndexSet.has(o)&&(c+=1),n.has(o)&&(c+=1),a._selected=c===1});const r=this.getSelection([this.selectingOffset[1],this.selectingOffset[1]]);r.size&&(this.lastSelectIndex=Array.from(r).pop()??-1),this.showSelectionOp.value=this.preSelectedNodeIndexSet.size+n.size>0}mouseUpEvt(t){this.selecting&&(t.preventDefault(),setTimeout(()=>{this.selecting=!1,this.selectingMovEvtCount=0,this.selectingOffset=[[0,0],[0,0]],this.preSelectedNodeIndexSet.clear(),this.selectingKeyDef=""},De.timeouts.selectEvt))}async contextMenuEvt(t){if(!this.inDetailView(t))return;let n=this.route.name==="Recycle",r=this.getSelected();if(!r.nodeLs||!r.nodeLs.length)return;let s=r.nodeLs.length!==1;const i=r.nodeLs,a=r.idSet;let o=this.localConfigure.get("file_view_mode")??"detail";this.route.name!=="Directory"&&(o="detail");let c=o==="detail";this.route.name==="Recycle"&&(c=!1),t.preventDefault(),t.stopPropagation(),this.contextStore.trigger([{title:"Open",auth:"guest",method:async u=>{console.info("Open",u),s?await be.op_bath_browser(a,i):this.emitGo("node",i[0].id)}},{title:"Download",auth:s||i[0].type=="directory"?"none":"guest",method:u=>{var g,h;console.info("Download",u);const d=i[0];let m=(h=(g=d.file_index)==null?void 0:g.raw)==null?void 0:h.path,y=(d==null?void 0:d.title)??"";if(!m)return;let f=document.createElement("a");f.style.display="none",f.href=m+"?filename="+y,f.target="_blank",f.setAttribute("download",y),f.click()}},{title:"Download Selected",auth:s||i[0].type=="directory"?"guest":"none",method:async u=>{if(console.info("DownloadSelected",u),console.info(this,i),!ve||!ve.modalStore)return;const d=new If(i),m=pe("downloading 0/0 (0%)"),y=ve.modalStore.set({title:d.title,alpha:!1,key:"",single:!1,w:400,h:150,minW:400,minH:150,allow_resize:!0,allow_move:!0,allow_fullscreen:!1,auto_focus:!0,text:m});await d.prepare();const f=setInterval(()=>{const g=d.downFile+d.downCur,h=d.downTotal,_=Math.round(1e4*g/h)/100+"%";y.content.text.value=`downloading ${g}/${h} (${_})`},500);await d.download(),await d.build(),await d.complete(),clearInterval(f),ve.modalStore.close(y.nid)}},{title:"Rename",auth:c?"user":"none",method:async u=>{console.info("Rename",u),s?await be.op_bath_rename(a,i):await be.op_rename(i[0])}},{title:"Move",auth:c?"user":"none",method:async u=>{console.info("Move",u),s?await be.op_bath_move(a,i):await be.op_move(i[0])}},{title:"Delete",auth:n?"none":"user",method:async u=>{console.info("Delete",u),s?await be.op_bath_delete(a,i):await be.op_delete(i[0])}},{title:"Recover",auth:n?"user":"none",method:async u=>{console.info("Recover",u),s?await be.op_bath_delete(a,i,!0):await be.op_delete(i[0],!0)}},{title:"Delete Forever",auth:n?"user":"none",method:async u=>{console.info("Delete Forever",u),s?await be.op_bath_delete_forever(a,i):await be.op_delete_forever(i[0])}},{title:"Favourite",auth:c?"user":"none",method:async u=>{console.info("Favourite",u),s?await be.op_bath_favourite(a,i):await be.op_toggle_favourite(i[0])}},{title:"Extra",auth:"guest",method:u=>{console.info("Extra",u)},child:[{title:"Tagging",auth:c?"user":"none",method:async u=>{console.info("Tagging",u),i.forEach(d=>{be.op_tag(d)})}},{title:"Set Cover",auth:s?"none":"user",method:async u=>{console.info("Set Cover",u),await be.op_set_cover(i[0])}},{title:"Import EHT",auth:"admin",method:async u=>{console.info("Import EHT",u),await be.op_imp_tag_eh(Array.from(a))}},{title:"Cascade Tag",auth:"user",method:async u=>{console.info("Cascade Tag",u),await be.op_cascade_tag(Array.from(a))}}]},{title:"Admin",auth:"admin",method:u=>{console.info("Extra",u)},child:[{title:"ReBuild",auth:"admin",method:async u=>{console.info("ReBuild",u),await be.op_rebuild(Array.from(a))}},{title:"ReCheck",auth:s?"none":"admin",method:async u=>{console.info("ReCheck",u),await be.op_recheck(Array.from(a))}},{title:"RM RAW",auth:"admin",method:async u=>{console.info("RMRAW",u),await be.op_rm_raw(Array.from(a))}}]}],t)}getSelection(t){let n=t[0][0]>t[1][0]?t[1][0]:t[0][0],r=t[0][1]>t[1][1]?t[1][1]:t[0][1],s=t[0][0]<t[1][0]?t[1][0]:t[0][0],i=t[0][1]<t[1][1]?t[1][1]:t[0][1];const a=new Set;return this.nodeList.value.forEach((o,c)=>{if(!o._offsets)return;let u=o==null?void 0:o._offsets[0],d=o==null?void 0:o._offsets[1],m=o==null?void 0:o._offsets[2],y=o==null?void 0:o._offsets[3],f=u>=n&&u<=s||m>=n&&m<=s||u<=s&&m>=n,g=d>=r&&d<=i||y>=r&&y<=i||d<=i&&y>=r;!f||!g||a.add(c)}),a}clearSelect(t){t.target.classList.contains("content_detail")&&(this.nodeList.value.forEach(n=>{n._selected=!1}),this.showSelectionOp.value=!1)}async bathOp(t){let{idSet:n,nodeLs:r}=this.getSelected();if(n.size)switch(t){case"rename":await be.op_bath_rename(n,r);break;case"move":await be.op_bath_move(n,r);break;case"delete":await be.op_bath_delete(n,r);break;case"delete_forever":await be.op_bath_delete_forever(n,r);break;case"browser":await be.op_bath_browser(n,r);break;case"favourite":await be.op_bath_favourite(n,r);break}}getSelected(){const t=[],n=new Set;return this.nodeList.value.forEach(r=>{r._selected&&(t.push(r),n.add((r==null?void 0:r.id)??0))}),{nodeLs:t,idSet:n}}arrowSelection(t){if(!this.nodeList.value.length)return;let n=this.lastSelectIndex;if(n===-1){const u=this.getSelected();u.idSet.size?n=Array.from(u.idSet).pop()??0:n=0}this.localConfigure.get("file_view_mode"),this.route.name;const r=this.nodeList.value[n];if(!r)return;r._offsets||(r._offsets=[]);const s=r._offsets[2]-r._offsets[0],i=this.contentDOM.offsetWidth,a=Math.floor(i/s);let o=n;switch(t.key){case"ArrowRight":o+=1;break;case"ArrowLeft":o-=1;break;case"ArrowUp":o-=1*a;break;case"ArrowDown":o+=1*a;break}let c=!1;(t.ctrlKey||t.shiftKey)&&(c=!0),o<0&&(o=0),o>this.nodeList.value.length-1&&(o=this.nodeList.value.length-1),this.lastSelectIndex=o,this.nodeList.value.forEach((u,d)=>{if(o===d)return u._selected=!0;u._selected&&!c&&(u._selected=!1)})}setMode(t){this.localConfigure.set("file_view_mode",t),this.setList(this.nodeList.value)}setSort(t){console.info("setSort",t),this.localConfigure.set("file_view_sort",t);const n=this.nodeList.value;this.nodeList.value=[],setTimeout(()=>{this.nodeList.value=this.sortList(n,this.sortVal.value),this.setList(this.nodeList.value)},De.timeouts.sort)}sortList(t,n){return t=_a(t,n),t}async keymap(t){let n;const r=t.target;switch(t.key){case"F2":if(Rt(r)||gn(r))return;n=this.getSelected(),await be.op_bath_rename(n.idSet,n.nodeLs);break;case"Delete":if(Rt(r)||gn(r))return;n=this.getSelected(),this.route.name==="Recycle"?await be.op_bath_delete_forever(n.idSet,n.nodeLs):await be.op_bath_delete(n.idSet,n.nodeLs);break;case"NumpadEnter":case"Enter":if(Rt(r)||gn(r)||(n=this.getSelected(),!n.idSet.size))return;if(console.info(n.idSet.size),t.altKey&&n.idSet.size==1)return this.emitGo("node",Array.from(n.idSet)[0]);await be.op_bath_browser(n.idSet,n.nodeLs);break;case"ArrowRight":case"ArrowLeft":case"ArrowUp":case"ArrowDown":return Rt(r)||gn(r)?void 0:this.arrowSelection(t)}}reloadOffset(t){if(this.reloadOffset_count>100)return;let n=!0;if(this.nodeList.value.forEach(r=>{r._dom||(n=!1)}),clearTimeout(this.reloadOffset_timer),!n){this.reloadOffset_timer=setTimeout(()=>{this.reloadOffset_count+=1,this.reloadOffset(t)},De.timeouts.offsetDebounce);return}this.nodeList.value.forEach(r=>{if(!r._dom)return;const s=r._dom;let i=0,a=0,o=0,c=0;i=Te.nodeOffsetX(s),a=Te.nodeOffsetY(s),o=i+s.offsetWidth,c=a+s.offsetHeight,r._offsets=[i,a,o,c]}),this.scrollEvt(t)}go(t){const n=Object.assign({id_dir:"",id_tag:""},t);this.router.push({path:"/",query:n})}scrollEvt(t){Te.debounce(()=>{this.saveScroll(),this.reloadLazyLoad()},De.timeouts.scrollEvt,"debounce_scroll_view")}saveScroll(){const t=this.route.query??{},n=[this.route.path,t.mode?t.mode:"",t.pid?t.pid:"",t.id?t.id:"",t.id?t.id:"",t.tag_id?t.tag_id:""].join(":"),r=[this.contentDOM.scrollTop,this.contentDOM.scrollLeft];!r[0]&&!r[1]||Te.debounce(()=>{Is("scroll_log",n,r)},De.timeouts.scrollSave,"debounce_scroll_save")}async reloadScroll(){const t=this.route.query??{},n=[this.route.path,t.mode?t.mode:"",t.pid?t.pid:"",t.id?t.id:"",t.id?t.id:"",t.tag_id?t.tag_id:""].join(":"),r=await Cs("scroll_log",n);r&&(this.contentDOM.scrollTop=r[0]??0,this.contentDOM.scrollLeft=r[1]??0)}reloadLazyLoad(){if(!this.contentDOM)return;const t=this.contentDOM,n=Te.nodeOffsetY(t),r=t.scrollTop+n,s=r+t.clientHeight+n;this.nodeList.value.forEach(i=>{let a=!0,o=i._offsets;o[1]>s&&(a=!1),o[3]<r&&(a=!1),i._in_screen=a})}}class be{static async op_download(t){var r,s;let n=(s=(r=t.file_index)==null?void 0:r.raw)==null?void 0:s.path;n&&window.open(`${n}?filename=${t.title}`)}static async op_rename(t){if(t._renaming){const n=new FormData;n.set("id",`${t.id}`),n.set("title",t.title??""),n.set("description",t.description??""),await Se("file/mod",n),ve&&ve.emitGo("reload")}t._renaming=!t._renaming,setTimeout(()=>{let n=document.body.querySelector('[contenteditable="true"]');n&&n.focus()},50)}static async op_bath_rename(t,n){ve&&ve.modalStore.set({title:"bath rename",alpha:!1,key:"",single:!1,w:400,h:275,minW:400,minH:275,allow_resize:!0,allow_move:!0,allow_fullscreen:!1,auto_focus:!0,component:[{componentName:"renameUtil",data:{node_list:n,callback:()=>{ve&&ve.getList()}}}]})}static async op_move(t){ve&&ve.modalStore.set({title:`locator | move ${t.title} to:`,alpha:!1,key:"",single:!1,w:400,h:60,minW:400,minH:60,allow_resize:!0,allow_move:!0,allow_fullscreen:!1,auto_focus:!0,component:[{componentName:"locator",data:{query:{type:"directory"},call:async n=>{const r=new FormData;r.set("id_node",`${t.id}`),r.set("id_target",`${n.id}`),await Se("file/mov",r),ve&&ve.emitGo("reload")}}}]})}static async op_bath_move(t,n){ve&&ve.modalStore.set({title:`locator | move ${t.size} files to:`,alpha:!1,key:"",single:!1,w:400,h:60,minW:400,minH:60,allow_resize:!0,allow_move:!0,allow_fullscreen:!1,auto_focus:!0,component:[{componentName:"locator",data:{query:{type:"directory"},call:async r=>{const s={id_list:Array.from(t).join(","),id_parent:`${r.id}`},i=await Se("file/bath_move",s);ve&&ve.getList()}}}]})}static async op_delete(t,n=!1){const r=new FormData;r.set("id",`${t.id}`);const s=await Se("file/delete",r);return console.info(ve),ve&&t.id&&ve.deleteFromList([t.id]),s}static async op_bath_delete(t,n,r=!1,s){ve&&ve.modalStore.set({title:`confirm to ${r?"recover":"delete"} ${t.size} files`,alpha:!1,key:"",single:!1,w:400,h:100,minW:400,minH:100,allow_resize:!1,allow_move:!0,allow_fullscreen:!1,auto_focus:!0,text:"conform to "+(r?"recover":"delete"),callback:{confirm:async i=>{const a=Array.from(t),o={id_list:a.join(",")},c=await Se("file/bath_delete",o);ve&&ve.deleteFromList(a),s&&s()}}})}static async op_delete_forever(t){const n=new FormData;n.set("id",`${t.id}`);const r=await Se("file/delete_forever",n);return ve&&t.id&&ve.deleteFromList([t.id]),r}static async op_bath_delete_forever(t,n){ve&&ve.modalStore.set({title:`confirm to delete ${t.size} files forever`,alpha:!1,key:"",single:!1,w:400,h:100,minW:400,minH:100,allow_resize:!1,allow_move:!0,allow_fullscreen:!1,auto_focus:!0,text:"conform to delete forever",callback:{confirm:async r=>{const s=Array.from(t),i={id_list:s.join(",")},a=await Se("file/bath_delete_forever",i);ve&&ve.deleteFromList(s)}}})}static async op_toggle_favourite(t){const n=await Se("favourite_group/get",{}),r={};n&&n.forEach(s=>{s.auto||(r[s.id??0]=s.title??"")}),ve&&ve.modalStore.set({title:"select fav group:",alpha:!1,key:"",single:!1,w:400,h:150,minW:400,minH:150,allow_resize:!0,allow_move:!0,allow_fullscreen:!1,auto_focus:!0,form:[{type:"checkbox",label:"attach to",key:"target_group",value:t.list_fav,options:r}],callback:{submit:async function(s){const a=s.content.form[0].value.join(",");await Se("favourite/attach",{id_node:t.id,list_group:a}),location.reload()}}})}static async op_bath_favourite(t,n){const r=await Se("favourite_group/get",{}),s={};r&&r.forEach(i=>{i.auto||(s[i.id??0]=i.title??"")}),ve&&ve.modalStore.set({title:"select fav group:",alpha:!1,key:"",single:!1,w:400,h:150,minW:400,minH:150,allow_resize:!0,allow_move:!0,allow_fullscreen:!1,auto_focus:!0,form:[{type:"checkbox",label:"attach to:",key:"target_group",value:[],options:s}],callback:{submit:async function(i){const a=i.content.form[0].value.join(",");await Se("favourite/bath_attach",{node_id_list:Array.from(t),list_group:a})}}})}static async op_bath_browser(t,n){let r=Array.from(t),s={};s.with="crumb,file",r.length==1?(s.mode="directory",s.id_dir=`${r[0]}`):(s.mode="id_iterate",s.keyword=r.join(",")),s.cascade_dir="0",Pf(s,r[0])}static async op_tag(t){if(t._tagging){const n=new Set;if(t.tag)for(let s=0;s<t.tag.length;s++)for(let i=0;i<t.tag[s].sub.length;i++){const a=t.tag[s].sub[i].id;a&&n.add(a)}const r=new FormData;r.set("id_node",`${t.id}`),r.set("tag_list",Array.from(n).join(",")),await Se("tag/attach",r)}t._tagging=!t._tagging}static async op_set_cover(t){const n=new FormData;return n.set("id",`${t.id}`),await Se("file/cover",n)}static async op_rebuild(t){const n=new FormData;return n.set("id_list",t.join(",")),await Se("file/rebuild",n)}static async op_recheck(t){const n=new FormData;return n.set("id_list",t.join(",")),await Se("file/rehash",n)}static async op_cascade_tag(t){const n=new FormData;return n.set("id_list",t.join(",")),await Se("file/cascade_tag",n)}static async op_rm_raw(t){const n=new FormData;return n.set("id_list",t.join(",")),await Se("file/rm_raw",n)}static async op_imp_tag_eh(t){const n=new FormData;return n.set("id_list",t.join(",")),await Se("file/import_eht",n)}static async op_rate(t,n){if(!ve)return;let r=ve.getSelected();n&&!r.idSet.size&&(r.idSet.add((n==null?void 0:n.id)??0),r.nodeLs.push(n)),r.nodeLs.forEach(i=>{i.rate=t});const s=new FormData;s.set("node_id_list",Array.from(r.idSet).join(",")),s.set("rate",`${t}`),await Se("rate/attach",s)}}function Pf(e,t){if(!ve)return;let n=ve.localConfigure.get("browser_layout_w"),r=ve.localConfigure.get("browser_layout_h");const s=window.innerWidth,i=window.innerHeight;s<n&&(n=0),i<r&&(r=0),ve.modalStore.set({title:"file browser",alpha:!1,key:"",single:!1,w:n||400,h:r||400,minW:400>window.innerWidth?window.innerWidth*.9:400,minH:400>window.innerHeight?window.innerHeight*.9:400,allow_resize:!0,allow_move:!0,allow_fullscreen:!0,auto_focus:!1,component:[{componentName:"fileBrowser",data:{query:Te.copyObject(e),curId:t}}]})}function _a(e,t){let n=["id","asc"];switch(t){default:case"id_asc":n=["id","asc"];break;case"id_desc":n=["id","desc"];break;case"name_asc":n=["title","asc"];break;case"name_desc":n=["title","desc"];break;case"crt_asc":n=["time_create","asc"];break;case"crt_desc":n=["time_create","desc"];break;case"upd_asc":n=["time_update","asc"];break;case"upd_desc":n=["time_update","desc"];break;case"rate_asc":n=["rate","asc"];break;case"rate_desc":n=["rate","desc"];break}return e.sort((r,s)=>{let i="",a="";const o=n[1]=="desc"?-1:1;switch(n[0]){default:i=r[n[0]],a=s[n[0]];break;case"title":return i=r.node_path+"/"+r.title,a=s.node_path+"/"+s.title,Tf({desc:o!=1,insensitive:!0})(i,a)}return(i||0)>(a||0)?o*1:o*-1}),e}const zf={class:"modal_browser base"},Mf={class:"base"},$f={class:"l"},Nf={class:"r"},Bf={class:"content"},zi=Ue({__name:"browserBase",props:{data:{},modalData:{},nodeList:{},curIndex:{},curNode:{}},setup(e){const t=e;return(n,r)=>(ae(),le("div",zf,[re("div",Mf,[re("div",$f,[je(n.$slots,"info")]),re("div",Nf,[je(n.$slots,"btnContainer")])]),je(n.$slots,"navigator"),re("div",Bf,[re("span",{class:Ae(["listIcon",`listIcon_file_${t.curNode.type}`]),style:Ge({fontSize:t.modalData.layout.h*.5+"px",lineHeight:t.modalData.layout.h*.8+"px"})},null,6)])]))}}),Ff={class:"modal_browser image"},jf={class:"base"},Hf={class:"l"},Uf={class:"btnContainer"},Wf={class:"r"},Vf={key:0,class:"loader sysIcon sysIcon_sync"},Kf=["data-ref-node-id","src","data-rotate"],Yf=Ue({__name:"browserImage",props:{data:{},modalData:{},nodeList:{},curIndex:{},curNode:{}},setup(e){const t=e,n=[.1,.25,.5,.75,1,1.25,1.5,2],r=pe(null),s=pe(null),i=pe({loaded:0,w:0,h:0,x:0,y:0,rotate:0,orgRatio:0,ratio:0,ratioTxt:"0 %",orgW:0,orgH:0});async function a(p){const b=s.value;if(!b)return;if(!b.complete)return setTimeout(a,50);const v=await Cs("image_rotate",t.curNode.id);Object.assign(i.value,{loaded:t.curNode.id,orgH:b.naturalHeight,orgW:b.naturalWidth,rotate:v}),await o()}nt(()=>{Object.assign(i.value,{loaded:0,w:0,h:0,x:0,y:0,rotate:0,orgW:0,orgH:0}),document.addEventListener(`modal_resizing_${t.modalData.nid}`,o),document.addEventListener("pointerup",m),document.addEventListener("pointermove",d),document.addEventListener("wheel",f),document.addEventListener("keydown",h),document.addEventListener("pointercancel",m),document.addEventListener("pointerout",m)}),ct(()=>t.curNode,async p=>{console.info("onMod props.curNode"),i.value.loaded=0}),ft(()=>{document.removeEventListener(`modal_resizing_${t.modalData.nid}`,o),document.removeEventListener("pointerup",m),document.removeEventListener("pointermove",d),document.removeEventListener("wheel",f),document.removeEventListener("keydown",h),document.removeEventListener("pointercancel",m),document.removeEventListener("pointerout",m)});async function o(){if(!i.value.loaded)return;const p=t.modalData.layout,b=p.w??0;let v=p.h??0;v-=16;const S=i.value,x=Math.abs(S.rotate%180-90)<45,C=b/(x?S.orgH:S.orgW),z=v/(x?S.orgW:S.orgH),P={w:0,h:0,x:0,y:0,ratio:0,orgRatio:0,ratioTxt:"0 %"},A=Math.min(C,z);P.w=S.orgW*A,P.h=S.orgH*A,P.x=(b-P.w)/2,P.y=(v-P.h)/2,P.ratio=A,P.orgRatio=A,P.ratioTxt=Math.round(A*1e3)/10+" %",Object.assign(i.value,P)}const c=new Map;function u(p){if(!t.modalData.layout.active||!p.pointerId)return;p.preventDefault(),p.stopPropagation(),i.value;const b={x:p.clientX,y:p.clientY};c.set(p.pointerId,b)}function d(p){t.modalData.layout.active&&p.pointerId&&(p.preventDefault(),p.stopPropagation(),y(p))}function m(p){c.get(p.pointerId)&&c.delete(p.pointerId)}function y(p){const b=c.get(p.pointerId);if(!b||Math.abs(p.clientX-b.x)<1&&Math.abs(p.clientY-b.y)<1)return;const v=i.value,S=s.value,x=r.value;if(!S||!x)return;if(c.size==1){const K={x:p.clientX-b.x+v.x,y:p.clientY-b.y+v.y};Object.assign(i.value,K),c.set(p.pointerId,{x:p.clientX,y:p.clientY});return}const C={x:0,y:0,pointerCount:0};c.forEach((K,W,ee)=>{W!=p.pointerId&&(C.x+=K.x,C.y+=K.y,C.pointerCount+=1)}),C.x=C.x/C.pointerCount,C.y=C.y/C.pointerCount;const z={orgX:b.x-C.x,orgY:b.y-C.y,tgtX:p.clientX-C.x,tgtY:p.clientY-C.y},P={x:0,y:0,w:0,h:0,ratio:v.ratio*Math.sqrt((z.tgtX*z.tgtX+z.tgtY*z.tgtY)/(z.orgX*z.orgX+z.orgY*z.orgY)),ratioTxt:"0 %"};P.ratio>5&&(P.ratio=5),P.w=v.orgW*P.ratio,P.h=v.orgH*P.ratio;const A=x.clientWidth??0,U=x.clientHeight??0,{x:J,y:R}=Te.nodeOffsetXY(x),V=S.clientWidth??0,w=S.clientHeight??0,{x:Q,y:oe}=Te.nodeOffsetXY(S),G=(p.clientX-b.x)/2,q=(p.clientY-b.y)/2,j=C.x-J-A/2,se=C.y-R-U/2,N=(C.x-(Q+V/2))/v.ratio*P.ratio,M=(C.y-(oe+w/2))/v.ratio*P.ratio;P.x=(A-P.w)/2+j-N+G,P.y=(U-P.h)/2+se-M+q,P.ratioTxt=Math.round(P.ratio*1e4)/100+" %",Object.assign(i.value,P),c.set(p.pointerId,{x:p.clientX,y:p.clientY})}function f(p){let b=p==null?void 0:p.target,v;do if(v=b.getAttribute("data-ref-id"),v||!b.parentElement||(b=b.parentElement,b.tagName==="BODY"))break;while(!0);if(v!==t.modalData.nid)return;const S=p.deltaY<0?1:-1;g(S,p.clientX,p.clientY)}function g(p,b,v){const S=i.value,x=s.value,C=r.value;if(!x||!C)return;let z=[];const P=S.ratio;z.push(...n,S.ratio,S.orgRatio);const A=new Set(z);z=Array.from(A),z.sort();const U=z.indexOf(S.ratio)+p;if(U<0||U>=z.length)return;const J=z[U],R=C.clientWidth??0,V=C.clientHeight??0,{x:w,y:Q}=Te.nodeOffsetXY(C);Math.abs(S.rotate%180-90)<45;const oe={w:S.orgW*J,h:S.orgH*J,x:0,y:0,ratio:J,ratioTxt:Math.round(J*1e4)/100+" %"};if(b===void 0||v===void 0){oe.x=(R-oe.w)/2,oe.y=(V-oe.h)/2,Object.assign(i.value,oe);return}const G=x.clientWidth??0,q=x.clientHeight??0,{x:j,y:se}=Te.nodeOffsetXY(x),N=b-w-R/2,M=v-Q-V/2,K=(b-(j+G/2))/P*oe.ratio,W=(v-(se+q/2))/P*oe.ratio;oe.x=(R-oe.w)/2+N-K,oe.y=(V-oe.h)/2+M-W,Object.assign(i.value,oe)}function h(p){if(!Rt(p.target)&&t.modalData.layout.active)switch(p.code){case"KeyQ":_(-90);break;case"KeyE":_(90);break}}function _(p){let b={rotate:i.value.rotate},v=b.rotate+p;for(;v<0;)v+=360;for(;v>360;)v-=360;b.rotate=v,Is("image_rotate",t.curNode.id,v),Object.assign(i.value,b),o()}return(p,b)=>{var v,S;return ae(),le("div",Ff,[re("div",jf,[re("div",Hf,[je(p.$slots,"info"),re("div",Uf,[re("button",{class:Ae(["sysIcon","sysIcon_zoomout"]),onClick:b[0]||(b[0]=x=>g(-1))}),re("button",{onClick:o},Ce(i.value.ratioTxt),1),re("button",{class:Ae(["sysIcon","sysIcon_zoomin"]),onClick:b[1]||(b[1]=x=>g(1))})])]),re("div",Wf,[je(p.$slots,"btnContainer")])]),je(p.$slots,"navigator"),re("div",{class:"content",ref_key:"contentDOM",ref:r},[i.value.loaded?Ie("",!0):(ae(),le("span",Vf)),re("img",{"data-ref-node-id":t.curNode.id,src:`${(S=(v=t.curNode.file_index)==null?void 0:v.normal)==null?void 0:S.path}?filename=${t.curNode.title}`,"data-rotate":i.value.rotate,onPointerdown:u,onDblclick:b[2]||(b[2]=(...x)=>p.resetImgresetImg&&p.resetImgresetImg(...x)),onLoad:a,style:Ge(i.value.loaded?{width:i.value.w+"px",height:i.value.h+"px",left:i.value.x+"px",top:i.value.y+"px",rotate:i.value.rotate+"deg"}:{}),ref_key:"imgDOM",ref:s},null,44,Kf)],512)])}}}),Xf={class:"modal_browser audio"},qf={class:"base"},Zf={class:"l"},Gf={class:"btnContainer"},Jf={class:"r"},Qf={key:0,class:"loader sysIcon sysIcon_sync"},ed=["src"],td=["data-item-id","poster"],nd=["src"],rd=Ue({__name:"browserAudio",props:{data:{},modalData:{},nodeList:{},curIndex:{},curNode:{}},emits:["nav"],setup(e,{emit:t}){var oe,G,q,j,se,N,M;const n=Or(),r=e,s=t,i=pe(null),a=pe(null),o=pe(null),c=pe("");(q=(G=(oe=r.curNode)==null?void 0:oe.file_index)==null?void 0:G.normal)!=null&&q.path?c.value=`${(se=(j=r.curNode.file_index)==null?void 0:j.normal)==null?void 0:se.path}?filename=${r.curNode.title}`:c.value=`${(M=(N=r.curNode.file_index)==null?void 0:N.raw)==null?void 0:M.path}?filename=${r.curNode.title}`;const u=pe({duration:0,buffered:0,time:0,volume:n.get("browser_play_volume")?n.get("browser_play_volume"):100,brightness:n.get("browser_play_brightness")?n.get("browser_play_brightness"):1,mute:!1,play:!1,loading:!0,loop:n.get("browser_play_mode")==="single"}),d=n.listen("browser_play_mode",K=>Object.assign(u.value,{loop:K==="single"})),m=n.listen("browser_play_volume",K=>Object.assign(u.value,{volume:K})),y=n.listen("browser_play_brightness",K=>Object.assign(u.value,{brightness:K}));function f(){var ue;console.info("onInit");const K=o.value;if(!K)return;if(K.readyState!==4)return setTimeout(f,50);const W=u.value,ee={time:0,duration:K.duration};Object.assign(u.value,ee),W.play&&K.play(),K.volume=W.mute?0:W.volume/100,(ue=i.value)==null||ue.addEventListener("wheel",V)}function g(K){console.info("onCanplay"),o.value&&(document.addEventListener("keydown",w),Object.assign(u.value,{loading:!1}))}function h(K=!0){var W;document.removeEventListener("wheel",V),document.removeEventListener("keydown",w),c.value="",o.value&&((W=o.value)==null||W.load()),K&&Object.assign(u.value,{loading:!0})}function _(){const K=o.value;if(!K)return;const W=u.value;W.play?K.pause():K.play(),Object.assign(u.value,{play:!W.play})}function p(K){console.info("onEnd",K);const W=o.value;if(!W)return;if(u.value.loop){W.currentTime=0,W.play();return}s("nav",r.curIndex+1)}nt(async()=>{var K;o.value&&((K=o.value)==null||K.load()),b=setInterval(v,200)}),ct(()=>r.curNode,async K=>{var W,ee,ue,X,$,F,te,ie;h(),(ue=(ee=(W=r.curNode)==null?void 0:W.file_index)==null?void 0:ee.normal)!=null&&ue.path?c.value=`${($=(X=K.file_index)==null?void 0:X.normal)==null?void 0:$.path}?filename=${K.title}`:c.value=`${(te=(F=K.file_index)==null?void 0:F.raw)==null?void 0:te.path}?filename=${K.title}`,o.value&&((ie=o.value)==null||ie.load())}),gr(()=>{h(!1),n.release("browser_play_mode",d),n.release("browser_play_volume",m),n.release("browser_play_brightness",y),clearInterval(b)});let b=0;function v(){if(!o.value||!o.value.buffered||!o.value.buffered.length)return;let K=0;for(let W=0;W<o.value.buffered.length;W++){const ee=o.value.buffered.end(W);if(!(u.value.time>ee)){K=ee;break}}Object.assign(u.value,{buffered:K})}function S(K){const W=o.value;W&&Object.assign(u.value,{time:W.currentTime})}const x={active:!1,x:0,y:0,w:0,h:0,orgX:0,orgY:0,left:0,right:0,t:0};let C=0;function z(K){if(C)return;const W=o.value;if(!W)return;const ee=a.value;if(!ee)return;C=K.pointerId,document.addEventListener("pointermove",P),document.addEventListener("pointerup",A);const ue={active:!0,x:K.clientX,w:ee.clientWidth,orgX:Te.nodeOffsetX(ee)};Object.assign(x,ue);const X=(ue.x-ue.orgX)/ue.w;W.currentTime=W.duration*X,Object.assign(u.value,{time:W.currentTime})}function P(K){if(K.pointerId!=C||(K.preventDefault(),K.stopPropagation(),!x.active))return;const W=o.value;if(!W)return;Object.assign(x,{x:K.clientX});let ee=(x.x-x.orgX)/x.w;ee>1&&(ee=1),ee<0&&(ee=0),W.currentTime=W.duration*ee,Object.assign(u.value,{time:W.currentTime})}function A(K){K.pointerId==C&&(C=0,Object.assign(x,{active:!1}),document.removeEventListener("pointermove",P),document.removeEventListener("pointerup",A))}function U(K){if(C||!o.value)return;const ee=i.value;if(!ee)return;C=K.pointerId,K.preventDefault(),K.stopPropagation(),document.addEventListener("pointermove",J),document.addEventListener("pointerup",R);const ue={active:!0,x:K.clientX,y:K.clientY,w:ee.clientWidth,h:ee.clientHeight,orgX:Te.nodeOffsetX(ee),orgY:Te.nodeOffsetX(ee),left:0,right:0,t:new Date().valueOf()},X=(ue.x-ue.orgX)/ue.w;X>.5&&(ue.right=1),X<.5&&(ue.left=1),Object.assign(x,ue)}function J(K){if(K.pointerId!=C||(K.preventDefault(),K.stopPropagation(),!x.active))return;const W=o.value;if(!W||!i.value)return;const ue=(K.clientY-x.y)/x.h;Object.assign(x,{y:K.clientY});const X=u.value;if(x.right){let $=X.volume-ue*100*1.5;$<0&&($=0),$>100&&($=100),W.volume=$/100,n.set("browser_play_volume",$)}if(x.left){let $=X.brightness-ue;$<0&&($=0),$>1&&($=1),X.brightness=$,n.set("browser_play_brightness",$)}}function R(K){if(K.pointerId!=C)return;C=0;const W=new Date().valueOf();x.t>W-250&&_(),Object.assign(x,{active:!1}),document.removeEventListener("pointermove",J),document.removeEventListener("pointerup",R)}function V(K){const W=o.value;if(!W)return;let ue=u.value.volume+(K.deltaY<0?5:-5);ue<0&&(ue=0),ue>100&&(ue=100),W.volume=ue/100,n.set("browser_play_volume",ue)}function w(K){if(!Rt(K.target)&&r.modalData.layout.active)switch(K.key){case" ":_();break;case"ArrowUp":V({deltaY:-1});break;case"ArrowDown":V({deltaY:1});break;case"ArrowLeft":case"ArrowRight":const W=o.value;if(!W)return;W.currentTime+=K.key==="ArrowLeft"?-5:5,Object.assign(u.value,{time:W.currentTime});break}}function Q(K){const W={h:""+Math.floor(K/3600),m:""+Math.floor(K/60%60),s:""+Math.floor(K%60)};W.m.length<2&&(W.m="0"+W.m),W.s.length<2&&(W.s="0"+W.s);let ee=""+W.s;return(W.m||W.h)&&(ee=`${W.m}:${ee}`),W.h!=="0"&&(ee=`${W.h}:${ee}`),ee}return(K,W)=>{var ee,ue,X,$,F;return ae(),le("div",Xf,[re("div",qf,[re("div",Zf,[je(K.$slots,"info"),re("div",Gf,[re("button",{class:Ae({sysIcon:!0,sysIcon_volume:!u.value.mute&&u.value.volume,sysIcon_mute:u.value.mute,sysIcon_mutemode:!u.value.mute&&!u.value.volume})},Ce(Math.round(u.value.volume)),3),re("button",{class:Ae({sysIcon:!0,sysIcon_caretright:u.value.play,sysIcon_pause:!u.value.play})},Ce(Q(u.value.time)),3),re("div",{class:Ae(["audio_bar"]),onPointerdown:z,ref_key:"timelineDOM",ref:a},[re("span",{class:"duration",style:Ge({left:100*u.value.time/u.value.duration+"%"})},null,4),re("span",{class:"buffer",style:Ge({width:100*u.value.buffered/u.value.duration+"%"})},null,4)],544)])]),re("div",Jf,[je(K.$slots,"btnContainer")])]),je(K.$slots,"navigator"),re("div",{class:"content",ref_key:"contentDOM",ref:i,onPointerdown:U},[u.value.loading?(ae(),le("span",Qf)):Ie("",!0),(ee=r.curNode.file_index)!=null&&ee.preview?(ae(),le("img",{key:1,src:(X=(ue=r.curNode.file_index)==null?void 0:ue.preview)==null?void 0:X.path,style:Ge({filter:`brightness(${u.value.brightness})`})},null,12,ed)):(ae(),le("span",{key:2,class:Ae(["listIcon",`listIcon_file_${r.curNode.type}`]),style:Ge({fontSize:r.modalData.layout.h*.5+"px",lineHeight:r.modalData.layout.h*.8+"px"})},null,6)),re("audio",{ref_key:"mediaDOM",ref:o,preload:"metadata","data-item-id":r.curNode.id,poster:(F=($=r.curNode.file_index)==null?void 0:$.preview)==null?void 0:F.path,onLoadedmetadata:f,onCanplay:g,onEnded:p,onTimeupdate:S},[re("source",{src:c.value},null,8,nd)],40,td)],544)])}}}),sd={class:"modal_browser video"},id={class:"base"},od={class:"l"},ad={class:"btnContainer"},ld=["value"],cd={class:"r"},ud={key:0,class:"loader sysIcon sysIcon_sync"},fd=["data-item-id","poster"],dd=["src"],hd=["default","src","srclang","label"],pd=["default","src","srclang","label"],md=Ue({__name:"browserVideo",props:{data:{},modalData:{},nodeList:{},curIndex:{},curNode:{}},emits:["nav"],setup(e,{emit:t}){var N,M,K,W,ee,ue,X;const n=Or(),r=e,s=t,i=pe(null),a=pe(null),o=pe(null),c=pe("");(K=(M=(N=r.curNode)==null?void 0:N.file_index)==null?void 0:M.normal)!=null&&K.path?c.value=`${(ee=(W=r.curNode.file_index)==null?void 0:W.normal)==null?void 0:ee.path}?filename=${r.curNode.title}`:c.value=`${(X=(ue=r.curNode.file_index)==null?void 0:ue.raw)==null?void 0:X.path}?filename=${r.curNode.title}`;const u=pe({duration:0,buffered:0,time:0,volume:n.get("browser_play_volume")?n.get("browser_play_volume"):100,brightness:n.get("browser_play_brightness")?n.get("browser_play_brightness"):1,mute:!1,play:!1,loading:!0,loop:n.get("browser_play_mode")==="single"}),d=n.listen("browser_play_mode",$=>Object.assign(u.value,{loop:$==="single"})),m=n.listen("browser_play_volume",$=>Object.assign(u.value,{volume:$})),y=n.listen("browser_play_brightness",$=>Object.assign(u.value,{brightness:$}));function f(){var ie;console.info("onInit");const $=o.value;if(!$)return;if($.readyState!==4)return setTimeout(f,50);const F=u.value,te={time:0,duration:$.duration};Object.assign(u.value,te),F.play&&$.play(),$.volume=F.mute?0:F.volume/100,(ie=i.value)==null||ie.addEventListener("wheel",w)}function g($){console.info("onCanplay"),o.value&&(document.addEventListener("keydown",Q),Object.assign(u.value,{loading:!1}))}function h($=!0){var F;document.removeEventListener("wheel",w),document.removeEventListener("keydown",Q),c.value="",o.value&&((F=o.value)==null||F.load()),$&&Object.assign(u.value,{loading:!0})}function _(){const $=o.value;if(!$)return;const F=u.value;F.play?$.pause():$.play(),Object.assign(u.value,{play:!F.play})}function p($){console.info("onEnd",$);const F=o.value;if(!F)return;if(u.value.loop){F.currentTime=0,F.play();return}s("nav",r.curIndex+1)}nt(async()=>{var $;await b(),o.value&&(($=o.value)==null||$.load()),v=setInterval(S,200)});async function b(){q.value=[],j()}ct(()=>r.curNode,async $=>{var F,te,ie,fe,O,l,I,T;h(),b(),(ie=(te=(F=r.curNode)==null?void 0:F.file_index)==null?void 0:te.normal)!=null&&ie.path?c.value=`${(O=(fe=$.file_index)==null?void 0:fe.normal)==null?void 0:O.path}?filename=${$.title}`:c.value=`${(I=(l=$.file_index)==null?void 0:l.raw)==null?void 0:I.path}?filename=${$.title}`,o.value&&((T=o.value)==null||T.load())}),gr(()=>{h(!1),n.release("browser_play_mode",d),n.release("browser_play_volume",m),n.release("browser_play_brightness",y),clearInterval(v)});let v=0;function S(){if(!o.value||!o.value.buffered||!o.value.buffered.length)return;let $=0;for(let F=0;F<o.value.buffered.length;F++){const te=o.value.buffered.end(F);if(!(u.value.time>te)){$=te;break}}Object.assign(u.value,{buffered:$})}function x($){const F=o.value;F&&Object.assign(u.value,{time:F.currentTime})}const C={active:!1,x:0,y:0,w:0,h:0,orgX:0,orgY:0,left:0,right:0,t:0};let z=0;function P($){if(z)return;const F=o.value;if(!F)return;const te=a.value;if(!te)return;z=$.pointerId,document.addEventListener("pointermove",A),document.addEventListener("pointerup",U);const ie={active:!0,x:$.clientX,w:te.clientWidth,orgX:Te.nodeOffsetX(te)};Object.assign(C,ie);const fe=(ie.x-ie.orgX)/ie.w;F.currentTime=F.duration*fe,Object.assign(u.value,{time:F.currentTime})}function A($){if($.pointerId!=z||($.preventDefault(),$.stopPropagation(),!C.active))return;const F=o.value;if(!F)return;Object.assign(C,{x:$.clientX});let te=(C.x-C.orgX)/C.w;te>1&&(te=1),te<0&&(te=0),F.currentTime=F.duration*te,Object.assign(u.value,{time:F.currentTime})}function U($){$.pointerId==z&&(z=0,Object.assign(C,{active:!1}),document.removeEventListener("pointermove",A),document.removeEventListener("pointerup",U))}function J($){if(z||!o.value)return;const te=i.value;if(!te)return;z=$.pointerId,$.preventDefault(),$.stopPropagation(),document.addEventListener("pointermove",R),document.addEventListener("pointerup",V);const ie={active:!0,x:$.clientX,y:$.clientY,w:te.clientWidth,h:te.clientHeight,orgX:Te.nodeOffsetX(te),orgY:Te.nodeOffsetX(te),left:0,right:0,t:new Date().valueOf()},fe=(ie.x-ie.orgX)/ie.w;fe>.5&&(ie.right=1),fe<.5&&(ie.left=1),Object.assign(C,ie)}function R($){if($.pointerId!=z||($.preventDefault(),$.stopPropagation(),!C.active))return;const F=o.value;if(!F||!i.value)return;const ie=($.clientY-C.y)/C.h;Object.assign(C,{y:$.clientY});const fe=u.value;if(C.right){let O=fe.volume-ie*100*1.5;O<0&&(O=0),O>100&&(O=100),F.volume=O/100,n.set("browser_play_volume",O)}if(C.left){let O=fe.brightness-ie;O<0&&(O=0),O>1&&(O=1),fe.brightness=O,n.set("browser_play_brightness",O)}}function V($){if($.pointerId!=z)return;z=0;const F=new Date().valueOf();C.t>F-250&&_(),Object.assign(C,{active:!1}),document.removeEventListener("pointermove",R),document.removeEventListener("pointerup",V)}function w($){const F=o.value;if(!F)return;let ie=u.value.volume+($.deltaY<0?5:-5);ie<0&&(ie=0),ie>100&&(ie=100),F.volume=ie/100,n.set("browser_play_volume",ie)}function Q($){if(!Rt($.target)&&r.modalData.layout.active)switch($.key){case" ":_();break;case"ArrowUp":w({deltaY:-1});break;case"ArrowDown":w({deltaY:1});break;case"ArrowLeft":case"ArrowRight":const F=o.value;if(!F)return;F.currentTime+=$.key==="ArrowLeft"?-5:5,Object.assign(u.value,{time:F.currentTime});break}}function oe($){const F={h:""+Math.floor($/3600),m:""+Math.floor($/60%60),s:""+Math.floor($%60)};F.m.length<2&&(F.m="0"+F.m),F.s.length<2&&(F.s="0"+F.s);let te=""+F.s;return(F.m||F.h)&&(te=`${F.m}:${te}`),F.h!=="0"&&(te=`${F.h}:${te}`),te}const G=pe(0),q=pe([]);function j(){var ie,fe;let $=(ie=r.curNode.title)==null?void 0:ie.lastIndexOf("."),F=((fe=r.curNode.title)==null?void 0:fe.substring(0,$))??"";if(!F)return q.value=[];const te=[];r.nodeList.forEach(O=>{var I,T,k,E,D,B;if(O.type!=="subtitle"||!((T=(I=O.file_index)==null?void 0:I.normal)!=null&&T.path||(E=(k=O.file_index)==null?void 0:k.raw)!=null&&E.path))return;let l=(D=O.title)==null?void 0:D.substring(F.length);((B=O.title)==null?void 0:B.indexOf(F))===0&&te.push(Object.assign({label:l},O))}),q.value=te}function se($){var te;const F=(te=o.value)==null?void 0:te.textTracks;if(F)for(let ie=0;ie<F.length;ie++)$==ie?F[ie].mode="showing":F[ie].mode="disabled"}return($,F)=>{var te,ie;return ae(),le("div",sd,[re("div",id,[re("div",od,[je($.$slots,"info"),re("div",ad,[re("button",{class:Ae({sysIcon:!0,sysIcon_volume:!u.value.mute&&u.value.volume,sysIcon_mute:u.value.mute,sysIcon_mutemode:!u.value.mute&&!u.value.volume})},Ce(Math.round(u.value.volume)),3),re("button",{class:Ae({sysIcon:!0,sysIcon_caretright:u.value.play,sysIcon_pause:!u.value.play})},Ce(oe(u.value.time)),3),re("div",{class:Ae(["video_bar"]),onPointerdown:P,ref_key:"timelineDOM",ref:a},[re("span",{class:"duration",style:Ge({left:100*u.value.time/u.value.duration+"%"})},null,4),re("span",{class:"buffer",style:Ge({width:100*u.value.buffered/u.value.duration+"%"})},null,4)],544),q.value&&q.value.length?Ye((ae(),le("select",{key:0,"onUpdate:modelValue":F[0]||(F[0]=fe=>G.value=fe),onChange:F[1]||(F[1]=fe=>se(G.value))},[(ae(!0),le(_e,null,Be(q.value,(fe,O)=>(ae(),le("option",{value:O,key:"MO_BS_VDO_"+$.modalData.nid+"_sub_"+O},Ce(fe.label),9,ld))),128))],544)),[[en,G.value]]):Ie("",!0)])]),re("div",cd,[je($.$slots,"btnContainer")])]),je($.$slots,"navigator"),re("div",{class:"content",ref_key:"contentDOM",ref:i,onPointerdown:J},[u.value.loading?(ae(),le("span",ud)):Ie("",!0),re("video",{ref_key:"mediaDOM",ref:o,preload:"metadata","data-item-id":r.curNode.id,poster:(ie=(te=r.curNode.file_index)==null?void 0:te.preview)==null?void 0:ie.path,onLoadedmetadata:f,onCanplay:g,onEnded:p,onTimeupdate:x,style:Ge({filter:`brightness(${u.value.brightness})`})},[re("source",{src:c.value},null,8,dd),(ae(!0),le(_e,null,Be(q.value,(fe,O)=>{var l;return ae(),le(_e,null,[(l=fe.file_index)!=null&&l.normal?(ae(),le("track",{key:"MO_BS_VDO_"+$.modalData.nid+"_track_"+O,default:G.value==O,src:fe.file_index.normal.path,kind:"subtitles",srclang:fe.label,label:fe.label},null,8,hd)):(ae(),le("track",{key:"MO_BS_VDO_"+$.modalData.nid+"_track_"+O,default:G.value==O,src:fe.file_index.raw.path,kind:"subtitles",srclang:fe.label,label:fe.label},null,8,pd))],64)}),256))],44,fd)],544)])}}}),_d={class:"modal_browser txt"},gd={class:"base"},vd={class:"l"},yd={class:"r"},wd={class:"content"},bd=Ue({__name:"browserText",props:{data:{},modalData:{},nodeList:{},curIndex:{},curNode:{}},setup(e){const t=e,n=pe(""),r=pe(null);async function s(o){const u=await(await fetch(o.path,{method:"GET",headers:{}})).text();n.value=u,await a()}async function i(o){Te.debounce(()=>{if(!r.value)return;const c=[r.value.scrollTop,r.value.scrollLeft];if(!c[0]&&!c[1])return;const u=`browser:${t.curNode.id}`;Te.debounce(()=>{Is("scroll_log",u,c)},De.timeouts.scrollSave,"debounce_scroll_save")},De.timeouts.scrollEvt,"debounce_scroll_view")}async function a(){if(!r.value)return;r.value.scrollTop=0,r.value.scrollLeft=0;const o=`browser:${t.curNode.id}`,c=await Cs("scroll_log",o);c&&(r.value.scrollTop=c[0],r.value.scrollLeft=c[1])}return nt(async()=>{var o;t.curNode&&t.curNode.file_index&&t.curNode.file_index.raw&&await s(t.curNode.file_index.raw),r.value&&((o=r.value)==null||o.addEventListener("scroll",i))}),ct(()=>t.curNode,async o=>{o.file_index&&o.file_index.raw&&await s(o.file_index.raw)}),gr(()=>{}),(o,c)=>(ae(),le("div",_d,[re("div",gd,[re("div",vd,[je(o.$slots,"info")]),re("div",yd,[je(o.$slots,"btnContainer")])]),je(o.$slots,"navigator"),re("div",wd,[re("div",{class:"textContent",ref_key:"contentDOM",ref:r},Ce(n.value),513)])]))}}),xd={class:"modal_browser pdf"},kd={class:"base"},Ed={class:"l"},Sd={class:"r"},Od={class:"content"},Cd=["src"],Id=Ue({__name:"browserPDF",props:{data:{},modalData:{},nodeList:{},curIndex:{},curNode:{}},setup(e){const t=e;""+t.modalData.nid,pe(null);const n=pe(null);return nt(()=>{var r,s;console.warn("mounted"),n.value="/pdfjs/web/viewer.html?file="+((s=(r=t.curNode.file_index)==null?void 0:r.raw)==null?void 0:s.path)+"&filename="+t.curNode.title}),ct(()=>t.curNode,async r=>{var s,i;console.info("onMod props.curNode"),n.value="/pdfjs/web/viewer.html?file="+((i=(s=r.file_index)==null?void 0:s.raw)==null?void 0:i.path)+"&filename="+r.title}),ft(()=>{n.value=null}),(r,s)=>(ae(),le("div",xd,[re("div",kd,[re("div",Ed,[je(r.$slots,"info")]),re("div",Sd,[je(r.$slots,"btnContainer")])]),je(r.$slots,"navigator"),re("div",Od,[n.value?(ae(),le("iframe",{key:0,src:n.value,allowfullscreen:""},null,8,Cd)):Ie("",!0)])]))}});var Cr={},_t=_t||function(e,t){var n={},r=n.lib={},s=function(){},i=r.Base={extend:function(f){s.prototype=this;var g=new s;return f&&g.mixIn(f),g.hasOwnProperty("init")||(g.init=function(){g.$super.init.apply(this,arguments)}),g.init.prototype=g,g.$super=this,g},create:function(){var f=this.extend();return f.init.apply(f,arguments),f},init:function(){},mixIn:function(f){for(var g in f)f.hasOwnProperty(g)&&(this[g]=f[g]);f.hasOwnProperty("toString")&&(this.toString=f.toString)},clone:function(){return this.init.prototype.extend(this)}},a=r.WordArray=i.extend({init:function(f,g){f=this.words=f||[],this.sigBytes=g!=t?g:4*f.length},toString:function(f){return(f||c).stringify(this)},concat:function(f){var g=this.words,h=f.words,_=this.sigBytes;if(f=f.sigBytes,this.clamp(),_%4)for(var p=0;p<f;p++)g[_+p>>>2]|=(h[p>>>2]>>>24-8*(p%4)&255)<<24-8*((_+p)%4);else if(65535<h.length)for(p=0;p<f;p+=4)g[_+p>>>2]=h[p>>>2];else g.push.apply(g,h);return this.sigBytes+=f,this},clamp:function(){var f=this.words,g=this.sigBytes;f[g>>>2]&=4294967295<<32-8*(g%4),f.length=e.ceil(g/4)},clone:function(){var f=i.clone.call(this);return f.words=this.words.slice(0),f},random:function(f){for(var g=[],h=0;h<f;h+=4)g.push(4294967296*e.random()|0);return new a.init(g,f)}}),o=n.enc={},c=o.Hex={stringify:function(f){var g=f.words;f=f.sigBytes;for(var h=[],_=0;_<f;_++){var p=g[_>>>2]>>>24-8*(_%4)&255;h.push((p>>>4).toString(16)),h.push((p&15).toString(16))}return h.join("")},parse:function(f){for(var g=f.length,h=[],_=0;_<g;_+=2)h[_>>>3]|=parseInt(f.substr(_,2),16)<<24-4*(_%8);return new a.init(h,g/2)}},u=o.Latin1={stringify:function(f){var g=f.words;f=f.sigBytes;for(var h=[],_=0;_<f;_++)h.push(String.fromCharCode(g[_>>>2]>>>24-8*(_%4)&255));return h.join("")},parse:function(f){for(var g=f.length,h=[],_=0;_<g;_++)h[_>>>2]|=(f.charCodeAt(_)&255)<<24-8*(_%4);return new a.init(h,g)}},d=o.Utf8={stringify:function(f){try{return decodeURIComponent(escape(u.stringify(f)))}catch{throw Error("Malformed UTF-8 data")}},parse:function(f){return u.parse(unescape(encodeURIComponent(f)))}},m=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(f){typeof f=="string"&&(f=d.parse(f)),this._data.concat(f),this._nDataBytes+=f.sigBytes},_process:function(f){var g=this._data,h=g.words,_=g.sigBytes,p=this.blockSize,b=_/(4*p),b=f?e.ceil(b):e.max((b|0)-this._minBufferSize,0);if(f=b*p,_=e.min(4*f,_),f){for(var v=0;v<f;v+=p)this._doProcessBlock(h,v);v=h.splice(0,f),g.sigBytes-=_}return new a.init(v,_)},clone:function(){var f=i.clone.call(this);return f._data=this._data.clone(),f},_minBufferSize:0});r.Hasher=m.extend({cfg:i.extend(),init:function(f){this.cfg=this.cfg.extend(f),this.reset()},reset:function(){m.reset.call(this),this._doReset()},update:function(f){return this._append(f),this._process(),this},finalize:function(f){return f&&this._append(f),this._doFinalize()},blockSize:16,_createHelper:function(f){return function(g,h){return new f.init(h).finalize(g)}},_createHmacHelper:function(f){return function(g,h){return new y.HMAC.init(f,h).finalize(g)}}});var y=n.algo={};return n}(Math);(function(e){for(var t=_t,f=t.lib,n=f.WordArray,r=f.Hasher,f=t.algo,s=[],i=[],a=function(h){return 4294967296*(h-(h|0))|0},o=2,c=0;64>c;){var u;e:{u=o;for(var d=e.sqrt(u),m=2;m<=d;m++)if(!(u%m)){u=!1;break e}u=!0}u&&(8>c&&(s[c]=a(e.pow(o,.5))),i[c]=a(e.pow(o,1/3)),c++),o++}var y=[],f=f.SHA256=r.extend({_doReset:function(){this._hash=new n.init(s.slice(0))},_doProcessBlock:function(g,h){for(var _=this._hash.words,p=_[0],b=_[1],v=_[2],S=_[3],x=_[4],C=_[5],z=_[6],P=_[7],A=0;64>A;A++){if(16>A)y[A]=g[h+A]|0;else{var U=y[A-15],J=y[A-2];y[A]=((U<<25|U>>>7)^(U<<14|U>>>18)^U>>>3)+y[A-7]+((J<<15|J>>>17)^(J<<13|J>>>19)^J>>>10)+y[A-16]}U=P+((x<<26|x>>>6)^(x<<21|x>>>11)^(x<<7|x>>>25))+(x&C^~x&z)+i[A]+y[A],J=((p<<30|p>>>2)^(p<<19|p>>>13)^(p<<10|p>>>22))+(p&b^p&v^b&v),P=z,z=C,C=x,x=S+U|0,S=v,v=b,b=p,p=U+J|0}_[0]=_[0]+p|0,_[1]=_[1]+b|0,_[2]=_[2]+v|0,_[3]=_[3]+S|0,_[4]=_[4]+x|0,_[5]=_[5]+C|0,_[6]=_[6]+z|0,_[7]=_[7]+P|0},_doFinalize:function(){var g=this._data,h=g.words,_=8*this._nDataBytes,p=8*g.sigBytes;return h[p>>>5]|=128<<24-p%32,h[(p+64>>>9<<4)+14]=e.floor(_/4294967296),h[(p+64>>>9<<4)+15]=_,g.sigBytes=4*h.length,this._process(),this._hash},clone:function(){var g=r.clone.call(this);return g._hash=this._hash.clone(),g}});t.SHA256=r._createHelper(f),t.HmacSHA256=r._createHmacHelper(f)})(Math);(function(){var e=_t,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(n,r){n=this._hasher=new n.init,typeof r=="string"&&(r=t.parse(r));var s=n.blockSize,i=4*s;r.sigBytes>i&&(r=n.finalize(r)),r.clamp();for(var a=this._oKey=r.clone(),o=this._iKey=r.clone(),c=a.words,u=o.words,d=0;d<s;d++)c[d]^=1549556828,u[d]^=909522486;a.sigBytes=o.sigBytes=i,this.reset()},reset:function(){var n=this._hasher;n.reset(),n.update(this._iKey)},update:function(n){return this._hasher.update(n),this},finalize:function(n){var r=this._hasher;return n=r.finalize(n),r.reset(),r.finalize(this._oKey.clone().concat(n))}})})();(function(){var e=_t,t=e.lib.WordArray;e.enc.Base64={stringify:function(n){var r=n.words,s=n.sigBytes,i=this._map;n.clamp(),n=[];for(var a=0;a<s;a+=3)for(var o=(r[a>>>2]>>>24-8*(a%4)&255)<<16|(r[a+1>>>2]>>>24-8*((a+1)%4)&255)<<8|r[a+2>>>2]>>>24-8*((a+2)%4)&255,c=0;4>c&&a+.75*c<s;c++)n.push(i.charAt(o>>>6*(3-c)&63));if(r=i.charAt(64))for(;n.length%4;)n.push(r);return n.join("")},parse:function(n){var r=n.length,s=this._map,i=s.charAt(64);i&&(i=n.indexOf(i),i!=-1&&(r=i));for(var i=[],a=0,o=0;o<r;o++)if(o%4){var c=s.indexOf(n.charAt(o-1))<<2*(o%4),u=s.indexOf(n.charAt(o))>>>6-2*(o%4);i[a>>>2]|=(c|u)<<24-8*(a%4),a++}return t.create(i,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();(function(e){for(var t=_t,f=t.lib,n=f.WordArray,r=f.Hasher,f=t.algo,s=[],i=[],a=function(h){return 4294967296*(h-(h|0))|0},o=2,c=0;64>c;){var u;e:{u=o;for(var d=e.sqrt(u),m=2;m<=d;m++)if(!(u%m)){u=!1;break e}u=!0}u&&(8>c&&(s[c]=a(e.pow(o,.5))),i[c]=a(e.pow(o,1/3)),c++),o++}var y=[],f=f.SHA256=r.extend({_doReset:function(){this._hash=new n.init(s.slice(0))},_doProcessBlock:function(g,h){for(var _=this._hash.words,p=_[0],b=_[1],v=_[2],S=_[3],x=_[4],C=_[5],z=_[6],P=_[7],A=0;64>A;A++){if(16>A)y[A]=g[h+A]|0;else{var U=y[A-15],J=y[A-2];y[A]=((U<<25|U>>>7)^(U<<14|U>>>18)^U>>>3)+y[A-7]+((J<<15|J>>>17)^(J<<13|J>>>19)^J>>>10)+y[A-16]}U=P+((x<<26|x>>>6)^(x<<21|x>>>11)^(x<<7|x>>>25))+(x&C^~x&z)+i[A]+y[A],J=((p<<30|p>>>2)^(p<<19|p>>>13)^(p<<10|p>>>22))+(p&b^p&v^b&v),P=z,z=C,C=x,x=S+U|0,S=v,v=b,b=p,p=U+J|0}_[0]=_[0]+p|0,_[1]=_[1]+b|0,_[2]=_[2]+v|0,_[3]=_[3]+S|0,_[4]=_[4]+x|0,_[5]=_[5]+C|0,_[6]=_[6]+z|0,_[7]=_[7]+P|0},_doFinalize:function(){var g=this._data,h=g.words,_=8*this._nDataBytes,p=8*g.sigBytes;return h[p>>>5]|=128<<24-p%32,h[(p+64>>>9<<4)+14]=e.floor(_/4294967296),h[(p+64>>>9<<4)+15]=_,g.sigBytes=4*h.length,this._process(),this._hash},clone:function(){var g=r.clone.call(this);return g._hash=this._hash.clone(),g}});t.SHA256=r._createHelper(f),t.HmacSHA256=r._createHmacHelper(f)})(Math);Cr.enc={Base64:_t.enc.Base64,Utf8:_t.enc.Utf8,Latin1:_t.enc.Latin1};Cr.SHA256=_t.SHA256;Cr.HmacSHA256=_t.HmacSHA256;const As=Cr,Ad={alg:"HS256",typ:"JWT"};function ga(e){return As.enc.Base64.stringify(e).replace(/=+$/,"").replace(/\+/g,"-").replace(/\//g,"_")}function Dd(e,t,n={}){const r=Object.assign(Ad,n);if(r.alg!=="HS256"&&r.typ!=="JWT")throw new Error("jwt-encode only support the HS256 algorithm and the JWT type of hash");const s=Mi(r),i=Mi(e);let a=`${s}.${i}`;return a=As.HmacSHA256(a,t),a=ga(a),`${s}.${i}.${a}`}function Mi(e){const t=As.enc.Utf8.parse(JSON.stringify(e));return ga(t)}var Ld=Dd;const Rd=ha(Ld),Td={class:"modal_browser office"},Pd={class:"base"},zd={class:"l"},Md={class:"r"},$d={class:"content"},Nd=["id"],Fr=100,Bd=Ue({__name:"browserOffice",props:{data:{},modalData:{},nodeList:{},curIndex:{},curNode:{}},setup(e){const t=e;""+t.modalData.nid,pe(null);let n=null;const s=qt().get();nt(()=>{console.warn("mounted"),o(De.onlyOffice.apiSrc),setTimeout(()=>i(),Fr)});function i(){if(!a)return setTimeout(()=>i(),Fr);const u="modal_office_"+t.modalData.nid;if(!document.getElementById(u))return setTimeout(()=>i(),Fr);const m=De.onlyOffice.jwtSecret,y=De.onlyOffice.origin,f=t.curNode,g=f.title.lastIndexOf("."),h=f.title.substring(g+1),_=c(h);if(!_)return;new URL(location.href);const p={document:{fileType:h,key:f.id.toString(16),title:f.title,url:`${y}${f.file_index.raw.path}?token=${s==null?void 0:s.token}`},documentType:_,editorConfig:{callbackUrl:`${y}/api/onlyoffice/callback?id=${f.id}&token=${s==null?void 0:s.token}`}};p.token=Rd(p,m),console.info(p),n=new DocsAPI.DocEditor(u,p),console.info(n)}ct(()=>t.curNode,async u=>{console.info("onMod props.curNode")}),ft(()=>{});let a=!1;function o(u){var d=document.createElement("script");d.type="text/javascript",d.src=u,d.onload=m=>{console.info(m),a=!0},document.body.appendChild(d)}function c(u){let d;switch(u){default:break;case"doc":case"docm":case"docx":case"dot":case"dotm":case"dotx":case"epub":case"fb2":case"fodt":case"htm":case"html":case"mht":case"mhtml":case"odt":case"ott":case"rtf":case"stw":case"sxw":case"txt":case"wps":case"wpt":d="word";break;case"csv":case"et":case"ett":case"fods":case"ods":case"ots":case"sxc":case"xls":case"xlsb":case"xlsm":case"xlsx":case"xlt":case"xltm":case"xltx":d="cell";case"dps":case"dpt":case"fodp":case"odp":case"otp":case"pot":case"potm":case"potx":case"pps":case"ppsm":case"ppsx":case"ppt":case"pptm":case"pptx":case"sxi":d="slide";break}return d}return(u,d)=>(ae(),le("div",Td,[re("div",Pd,[re("div",zd,[je(u.$slots,"info")]),re("div",Md,[je(u.$slots,"btnContainer")])]),je(u.$slots,"navigator"),re("div",$d,[re("div",{id:"modal_office_"+u.modalData.nid},null,8,Nd)])]))}}),Fd={key:0},jd={class:"preLine"},Hd={class:"btnContainer"},Ud=["value"],Wd=["value","innerHTML"],Vd=["value"],Kd=re("br",null,null,-1),Yd=["value"],Xd=re("span",{class:"sysIcon sysIcon_arrowleft"},null,-1),qd=[Xd],Zd=re("span",{class:"sysIcon sysIcon_arrowright"},null,-1),Gd=[Zd],Jd=Ue({__name:"browser",props:{data:{},modalData:{}},setup(e){const t=e,n=window.navigator.userAgent.toLowerCase().indexOf("mobile")!==-1,r={audio:rd,video:md,image:Yf,pdf:Id,text:bd,office:zi,base:zi};De.onlyOffice.enabled&&(r.office=Bd);const s=Or();let i=!1;function a(){if(i&&!t.modalData.layout.fullscreen){let q=s.get("browser_layout_w"),j=s.get("browser_layout_h");t.modalData.layout.w=q,t.modalData.layout.h=j,t.modalData.layout.x=(window.innerWidth-q)/2,t.modalData.layout.y=(window.innerHeight-j)/2}else t.modalData.layout.fullscreen||(s.set("browser_layout_w",t.modalData.layout.w),s.set("browser_layout_h",t.modalData.layout.h));i=t.modalData.layout.fullscreen}const o=pe(s.get("browser_play_mode")??"loop");function c(){let q=De.playMode.indexOf(o.value);q+=1,q>De.playMode.length-1&&(q=0),o.value=De.playMode[q],s.set("browser_play_mode",o.value)}const u=pe(s.get("browser_show_detail")??!1);function d(){u.value=!u.value,s.set("browser_show_detail",u.value)}nt(()=>{document.addEventListener("keydown",A),document.addEventListener(`modal_resizing_${t.modalData.nid}`,a),setTimeout(()=>{document.activeElement&&document.activeElement.blur()},100)}),ft(()=>{document.removeEventListener("keydown",A),document.removeEventListener(`modal_resizing_${t.modalData.nid}`,a)});const m=pe([]),y=pe([]),f=pe([]);let g=0;const h=pe(0),_=pe({});async function p(q){const j=await Se("file/get",{node_type:"directory",id_dir:`${q}`,with:"none"});return j||{path:[],list:[]}}v();function b(){let q=[];return g=0,y.value.forEach(j=>{if(!C(j))return;const se=j.rate?j.rate+2:2;q.push(Object.assign(j,{_weight_stack:g})),g+=se}),q=V(q,J.value),q}async function v(q={}){q&&(t.data.query=Object.assign(t.data.query,q));let j;if(j=await Se("file/get",t.data.query),!j||!j.list.length)return!1;let se=[];if(j.list.forEach(W=>{W.is_file&&se.push(W)}),j.list=se,!j.list.length){if(t.data.query.cascade_dir)return!1;const W=Te.copyObject(t.data.query);if(W.cascade_dir=1,j=await Se("file/get",W),!j||!j.list.length)return!1;se=[],j.list.forEach(ee=>{ee.is_file&&se.push(ee)}),j.list=se}if(!j.list.length)return!1;let N=0,M=null;for(let W=0;W<j.list.length;W++)if(j.list[W].id===t.data.curId){N=W,M=j.list[W];break}console.info(N,M),m.value=j.path,y.value=j.list;let K=b();return f.value=V(K,J.value),M||(M=f.value[0]),h.value=U(f.value,M),console.info(h.value),z(),!0}function S(q,j,se=0){let N=f.value.length;if(N<1)return;let M=0;if(o.value==="shuffle"){let K=Math.random()*g;j=0;for(let W=0;W<N&&(j=W,!(f.value[W]._weight_stack>K));W++);M=j}else M=q+j;for(;M<0;)M+=N;for(;M>N-1;)M-=N;se||(se=0),se+=1,!(se>N)&&(h.value=M,z())}function x(q){let j=q-h.value;S(h.value,j)}function C(q){const j=parseInt(oe.value)??0;if((q.rate??0)<j)return!1;switch(w.value){case"any":case"file":return De.ignoreFileType.indexOf(q.type??"directory")===-1;default:return w.value==q.type}}function z(){f.value.length&&(_.value.type,f.value[h.value].type,_.value=f.value[h.value]),P()}function P(){t.modalData.base.title=h.value+1+"/"+f.value.length+" "+(_.value.title??"")}async function A(q){if(Rt(q.target)||!t.modalData.layout.active)return;let j,se,N,M,K,W;switch(q.key){case"ArrowLeft":if(q.preventDefault(),q.stopPropagation(),["audio","video"].indexOf(_.value.type??"")!==-1)return;S(h.value,-1);break;case"ArrowRight":if(q.preventDefault(),q.stopPropagation(),["audio","video"].indexOf(_.value.type??"")!==-1)return;S(h.value,1);break;case"a":case"PageUp":q.preventDefault(),q.stopPropagation(),S(h.value,-1);break;case"d":case"PageDown":q.preventDefault(),q.stopPropagation(),S(h.value,1);break;case"w":case"[":switch(t.data.query.mode){default:const ue=m.value.length?m.value[m.value.length-1]:{id:0,id_parent:0,type:"directory",title:"root",description:"",status:1,building:0};if(j=await p(ue.id_parent),se=V(j.list,J.value),N=se.length,N<2)return;M=0,se.forEach((O,l)=>{O.id==t.data.query.id_dir&&(M=l)}),W=se.length;do{for(M-=1;M<0;)M+=N;for(;M>N-1;)M-=N;if(K=se[M],t.data.query.id_dir=`${K.id}`,await v())break}while(--W>0);break;case"id_iterate":const X=t.data.query.keyword.split(","),$=[];X.forEach(O=>$.push(parseInt(O)));let F=null;for(let O=0;O<_.value.crumb_node.length;O++){const l=_.value.crumb_node[O];if($.indexOf(l.id)!==-1){F=l.id;break}}if(!F)break;const te=$.indexOf(F);N=$.length;let ie=te-1;for(;ie<0;)ie+=N;for(;ie>N-1;)ie-=N;const fe=$[ie];for(let O=0;O<f.value.length;O++){const l=f.value[O];for(let I=0;I<l.crumb_node.length;I++)if(l.crumb_node[I].id===fe)return S(O,0)}}break;case"s":case"]":switch(t.data.query.mode){default:const ue=m.value.length?m.value[m.value.length-1]:{id:0,id_parent:0,type:"directory",title:"root",description:"",status:1,building:0};if(j=await p(ue.id_parent),se=V(j.list,J.value),N=se.length,N<2)return;M=0,se.forEach((O,l)=>{O.id==t.data.query.id_dir&&(M=l)}),W=se.length;do{for(M+=1;M<0;)M+=N;for(;M>N-1;)M-=N;if(K=se[M],t.data.query.id_dir=`${K.id}`,await v())break}while(--W>0);break;case"id_iterate":const X=t.data.query.keyword.split(","),$=[];X.forEach(O=>$.push(parseInt(O)));let F=null;for(let O=0;O<_.value.crumb_node.length;O++){const l=_.value.crumb_node[O];if($.indexOf(l.id)!==-1){F=l.id;break}}if(!F)break;const te=$.indexOf(F);N=$.length;let ie=te+1;for(;ie<0;)ie+=N;for(;ie>N-1;)ie-=N;const fe=$[ie];for(let O=0;O<f.value.length;O++){const l=f.value[O];for(let I=0;I<l.crumb_node.length;I++)if(l.crumb_node[I].id===fe)return S(O,0)}break}break;case"NumpadEnter":case"Enter":break;case"Delete":q.preventDefault(),q.stopPropagation();const ee=new Set;_.value&&_.value.id&&ee.add(_.value.id),await be.op_bath_delete(ee,[],!1,()=>{S(h.value,1)});break}}function U(q,j){let se=0;return q.forEach((N,M)=>{N.id===j.id&&(se=M)}),se}const J=pe(s.get("browser_list_sort")??"name_asc");function R(q){var se;console.info("setSort",J.value,q),(se=q.target)==null||se.blur();const j=f.value;f.value=[],V(j,J.value),f.value=j,h.value=U(j,_.value),P()}function V(q,j){return q=_a(q,j),h.value=U(q,_.value),s.set("browser_list_sort",J.value),q}const w=pe(s.get("browser_list_filter")??"any");function Q(q){s.set("browser_list_filter",q);let j=f.value[h.value],se=b();f.value=V(se,J.value),h.value=U(f.value,j),console.info(h.value),z()}const oe=pe("0");function G(q){let j=f.value[h.value],se=b();f.value=V(se,J.value),h.value=U(f.value,j),console.info(h.value),z()}return(q,j)=>(ae(),yr(yo(_.value.type&&r[_.value.type]?r[_.value.type]:r.base),{data:t.data,modalData:t.modalData,nodeList:y.value,curNode:_.value,curIndex:h.value,onNav:x},{info:Zn(()=>{var se,N;return[re("div",{class:Ae({info:!0,detail:u.value})},[u.value?(ae(),le(_e,{key:0},[re("p",null,Ce(_.value.title)+" ("+Ce(ke(Te).kmgt(((N=(se=_.value.file_index)==null?void 0:se.raw)==null?void 0:N.size)??0,2))+") ",1),_.value.crumb_node?(ae(),le("p",Fd,[Zr("Dir : "),(ae(!0),le(_e,null,Be(_.value.crumb_node,M=>(ae(),le(_e,null,[Zr("/"+Ce(M.title),1)],64))),256))])):Ie("",!0),re("p",jd,Ce(_.value.description),1)],64)):Ie("",!0)],2)]}),btnContainer:Zn(()=>{var se,N;return[re("div",Hd,[u.value?(ae(),le(_e,{key:0},[n?Ye((ae(),le("select",{key:0,"onUpdate:modelValue":j[0]||(j[0]=M=>oe.value=M),onChange:j[1]||(j[1]=M=>G(oe.value))},[(ae(!0),le(_e,null,Be(ke(De).rateMobile,(M,K)=>(ae(),le("option",{value:K,key:"BROWSER_RATE_"+q.modalData.nid+"_"+K},Ce(M),9,Ud))),128))],544)),[[en,oe.value]]):Ye((ae(),le("select",{key:1,class:"sysIcon","onUpdate:modelValue":j[2]||(j[2]=M=>oe.value=M),onChange:j[3]||(j[3]=M=>G(oe.value))},[(ae(!0),le(_e,null,Be(ke(De).rate,(M,K)=>(ae(),le("option",{class:"sysIcon_A sysIcon",value:K,innerHTML:M,key:"BROWSER_RATE_"+q.modalData.nid+"_"+K},null,8,Wd))),128))],544)),[[en,oe.value]]),Ye(re("select",{"onUpdate:modelValue":j[4]||(j[4]=M=>w.value=M),onChange:j[5]||(j[5]=M=>Q(w.value))},[(ae(!0),le(_e,null,Be(ke(De).fileType,(M,K)=>(ae(),le("option",{value:M,key:"BROWSER_TYPE_"+q.modalData.nid+"_"+K},Ce(M),9,Vd))),128))],544),[[en,w.value]]),Kd],64)):Ie("",!0),Ye(re("select",{"onUpdate:modelValue":j[6]||(j[6]=M=>J.value=M),onChange:j[7]||(j[7]=M=>R(M))},[(ae(!0),le(_e,null,Be(ke(De).sort,(M,K)=>(ae(),le("option",{value:K,key:"BROWSER_SORT_"+q.modalData.nid+"_"+K},Ce(M),9,Yd))),128))],544),[[en,J.value]]),re("button",{class:Ae(["sysIcon",`sysIcon_player_${o.value}`]),onClick:c},null,2),re("button",{class:Ae(["sysIcon","sysIcon_info-cirlce-o"]),onClick:d}),(N=(se=_.value.file_index)==null?void 0:se.raw)!=null&&N.path?(ae(),le("button",{key:1,class:Ae(["sysIcon","sysIcon_download"]),onClick:j[8]||(j[8]=M=>ke(be).op_download(_.value))})):Ie("",!0)])]}),navigator:Zn(()=>[re("div",{class:Ae({pagination:1,isMobile:n})},[re("div",{class:"left",onClick:j[9]||(j[9]=se=>S(h.value,-1))},qd),re("div",{class:"right",onClick:j[10]||(j[10]=se=>S(h.value,1))},Gd)],2)]),_:1},40,["data","modalData","nodeList","curNode","curIndex"]))}}),Qd={class:"modal_locator"},eh={class:"locator_list"},th=["onClick"],nh={class:"type"},rh={class:"tree"},sh={class:"title"},ih=Ue({__name:"locator",props:{data:{},modalData:{}},setup(e){const t=pe(null);let n={mode:"directory",id_dir:"",keyword:"",id_tag:"",cascade_dir:"1",node_type:"directory",with:"crumb",limit:"20"};const r=e,s=pe([]);nt(()=>{var u;(u=t.value)==null||u.focus()}),ft(()=>{});async function i(){const u=await Se("file/get",n);!u||!u.list||(n.keyword&&"root".indexOf(n.keyword)!==-1&&u.list.unshift({id:0,title:"root",status:1,type:"directory",crumb_node:[]}),s.value=u.list,s.value.length&&(s.value[0]._sel=!0,r.modalData.layout.h<220&&(r.modalData.layout.h=220)))}async function a(u){console.info(u),!await c(u)&&Te.debounce(()=>{var y;let m=(y=t.value)==null?void 0:y.value;if(!m||!m.length){s.value=[];return}console.info(m),console.info(r.modalData),n.keyword=m,i()},200,"locator")}async function o(u){console.info(u);const d=dn();if(!await r.data.call(u))return d.close(r.modalData.nid)}async function c(u){let d,m,y=!1;switch(u.code){case"ArrowDown":if(y=!0,u.stopPropagation(),u.preventDefault(),!s.value.length)break;for(d=-1,s.value.forEach((g,h)=>{g._sel&&(d=h)}),m=d+1;m<0;)m+=s.value.length;for(;m>=s.value.length;)m-=s.value.length;s.value.forEach((g,h)=>{g._sel=h==m});break;case"ArrowUp":if(y=!0,u.stopPropagation(),u.preventDefault(),!s.value.length)break;for(d=0,s.value.forEach((g,h)=>{g._sel&&(d=h)}),m=d-1;m<0;)m+=s.value.length;for(;m>=s.value.length;)m-=s.value.length;s.value.forEach((g,h)=>{g._sel=h==m});break;case"NumpadEnter":case"Enter":if(y=!0,u.stopPropagation(),u.preventDefault(),!s.value.length||(d=-1,s.value.forEach((g,h)=>{g._sel&&(d=h)}),d==-1))break;const f=s.value[d];o(f);break}return y}return(u,d)=>(ae(),le("div",Qd,[re("input",{type:"text",class:"locator_input",placeholder:"type title/desc here ...",ref_key:"locatorInput",ref:t,onKeydown:a},null,544),re("div",eh,[(ae(!0),le(_e,null,Be(s.value,m=>(ae(),le("div",{onClick:y=>o(m),class:Ae({active:m._sel})},[re("p",nh,Ce(m.type),1),re("p",rh,[re("span",sh,Ce(m.title),1),m.crumb_node?(ae(!0),le(_e,{key:0},Be(m.crumb_node,y=>(ae(),le("span",null,Ce(y.title),1))),256)):Ie("",!0)])],10,th))),256))])]))}}),oh={class:"upload_list"},ah={class:"title"},lh={class:"meta"},ch={key:0},uh={key:1},fh=["onClick"],dh=re("div",null,"drag / drop files here...",-1),hh={class:"upload_menu"},ph={key:1},mh=Ue({__name:"uploader",props:{data:{},modalData:{}},setup(e){const t=e,n=pe([]),r=new Map;nt(()=>{}),ft(()=>{});function s(g){var h,_,p;if(console.debug("onDrop",g.type,(h=g.dataTransfer)==null?void 0:h.files,g),g.preventDefault(),g.stopPropagation(),!(!g.dataTransfer||!g.dataTransfer.files.length)){for(let b=0;b<((_=g.dataTransfer)==null?void 0:_.files.length);b++){const v=(p=g.dataTransfer)==null?void 0:p.items[b],S=v.webkitGetAsEntry();if(S.isFile){const x=v.getAsFile();n.value.push({name:S.fullPath,size:x.size,file:x,isDir:!1,status:"waiting",start:0,loaded:0})}else i(S).then(x=>{x.forEach(C=>n.value.push(C))})}console.info(n.value)}}async function i(g){const h=[];h.push({name:g.fullPath,size:0,file:null,isDir:!0,status:"waiting",start:0,loaded:0});const _=g.createReader(),p=await o(_);for(let b=0;b<p.length;b++){const v=p[b];if(v.isFile){const S=await a(v);h.push({name:v.fullPath,size:S.size,file:S,isDir:!1,status:"waiting",start:0,loaded:0})}v.isDirectory&&(await i(v)).forEach(x=>h.push(x))}return h}function a(g){return new Promise(h=>{g.file(_=>h(_))})}function o(g){return new Promise(h=>{g.readEntries(_=>{h(_)})})}function c(g){g.stopPropagation(),g.preventDefault()}let u=pe(!1);async function d(){if(n.value.length){u.value=!0;for(let g=0;g<n.value.length;g++)n.value[g].status==="waiting"&&await m(n.value[g]);u.value=!1,t.data.emitGo("reload")}}async function m(g){let h=null,[_,p,b]=y(g.name);if(g.isDir){const v=new FormData;v.set("pid",_),v.set("title",b),g.status="uploading",h=await Se("file/mkdir",v),r.set(p+b+"/",h.id)}else{const v=new FormData;v.set("pid",_),v.set("file",g.file),g.status="uploading",h=await Se("file/upd",v,{upload:S=>{g.loaded=S.loaded}})}return g.status="complete",h}function y(g){const h=g.replace(/[\\/]+$/i).split(/[\\/]/i),_=h.pop();if(!h.length)return[t.data.pid,"/",_];let p="";for(let v=0;v<h.length;v++)p+=h[v]+"/";return p=="/"?[t.data.pid,p,_]:[r.get(p),p,_]}function f(g){n.value.splice(g,1)}return(g,h)=>(ae(),le("div",{class:"modal_uploader",onDrop:s,onDragover:c},[re("div",oh,[(ae(!0),le(_e,null,Be(n.value,(_,p)=>(ae(),le("div",{key:`file_upload_${p}`},[re("div",ah,Ce(_.name),1),re("div",lh,[_.status==="uploading"?(ae(),le("span",ch,Ce(Math.round(100*_.loaded/_.size))+" % ",1)):(ae(),le("span",uh,Ce(_.status),1)),re("span",null,Ce(ke(Te).kmgt(_.size)),1),_.status==="waiting"?(ae(),le("span",{key:2,onClick:b=>f(p),class:"pointer"},"X",8,fh)):Ie("",!0)])]))),128)),dh]),re("div",hh,[ke(u)?(ae(),le("button",ph,"uploading")):(ae(),le("button",{key:0,onClick:d},"upload"))])],32))}}),_h={class:"modal_rename_util"},gh={class:"mode_selector"},vh=["id","name"],yh=["for"],wh=["id","name"],bh=["for"],xh=Uo("<p>rename pattern:</p><table><tbody><tr><td>code</td><td>description</td></tr><tr><td>{filename}</td><td>file name</td></tr><tr><td>{index}</td><td>index by sort, prefix by max len+1</td></tr><tr><td>{index:n}</td><td>index by sort, prefix len by [n]</td></tr><tr><td>{directory}</td><td>parent directory name</td></tr></tbody></table>",2),kh=re("span",null,"pattern",-1),Eh=re("p",null,"rename bath:",-1),Sh=Ue({__name:"renameUtil",props:{data:{},modalData:{}},setup(e){pe(null);const t=e;let n=pe("pattern"),r=pe("{index}_{filename}"),s=pe("");nt(()=>{const o=[];t.data.node_list.forEach(c=>{o.push((c==null?void 0:c.title)??"")}),s.value=o.join(`\r
`),console.info(s)}),ft(()=>{});function i(o){let c=o.length.toString().length+1,u=0,d="",m=r.value.match(/\{index:(\d+)}/);m&&(u=parseInt(m[1]),d=m[0]);const y=new Map;o.forEach((g,h)=>{const _=g.crumb_node?g.crumb_node[g.crumb_node.length-1]:null,p=_?_.title:"";let b=new Map;b.set("{filename}",g.title??""),b.set("{index}",Te.prefix(h+1,c,"0")),b.set("{directory}",p??""),b.set(`{index:${d}}`,Te.prefix(h+1,u,"0"));let v=r.value;b.forEach((S,x)=>{v=v.replace(x,S)}),y.set(g.id??0,v)});const f=[];return y.forEach((g,h)=>{f.push({id:h,title:g})}),f}async function a(){const o=dn();let c=[];switch(n.value){default:case"pattern":c=i(t.data.node_list);break;case"bath":const m=s.value.split(/[\r\n]+/);c=[],t.data.node_list.forEach((y,f)=>{m[f]&&m[f].trim().length&&c.push({id:y.id??0,title:m[f].trim()})});break}const u={list:JSON.stringify(c)},d=await Se("file/bath_rename",u);return console.info(d),t.data.callback(c),o.close(t.modalData.nid)}return(o,c)=>(ae(),le("div",_h,[re("div",gh,[Ye(re("input",{id:`P_${t.modalData.nid}_MODE_PATTERN`,name:`P_${t.modalData.nid}_MODE`,value:"pattern",type:"radio","onUpdate:modelValue":c[0]||(c[0]=u=>$e(n)?n.value=u:n=u)},null,8,vh),[[Jr,ke(n)]]),re("label",{for:`P_${t.modalData.nid}_MODE_PATTERN`},"pattern",8,yh),Ye(re("input",{id:`P_${t.modalData.nid}_MODE_BATH`,name:`P_${t.modalData.nid}_MODE`,value:"bath",type:"radio","onUpdate:modelValue":c[1]||(c[1]=u=>$e(n)?n.value=u:n=u)},null,8,wh),[[Jr,ke(n)]]),re("label",{for:`P_${t.modalData.nid}_MODE_BATH`},"bath",8,bh)]),ke(n)=="pattern"?(ae(),le(_e,{key:0},[xh,re("label",null,[kh,Ye(re("input",{type:"text","onUpdate:modelValue":c[2]||(c[2]=u=>$e(r)?r.value=u:r=u)},null,512),[[Qt,ke(r)]])])],64)):Ie("",!0),ke(n)=="bath"?(ae(),le(_e,{key:1},[Eh,Ye(re("textarea",{"onUpdate:modelValue":c[3]||(c[3]=u=>$e(s)?s.value=u:s=u)},null,512),[[Qt,ke(s)]])],64)):Ie("",!0),re("label",{class:"confirm"},[re("button",{onClick:a},"submit")])]))}}),Oh={class:"fr_popup"},Ch=["data-ref-id","onClick"],Ih=["onPointerdown","onDblclick"],Ah={class:"modal_title"},Dh={class:"modal_menu"},Lh=["onClick"],Rh=["onClick"],Th=["onClick"],Ph={class:"modal_content"},zh=["innerHTML"],Mh={key:1,class:"modal_content_form"},$h={key:0},Nh=re("span",null,null,-1),Bh=["onUpdate:modelValue"],Fh=["onUpdate:modelValue"],jh=["onUpdate:modelValue"],Hh=["onUpdate:modelValue"],Uh=["id","name","value","onUpdate:modelValue"],Wh=["for"],Vh=["id","name","value","onUpdate:modelValue"],Kh=["for"],Yh=["onUpdate:modelValue","multiple"],Xh=["value"],qh={key:2,class:"modal_content_callback"},Zh=["onClick"],Gh=["onPointerdown"],Jh=Uo('<div class="c_l"></div><div class="c_r"></div><div class="c_t"></div><div class="c_b"></div><div class="c_lt"></div><div class="c_lb"></div><div class="c_rt"></div><div class="c_rb"></div>',8),Qh=[Jh],ep={key:0,class:"fr_alpha"},Ot=20,tp=Ue({__name:"Popup",setup(e){const t={fileBrowser:Jd,uploader:mh,locator:ih,renameUtil:Sh},n=new Date().valueOf(),r=pe(new Map);function s(v){const S=Math.floor((new Date().valueOf()-n)/100),x=window.innerWidth,C=window.innerHeight,z={nid:"",base:{title:v.title??"",alpha:v.alpha??!1,key:v.key??"",single:v.single??!1},layout:{w:0,h:0,x:0,y:0,minW:0,minH:0,allow_resize:!1,allow_move:!1,allow_escape:!1,allow_fullscreen:!1,auto_focus:!1,active:!1,index:0,fullscreen:!1},content:{text:pe(""),form:[],component:[]},callback:[],closed:!1,event:{}};z.nid=(S+Math.random()).toString(32),z.event.resize=new Event(`modal_resizing_${z.nid}`),console.info(S,z.nid);const P={};if(P.w=v.w??400,P.h=v.h??160,P.x=(x-P.w)/2,P.y=(C-P.h)/2,P.minW=v.minW??400,P.minH=v.minH??160,P.allow_resize=v.allow_resize??!0,P.allow_move=v.allow_move??!0,P.allow_escape=v.allow_escape??!0,P.allow_fullscreen=v.allow_fullscreen??!1,P.auto_focus=v.auto_focus??!0,P.active=!1,P.index=S,P.fullscreen=v.fullscreen??!1,Object.assign(z.layout,P),v.text&&(typeof v.text=="string"?z.content.text.value=v.text:z.content.text=v.text),v.form&&(Array.isArray(v.form)?z.content.form.push(...v.form):z.content.form.push(v.form),z.content.form.forEach(A=>{if(A.value=A.value??null,A.options=A.options??null,A.default=A.default??null,A.multiple=!!A.multiple,A.disabled=!!A.disabled,A.options&&Array.isArray(A.options)){let U={};A.options.forEach(J=>{U[J]=J}),A.options=U}})),v.component&&(Array.isArray(v.component)?v.component.forEach(A=>{let U;typeof A=="string"?U={key:"",componentName:A,data:{}}:U=Object.assign({key:"",componentName:null,data:{}},A),z.content.component.push(U)}):typeof v.component=="string"?z.content.component.push({key:"",componentName:v.component,data:{}}):z.content.component.push(Object.assign({key:"",componentName:null,data:{}},v.component))),v.callback){if(Array.isArray(v.callback))v.callback.forEach((A,U)=>{let J;typeof A=="function"?J={key:"",name:"",func:A}:J=Object.assign({key:"",name:"",func:null},A),z.callback.push(J)});else if(typeof v.callback=="function")z.callback.push({key:"",name:"",func:v.callback});else if(v.callback.func)z.callback.push(Object.assign({key:"",name:"",func:null},v.callback));else for(const A in v.callback){if(!Object.prototype.hasOwnProperty.call(v.callback,A))continue;const U=v.callback[A];z.callback.push(Object.assign({key:A,name:A,func:U}))}z.callback.forEach((A,U)=>{if(A.name&&!A.key)A.key=A.name;else if(!A.name&&A.key)A.name=A.key;else if(!A.name&&!A.key){let J="button";z.callback.length>1&&(J+=" "+U),A.name=J,A.key=J}})}return console.debug(z),z}window.addEventListener("resize",v=>{r.value.forEach(S=>{if(S.layout.fullscreen){const x={x:Ot,y:Ot,w:window.innerWidth-Ot*2,h:window.innerHeight-Ot*2};Object.assign(S.layout,x),document.dispatchEvent(S.event.resize)}})});const i=dn();i.handleEvent("set",v=>{let S=null,x=null;return v.single&&r.value.forEach((C,z,P)=>{C.base.key==v.key&&(S=z,x=C)}),S?setTimeout(()=>{a(S)}):(x=s(v),r.value.set(x.nid,x),setTimeout(()=>{a(x.nid)})),p(),x}),i.handleEvent("close",v=>u(v)),document.body.addEventListener("click",v=>{let S=v.target;gn(S)||a(0)});function a(v){const S=Math.floor((new Date().valueOf()-n)/100);r.value.forEach(x=>{if(x.nid===v){x.layout.index=S;let C=!x.layout.active;x.layout.active=!0,x.layout.auto_focus&&C&&setTimeout(()=>{const z=document.querySelector(`.modal_dom[data-ref-id="${x.nid}"] input,.modal_dom[data-ref-id="${x.nid}"] button,.modal_dom[data-ref-id="${x.nid}"] textarea`);z&&z.focus()},100)}else x.layout.active=!1})}function o(v){const S=r.value.get(v);if(!S)return;const x={x:Ot,y:Ot,w:window.innerWidth-Ot*2,h:window.innerHeight-Ot*2,fullscreen:!0};Object.assign(S.layout,x),document.dispatchEvent(S.event.resize)}function c(v){const S=r.value.get(v);if(!S)return;const x={x:0,y:0,w:S.layout.minW,h:S.layout.minH,fullscreen:!1};x.x=(window.innerWidth-x.w)/2,x.y=(window.innerHeight-x.h)/2,Object.assign(S.layout,x),document.dispatchEvent(S.event.resize)}function u(v){const S=r.value.get(v);if(!S||!S.layout.allow_escape)return;r.value.delete(v),p();let x=-1,C=-1;return r.value.forEach(z=>{x>z.layout.index||(x=z.layout.index,C=z.nid)}),C!=-1&&a(C),S}let d={x:0,y:0,d:"",modalX:0,modalY:0,modalW:0,modalH:0,modal:null},m=0;function y(v,S){S.preventDefault(),S.stopPropagation(),S.pointerId&&(m=S.pointerId,S.target.hasPointerCapture(S.pointerId)),d.x=S.clientX,d.y=S.clientY,d.d=S.target.className,r.value.forEach(x=>{x.nid===v&&(d.modal=x)}),d.modal&&(d.modal.layout.fullscreen||(d.modalX=d.modal.layout.x,d.modalY=d.modal.layout.y,d.modalW=d.modal.layout.w,d.modalH=d.modal.layout.h,document.addEventListener("pointerup",g),document.addEventListener("pointermove",f)))}function f(v){if(v.preventDefault(),!d.modal||!v.pointerId||m!=v.pointerId)return;const S={x:v.clientX-d.x,y:v.clientY-d.y},x={x:d.modal.layout.x,y:d.modal.layout.y,w:d.modal.layout.w,h:d.modal.layout.h};switch(d.d){case"c_l":x.x=d.modalX+S.x,x.w=d.modalW-S.x;break;case"c_r":x.x=d.modalX,x.w=d.modalW+S.x;break;case"c_t":x.y=d.modalY+S.y,x.h=d.modalH-S.y;break;case"c_b":x.y=d.modalY,x.h=d.modalH+S.y;break;case"c_lt":x.x=d.modalX+S.x,x.w=d.modalW-S.x,x.y=d.modalY+S.y,x.h=d.modalH-S.y;break;case"c_lb":x.x=d.modalX+S.x,x.w=d.modalW-S.x,x.y=d.modalY,x.h=d.modalH+S.y;break;case"c_rt":x.x=d.modalX,x.w=d.modalW+S.x,x.y=d.modalY+S.y,x.h=d.modalH-S.y;break;case"c_rb":x.x=d.modalX,x.w=d.modalW+S.x,x.y=d.modalY,x.h=d.modalH+S.y;break;case"modal_header":case"modal_title":x.x=d.modalX+S.x,x.y=d.modalY+S.y;break}const C={l:0,r:window.innerWidth,t:0,b:window.innerHeight};x.w<100&&(x.w=100),x.h<80&&(x.h=80),x.y<0&&(x.y=0),x.y>C.b-x.h/2&&(x.y=C.b-x.h/2),x.x<0-x.w/2&&(x.x=0-x.w/2),x.x>C.r-x.w/2&&(x.x=C.r-x.w/2),d.modal.layout.minW&&x.w<d.modal.layout.minW&&(x.w=d.modal.layout.minW),d.modal.layout.minH&&x.h<d.modal.layout.minH&&(x.h=d.modal.layout.minH),Object.assign(d.modal.layout,x),document.dispatchEvent(d.modal.event.resize)}function g(v){v.preventDefault(),v.stopPropagation(),!(!v.pointerId||m!=v.pointerId)&&(document.removeEventListener("pointerup",g),document.removeEventListener("pointermove",f),m=0,d.modal=null)}function h(v,S){const x=r.value.get(v);x&&x.callback.forEach(async C=>{C.key!==S||await C.func(x)||u(v)})}const _=pe(!1);function p(){let v=!1;r.value.forEach(S=>{S.base.alpha&&(v=!0)}),_.value=v}nt(()=>{console.info("Popup mounted"),document.addEventListener("keydown",b)}),ft(()=>{console.info("unmounted"),document.removeEventListener("keydown",b)});function b(v){switch(v.key){case"Escape":r.value.forEach((x,C)=>{if(x.layout.active){if(!x.layout.allow_escape)return;setTimeout(()=>u(x.nid))}});break;case"NumpadEnter":case"Enter":if(v.target.tagName==="BODY"||v.target.tagName==="BUTTON"||v.isComposing)return;let S=v.target;for(;S.parentElement;){if(S=S.parentElement,!S.classList.contains("modal_dom"))continue;const C=S.getAttribute("data-ref-id");if(!C)break;const z=r.value.get(C);if(!z)break;for(let P=0;P<z.callback.length;P++){const A=z.callback[P].key;return h(C,A)}}break}}return(v,S)=>(ae(),le(_e,null,[re("div",Oh,[(ae(!0),le(_e,null,Be(r.value,([x,C])=>{var z;return ae(),le("div",{key:`_modal_${x}`,class:Ae({modal_dom:!0,active:C.layout.active,resizing:((z=ke(d).modal)==null?void 0:z.nid)==C.nid}),"data-ref-id":C.nid,style:Ge({zIndex:C.layout.index,width:C.layout.w+"px",height:C.layout.h+"px",left:C.layout.x+"px",top:C.layout.y+"px"}),onClick:Nc(P=>a(C.nid),["stop"])},[re("div",{class:"modal_header",onPointerdown:P=>y(C.nid,P),onDblclick:P=>C.layout.fullscreen?c(C.nid):o(C.nid)},[re("div",Ah,Ce(C.base.title),1),re("div",Dh,[C.layout.allow_move&&C.layout.allow_fullscreen?(ae(),le(_e,{key:0},[C.layout.fullscreen?(ae(),le("span",{key:1,class:"buttonStyle sysIcon sysIcon_windowize",onClick:P=>c(C.nid)},null,8,Rh)):(ae(),le("span",{key:0,class:"buttonStyle sysIcon sysIcon_maximize",onClick:P=>o(C.nid)},null,8,Lh))],64)):Ie("",!0),re("span",{class:"buttonStyle sysIcon sysIcon_close",onClick:P=>u(C.nid)},null,8,Th)])],40,Ih),re("div",Ph,[C.content.text&&C.content.text.length?(ae(),le("div",{key:0,class:"modal_content_text",innerHTML:C.content.text},null,8,zh)):Ie("",!0),C.content.form&&C.content.form.length?(ae(),le("div",Mh,[(ae(!0),le(_e,null,Be(C.content.form,(P,A)=>(ae(),le("label",{key:`_modal_${x}_form_${A}`},[P.label?(ae(),le("span",$h,Ce(P.label),1)):Ie("",!0),Nh,re("span",null,[P.type==="text"?Ye((ae(),le("input",{key:0,type:"text","onUpdate:modelValue":U=>P.value=U},null,8,Bh)),[[Qt,P.value]]):Ie("",!0),P.type==="textarea"?Ye((ae(),le("textarea",{key:1,"onUpdate:modelValue":U=>P.value=U},null,8,Fh)),[[Qt,P.value]]):Ie("",!0),P.type==="date"?Ye((ae(),le("input",{key:2,type:"date","onUpdate:modelValue":U=>P.value=U},null,8,jh)),[[Qt,P.value]]):Ie("",!0),P.type==="datetime"?Ye((ae(),le("input",{key:3,type:"datetime-local","onUpdate:modelValue":U=>P.value=U},null,8,Hh)),[[Qt,P.value]]):Ie("",!0),P.type==="checkbox"?(ae(!0),le(_e,{key:4},Be(P.options,(U,J)=>(ae(),le(_e,{key:`P_${x}_C_${A}_CB_${J}`},[Ye(re("input",{id:`P_${x}_C_${A}_CB_${J}`,name:`P_${x}_C_${A}_CB`,value:J,type:"checkbox","onUpdate:modelValue":R=>P.value=R},null,8,Uh),[[zc,P.value]]),re("label",{for:`P_${x}_C_${A}_CB_${J}`},Ce(U),9,Wh)],64))),128)):Ie("",!0),P.type==="radio"?(ae(!0),le(_e,{key:5},Be(P.options,(U,J)=>(ae(),le(_e,{key:`P_${x}_C_${A}_RD_${J}`},[Ye(re("input",{id:`P_${x}_C_${A}_RD_${J}`,name:`P_${x}_C_${A}_RD`,value:J,type:"radio","onUpdate:modelValue":R=>P.value=R},null,8,Vh),[[Jr,P.value]]),re("label",{for:`P_${x}_C_${A}_RD_${J}`},Ce(U),9,Kh)],64))),128)):Ie("",!0),P.type==="select"?Ye((ae(),le("select",{key:6,"onUpdate:modelValue":U=>P.value=U,multiple:P.multiple},[(ae(!0),le(_e,null,Be(P.options,(U,J)=>(ae(),le("option",{key:`P_${x}_C_${A}_SL_${J}`,value:J},Ce(U),9,Xh))),128))],8,Yh)),[[en,P.value]]):Ie("",!0)])]))),128))])):Ie("",!0),(ae(!0),le(_e,null,Be(C.content.component,(P,A)=>(ae(),yr(yo(t[P.componentName]),{key:`CMP_${x}_${A}`,data:P.data,modalData:C},null,8,["data","modalData"]))),128)),C.callback&&C.callback.length?(ae(),le("div",qh,[(ae(!0),le(_e,null,Be(C.callback,(P,A)=>(ae(),le("button",{key:`BTN_${x}_${A}`,onClick:U=>h(C.nid,P.key)},Ce(P.name),9,Zh))),128))])):Ie("",!0)]),C.layout.allow_resize?(ae(),le("div",{key:0,class:"modal_border",onPointerdown:P=>y(C.nid,P)},Qh,40,Gh)):Ie("",!0)],14,Ch)}),128))]),_.value?(ae(),le("div",ep)):Ie("",!0)],64))}}),np={class:"fr_context"},rp=["onClick"],sp=["innerHTML"],ip={key:0,class:"context_menu_sub"},op=["onClick"],ap=["innerHTML"],lp=Ue({__name:"Context",setup(e){const n=qt().get(),r=n?n!=null&&n.group.admin?2:1:0,s=da(),i=pe([]),a=pe(null),o=pe(!0),c=pe({x:-1e3,y:0,w:0,h:0,sx:0,sy:0,direction:"lb"});s.register(u);function u(_,p){o.value=!1;const b=[];_.forEach(v=>{if(d(v)){if(v.child){let S=[];if(v.child.forEach(x=>{d(x)&&S.push(x)}),!S.length)return;v.child=S}b.push(v)}}),i.value=b,console.info(b),setTimeout(()=>m(p),20)}function d(_){switch(_.auth){case"none":return!1;default:case"guest":return!0;case"user":if(r<1)break;return!0;case"admin":if(r<2)break;return!0}}function m(_){if(!a.value)return;const p=a.value;let b=h();const v={x:_.clientX,y:_.clientY,w:p==null?void 0:p.offsetWidth,h:p==null?void 0:p.offsetHeight,sx:b.scrollTop,sy:b.scrollLeft,direction:"rb"};let S=["r","b"];switch(v.w+v.x>window.innerWidth&&(S[0]="l"),v.h+v.y>window.innerHeight&&(S[1]="t"),v.direction=S.join(""),v.direction){case"rb":break;case"rt":v.y-=v.h;break;case"lb":v.x-=v.w;break;case"lt":v.x-=v.w,v.y-=v.h;break}c.value=v,h().addEventListener("scroll",g),setTimeout(()=>o.value=!0,10)}function y(){h().removeEventListener("scroll",g),o.value=!1,f=null,setTimeout(()=>{i.value=[],c.value={x:-1e3,y:0,w:0,h:0,sx:0,sy:0,direction:"lb"}},10)}nt(()=>{console.info(f)});let f=null;function g(_){const p=h();if(!p)return;let b=c.value,v=p.scrollLeft,S=p.scrollTop,x=v-b.sx,C=S-b.sy;c.value=Object.assign(b,{x:b.x-x,y:b.y-C,sx:v,sy:S})}function h(){return f||(f=document.querySelector(".fr_content"),f)}return addEventListener("contextmenu",_=>{console.info("triggerMenu"),u([],_)}),addEventListener("click",_=>{y()}),(_,p)=>(ae(),le("div",np,[re("div",{class:Ae(["context_menu",o.value?"show":"",c.value.direction]),style:Ge({left:c.value.x+"px",top:c.value.y+"px"}),ref_key:"contextDOM",ref:a},[(ae(!0),le(_e,{key:0},Be(i.value,b=>{var v;return ae(),le("div",{class:Ae(["context_item",(v=b.child)!=null&&v.length?"has_sub":""]),onClick:b.method},[re("span",{innerHTML:b.title},null,8,sp),b.child&&b.child.length?(ae(),le("div",ip,[(ae(!0),le(_e,{key:0},Be(b.child,S=>(ae(),le("div",{class:Ae({context_item:!0}),onClick:S.method},[re("span",{innerHTML:S.title},null,8,ap)],8,op))),256))])):Ie("",!0)],10,rp)}),256))],6)]))}}),cp={class:"fr_body"},up=Ue({__name:"App",setup(e){const n=qt().get();n&&(document.cookie=`token=${n.token}; max-age=31536000`,r());async function r(){const s=await Se("setting/get_front_conf");s&&(console.info(s),s.onlyoffice_enabled==="true"&&(De.onlyOffice.enabled=!0,De.onlyOffice.origin=s.origin,De.onlyOffice.apiSrc=s.onlyoffice_api_src,De.onlyOffice.jwtSecret=s.onlyoffice_jwt_secret))}return(s,i)=>{const a=bl("router-view");return ae(),le(_e,null,[Fe(lu,{class:"fr_header"}),Fe(tp),Fe(lp),re("div",cp,[Fe(kf,{class:"fr_navi"}),Fe(a)])],64)}}});Af();const Ds=jc(up);Ds.use(Vc());Ds.use(vf);Ds.mount("#app");export{zc as A,kr as B,De as C,Rt as D,ct as E,_e as F,Te as G,be as H,ml as I,_l as J,Jr as K,Zr as L,Jo as _,dn as a,nt as b,yr as c,Ue as d,hp as e,ft as f,dp as g,le as h,re as i,Be as j,ke as k,en as l,Ie as m,Ae as n,ae as o,Pf as p,Se as q,pe as r,_f as s,gf as t,Or as u,Qt as v,Ye as w,Ce as x,Nc as y,Fe as z};

import{d as T,r as i,b as h,E as x,o as c,h as f,i as d,F as y,j as E,n as H,G as L,_ as F}from"./index-CvokCGv7.js";const V={class:"hinter"},M=["innerHTML","onClick"],I=T({__name:"Hinter",props:{modelValue:{},getList:{type:Function},submit:{type:Function},parseText:{type:Function},meta:{}},setup(_){const l=_,u=i(null);h(()=>{u.value&&l.modelValue&&(console.info(l.modelValue),u.value.innerHTML=l.parseText(l.modelValue))});async function m(e){e.isComposing||L.debounce(async()=>{var a;n.value=await l.getList((a=u.value)==null?void 0:a.innerHTML),n.value.length&&(n.value[0]._sel=!0)},200,"hinterDebounce")}async function g(e){let t,a;switch(e.code){case"ArrowDown":if(e.stopPropagation(),e.preventDefault(),!n.value.length)break;for(t=-1,n.value.forEach((o,r)=>{o._sel&&(t=r)}),a=t+1;a<0;)a+=n.value.length;for(;a>=n.value.length;)a-=n.value.length;n.value.forEach((o,r)=>{o._sel=r==a});break;case"ArrowUp":if(e.stopPropagation(),e.preventDefault(),!n.value.length)break;for(t=0,n.value.forEach((o,r)=>{o._sel&&(t=r)}),a=t-1;a<0;)a+=n.value.length;for(;a>=n.value.length;)a-=n.value.length;n.value.forEach((o,r)=>{o._sel=r==a});break;case"NumpadEnter":case"Enter":if(e.stopPropagation(),e.preventDefault(),!n.value.length||(t=-1,n.value.forEach((o,r)=>{o._sel&&(t=r)}),t==-1))break;const s=n.value[t];p(s);break}}x(()=>l.modelValue,async e=>{console.info(e),v.value=e,u.value&&(u.value.innerHTML=l.parseText(e))});const v=i(null);h(()=>{var e;(e=u.value)==null||e.focus()});const n=i([]);function b(e){return l.parseText?l.parseText(e):e}async function p(e){v.value=null,u.value&&(u.value.innerHTML=""),n.value=[],await l.submit(e,l.meta)}function k(){}function w(){}return(e,t)=>(c(),f("div",V,[d("div",{contenteditable:"true",onInput:m,onKeydown:g,onFocus:w,onBlur:k,ref_key:"editor",ref:u},null,544),d("ul",null,[(c(!0),f(y,null,E(n.value,(a,s)=>(c(),f("li",{key:`hinter_${s}`,innerHTML:b(a),onClick:o=>p(a),class:H({active:a._sel})},null,10,M))),128))])]))}}),C=F(I,[["__scopeId","data-v-1a994bff"]]);export{C as H};

const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./FileView_N-hII4ZYYJ.js","./FileView.vue_vue_type_style_index_0_lang-CTYagGD7.js","./FileItem-Btsi148i.js","./ContentEditable.vue_vue_type_script_setup_true_lang-B_ciByRF.js","./Hinter-D_dlDKH-.js","./Hinter-mAwqbGPx.css","./FileItem-BJTKtmlU.css","./FileView-4q7gxgk7.css","./Favourite-Dh2F0HGj.js","./Favourite-Cu3IAfx1.css","./FileView_R-D4rrWsud.js","./TagView-CGUSsEPw.js","./TagView-B_sbdW8e.css","./UserView-8-ktx_Z1.js","./UserView-DIJNqfb7.css","./LogView-6ZM-QGy5.js","./LogView-B_-u2chg.css","./SettingView-zBlismw_.js","./SettingView-BRg7qwMd.css"])))=>i.map(i=>d[i]);
var ha=Object.defineProperty;var pa=(e,t,n)=>t in e?ha(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var we=(e,t,n)=>pa(e,typeof t!="symbol"?t+"":t,n);function ma(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function ss(e,t){const n=new Set(e.split(","));return r=>n.has(r)}const De={},Qt=[],st=()=>{},_a=()=>!1,ar=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),is=e=>e.startsWith("onUpdate:"),We=Object.assign,os=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},ga=Object.prototype.hasOwnProperty,be=(e,t)=>ga.call(e,t),me=Array.isArray,en=e=>Rn(e)==="[object Map]",ln=e=>Rn(e)==="[object Set]",Is=e=>Rn(e)==="[object Date]",ye=e=>typeof e=="function",Fe=e=>typeof e=="string",wt=e=>typeof e=="symbol",Le=e=>e!==null&&typeof e=="object",Di=e=>(Le(e)||ye(e))&&ye(e.then)&&ye(e.catch),Ri=Object.prototype.toString,Rn=e=>Ri.call(e),va=e=>Rn(e).slice(8,-1),Pi=e=>Rn(e)==="[object Object]",as=e=>Fe(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,gn=ss(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),lr=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},ya=/-(\w)/g,mt=lr(e=>e.replace(ya,(t,n)=>n?n.toUpperCase():"")),ba=/\B([A-Z])/g,cn=lr(e=>e.replace(ba,"-$1").toLowerCase()),cr=lr(e=>e.charAt(0).toUpperCase()+e.slice(1)),Or=lr(e=>e?`on${cr(e)}`:""),Mt=(e,t)=>!Object.is(e,t),qn=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Ti=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},er=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let As;const Mi=()=>As||(As=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ge(e){if(me(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=Fe(r)?Ea(r):Ge(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(Fe(e)||Le(e))return e}const wa=/;(?![^(]*\))/g,xa=/:([^]+)/,ka=/\/\*[^]*?\*\//g;function Ea(e){const t={};return e.replace(ka,"").split(wa).forEach(n=>{if(n){const r=n.split(xa);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Ae(e){let t="";if(Fe(e))t=e;else if(me(e))for(let n=0;n<e.length;n++){const r=Ae(e[n]);r&&(t+=r+" ")}else if(Le(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Sa="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Oa=ss(Sa);function zi(e){return!!e||e===""}function Ca(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=qt(e[r],t[r]);return n}function qt(e,t){if(e===t)return!0;let n=Is(e),r=Is(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=wt(e),r=wt(t),n||r)return e===t;if(n=me(e),r=me(t),n||r)return n&&r?Ca(e,t):!1;if(n=Le(e),r=Le(t),n||r){if(!n||!r)return!1;const s=Object.keys(e).length,i=Object.keys(t).length;if(s!==i)return!1;for(const a in e){const o=e.hasOwnProperty(a),c=t.hasOwnProperty(a);if(o&&!c||!o&&c||!qt(e[a],t[a]))return!1}}return String(e)===String(t)}function ls(e,t){return e.findIndex(n=>qt(n,t))}const Se=e=>Fe(e)?e:e==null?"":me(e)||Le(e)&&(e.toString===Ri||!ye(e.toString))?JSON.stringify(e,$i,2):String(e),$i=(e,t)=>t&&t.__v_isRef?$i(e,t.value):en(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],i)=>(n[Cr(r,i)+" =>"]=s,n),{})}:ln(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Cr(n))}:wt(t)?Cr(t):Le(t)&&!me(t)&&!Pi(t)?String(t):t,Cr=(e,t="")=>{var n;return wt(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let et;class Ni{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=et,!t&&et&&(this.index=(et.scopes||(et.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=et;try{return et=this,t()}finally{et=n}}}on(){et=this}off(){et=this.parent}stop(t){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function ji(e){return new Ni(e)}function Ia(e,t=et){t&&t.active&&t.effects.push(e)}function Fi(){return et}function Aa(e){et&&et.cleanups.push(e)}let Wt;class cs{constructor(t,n,r,s){this.fn=t,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=5,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,Ia(this,s)}get dirty(){if(this._dirtyLevel===2)return!1;if(this._dirtyLevel===3||this._dirtyLevel===4){this._dirtyLevel=1,Nt();for(let t=0;t<this._depsLength;t++){const n=this.deps[t];if(n.computed){if(n.computed.effect._dirtyLevel===2)return!0;if(La(n.computed),this._dirtyLevel>=5)break}}this._dirtyLevel===1&&(this._dirtyLevel=0),jt()}return this._dirtyLevel>=5}set dirty(t){this._dirtyLevel=t?5:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=Rt,n=Wt;try{return Rt=!0,Wt=this,this._runnings++,Ls(this),this.fn()}finally{Ds(this),this._runnings--,Wt=n,Rt=t}}stop(){this.active&&(Ls(this),Ds(this),this.onStop&&this.onStop(),this.active=!1)}}function La(e){return e.value}function Ls(e){e._trackId++,e._depsLength=0}function Ds(e){if(e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)Bi(e.deps[t],e);e.deps.length=e._depsLength}}function Bi(e,t){const n=e.get(t);n!==void 0&&t._trackId!==n&&(e.delete(t),e.size===0&&e.cleanup())}let Rt=!0,Nr=0;const Ui=[];function Nt(){Ui.push(Rt),Rt=!1}function jt(){const e=Ui.pop();Rt=e===void 0?!0:e}function us(){Nr++}function fs(){for(Nr--;!Nr&&jr.length;)jr.shift()()}function Hi(e,t,n){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const r=e.deps[e._depsLength];r!==t?(r&&Bi(r,e),e.deps[e._depsLength++]=t):e._depsLength++}}const jr=[];function Wi(e,t,n){us();for(const r of e.keys()){if(!e.computed&&r.computed&&e.get(r)===r._trackId&&r._runnings>0){r._dirtyLevel=2;continue}let s;r._dirtyLevel<t&&(s??(s=e.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r.computed&&r._dirtyLevel===2&&(r._shouldSchedule=!0),r._dirtyLevel=t),r._shouldSchedule&&(s??(s=e.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==3&&(r._shouldSchedule=!1,r.scheduler&&jr.push(r.scheduler)))}fs()}const Vi=(e,t)=>{const n=new Map;return n.cleanup=e,n.computed=t,n},tr=new WeakMap,Vt=Symbol(""),Fr=Symbol("");function Je(e,t,n){if(Rt&&Wt){let r=tr.get(e);r||tr.set(e,r=new Map);let s=r.get(n);s||r.set(n,s=Vi(()=>r.delete(n))),Hi(Wt,s)}}function bt(e,t,n,r,s,i){const a=tr.get(e);if(!a)return;let o=[];if(t==="clear")o=[...a.values()];else if(n==="length"&&me(e)){const c=Number(r);a.forEach((u,f)=>{(f==="length"||!wt(f)&&f>=c)&&o.push(u)})}else switch(n!==void 0&&o.push(a.get(n)),t){case"add":me(e)?as(n)&&o.push(a.get("length")):(o.push(a.get(Vt)),en(e)&&o.push(a.get(Fr)));break;case"delete":me(e)||(o.push(a.get(Vt)),en(e)&&o.push(a.get(Fr)));break;case"set":en(e)&&o.push(a.get(Vt));break}us();for(const c of o)c&&Wi(c,5);fs()}function Da(e,t){const n=tr.get(e);return n&&n.get(t)}const Ra=ss("__proto__,__v_isRef,__isVue"),Ki=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(wt)),Rs=Pa();function Pa(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=ke(this);for(let i=0,a=this.length;i<a;i++)Je(r,"get",i+"");const s=r[t](...n);return s===-1||s===!1?r[t](...n.map(ke)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Nt(),us();const r=ke(this)[t].apply(this,n);return fs(),jt(),r}}),e}function Ta(e){wt(e)||(e=String(e));const t=ke(this);return Je(t,"has",e),t.hasOwnProperty(e)}class qi{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?qa:Gi:i?Zi:Xi).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const a=me(t);if(!s){if(a&&be(Rs,n))return Reflect.get(Rs,n,r);if(n==="hasOwnProperty")return Ta}const o=Reflect.get(t,n,r);return(wt(n)?Ki.has(n):Ra(n))||(s||Je(t,"get",n),i)?o:ze(o)?a&&as(n)?o:o.value:Le(o)?s?Qi(o):Pn(o):o}}class Yi extends qi{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];if(!this._isShallow){const c=En(i);if(!nr(r)&&!En(r)&&(i=ke(i),r=ke(r)),!me(t)&&ze(i)&&!ze(r))return c?!1:(i.value=r,!0)}const a=me(t)&&as(n)?Number(n)<t.length:be(t,n),o=Reflect.set(t,n,r,s);return t===ke(s)&&(a?Mt(r,i)&&bt(t,"set",n,r):bt(t,"add",n,r)),o}deleteProperty(t,n){const r=be(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&bt(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!wt(n)||!Ki.has(n))&&Je(t,"has",n),r}ownKeys(t){return Je(t,"iterate",me(t)?"length":Vt),Reflect.ownKeys(t)}}class Ma extends qi{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const za=new Yi,$a=new Ma,Na=new Yi(!0);const ds=e=>e,ur=e=>Reflect.getPrototypeOf(e);function $n(e,t,n=!1,r=!1){e=e.__v_raw;const s=ke(e),i=ke(t);n||(Mt(t,i)&&Je(s,"get",t),Je(s,"get",i));const{has:a}=ur(s),o=r?ds:n?_s:Sn;if(a.call(s,t))return o(e.get(t));if(a.call(s,i))return o(e.get(i));e!==s&&e.get(t)}function Nn(e,t=!1){const n=this.__v_raw,r=ke(n),s=ke(e);return t||(Mt(e,s)&&Je(r,"has",e),Je(r,"has",s)),e===s?n.has(e):n.has(e)||n.has(s)}function jn(e,t=!1){return e=e.__v_raw,!t&&Je(ke(e),"iterate",Vt),Reflect.get(e,"size",e)}function Ps(e){e=ke(e);const t=ke(this);return ur(t).has.call(t,e)||(t.add(e),bt(t,"add",e,e)),this}function Ts(e,t){t=ke(t);const n=ke(this),{has:r,get:s}=ur(n);let i=r.call(n,e);i||(e=ke(e),i=r.call(n,e));const a=s.call(n,e);return n.set(e,t),i?Mt(t,a)&&bt(n,"set",e,t):bt(n,"add",e,t),this}function Ms(e){const t=ke(this),{has:n,get:r}=ur(t);let s=n.call(t,e);s||(e=ke(e),s=n.call(t,e)),r&&r.call(t,e);const i=t.delete(e);return s&&bt(t,"delete",e,void 0),i}function zs(){const e=ke(this),t=e.size!==0,n=e.clear();return t&&bt(e,"clear",void 0,void 0),n}function Fn(e,t){return function(r,s){const i=this,a=i.__v_raw,o=ke(a),c=t?ds:e?_s:Sn;return!e&&Je(o,"iterate",Vt),a.forEach((u,f)=>r.call(s,c(u),c(f),i))}}function Bn(e,t,n){return function(...r){const s=this.__v_raw,i=ke(s),a=en(i),o=e==="entries"||e===Symbol.iterator&&a,c=e==="keys"&&a,u=s[e](...r),f=n?ds:t?_s:Sn;return!t&&Je(i,"iterate",c?Fr:Vt),{next(){const{value:h,done:g}=u.next();return g?{value:h,done:g}:{value:o?[f(h[0]),f(h[1])]:f(h),done:g}},[Symbol.iterator](){return this}}}}function kt(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function ja(){const e={get(i){return $n(this,i)},get size(){return jn(this)},has:Nn,add:Ps,set:Ts,delete:Ms,clear:zs,forEach:Fn(!1,!1)},t={get(i){return $n(this,i,!1,!0)},get size(){return jn(this)},has:Nn,add:Ps,set:Ts,delete:Ms,clear:zs,forEach:Fn(!1,!0)},n={get(i){return $n(this,i,!0)},get size(){return jn(this,!0)},has(i){return Nn.call(this,i,!0)},add:kt("add"),set:kt("set"),delete:kt("delete"),clear:kt("clear"),forEach:Fn(!0,!1)},r={get(i){return $n(this,i,!0,!0)},get size(){return jn(this,!0)},has(i){return Nn.call(this,i,!0)},add:kt("add"),set:kt("set"),delete:kt("delete"),clear:kt("clear"),forEach:Fn(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=Bn(i,!1,!1),n[i]=Bn(i,!0,!1),t[i]=Bn(i,!1,!0),r[i]=Bn(i,!0,!0)}),[e,n,t,r]}const[Fa,Ba,Ua,Ha]=ja();function hs(e,t){const n=t?e?Ha:Ua:e?Ba:Fa;return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(be(n,s)&&s in r?n:r,s,i)}const Wa={get:hs(!1,!1)},Va={get:hs(!1,!0)},Ka={get:hs(!0,!1)};const Xi=new WeakMap,Zi=new WeakMap,Gi=new WeakMap,qa=new WeakMap;function Ya(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Xa(e){return e.__v_skip||!Object.isExtensible(e)?0:Ya(va(e))}function Pn(e){return En(e)?e:ps(e,!1,za,Wa,Xi)}function Ji(e){return ps(e,!1,Na,Va,Zi)}function Qi(e){return ps(e,!0,$a,Ka,Gi)}function ps(e,t,n,r,s){if(!Le(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=s.get(e);if(i)return i;const a=Xa(e);if(a===0)return e;const o=new Proxy(e,a===2?r:n);return s.set(e,o),o}function Kt(e){return En(e)?Kt(e.__v_raw):!!(e&&e.__v_isReactive)}function En(e){return!!(e&&e.__v_isReadonly)}function nr(e){return!!(e&&e.__v_isShallow)}function eo(e){return e?!!e.__v_raw:!1}function ke(e){const t=e&&e.__v_raw;return t?ke(t):e}function ms(e){return Object.isExtensible(e)&&Ti(e,"__v_skip",!0),e}const Sn=e=>Le(e)?Pn(e):e,_s=e=>Le(e)?Qi(e):e;class to{constructor(t,n,r,s){this.getter=t,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new cs(()=>t(this._value),()=>Yn(this,this.effect._dirtyLevel===3?3:4)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const t=ke(this);return(!t._cacheable||t.effect.dirty)&&Mt(t._value,t._value=t.effect.run())&&Yn(t,5),no(t),t.effect._dirtyLevel>=2&&Yn(t,3),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function Za(e,t,n=!1){let r,s;const i=ye(e);return i?(r=e,s=st):(r=e.get,s=e.set),new to(r,s,i||!s,n)}function no(e){var t;Rt&&Wt&&(e=ke(e),Hi(Wt,(t=e.dep)!=null?t:e.dep=Vi(()=>e.dep=void 0,e instanceof to?e:void 0)))}function Yn(e,t=5,n,r){e=ke(e);const s=e.dep;s&&Wi(s,t)}function ze(e){return!!(e&&e.__v_isRef===!0)}function pe(e){return ro(e,!1)}function Ga(e){return ro(e,!0)}function ro(e,t){return ze(e)?e:new Ja(e,t)}class Ja{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:ke(t),this._value=n?t:Sn(t)}get value(){return no(this),this._value}set value(t){const n=this.__v_isShallow||nr(t)||En(t);t=n?t:ke(t),Mt(t,this._rawValue)&&(this._rawValue,this._rawValue=t,this._value=n?t:Sn(t),Yn(this,5))}}function Ee(e){return ze(e)?e.value:e}const Qa={get:(e,t,n)=>Ee(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return ze(s)&&!ze(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function so(e){return Kt(e)?e:new Proxy(e,Qa)}function el(e){const t=me(e)?new Array(e.length):{};for(const n in e)t[n]=nl(e,n);return t}class tl{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Da(ke(this._object),this._key)}}function nl(e,t,n){const r=e[t];return ze(r)?r:new tl(e,t,n)}/**
* @vue/runtime-core v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Pt(e,t,n,r){try{return r?e(...r):e()}catch(s){fr(s,t,n)}}function lt(e,t,n,r){if(ye(e)){const s=Pt(e,t,n,r);return s&&Di(s)&&s.catch(i=>{fr(i,t,n)}),s}if(me(e)){const s=[];for(let i=0;i<e.length;i++)s.push(lt(e[i],t,n,r));return s}}function fr(e,t,n,r=!0){const s=t?t.vnode:null;if(t){let i=t.parent;const a=t.proxy,o=`https://vuejs.org/error-reference/#runtime-${n}`;for(;i;){const u=i.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](e,a,o)===!1)return}i=i.parent}const c=t.appContext.config.errorHandler;if(c){Nt(),Pt(c,null,10,[e,a,o]),jt();return}}rl(e,n,s,r)}function rl(e,t,n,r=!0){console.error(e)}let On=!1,Br=!1;const Ye=[];let ht=0;const tn=[];let Ct=null,Ht=0;const io=Promise.resolve();let gs=null;function dr(e){const t=gs||io;return e?t.then(this?e.bind(this):e):t}function sl(e){let t=ht+1,n=Ye.length;for(;t<n;){const r=t+n>>>1,s=Ye[r],i=Cn(s);i<e||i===e&&s.pre?t=r+1:n=r}return t}function vs(e){(!Ye.length||!Ye.includes(e,On&&e.allowRecurse?ht+1:ht))&&(e.id==null?Ye.push(e):Ye.splice(sl(e.id),0,e),oo())}function oo(){!On&&!Br&&(Br=!0,gs=io.then(lo))}function il(e){const t=Ye.indexOf(e);t>ht&&Ye.splice(t,1)}function ol(e){me(e)?tn.push(...e):(!Ct||!Ct.includes(e,e.allowRecurse?Ht+1:Ht))&&tn.push(e),oo()}function $s(e,t,n=On?ht+1:0){for(;n<Ye.length;n++){const r=Ye[n];if(r&&r.pre){if(e&&r.id!==e.uid)continue;Ye.splice(n,1),n--,r()}}}function ao(e){if(tn.length){const t=[...new Set(tn)].sort((n,r)=>Cn(n)-Cn(r));if(tn.length=0,Ct){Ct.push(...t);return}for(Ct=t,Ht=0;Ht<Ct.length;Ht++){const n=Ct[Ht];n.active!==!1&&n()}Ct=null,Ht=0}}const Cn=e=>e.id==null?1/0:e.id,al=(e,t)=>{const n=Cn(e)-Cn(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function lo(e){Br=!1,On=!0,Ye.sort(al);try{for(ht=0;ht<Ye.length;ht++){const t=Ye[ht];t&&t.active!==!1&&Pt(t,null,14)}}finally{ht=0,Ye.length=0,ao(),On=!1,gs=null,(Ye.length||tn.length)&&lo()}}function ll(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||De;let s=n;const i=t.startsWith("update:"),a=i&&t.slice(7);if(a&&a in r){const f=`${a==="modelValue"?"model":a}Modifiers`,{number:h,trim:g}=r[f]||De;g&&(s=n.map(d=>Fe(d)?d.trim():d)),h&&(s=n.map(er))}let o,c=r[o=Or(t)]||r[o=Or(mt(t))];!c&&i&&(c=r[o=Or(cn(t))]),c&&lt(c,e,6,s);const u=r[o+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,lt(u,e,6,s)}}function co(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let a={},o=!1;if(!ye(e)){const c=u=>{const f=co(u,t,!0);f&&(o=!0,We(a,f))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!i&&!o?(Le(e)&&r.set(e,null),null):(me(i)?i.forEach(c=>a[c]=null):We(a,i),Le(e)&&r.set(e,a),a)}function hr(e,t){return!e||!ar(t)?!1:(t=t.slice(2).replace(/Once$/,""),be(e,t[0].toLowerCase()+t.slice(1))||be(e,cn(t))||be(e,t))}let Ue=null,pr=null;function rr(e){const t=Ue;return Ue=e,pr=e&&e.type.__scopeId||null,t}function cl(e){pr=e}function ul(){pr=null}function Xn(e,t=Ue,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&Xs(-1);const i=rr(t);let a;try{a=e(...s)}finally{rr(i),r._d&&Xs(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function Ir(e){const{type:t,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:a,attrs:o,emit:c,render:u,renderCache:f,props:h,data:g,setupState:d,ctx:y,inheritAttrs:p}=e,b=rr(e);let m,w;try{if(n.shapeFlag&4){const S=s||r,k=S;m=dt(u.call(k,S,f,h,d,g,y)),w=o}else{const S=t;m=dt(S.length>1?S(h,{attrs:o,slots:a,emit:c}):S(h,null)),w=t.props?o:fl(o)}}catch(S){bn.length=0,fr(S,e,1),m=je(zt)}let _=m;if(w&&p!==!1){const S=Object.keys(w),{shapeFlag:k}=_;S.length&&k&7&&(i&&S.some(is)&&(w=dl(w,i)),_=rn(_,w,!1,!0))}return n.dirs&&(_=rn(_,null,!1,!0),_.dirs=_.dirs?_.dirs.concat(n.dirs):n.dirs),n.transition&&(_.transition=n.transition),m=_,rr(b),m}const fl=e=>{let t;for(const n in e)(n==="class"||n==="style"||ar(n))&&((t||(t={}))[n]=e[n]);return t},dl=(e,t)=>{const n={};for(const r in e)(!is(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function hl(e,t,n){const{props:r,children:s,component:i}=e,{props:a,children:o,patchFlag:c}=t,u=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?Ns(r,a,u):!!a;if(c&8){const f=t.dynamicProps;for(let h=0;h<f.length;h++){const g=f[h];if(a[g]!==r[g]&&!hr(u,g))return!0}}}else return(s||o)&&(!o||!o.$stable)?!0:r===a?!1:r?a?Ns(r,a,u):!0:!!a;return!1}function Ns(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!hr(n,i))return!0}return!1}function pl({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const uo="components";function ml(e,t){return po(uo,e,!0,t)||e}const fo=Symbol.for("v-ndc");function ho(e){return Fe(e)?po(uo,e,!1)||e:e||fo}function po(e,t,n=!0,r=!1){const s=Ue||Ke;if(s){const i=s.type;{const o=ic(i,!1);if(o&&(o===t||o===mt(t)||o===cr(mt(t))))return i}const a=js(s[e]||i[e],t)||js(s.appContext[e],t);return!a&&r?i:a}}function js(e,t){return e&&(e[t]||e[mt(t)]||e[cr(mt(t))])}const _l=e=>e.__isSuspense;function gl(e,t){t&&t.pendingBranch?me(e)?t.effects.push(...e):t.effects.push(e):ol(e)}function mr(e,t,n=Ke,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...a)=>{Nt();const o=Tn(n),c=lt(t,n,e,a);return o(),jt(),c});return r?s.unshift(i):s.push(i),i}}const xt=e=>(t,n=Ke)=>{(!yr||e==="sp")&&mr(e,(...r)=>t(...r),n)},vl=xt("bm"),ot=xt("m"),yl=xt("bu"),bl=xt("u"),_r=xt("bum"),_t=xt("um"),wl=xt("sp"),xl=xt("rtg"),kl=xt("rtc");function El(e,t=Ke){mr("ec",e,t)}function qe(e,t){if(Ue===null)return e;const n=br(Ue),r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[i,a,o,c=De]=t[s];i&&(ye(i)&&(i={mounted:i,updated:i}),i.deep&&Lt(a),r.push({dir:i,instance:n,value:a,oldValue:void 0,arg:o,modifiers:c}))}return e}function Ft(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let a=0;a<s.length;a++){const o=s[a];i&&(o.oldValue=i[a].value);let c=o.dir[r];c&&(Nt(),lt(c,n,8,[e.el,o,e,t]),jt())}}function Ne(e,t,n,r){let s;const i=n;if(me(e)||Fe(e)){s=new Array(e.length);for(let a=0,o=e.length;a<o;a++)s[a]=t(e[a],a,void 0,i)}else if(typeof e=="number"){s=new Array(e);for(let a=0;a<e;a++)s[a]=t(a+1,a,void 0,i)}else if(Le(e))if(e[Symbol.iterator])s=Array.from(e,(a,o)=>t(a,o,void 0,i));else{const a=Object.keys(e);s=new Array(a.length);for(let o=0,c=a.length;o<c;o++){const u=a[o];s[o]=t(e[u],u,o,i)}}else s=[];return s}/*! #__NO_SIDE_EFFECTS__ */function Ve(e,t){return ye(e)?We({name:e.name},t,{setup:e}):e}const vn=e=>!!e.type.__asyncLoader;function He(e,t,n={},r,s){if(Ue.isCE||Ue.parent&&vn(Ue.parent)&&Ue.parent.isCE)return t!=="default"&&(n.name=t),je("slot",n,r);let i=e[t];i&&i._c&&(i._d=!1),ae();const a=i&&mo(i(n)),o=vr(_e,{key:n.key||a&&a.key||`_${t}`},a||[],a&&e._===1?64:-2);return o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),i&&i._c&&(i._d=!0),o}function mo(e){return e.some(t=>ir(t)?!(t.type===zt||t.type===_e&&!mo(t.children)):!0)?e:null}const Ur=e=>e?No(e)?br(e):Ur(e.parent):null,yn=We(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ur(e.parent),$root:e=>Ur(e.root),$emit:e=>e.emit,$options:e=>ys(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,vs(e.update)}),$nextTick:e=>e.n||(e.n=dr.bind(e.proxy)),$watch:e=>Vl.bind(e)}),Ar=(e,t)=>e!==De&&!e.__isScriptSetup&&be(e,t),Sl={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:a,type:o,appContext:c}=e;let u;if(t[0]!=="$"){const d=a[t];if(d!==void 0)switch(d){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(Ar(r,t))return a[t]=1,r[t];if(s!==De&&be(s,t))return a[t]=2,s[t];if((u=e.propsOptions[0])&&be(u,t))return a[t]=3,i[t];if(n!==De&&be(n,t))return a[t]=4,n[t];Hr&&(a[t]=0)}}const f=yn[t];let h,g;if(f)return t==="$attrs"&&Je(e.attrs,"get",""),f(e);if((h=o.__cssModules)&&(h=h[t]))return h;if(n!==De&&be(n,t))return a[t]=4,n[t];if(g=c.config.globalProperties,be(g,t))return g[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return Ar(s,t)?(s[t]=n,!0):r!==De&&be(r,t)?(r[t]=n,!0):be(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i}},a){let o;return!!n[a]||e!==De&&be(e,a)||Ar(t,a)||(o=i[0])&&be(o,a)||be(r,a)||be(yn,a)||be(s.config.globalProperties,a)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:be(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Fs(e){return me(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Hr=!0;function Ol(e){const t=ys(e),n=e.proxy,r=e.ctx;Hr=!1,t.beforeCreate&&Bs(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:a,watch:o,provide:c,inject:u,created:f,beforeMount:h,mounted:g,beforeUpdate:d,updated:y,activated:p,deactivated:b,beforeDestroy:m,beforeUnmount:w,destroyed:_,unmounted:S,render:k,renderTracked:C,renderTriggered:M,errorCaptured:T,serverPrefetch:P,expose:V,inheritAttrs:ne,components:D,directives:W,filters:v}=t;if(u&&Cl(u,r,null),a)for(const G in a){const X=a[G];ye(X)&&(r[G]=X.bind(n))}if(s){const G=s.call(n,n);Le(G)&&(e.data=Pn(G))}if(Hr=!0,i)for(const G in i){const X=i[G],B=ye(X)?X.bind(n,n):ye(X.get)?X.get.bind(n,n):st,se=!ye(X)&&ye(X.set)?X.set.bind(n):st,N=rt({get:B,set:se});Object.defineProperty(r,G,{enumerable:!0,configurable:!0,get:()=>N.value,set:z=>N.value=z})}if(o)for(const G in o)_o(o[G],r,n,G);if(c){const G=ye(c)?c.call(n):c;Reflect.ownKeys(G).forEach(X=>{Zn(X,G[X])})}f&&Bs(f,e,"c");function oe(G,X){me(X)?X.forEach(B=>G(B.bind(n))):X&&G(X.bind(n))}if(oe(vl,h),oe(ot,g),oe(yl,d),oe(bl,y),oe(Do,p),oe(Ro,b),oe(El,T),oe(kl,C),oe(xl,M),oe(_r,w),oe(_t,S),oe(wl,P),me(V))if(V.length){const G=e.exposed||(e.exposed={});V.forEach(X=>{Object.defineProperty(G,X,{get:()=>n[X],set:B=>n[X]=B})})}else e.exposed||(e.exposed={});k&&e.render===st&&(e.render=k),ne!=null&&(e.inheritAttrs=ne),D&&(e.components=D),W&&(e.directives=W)}function Cl(e,t,n=st){me(e)&&(e=Wr(e));for(const r in e){const s=e[r];let i;Le(s)?"default"in s?i=tt(s.from||r,s.default,!0):i=tt(s.from||r):i=tt(s),ze(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):t[r]=i}}function Bs(e,t,n){lt(me(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function _o(e,t,n,r){const s=r.includes(".")?Ao(n,r):()=>n[r];if(Fe(e)){const i=t[e];ye(i)&&pt(s,i)}else if(ye(e))pt(s,e.bind(n));else if(Le(e))if(me(e))e.forEach(i=>_o(i,t,n,r));else{const i=ye(e.handler)?e.handler.bind(n):t[e.handler];ye(i)&&pt(s,i,e)}}function ys(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=e.appContext,o=i.get(t);let c;return o?c=o:!s.length&&!n&&!r?c=t:(c={},s.length&&s.forEach(u=>sr(c,u,a,!0)),sr(c,t,a)),Le(t)&&i.set(t,c),c}function sr(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&sr(e,i,n,!0),s&&s.forEach(a=>sr(e,a,n,!0));for(const a in t)if(!(r&&a==="expose")){const o=Il[a]||n&&n[a];e[a]=o?o(e[a],t[a]):t[a]}return e}const Il={data:Us,props:Hs,emits:Hs,methods:mn,computed:mn,beforeCreate:Xe,created:Xe,beforeMount:Xe,mounted:Xe,beforeUpdate:Xe,updated:Xe,beforeDestroy:Xe,beforeUnmount:Xe,destroyed:Xe,unmounted:Xe,activated:Xe,deactivated:Xe,errorCaptured:Xe,serverPrefetch:Xe,components:mn,directives:mn,watch:Ll,provide:Us,inject:Al};function Us(e,t){return t?e?function(){return We(ye(e)?e.call(this,this):e,ye(t)?t.call(this,this):t)}:t:e}function Al(e,t){return mn(Wr(e),Wr(t))}function Wr(e){if(me(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Xe(e,t){return e?[...new Set([].concat(e,t))]:t}function mn(e,t){return e?We(Object.create(null),e,t):t}function Hs(e,t){return e?me(e)&&me(t)?[...new Set([...e,...t])]:We(Object.create(null),Fs(e),Fs(t??{})):t}function Ll(e,t){if(!e)return t;if(!t)return e;const n=We(Object.create(null),e);for(const r in t)n[r]=Xe(e[r],t[r]);return n}function go(){return{app:null,config:{isNativeTag:_a,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Dl=0;function Rl(e,t){return function(r,s=null){ye(r)||(r=We({},r)),s!=null&&!Le(s)&&(s=null);const i=go(),a=new WeakSet;let o=!1;const c=i.app={_uid:Dl++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:ac,get config(){return i.config},set config(u){},use(u,...f){return a.has(u)||(u&&ye(u.install)?(a.add(u),u.install(c,...f)):ye(u)&&(a.add(u),u(c,...f))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,f){return f?(i.components[u]=f,c):i.components[u]},directive(u,f){return f?(i.directives[u]=f,c):i.directives[u]},mount(u,f,h){if(!o){const g=je(r,s);return g.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),f&&t?t(g,u):e(g,u,h),o=!0,c._container=u,u.__vue_app__=c,br(g.component)}},unmount(){o&&(e(null,c._container),delete c._container.__vue_app__)},provide(u,f){return i.provides[u]=f,c},runWithContext(u){const f=nn;nn=c;try{return u()}finally{nn=f}}};return c}}let nn=null;function Zn(e,t){if(Ke){let n=Ke.provides;const r=Ke.parent&&Ke.parent.provides;r===n&&(n=Ke.provides=Object.create(r)),n[e]=t}}function tt(e,t,n=!1){const r=Ke||Ue;if(r||nn){const s=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:nn._context.provides;if(s&&e in s)return s[e];if(arguments.length>1)return n&&ye(t)?t.call(r&&r.proxy):t}}function Pl(){return!!(Ke||Ue||nn)}const vo={},yo=()=>Object.create(vo),bo=e=>Object.getPrototypeOf(e)===vo;function Tl(e,t,n,r=!1){const s={},i=yo();e.propsDefaults=Object.create(null),wo(e,t,s,i);for(const a in e.propsOptions[0])a in s||(s[a]=void 0);n?e.props=r?s:Ji(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function Ml(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:a}}=e,o=ke(s),[c]=e.propsOptions;let u=!1;if((r||a>0)&&!(a&16)){if(a&8){const f=e.vnode.dynamicProps;for(let h=0;h<f.length;h++){let g=f[h];if(hr(e.emitsOptions,g))continue;const d=t[g];if(c)if(be(i,g))d!==i[g]&&(i[g]=d,u=!0);else{const y=mt(g);s[y]=Vr(c,o,y,d,e,!1)}else d!==i[g]&&(i[g]=d,u=!0)}}}else{wo(e,t,s,i)&&(u=!0);let f;for(const h in o)(!t||!be(t,h)&&((f=cn(h))===h||!be(t,f)))&&(c?n&&(n[h]!==void 0||n[f]!==void 0)&&(s[h]=Vr(c,o,h,void 0,e,!0)):delete s[h]);if(i!==o)for(const h in i)(!t||!be(t,h))&&(delete i[h],u=!0)}u&&bt(e.attrs,"set","")}function wo(e,t,n,r){const[s,i]=e.propsOptions;let a=!1,o;if(t)for(let c in t){if(gn(c))continue;const u=t[c];let f;s&&be(s,f=mt(c))?!i||!i.includes(f)?n[f]=u:(o||(o={}))[f]=u:hr(e.emitsOptions,c)||(!(c in r)||u!==r[c])&&(r[c]=u,a=!0)}if(i){const c=ke(n),u=o||De;for(let f=0;f<i.length;f++){const h=i[f];n[h]=Vr(s,c,h,u[h],e,!be(u,h))}}return a}function Vr(e,t,n,r,s,i){const a=e[n];if(a!=null){const o=be(a,"default");if(o&&r===void 0){const c=a.default;if(a.type!==Function&&!a.skipFactory&&ye(c)){const{propsDefaults:u}=s;if(n in u)r=u[n];else{const f=Tn(s);r=u[n]=c.call(null,t),f()}}else r=c}a[0]&&(i&&!o?r=!1:a[1]&&(r===""||r===cn(n))&&(r=!0))}return r}function xo(e,t,n=!1){const r=t.propsCache,s=r.get(e);if(s)return s;const i=e.props,a={},o=[];let c=!1;if(!ye(e)){const f=h=>{c=!0;const[g,d]=xo(h,t,!0);We(a,g),d&&o.push(...d)};!n&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!i&&!c)return Le(e)&&r.set(e,Qt),Qt;if(me(i))for(let f=0;f<i.length;f++){const h=mt(i[f]);Ws(h)&&(a[h]=De)}else if(i)for(const f in i){const h=mt(f);if(Ws(h)){const g=i[f],d=a[h]=me(g)||ye(g)?{type:g}:We({},g);if(d){const y=qs(Boolean,d.type),p=qs(String,d.type);d[0]=y>-1,d[1]=p<0||y<p,(y>-1||be(d,"default"))&&o.push(h)}}}const u=[a,o];return Le(e)&&r.set(e,u),u}function Ws(e){return e[0]!=="$"&&!gn(e)}function Vs(e){return e===null?"null":typeof e=="function"?e.name||"":typeof e=="object"&&e.constructor&&e.constructor.name||""}function Ks(e,t){return Vs(e)===Vs(t)}function qs(e,t){return me(t)?t.findIndex(n=>Ks(n,e)):ye(t)&&Ks(t,e)?0:-1}const ko=e=>e[0]==="_"||e==="$stable",bs=e=>me(e)?e.map(dt):[dt(e)],zl=(e,t,n)=>{if(t._n)return t;const r=Xn((...s)=>bs(t(...s)),n);return r._c=!1,r},Eo=(e,t,n)=>{const r=e._ctx;for(const s in e){if(ko(s))continue;const i=e[s];if(ye(i))t[s]=zl(s,i,r);else if(i!=null){const a=bs(i);t[s]=()=>a}}},So=(e,t)=>{const n=bs(t);e.slots.default=()=>n},$l=(e,t)=>{const n=e.slots=yo();if(e.vnode.shapeFlag&32){const r=t._;r?(We(n,t),Ti(n,"_",r,!0)):Eo(t,n)}else t&&So(e,t)},Nl=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,a=De;if(r.shapeFlag&32){const o=t._;o?n&&o===1?i=!1:(We(s,t),!n&&o===1&&delete s._):(i=!t.$stable,Eo(t,s)),a=t}else t&&(So(e,t),a={default:1});if(i)for(const o in s)!ko(o)&&a[o]==null&&delete s[o]};function Kr(e,t,n,r,s=!1){if(me(e)){e.forEach((g,d)=>Kr(g,t&&(me(t)?t[d]:t),n,r,s));return}if(vn(r)&&!s)return;const i=r.shapeFlag&4?br(r.component):r.el,a=s?null:i,{i:o,r:c}=e,u=t&&t.r,f=o.refs===De?o.refs={}:o.refs,h=o.setupState;if(u!=null&&u!==c&&(Fe(u)?(f[u]=null,be(h,u)&&(h[u]=null)):ze(u)&&(u.value=null)),ye(c))Pt(c,o,12,[a,f]);else{const g=Fe(c),d=ze(c);if(g||d){const y=()=>{if(e.f){const p=g?be(h,c)?h[c]:f[c]:c.value;s?me(p)&&os(p,i):me(p)?p.includes(i)||p.push(i):g?(f[c]=[i],be(h,c)&&(h[c]=f[c])):(c.value=[i],e.k&&(f[e.k]=c.value))}else g?(f[c]=a,be(h,c)&&(h[c]=a)):d&&(c.value=a,e.k&&(f[e.k]=a))};a?(y.id=-1,Ze(y,n)):y()}}}const Ze=gl;function jl(e){return Fl(e)}function Fl(e,t){const n=Mi();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:a,createText:o,createComment:c,setText:u,setElementText:f,parentNode:h,nextSibling:g,setScopeId:d=st,insertStaticContent:y}=e,p=(O,l,I,R=null,x=null,E=null,A=void 0,j=null,U=!!l.dynamicChildren)=>{if(O===l)return;O&&!hn(O,l)&&(R=Y(O),z(O,x,E,!0),O=null),l.patchFlag===-2&&(U=!1,l.dynamicChildren=null);const{type:L,ref:q,shapeFlag:te}=l;switch(L){case gr:b(O,l,I,R);break;case zt:m(O,l,I,R);break;case Gn:O==null&&w(l,I,R,A);break;case _e:D(O,l,I,R,x,E,A,j,U);break;default:te&1?k(O,l,I,R,x,E,A,j,U):te&6?W(O,l,I,R,x,E,A,j,U):(te&64||te&128)&&L.process(O,l,I,R,x,E,A,j,U,ee)}q!=null&&x&&Kr(q,O&&O.ref,E,l||O,!l)},b=(O,l,I,R)=>{if(O==null)r(l.el=o(l.children),I,R);else{const x=l.el=O.el;l.children!==O.children&&u(x,l.children)}},m=(O,l,I,R)=>{O==null?r(l.el=c(l.children||""),I,R):l.el=O.el},w=(O,l,I,R)=>{[O.el,O.anchor]=y(O.children,l,I,R,O.el,O.anchor)},_=({el:O,anchor:l},I,R)=>{let x;for(;O&&O!==l;)x=g(O),r(O,I,R),O=x;r(l,I,R)},S=({el:O,anchor:l})=>{let I;for(;O&&O!==l;)I=g(O),s(O),O=I;s(l)},k=(O,l,I,R,x,E,A,j,U)=>{l.type==="svg"?A="svg":l.type==="math"&&(A="mathml"),O==null?C(l,I,R,x,E,A,j,U):P(O,l,x,E,A,j,U)},C=(O,l,I,R,x,E,A,j)=>{let U,L;const{props:q,shapeFlag:te,transition:Z,dirs:ce}=O;if(U=O.el=a(O.type,E,q&&q.is,q),te&8?f(U,O.children):te&16&&T(O.children,U,null,R,x,Lr(O,E),A,j),ce&&Ft(O,null,R,"created"),M(U,O,O.scopeId,A,R),q){for(const he in q)he!=="value"&&!gn(he)&&i(U,he,null,q[he],E,O.children,R,x,ue);"value"in q&&i(U,"value",null,q.value,E),(L=q.onVnodeBeforeMount)&&ft(L,R,O)}ce&&Ft(O,null,R,"beforeMount");const de=Bl(x,Z);de&&Z.beforeEnter(U),r(U,l,I),((L=q&&q.onVnodeMounted)||de||ce)&&Ze(()=>{L&&ft(L,R,O),de&&Z.enter(U),ce&&Ft(O,null,R,"mounted")},x)},M=(O,l,I,R,x)=>{if(I&&d(O,I),R)for(let E=0;E<R.length;E++)d(O,R[E]);if(x){let E=x.subTree;if(l===E){const A=x.vnode;M(O,A,A.scopeId,A.slotScopeIds,x.parent)}}},T=(O,l,I,R,x,E,A,j,U=0)=>{for(let L=U;L<O.length;L++){const q=O[L]=j?It(O[L]):dt(O[L]);p(null,q,l,I,R,x,E,A,j)}},P=(O,l,I,R,x,E,A)=>{const j=l.el=O.el;let{patchFlag:U,dynamicChildren:L,dirs:q}=l;U|=O.patchFlag&16;const te=O.props||De,Z=l.props||De;let ce;if(I&&Bt(I,!1),(ce=Z.onVnodeBeforeUpdate)&&ft(ce,I,l,O),q&&Ft(l,O,I,"beforeUpdate"),I&&Bt(I,!0),L?V(O.dynamicChildren,L,j,I,R,Lr(l,x),E):A||X(O,l,j,null,I,R,Lr(l,x),E,!1),U>0){if(U&16)ne(j,l,te,Z,I,R,x);else if(U&2&&te.class!==Z.class&&i(j,"class",null,Z.class,x),U&4&&i(j,"style",te.style,Z.style,x),U&8){const de=l.dynamicProps;for(let he=0;he<de.length;he++){const ge=de[he],Pe=te[ge],$e=Z[ge];($e!==Pe||ge==="value")&&i(j,ge,Pe,$e,x,O.children,I,R,ue)}}U&1&&O.children!==l.children&&f(j,l.children)}else!A&&L==null&&ne(j,l,te,Z,I,R,x);((ce=Z.onVnodeUpdated)||q)&&Ze(()=>{ce&&ft(ce,I,l,O),q&&Ft(l,O,I,"updated")},R)},V=(O,l,I,R,x,E,A)=>{for(let j=0;j<l.length;j++){const U=O[j],L=l[j],q=U.el&&(U.type===_e||!hn(U,L)||U.shapeFlag&70)?h(U.el):I;p(U,L,q,null,R,x,E,A,!0)}},ne=(O,l,I,R,x,E,A)=>{if(I!==R){if(I!==De)for(const j in I)!gn(j)&&!(j in R)&&i(O,j,I[j],null,A,l.children,x,E,ue);for(const j in R){if(gn(j))continue;const U=R[j],L=I[j];U!==L&&j!=="value"&&i(O,j,L,U,A,l.children,x,E,ue)}"value"in R&&i(O,"value",I.value,R.value,A)}},D=(O,l,I,R,x,E,A,j,U)=>{const L=l.el=O?O.el:o(""),q=l.anchor=O?O.anchor:o("");let{patchFlag:te,dynamicChildren:Z,slotScopeIds:ce}=l;ce&&(j=j?j.concat(ce):ce),O==null?(r(L,I,R),r(q,I,R),T(l.children||[],I,q,x,E,A,j,U)):te>0&&te&64&&Z&&O.dynamicChildren?(V(O.dynamicChildren,Z,I,x,E,A,j),(l.key!=null||x&&l===x.subTree)&&Oo(O,l,!0)):X(O,l,I,q,x,E,A,j,U)},W=(O,l,I,R,x,E,A,j,U)=>{l.slotScopeIds=j,O==null?l.shapeFlag&512?x.ctx.activate(l,I,R,A,U):v(l,I,R,x,E,A,U):J(O,l,U)},v=(O,l,I,R,x,E,A)=>{const j=O.component=ec(O,R,x);if(Lo(O)&&(j.ctx.renderer=ee),tc(j),j.asyncDep){if(x&&x.registerDep(j,oe,A),!O.el){const U=j.subTree=je(zt);m(null,U,l,I)}}else oe(j,O,l,I,x,E,A)},J=(O,l,I)=>{const R=l.component=O.component;if(hl(O,l,I))if(R.asyncDep&&!R.asyncResolved){G(R,l,I);return}else R.next=l,il(R.update),R.effect.dirty=!0,R.update();else l.el=O.el,R.vnode=l},oe=(O,l,I,R,x,E,A)=>{const j=()=>{if(O.isMounted){let{next:q,bu:te,u:Z,parent:ce,vnode:de}=O;{const nt=Co(O);if(nt){q&&(q.el=de.el,G(O,q,A)),nt.asyncDep.then(()=>{O.isUnmounted||j()});return}}let he=q,ge;Bt(O,!1),q?(q.el=de.el,G(O,q,A)):q=de,te&&qn(te),(ge=q.props&&q.props.onVnodeBeforeUpdate)&&ft(ge,ce,q,de),Bt(O,!0);const Pe=Ir(O),$e=O.subTree;O.subTree=Pe,p($e,Pe,h($e.el),Y($e),O,x,E),q.el=Pe.el,he===null&&pl(O,Pe.el),Z&&Ze(Z,x),(ge=q.props&&q.props.onVnodeUpdated)&&Ze(()=>ft(ge,ce,q,de),x)}else{let q;const{el:te,props:Z}=l,{bm:ce,m:de,parent:he}=O,ge=vn(l);if(Bt(O,!1),ce&&qn(ce),!ge&&(q=Z&&Z.onVnodeBeforeMount)&&ft(q,he,l),Bt(O,!0),te&&fe){const Pe=()=>{O.subTree=Ir(O),fe(te,O.subTree,O,x,null)};ge?l.type.__asyncLoader().then(()=>!O.isUnmounted&&Pe()):Pe()}else{const Pe=O.subTree=Ir(O);p(null,Pe,I,R,O,x,E),l.el=Pe.el}if(de&&Ze(de,x),!ge&&(q=Z&&Z.onVnodeMounted)){const Pe=l;Ze(()=>ft(q,he,Pe),x)}(l.shapeFlag&256||he&&vn(he.vnode)&&he.vnode.shapeFlag&256)&&O.a&&Ze(O.a,x),O.isMounted=!0,l=I=R=null}},U=O.effect=new cs(j,st,()=>vs(L),O.scope),L=O.update=()=>{U.dirty&&U.run()};L.id=O.uid,Bt(O,!0),L()},G=(O,l,I)=>{l.component=O;const R=O.vnode.props;O.vnode=l,O.next=null,Ml(O,l.props,R,I),Nl(O,l.children,I),Nt(),$s(O),jt()},X=(O,l,I,R,x,E,A,j,U=!1)=>{const L=O&&O.children,q=O?O.shapeFlag:0,te=l.children,{patchFlag:Z,shapeFlag:ce}=l;if(Z>0){if(Z&128){se(L,te,I,R,x,E,A,j,U);return}else if(Z&256){B(L,te,I,R,x,E,A,j,U);return}}ce&8?(q&16&&ue(L,x,E),te!==L&&f(I,te)):q&16?ce&16?se(L,te,I,R,x,E,A,j,U):ue(L,x,E,!0):(q&8&&f(I,""),ce&16&&T(te,I,R,x,E,A,j,U))},B=(O,l,I,R,x,E,A,j,U)=>{O=O||Qt,l=l||Qt;const L=O.length,q=l.length,te=Math.min(L,q);let Z;for(Z=0;Z<te;Z++){const ce=l[Z]=U?It(l[Z]):dt(l[Z]);p(O[Z],ce,I,null,x,E,A,j,U)}L>q?ue(O,x,E,!0,!1,te):T(l,I,R,x,E,A,j,U,te)},se=(O,l,I,R,x,E,A,j,U)=>{let L=0;const q=l.length;let te=O.length-1,Z=q-1;for(;L<=te&&L<=Z;){const ce=O[L],de=l[L]=U?It(l[L]):dt(l[L]);if(hn(ce,de))p(ce,de,I,null,x,E,A,j,U);else break;L++}for(;L<=te&&L<=Z;){const ce=O[te],de=l[Z]=U?It(l[Z]):dt(l[Z]);if(hn(ce,de))p(ce,de,I,null,x,E,A,j,U);else break;te--,Z--}if(L>te){if(L<=Z){const ce=Z+1,de=ce<q?l[ce].el:R;for(;L<=Z;)p(null,l[L]=U?It(l[L]):dt(l[L]),I,de,x,E,A,j,U),L++}}else if(L>Z)for(;L<=te;)z(O[L],x,E,!0),L++;else{const ce=L,de=L,he=new Map;for(L=de;L<=Z;L++){const Me=l[L]=U?It(l[L]):dt(l[L]);Me.key!=null&&he.set(Me.key,L)}let ge,Pe=0;const $e=Z-de+1;let nt=!1,Te=0;const ut=new Array($e);for(L=0;L<$e;L++)ut[L]=0;for(L=ce;L<=te;L++){const Me=O[L];if(Pe>=$e){z(Me,x,E,!0);continue}let Qe;if(Me.key!=null)Qe=he.get(Me.key);else for(ge=de;ge<=Z;ge++)if(ut[ge-de]===0&&hn(Me,l[ge])){Qe=ge;break}Qe===void 0?z(Me,x,E,!0):(ut[Qe-de]=L+1,Qe>=Te?Te=Qe:nt=!0,p(Me,l[Qe],I,null,x,E,A,j,U),Pe++)}const Yt=nt?Ul(ut):Qt;for(ge=Yt.length-1,L=$e-1;L>=0;L--){const Me=de+L,Qe=l[Me],Mn=Me+1<q?l[Me+1].el:R;ut[L]===0?p(null,Qe,I,Mn,x,E,A,j,U):nt&&(ge<0||L!==Yt[ge]?N(Qe,I,Mn,2):ge--)}}},N=(O,l,I,R,x=null)=>{const{el:E,type:A,transition:j,children:U,shapeFlag:L}=O;if(L&6){N(O.component.subTree,l,I,R);return}if(L&128){O.suspense.move(l,I,R);return}if(L&64){A.move(O,l,I,ee);return}if(A===_e){r(E,l,I);for(let te=0;te<U.length;te++)N(U[te],l,I,R);r(O.anchor,l,I);return}if(A===Gn){_(O,l,I);return}if(R!==2&&L&1&&j)if(R===0)j.beforeEnter(E),r(E,l,I),Ze(()=>j.enter(E),x);else{const{leave:te,delayLeave:Z,afterLeave:ce}=j,de=()=>r(E,l,I),he=()=>{te(E,()=>{de(),ce&&ce()})};Z?Z(E,de,he):he()}else r(E,l,I)},z=(O,l,I,R=!1,x=!1)=>{const{type:E,props:A,ref:j,children:U,dynamicChildren:L,shapeFlag:q,patchFlag:te,dirs:Z,memoIndex:ce}=O;if(j!=null&&Kr(j,null,I,O,!0),ce!=null&&(l.renderCache[ce]=void 0),q&256){l.ctx.deactivate(O);return}const de=q&1&&Z,he=!vn(O);let ge;if(he&&(ge=A&&A.onVnodeBeforeUnmount)&&ft(ge,l,O),q&6)Q(O.component,I,R);else{if(q&128){O.suspense.unmount(I,R);return}de&&Ft(O,null,l,"beforeUnmount"),q&64?O.type.remove(O,l,I,x,ee,R):L&&(E!==_e||te>0&&te&64)?ue(L,l,I,!1,!0):(E===_e&&te&384||!x&&q&16)&&ue(U,l,I),R&&K(O)}(he&&(ge=A&&A.onVnodeUnmounted)||de)&&Ze(()=>{ge&&ft(ge,l,O),de&&Ft(O,null,l,"unmounted")},I)},K=O=>{const{type:l,el:I,anchor:R,transition:x}=O;if(l===_e){H(I,R);return}if(l===Gn){S(O);return}const E=()=>{s(I),x&&!x.persisted&&x.afterLeave&&x.afterLeave()};if(O.shapeFlag&1&&x&&!x.persisted){const{leave:A,delayLeave:j}=x,U=()=>A(I,E);j?j(O.el,E,U):U()}else E()},H=(O,l)=>{let I;for(;O!==l;)I=g(O),s(O),O=I;s(l)},Q=(O,l,I)=>{const{bum:R,scope:x,update:E,subTree:A,um:j,m:U,a:L}=O;Ys(U),Ys(L),R&&qn(R),x.stop(),E&&(E.active=!1,z(A,O,l,I)),j&&Ze(j,l),Ze(()=>{O.isUnmounted=!0},l),l&&l.pendingBranch&&!l.isUnmounted&&O.asyncDep&&!O.asyncResolved&&O.suspenseId===l.pendingId&&(l.deps--,l.deps===0&&l.resolve())},ue=(O,l,I,R=!1,x=!1,E=0)=>{for(let A=E;A<O.length;A++)z(O[A],l,I,R,x)},Y=O=>O.shapeFlag&6?Y(O.component.subTree):O.shapeFlag&128?O.suspense.next():g(O.anchor||O.el);let $=!1;const F=(O,l,I)=>{O==null?l._vnode&&z(l._vnode,null,null,!0):p(l._vnode||null,O,l,null,null,null,I),$||($=!0,$s(),ao(),$=!1),l._vnode=O},ee={p,um:z,m:N,r:K,mt:v,mc:T,pc:X,pbc:V,n:Y,o:e};let ie,fe;return{render:F,hydrate:ie,createApp:Rl(F,ie)}}function Lr({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Bt({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function Bl(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Oo(e,t,n=!1){const r=e.children,s=t.children;if(me(r)&&me(s))for(let i=0;i<r.length;i++){const a=r[i];let o=s[i];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=s[i]=It(s[i]),o.el=a.el),!n&&o.patchFlag!==-2&&Oo(a,o)),o.type===gr&&(o.el=a.el)}}function Ul(e){const t=e.slice(),n=[0];let r,s,i,a,o;const c=e.length;for(r=0;r<c;r++){const u=e[r];if(u!==0){if(s=n[n.length-1],e[s]<u){t[r]=s,n.push(r);continue}for(i=0,a=n.length-1;i<a;)o=i+a>>1,e[n[o]]<u?i=o+1:a=o;u<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,a=n[i-1];i-- >0;)n[i]=a,a=t[a];return n}function Co(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Co(t)}function Ys(e){if(e)for(let t=0;t<e.length;t++)e[t].active=!1}const Hl=Symbol.for("v-scx"),Wl=()=>tt(Hl),Un={};function pt(e,t,n){return Io(e,t,n)}function Io(e,t,{immediate:n,deep:r,flush:s,once:i,onTrack:a,onTrigger:o}=De){if(t&&i){const C=t;t=(...M)=>{C(...M),k()}}const c=Ke,u=C=>r===!0?C:Lt(C,r===!1?1:void 0);let f,h=!1,g=!1;if(ze(e)?(f=()=>e.value,h=nr(e)):Kt(e)?(f=()=>u(e),h=!0):me(e)?(g=!0,h=e.some(C=>Kt(C)||nr(C)),f=()=>e.map(C=>{if(ze(C))return C.value;if(Kt(C))return u(C);if(ye(C))return Pt(C,c,2)})):ye(e)?t?f=()=>Pt(e,c,2):f=()=>(d&&d(),lt(e,c,3,[y])):f=st,t&&r){const C=f;f=()=>Lt(C())}let d,y=C=>{d=_.onStop=()=>{Pt(C,c,4),d=_.onStop=void 0}},p;if(yr)if(y=st,t?n&&lt(t,c,3,[f(),g?[]:void 0,y]):f(),s==="sync"){const C=Wl();p=C.__watcherHandles||(C.__watcherHandles=[])}else return st;let b=g?new Array(e.length).fill(Un):Un;const m=()=>{if(!(!_.active||!_.dirty))if(t){const C=_.run();(r||h||(g?C.some((M,T)=>Mt(M,b[T])):Mt(C,b)))&&(d&&d(),lt(t,c,3,[C,b===Un?void 0:g&&b[0]===Un?[]:b,y]),b=C)}else _.run()};m.allowRecurse=!!t;let w;s==="sync"?w=m:s==="post"?w=()=>Ze(m,c&&c.suspense):(m.pre=!0,c&&(m.id=c.uid),w=()=>vs(m));const _=new cs(f,st,w),S=Fi(),k=()=>{_.stop(),S&&os(S.effects,_)};return t?n?m():b=_.run():s==="post"?Ze(_.run.bind(_),c&&c.suspense):_.run(),p&&p.push(k),k}function Vl(e,t,n){const r=this.proxy,s=Fe(e)?e.includes(".")?Ao(r,e):()=>r[e]:e.bind(r,r);let i;ye(t)?i=t:(i=t.handler,n=t);const a=Tn(this),o=Io(s,i.bind(r),n);return a(),o}function Ao(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function Lt(e,t=1/0,n){if(t<=0||!Le(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,ze(e))Lt(e.value,t,n);else if(me(e))for(let r=0;r<e.length;r++)Lt(e[r],t,n);else if(ln(e)||en(e))e.forEach(r=>{Lt(r,t,n)});else if(Pi(e)){for(const r in e)Lt(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Lt(e[r],t,n)}return e}const Lo=e=>e.type.__isKeepAlive;function Do(e,t){Po(e,"a",t)}function Ro(e,t){Po(e,"da",t)}function Po(e,t,n=Ke){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(mr(t,r,n),n){let s=n.parent;for(;s&&s.parent;)Lo(s.parent.vnode)&&Kl(r,t,n,s),s=s.parent}}function Kl(e,t,n,r){const s=mr(t,e,r,!0);_t(()=>{os(r[t],s)},n)}function To(e,t){e.shapeFlag&6&&e.component?To(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}const ql=e=>e.__isTeleport,_e=Symbol.for("v-fgt"),gr=Symbol.for("v-txt"),zt=Symbol.for("v-cmt"),Gn=Symbol.for("v-stc"),bn=[];let at=null;function ae(e=!1){bn.push(at=e?null:[])}function Yl(){bn.pop(),at=bn[bn.length-1]||null}let In=1;function Xs(e){In+=e}function Mo(e){return e.dynamicChildren=In>0?at||Qt:null,Yl(),In>0&&at&&at.push(e),e}function le(e,t,n,r,s,i){return Mo(re(e,t,n,r,s,i,!0))}function vr(e,t,n,r,s){return Mo(je(e,t,n,r,s,!0))}function ir(e){return e?e.__v_isVNode===!0:!1}function hn(e,t){return e.type===t.type&&e.key===t.key}const zo=({key:e})=>e??null,Jn=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Fe(e)||ze(e)||ye(e)?{i:Ue,r:e,k:t,f:!!n}:e:null);function re(e,t=null,n=null,r=0,s=null,i=e===_e?0:1,a=!1,o=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&zo(t),ref:t&&Jn(t),scopeId:pr,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Ue};return o?(ws(c,n),i&128&&e.normalize(c)):n&&(c.shapeFlag|=Fe(n)?8:16),In>0&&!a&&at&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&at.push(c),c}const je=Xl;function Xl(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===fo)&&(e=zt),ir(e)){const o=rn(e,t,!0);return n&&ws(o,n),In>0&&!i&&at&&(o.shapeFlag&6?at[at.indexOf(e)]=o:at.push(o)),o.patchFlag=-2,o}if(oc(e)&&(e=e.__vccOpts),t){t=Zl(t);let{class:o,style:c}=t;o&&!Fe(o)&&(t.class=Ae(o)),Le(c)&&(eo(c)&&!me(c)&&(c=We({},c)),t.style=Ge(c))}const a=Fe(e)?1:_l(e)?128:ql(e)?64:Le(e)?4:ye(e)?2:0;return re(e,t,n,r,s,a,i,!0)}function Zl(e){return e?eo(e)||bo(e)?We({},e):e:null}function rn(e,t,n=!1,r=!1){const{props:s,ref:i,patchFlag:a,children:o,transition:c}=e,u=t?Gl(s||{},t):s,f={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&zo(u),ref:t&&t.ref?n&&i?me(i)?i.concat(Jn(t)):[i,Jn(t)]:Jn(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==_e?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&rn(e.ssContent),ssFallback:e.ssFallback&&rn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&r&&To(f,c.clone(f)),f}function qr(e=" ",t=0){return je(gr,null,e,t)}function $o(e,t){const n=je(Gn,null,e);return n.staticCount=t,n}function Ie(e="",t=!1){return t?(ae(),vr(zt,null,e)):je(zt,null,e)}function dt(e){return e==null||typeof e=="boolean"?je(zt):me(e)?je(_e,null,e.slice()):typeof e=="object"?It(e):je(gr,null,String(e))}function It(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:rn(e)}function ws(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(me(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),ws(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!bo(t)?t._ctx=Ue:s===3&&Ue&&(Ue.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ye(t)?(t={default:t,_ctx:Ue},n=32):(t=String(t),r&64?(n=16,t=[qr(t)]):n=8);e.children=t,e.shapeFlag|=n}function Gl(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=Ae([t.class,r.class]));else if(s==="style")t.style=Ge([t.style,r.style]);else if(ar(s)){const i=t[s],a=r[s];a&&i!==a&&!(me(i)&&i.includes(a))&&(t[s]=i?[].concat(i,a):a)}else s!==""&&(t[s]=r[s])}return t}function ft(e,t,n,r=null){lt(e,t,7,[n,r])}const Jl=go();let Ql=0;function ec(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||Jl,i={uid:Ql++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new Ni(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:xo(r,s),emitsOptions:co(r,s),emit:null,emitted:null,propsDefaults:De,inheritAttrs:r.inheritAttrs,ctx:De,data:De,props:De,attrs:De,slots:De,refs:De,setupState:De,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=ll.bind(null,i),e.ce&&e.ce(i),i}let Ke=null,or,Yr;{const e=Mi(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};or=t("__VUE_INSTANCE_SETTERS__",n=>Ke=n),Yr=t("__VUE_SSR_SETTERS__",n=>yr=n)}const Tn=e=>{const t=Ke;return or(e),e.scope.on(),()=>{e.scope.off(),or(t)}},Zs=()=>{Ke&&Ke.scope.off(),or(null)};function No(e){return e.vnode.shapeFlag&4}let yr=!1;function tc(e,t=!1){t&&Yr(t);const{props:n,children:r}=e.vnode,s=No(e);Tl(e,n,s,t),$l(e,r);const i=s?nc(e,t):void 0;return t&&Yr(!1),i}function nc(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Sl);const{setup:r}=n;if(r){const s=e.setupContext=r.length>1?sc(e):null,i=Tn(e);Nt();const a=Pt(r,e,0,[e.props,s]);if(jt(),i(),Di(a)){if(a.then(Zs,Zs),t)return a.then(o=>{Gs(e,o,t)}).catch(o=>{fr(o,e,0)});e.asyncDep=a}else Gs(e,a,t)}else jo(e,t)}function Gs(e,t,n){ye(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Le(t)&&(e.setupState=so(t)),jo(e,n)}let Js;function jo(e,t,n){const r=e.type;if(!e.render){if(!t&&Js&&!r.render){const s=r.template||ys(e).template;if(s){const{isCustomElement:i,compilerOptions:a}=e.appContext.config,{delimiters:o,compilerOptions:c}=r,u=We(We({isCustomElement:i,delimiters:o},a),c);r.render=Js(s,u)}}e.render=r.render||st}{const s=Tn(e);Nt();try{Ol(e)}finally{jt(),s()}}}const rc={get(e,t){return Je(e,"get",""),e[t]}};function sc(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,rc),slots:e.slots,emit:e.emit,expose:t}}function br(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(so(ms(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in yn)return yn[n](e)},has(t,n){return n in t||n in yn}})):e.proxy}function ic(e,t=!0){return ye(e)?e.displayName||e.name:e.name||t&&e.__name}function oc(e){return ye(e)&&"__vccOpts"in e}const rt=(e,t)=>Za(e,t,yr);function Fo(e,t,n){const r=arguments.length;return r===2?Le(t)&&!me(t)?ir(t)?je(e,null,[t]):je(e,t):je(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&ir(n)&&(n=[n]),je(e,t,n))}const ac="3.4.29";/**
* @vue/runtime-dom v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const lc="http://www.w3.org/2000/svg",cc="http://www.w3.org/1998/Math/MathML",vt=typeof document<"u"?document:null,Qs=vt&&vt.createElement("template"),uc={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?vt.createElementNS(lc,e):t==="mathml"?vt.createElementNS(cc,e):n?vt.createElement(e,{is:n}):vt.createElement(e);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>vt.createTextNode(e),createComment:e=>vt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>vt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const a=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Qs.innerHTML=r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e;const o=Qs.content;if(r==="svg"||r==="mathml"){const c=o.firstChild;for(;c.firstChild;)o.appendChild(c.firstChild);o.removeChild(c)}t.insertBefore(o,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},fc=Symbol("_vtc");function dc(e,t,n){const r=e[fc];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const ei=Symbol("_vod"),hc=Symbol("_vsh"),pc=Symbol(""),mc=/(^|;)\s*display\s*:/;function _c(e,t,n){const r=e.style,s=Fe(n);let i=!1;if(n&&!s){if(t)if(Fe(t))for(const a of t.split(";")){const o=a.slice(0,a.indexOf(":")).trim();n[o]==null&&Qn(r,o,"")}else for(const a in t)n[a]==null&&Qn(r,a,"");for(const a in n)a==="display"&&(i=!0),Qn(r,a,n[a])}else if(s){if(t!==n){const a=r[pc];a&&(n+=";"+a),r.cssText=n,i=mc.test(n)}}else t&&e.removeAttribute("style");ei in e&&(e[ei]=i?r.display:"",e[hc]&&(r.display="none"))}const ti=/\s*!important$/;function Qn(e,t,n){if(me(n))n.forEach(r=>Qn(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=gc(e,t);ti.test(n)?e.setProperty(cn(r),n.replace(ti,""),"important"):e[r]=n}}const ni=["Webkit","Moz","ms"],Dr={};function gc(e,t){const n=Dr[t];if(n)return n;let r=mt(t);if(r!=="filter"&&r in e)return Dr[t]=r;r=cr(r);for(let s=0;s<ni.length;s++){const i=ni[s]+r;if(i in e)return Dr[t]=i}return t}const ri="http://www.w3.org/1999/xlink";function si(e,t,n,r,s,i=Oa(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(ri,t.slice(6,t.length)):e.setAttributeNS(ri,t,n):n==null||i&&!zi(n)?e.removeAttribute(t):e.setAttribute(t,i?"":String(n))}function vc(e,t,n,r,s,i,a){if(t==="innerHTML"||t==="textContent"){r&&a(r,s,i),e[t]=n??"";return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){const u=o==="OPTION"?e.getAttribute("value")||"":e.value,f=n==null?"":String(n);(u!==f||!("_value"in e))&&(e.value=f),n==null&&e.removeAttribute(t),e._value=n;return}let c=!1;if(n===""||n==null){const u=typeof e[t];u==="boolean"?n=zi(n):n==null&&u==="string"?(n="",c=!0):u==="number"&&(n=0,c=!0)}try{e[t]=n}catch{}c&&e.removeAttribute(t)}function yt(e,t,n,r){e.addEventListener(t,n,r)}function yc(e,t,n,r){e.removeEventListener(t,n,r)}const ii=Symbol("_vei");function bc(e,t,n,r,s=null){const i=e[ii]||(e[ii]={}),a=i[t];if(r&&a)a.value=r;else{const[o,c]=wc(t);if(r){const u=i[t]=Ec(r,s);yt(e,o,u,c)}else a&&(yc(e,o,a,c),i[t]=void 0)}}const oi=/(?:Once|Passive|Capture)$/;function wc(e){let t;if(oi.test(e)){t={};let r;for(;r=e.match(oi);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):cn(e.slice(2)),t]}let Rr=0;const xc=Promise.resolve(),kc=()=>Rr||(xc.then(()=>Rr=0),Rr=Date.now());function Ec(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;lt(Sc(r,n.value),t,5,[r])};return n.value=e,n.attached=kc(),n}function Sc(e,t){if(me(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const ai=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Oc=(e,t,n,r,s,i,a,o,c)=>{const u=s==="svg";t==="class"?dc(e,r,u):t==="style"?_c(e,n,r):ar(t)?is(t)||bc(e,t,n,r,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Cc(e,t,r,u))?(vc(e,t,r,i,a,o,c),(t==="value"||t==="checked"||t==="selected")&&si(e,t,r,u,a,t!=="value")):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),si(e,t,r,u))};function Cc(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&ai(t)&&ye(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return ai(t)&&Fe(n)?!1:t in e}const $t=e=>{const t=e.props["onUpdate:modelValue"]||!1;return me(t)?n=>qn(t,n):t};function Ic(e){e.target.composing=!0}function li(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const it=Symbol("_assign"),Gt={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[it]=$t(s);const i=r||s.props&&s.props.type==="number";yt(e,t?"change":"input",a=>{if(a.target.composing)return;let o=e.value;n&&(o=o.trim()),i&&(o=er(o)),e[it](o)}),n&&yt(e,"change",()=>{e.value=e.value.trim()}),t||(yt(e,"compositionstart",Ic),yt(e,"compositionend",li),yt(e,"change",li))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},a){if(e[it]=$t(a),e.composing)return;const o=(i||e.type==="number")&&!/^0\d/.test(e.value)?er(e.value):e.value,c=t??"";o!==c&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||s&&e.value.trim()===c)||(e.value=c))}},Ac={deep:!0,created(e,t,n){e[it]=$t(n),yt(e,"change",()=>{const r=e._modelValue,s=sn(e),i=e.checked,a=e[it];if(me(r)){const o=ls(r,s),c=o!==-1;if(i&&!c)a(r.concat(s));else if(!i&&c){const u=[...r];u.splice(o,1),a(u)}}else if(ln(r)){const o=new Set(r);i?o.add(s):o.delete(s),a(o)}else a(Bo(e,i))})},mounted:ci,beforeUpdate(e,t,n){e[it]=$t(n),ci(e,t,n)}};function ci(e,{value:t,oldValue:n},r){e._modelValue=t,me(t)?e.checked=ls(t,r.props.value)>-1:ln(t)?e.checked=t.has(r.props.value):t!==n&&(e.checked=qt(t,Bo(e,!0)))}const Xr={created(e,{value:t},n){e.checked=qt(t,n.props.value),e[it]=$t(n),yt(e,"change",()=>{e[it](sn(e))})},beforeUpdate(e,{value:t,oldValue:n},r){e[it]=$t(r),t!==n&&(e.checked=qt(t,r.props.value))}},Jt={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const s=ln(t);yt(e,"change",()=>{const i=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>n?er(sn(a)):sn(a));e[it](e.multiple?s?new Set(i):i:i[0]),e._assigning=!0,dr(()=>{e._assigning=!1})}),e[it]=$t(r)},mounted(e,{value:t,modifiers:{number:n}}){ui(e,t)},beforeUpdate(e,t,n){e[it]=$t(n)},updated(e,{value:t,modifiers:{number:n}}){e._assigning||ui(e,t)}};function ui(e,t,n){const r=e.multiple,s=me(t);if(!(r&&!s&&!ln(t))){for(let i=0,a=e.options.length;i<a;i++){const o=e.options[i],c=sn(o);if(r)if(s){const u=typeof c;u==="string"||u==="number"?o.selected=t.some(f=>String(f)===String(c)):o.selected=ls(t,c)>-1}else o.selected=t.has(c);else if(qt(sn(o),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!r&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function sn(e){return"_value"in e?e._value:e.value}function Bo(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const Lc=["ctrl","shift","alt","meta"],Dc={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Lc.some(n=>e[`${n}Key`]&&!t.includes(n))},Rc=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(s,...i)=>{for(let a=0;a<t.length;a++){const o=Dc[t[a]];if(o&&o(s,t))return}return e(s,...i)})},Pc=We({patchProp:Oc},uc);let fi;function Tc(){return fi||(fi=jl(Pc))}const Mc=(...e)=>{const t=Tc().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=$c(r);if(!s)return;const i=t._component;!ye(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const a=n(s,!1,zc(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},t};function zc(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function $c(e){return Fe(e)?document.querySelector(e):e}var Nc=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let Uo;const wr=e=>Uo=e,Ho=Symbol();function Zr(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var wn;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(wn||(wn={}));function jc(){const e=ji(!0),t=e.run(()=>pe({}));let n=[],r=[];const s=ms({install(i){wr(s),s._a=i,i.provide(Ho,s),i.config.globalProperties.$pinia=s,r.forEach(a=>n.push(a)),r=[]},use(i){return!this._a&&!Nc?r.push(i):n.push(i),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return s}const Wo=()=>{};function di(e,t,n,r=Wo){e.push(t);const s=()=>{const i=e.indexOf(t);i>-1&&(e.splice(i,1),r())};return!n&&Fi()&&Aa(s),s}function Xt(e,...t){e.slice().forEach(n=>{n(...t)})}const Fc=e=>e();function Gr(e,t){e instanceof Map&&t instanceof Map&&t.forEach((n,r)=>e.set(r,n)),e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],s=e[n];Zr(s)&&Zr(r)&&e.hasOwnProperty(n)&&!ze(r)&&!Kt(r)?e[n]=Gr(s,r):e[n]=r}return e}const Bc=Symbol();function Uc(e){return!Zr(e)||!e.hasOwnProperty(Bc)}const{assign:Ot}=Object;function Hc(e){return!!(ze(e)&&e.effect)}function Wc(e,t,n,r){const{state:s,actions:i,getters:a}=t,o=n.state.value[e];let c;function u(){o||(n.state.value[e]=s?s():{});const f=el(n.state.value[e]);return Ot(f,i,Object.keys(a||{}).reduce((h,g)=>(h[g]=ms(rt(()=>{wr(n);const d=n._s.get(e);return a[g].call(d,d)})),h),{}))}return c=Vo(e,u,t,n,r,!0),c}function Vo(e,t,n={},r,s,i){let a;const o=Ot({actions:{}},n),c={deep:!0};let u,f,h=[],g=[],d;const y=r.state.value[e];!i&&!y&&(r.state.value[e]={}),pe({});let p;function b(T){let P;u=f=!1,typeof T=="function"?(T(r.state.value[e]),P={type:wn.patchFunction,storeId:e,events:d}):(Gr(r.state.value[e],T),P={type:wn.patchObject,payload:T,storeId:e,events:d});const V=p=Symbol();dr().then(()=>{p===V&&(u=!0)}),f=!0,Xt(h,P,r.state.value[e])}const m=i?function(){const{state:P}=n,V=P?P():{};this.$patch(ne=>{Ot(ne,V)})}:Wo;function w(){a.stop(),h=[],g=[],r._s.delete(e)}function _(T,P){return function(){wr(r);const V=Array.from(arguments),ne=[],D=[];function W(oe){ne.push(oe)}function v(oe){D.push(oe)}Xt(g,{args:V,name:T,store:k,after:W,onError:v});let J;try{J=P.apply(this&&this.$id===e?this:k,V)}catch(oe){throw Xt(D,oe),oe}return J instanceof Promise?J.then(oe=>(Xt(ne,oe),oe)).catch(oe=>(Xt(D,oe),Promise.reject(oe))):(Xt(ne,J),J)}}const S={_p:r,$id:e,$onAction:di.bind(null,g),$patch:b,$reset:m,$subscribe(T,P={}){const V=di(h,T,P.detached,()=>ne()),ne=a.run(()=>pt(()=>r.state.value[e],D=>{(P.flush==="sync"?f:u)&&T({storeId:e,type:wn.direct,events:d},D)},Ot({},c,P)));return V},$dispose:w},k=Pn(S);r._s.set(e,k);const M=(r._a&&r._a.runWithContext||Fc)(()=>r._e.run(()=>(a=ji()).run(t)));for(const T in M){const P=M[T];if(ze(P)&&!Hc(P)||Kt(P))i||(y&&Uc(P)&&(ze(P)?P.value=y[T]:Gr(P,y[T])),r.state.value[e][T]=P);else if(typeof P=="function"){const V=_(T,P);M[T]=V,o.actions[T]=P}}return Ot(k,M),Ot(ke(k),M),Object.defineProperty(k,"$state",{get:()=>r.state.value[e],set:T=>{b(P=>{Ot(P,T)})}}),r._p.forEach(T=>{Ot(k,a.run(()=>T({store:k,app:r._a,pinia:r,options:o})))}),y&&i&&n.hydrate&&n.hydrate(k.$state,y),u=!0,f=!0,k}function xr(e,t,n){let r,s;const i=typeof t=="function";typeof e=="string"?(r=e,s=i?n:t):(s=e,r=e.id);function a(o,c){const u=Pl();return o=o||(u?tt(Ho,null):null),o&&wr(o),o=Uo,o._s.has(r)||(i?Vo(r,t,s,o):Wc(r,s,o)),o._s.get(r)}return a.$id=r,a}const hi="tosho_user",un=xr("userStore",()=>{let e=null;function t(){if(e)return e;const r=localStorage.getItem(hi);if(!r)return null;try{e=JSON.parse(r)}catch{e=null}return e}function n(r){return e=r,localStorage.setItem(hi,JSON.stringify(r)),r}return{get:t,set:n}}),Be={apiPath:"/api/",fileType:["any","directory","file","audio","video","image","binary","text","pdf"],indexedDBName:"tosho_db",timeouts:{sort:50,selectEvt:50,clearEvt:100,scrollEvt:100,scrollSave:500,offsetDebounce:50},sort:{id_asc:"id ",id_desc:"id ",name_asc:"name ",name_desc:"name ",crt_asc:"crt time ",crt_desc:"crt time ",upd_asc:"upd time ",upd_desc:"upd time ",rate_asc:"rate ",rate_desc:"rate "},rate:{0:"&#xe69f;&#xe69f;&#xe69f;&#xe69f;&#xe69f;",1:"&#xe6b6;&#xe69f;&#xe69f;&#xe69f;&#xe69f;",2:"&#xe69e;&#xe69f;&#xe69f;&#xe69f;&#xe69f;",3:"&#xe69e;&#xe6b6;&#xe69f;&#xe69f;&#xe69f;",4:"&#xe69e;&#xe69e;&#xe69f;&#xe69f;&#xe69f;",5:"&#xe69e;&#xe69e;&#xe6b6;&#xe69f;&#xe69f;",6:"&#xe69e;&#xe69e;&#xe69e;&#xe69f;&#xe69f;",7:"&#xe69e;&#xe69e;&#xe69e;&#xe6b6;&#xe69f;",8:"&#xe69e;&#xe69e;&#xe69e;&#xe69e;&#xe69f;",9:"&#xe69e;&#xe69e;&#xe69e;&#xe69e;&#xe6b6;",10:"&#xe69e;&#xe69e;&#xe69e;&#xe69e;&#xe69e;"},rateMobile:{0:"",1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",10:""},listType:["detail","text","img"],playMode:["loop","single","shuffle"],ignoreFileType:["directory","subtitle"]};let An={set:null,close:null};const fn=xr("modalStore",()=>({set:Vc,close:Kc,handleEvent:qc}));function Vc(e){return An.set?An.set(e):null}function Kc(e){return An.close?An.close(e):null}function qc(e,t){return An[e]=t}function Ce(e,t,n){return new Promise((r,s)=>{let i;if(t instanceof FormData)i=t;else{i=new FormData;for(const u in t)Object.prototype.hasOwnProperty.call(t,u)&&i.append(u,t[u])}const a=new XMLHttpRequest;a.withCredentials=!0,a.onreadystatechange=function(){if(a.readyState!==4)return;if(a.status>=400)return Qr(`${a.status}:${a.statusText}`);const u=JSON.parse(a.responseText);switch(console.info(u),u.code){case 10:Jr(),r(!1);break;case 100:Qr(u.msg),r(!1);break;default:r(u.data);break}},n&&n.upload&&(a.upload.onprogress=n.upload),a.open("POST",Be.apiPath+e);const c=un().get();c&&c.token&&a.setRequestHeader("Auth-Token",c.token),a.send(i)})}function Jr(){console.info("throwLogin"),fn().set({title:"login required",alpha:!0,key:"",single:!1,w:360,h:120,minW:360,minH:120,allow_resize:!1,allow_move:!0,allow_escape:!1,allow_fullscreen:!1,auto_focus:!0,form:[{type:"text",label:"username",key:"username"},{type:"text",label:"password",key:"password"}],callback:{login:async function(t){console.info(t);const n=await Ce("user/login",{username:t.content.form[0].value,password:t.content.form[1].value});if(!n)return!0;un().set(n),location.reload()}}})}function Qr(e){fn().set({title:"error",alpha:!1,key:"",single:!1,w:360,h:100,minW:360,minH:100,allow_resize:!1,allow_move:!0,allow_escape:!0,allow_fullscreen:!1,auto_focus:!0,text:e,callback:{close:n=>{}}})}function Dt(e){if(!e)return!1;let t=e;for(;;){if(t.tagName==="BODY")return!1;if(t.tagName==="HTML")return!1;if(t.tagName==="TEXTAREA")return!0;if(t.tagName==="INPUT")switch(t.type){case"input":case"date":case"datetime":case"datetime-local":case"file":case"number":case"password":case"search":case"text":case"time":case"tel":case"url":return!0}else{if(t.contentEditable&&t.contentEditable.toLowerCase()==="true")return!0;if(!t.parentElement)return!1}t=t.parentElement}return!1}function _n(e){if(!e)return!1;let t=e;for(;;){if(t.classList.contains("modal_dom"))return!0;if(t.tagName=="BODY")return!1;if(t.tagName=="HTML")return!1;if(!t.parentElement)return!1;t=t.parentElement}return!1}const Yc=e=>(cl("data-v-c4df4dc8"),e=e(),ul(),e),Xc={class:"fr_header"},Zc=Yc(()=>re("div",{class:"logo"},"Hentai.",-1)),Gc={class:"navi"},Jc=["innerHTML"],Qc={class:"user"},eu={class:"pointer"},tu=Ve({__name:"Header",setup(e){const t=[{name:"Nas",meta:{cur:!0},path:"/"},{name:"Hyper",meta:{cur:!1},path:""},{name:"Router",meta:{cur:!1},path:""},{name:"Spider",meta:{cur:!1},path:""},{name:"Git",meta:{cur:!1},path:""},{name:"Torrent",meta:{cur:!1},path:""}],n=un();let r=n.get();function s(){n.set(null),location.reload()}return(i,a)=>(ae(),le("div",Xc,[Zc,re("div",Gc,[(ae(),le(_e,null,Ne(t,o=>{var c;return re("div",{class:Ae({active:(c=o.meta)==null?void 0:c.cur,pointer:1}),innerHTML:o.name},null,10,Jc)}),64))]),re("div",Qc,[Ee(r)&&Ee(r).id?(ae(),le(_e,{key:0},[re("div",eu,Se(Ee(r).name),1),re("ul",{class:"action pointer"},[re("li",{onClick:s},"logout")])],64)):(ae(),le("div",{key:1,class:"pointer",onClick:a[0]||(a[0]=(...o)=>Ee(Jr)&&Ee(Jr)(...o))},"login"))])]))}}),Ko=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},nu=Ko(tu,[["__scopeId","data-v-c4df4dc8"]]),ru="modulepreload",su=function(e,t){return new URL(e,t).href},pi={},Ut=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){const a=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=su(u,r),u in pi)return;pi[u]=!0;const f=u.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(!!r)for(let y=a.length-1;y>=0;y--){const p=a[y];if(p.href===u&&(!f||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${h}`))return;const d=document.createElement("link");if(d.rel=f?"stylesheet":ru,f||(d.as="script"),d.crossOrigin="",d.href=u,c&&d.setAttribute("nonce",c),document.head.appendChild(d),f)return new Promise((y,p)=>{d.addEventListener("load",y),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return t().catch(i)})};/*!
  * vue-router v4.4.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Zt=typeof document<"u";function iu(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const Oe=Object.assign;function Pr(e,t){const n={};for(const r in t){const s=t[r];n[r]=ct(s)?s.map(e):e(s)}return n}const xn=()=>{},ct=Array.isArray,qo=/#/g,ou=/&/g,au=/\//g,lu=/=/g,cu=/\?/g,Yo=/\+/g,uu=/%5B/g,fu=/%5D/g,Xo=/%5E/g,du=/%60/g,Zo=/%7B/g,hu=/%7C/g,Go=/%7D/g,pu=/%20/g;function xs(e){return encodeURI(""+e).replace(hu,"|").replace(uu,"[").replace(fu,"]")}function mu(e){return xs(e).replace(Zo,"{").replace(Go,"}").replace(Xo,"^")}function es(e){return xs(e).replace(Yo,"%2B").replace(pu,"+").replace(qo,"%23").replace(ou,"%26").replace(du,"`").replace(Zo,"{").replace(Go,"}").replace(Xo,"^")}function _u(e){return es(e).replace(lu,"%3D")}function gu(e){return xs(e).replace(qo,"%23").replace(cu,"%3F")}function vu(e){return e==null?"":gu(e).replace(au,"%2F")}function Ln(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const yu=/\/$/,bu=e=>e.replace(yu,"");function Tr(e,t,n="/"){let r,s={},i="",a="";const o=t.indexOf("#");let c=t.indexOf("?");return o<c&&o>=0&&(c=-1),c>-1&&(r=t.slice(0,c),i=t.slice(c+1,o>-1?o:t.length),s=e(i)),o>-1&&(r=r||t.slice(0,o),a=t.slice(o,t.length)),r=Eu(r??t,n),{fullPath:r+(i&&"?")+i+a,path:r,query:s,hash:Ln(a)}}function wu(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function mi(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function xu(e,t,n){const r=t.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&on(t.matched[r],n.matched[s])&&Jo(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function on(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Jo(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!ku(e[n],t[n]))return!1;return!0}function ku(e,t){return ct(e)?_i(e,t):ct(t)?_i(t,e):e===t}function _i(e,t){return ct(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function Eu(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,a,o;for(a=0;a<r.length;a++)if(o=r[a],o!==".")if(o==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(a).join("/")}const Et={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Dn;(function(e){e.pop="pop",e.push="push"})(Dn||(Dn={}));var kn;(function(e){e.back="back",e.forward="forward",e.unknown=""})(kn||(kn={}));function Su(e){if(!e)if(Zt){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),bu(e)}const Ou=/^[^#]+#/;function Cu(e,t){return e.replace(Ou,"#")+t}function Iu(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const kr=()=>({left:window.scrollX,top:window.scrollY});function Au(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;t=Iu(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function gi(e,t){return(history.state?history.state.position-t:-1)+e}const ts=new Map;function Lu(e,t){ts.set(e,t)}function Du(e){const t=ts.get(e);return ts.delete(e),t}let Ru=()=>location.protocol+"//"+location.host;function Qo(e,t){const{pathname:n,search:r,hash:s}=t,i=e.indexOf("#");if(i>-1){let o=s.includes(e.slice(i))?e.slice(i).length:1,c=s.slice(o);return c[0]!=="/"&&(c="/"+c),mi(c,"")}return mi(n,e)+r+s}function Pu(e,t,n,r){let s=[],i=[],a=null;const o=({state:g})=>{const d=Qo(e,location),y=n.value,p=t.value;let b=0;if(g){if(n.value=d,t.value=g,a&&a===y){a=null;return}b=p?g.position-p.position:0}else r(d);s.forEach(m=>{m(n.value,y,{delta:b,type:Dn.pop,direction:b?b>0?kn.forward:kn.back:kn.unknown})})};function c(){a=n.value}function u(g){s.push(g);const d=()=>{const y=s.indexOf(g);y>-1&&s.splice(y,1)};return i.push(d),d}function f(){const{history:g}=window;g.state&&g.replaceState(Oe({},g.state,{scroll:kr()}),"")}function h(){for(const g of i)g();i=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",f)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",f,{passive:!0}),{pauseListeners:c,listen:u,destroy:h}}function vi(e,t,n,r=!1,s=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:s?kr():null}}function Tu(e){const{history:t,location:n}=window,r={value:Qo(e,n)},s={value:t.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(c,u,f){const h=e.indexOf("#"),g=h>-1?(n.host&&document.querySelector("base")?e:e.slice(h))+c:Ru()+e+c;try{t[f?"replaceState":"pushState"](u,"",g),s.value=u}catch(d){console.error(d),n[f?"replace":"assign"](g)}}function a(c,u){const f=Oe({},t.state,vi(s.value.back,c,s.value.forward,!0),u,{position:s.value.position});i(c,f,!0),r.value=c}function o(c,u){const f=Oe({},s.value,t.state,{forward:c,scroll:kr()});i(f.current,f,!0);const h=Oe({},vi(r.value,c,null),{position:f.position+1},u);i(c,h,!1),r.value=c}return{location:r,state:s,push:o,replace:a}}function Mu(e){e=Su(e);const t=Tu(e),n=Pu(e,t.state,t.location,t.replace);function r(i,a=!0){a||n.pauseListeners(),history.go(i)}const s=Oe({location:"",base:e,go:r,createHref:Cu.bind(null,e)},t,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function zu(e){return typeof e=="string"||e&&typeof e=="object"}function ea(e){return typeof e=="string"||typeof e=="symbol"}const ta=Symbol("");var yi;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(yi||(yi={}));function an(e,t){return Oe(new Error,{type:e,[ta]:!0},t)}function gt(e,t){return e instanceof Error&&ta in e&&(t==null||!!(e.type&t))}const bi="[^/]+?",$u={sensitive:!1,strict:!1,start:!0,end:!0},Nu=/[.+*?^${}()[\]/\\]/g;function ju(e,t){const n=Oe({},$u,t),r=[];let s=n.start?"^":"";const i=[];for(const u of e){const f=u.length?[]:[90];n.strict&&!u.length&&(s+="/");for(let h=0;h<u.length;h++){const g=u[h];let d=40+(n.sensitive?.25:0);if(g.type===0)h||(s+="/"),s+=g.value.replace(Nu,"\\$&"),d+=40;else if(g.type===1){const{value:y,repeatable:p,optional:b,regexp:m}=g;i.push({name:y,repeatable:p,optional:b});const w=m||bi;if(w!==bi){d+=10;try{new RegExp(`(${w})`)}catch(S){throw new Error(`Invalid custom RegExp for param "${y}" (${w}): `+S.message)}}let _=p?`((?:${w})(?:/(?:${w}))*)`:`(${w})`;h||(_=b&&u.length<2?`(?:/${_})`:"/"+_),b&&(_+="?"),s+=_,d+=20,b&&(d+=-8),p&&(d+=-20),w===".*"&&(d+=-50)}f.push(d)}r.push(f)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const a=new RegExp(s,n.sensitive?"":"i");function o(u){const f=u.match(a),h={};if(!f)return null;for(let g=1;g<f.length;g++){const d=f[g]||"",y=i[g-1];h[y.name]=d&&y.repeatable?d.split("/"):d}return h}function c(u){let f="",h=!1;for(const g of e){(!h||!f.endsWith("/"))&&(f+="/"),h=!1;for(const d of g)if(d.type===0)f+=d.value;else if(d.type===1){const{value:y,repeatable:p,optional:b}=d,m=y in u?u[y]:"";if(ct(m)&&!p)throw new Error(`Provided param "${y}" is an array but it is not repeatable (* or + modifiers)`);const w=ct(m)?m.join("/"):m;if(!w)if(b)g.length<2&&(f.endsWith("/")?f=f.slice(0,-1):h=!0);else throw new Error(`Missing required param "${y}"`);f+=w}}return f||"/"}return{re:a,score:r,keys:i,parse:o,stringify:c}}function Fu(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function na(e,t){let n=0;const r=e.score,s=t.score;for(;n<r.length&&n<s.length;){const i=Fu(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(wi(r))return 1;if(wi(s))return-1}return s.length-r.length}function wi(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Bu={type:0,value:""},Uu=/[a-zA-Z0-9_]/;function Hu(e){if(!e)return[[]];if(e==="/")return[[Bu]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(d){throw new Error(`ERR (${n})/"${u}": ${d}`)}let n=0,r=n;const s=[];let i;function a(){i&&s.push(i),i=[]}let o=0,c,u="",f="";function h(){u&&(n===0?i.push({type:0,value:u}):n===1||n===2||n===3?(i.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:f,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),u="")}function g(){u+=c}for(;o<e.length;){if(c=e[o++],c==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:c==="/"?(u&&h(),a()):c===":"?(h(),n=1):g();break;case 4:g(),n=r;break;case 1:c==="("?n=2:Uu.test(c)?g():(h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&o--);break;case 2:c===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+c:n=3:f+=c;break;case 3:h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&o--,f="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${u}"`),h(),a(),s}function Wu(e,t,n){const r=ju(Hu(e.path),n),s=Oe(r,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function Vu(e,t){const n=[],r=new Map;t=Ei({strict:!1,end:!0,sensitive:!1},t);function s(h){return r.get(h)}function i(h,g,d){const y=!d,p=Ku(h);p.aliasOf=d&&d.record;const b=Ei(t,h),m=[p];if("alias"in h){const S=typeof h.alias=="string"?[h.alias]:h.alias;for(const k of S)m.push(Oe({},p,{components:d?d.record.components:p.components,path:k,aliasOf:d?d.record:p}))}let w,_;for(const S of m){const{path:k}=S;if(g&&k[0]!=="/"){const C=g.record.path,M=C[C.length-1]==="/"?"":"/";S.path=g.record.path+(k&&M+k)}if(w=Wu(S,g,b),d?d.alias.push(w):(_=_||w,_!==w&&_.alias.push(w),y&&h.name&&!ki(w)&&a(h.name)),ra(w)&&c(w),p.children){const C=p.children;for(let M=0;M<C.length;M++)i(C[M],w,d&&d.children[M])}d=d||w}return _?()=>{a(_)}:xn}function a(h){if(ea(h)){const g=r.get(h);g&&(r.delete(h),n.splice(n.indexOf(g),1),g.children.forEach(a),g.alias.forEach(a))}else{const g=n.indexOf(h);g>-1&&(n.splice(g,1),h.record.name&&r.delete(h.record.name),h.children.forEach(a),h.alias.forEach(a))}}function o(){return n}function c(h){const g=Xu(h,n);n.splice(g,0,h),h.record.name&&!ki(h)&&r.set(h.record.name,h)}function u(h,g){let d,y={},p,b;if("name"in h&&h.name){if(d=r.get(h.name),!d)throw an(1,{location:h});b=d.record.name,y=Oe(xi(g.params,d.keys.filter(_=>!_.optional).concat(d.parent?d.parent.keys.filter(_=>_.optional):[]).map(_=>_.name)),h.params&&xi(h.params,d.keys.map(_=>_.name))),p=d.stringify(y)}else if(h.path!=null)p=h.path,d=n.find(_=>_.re.test(p)),d&&(y=d.parse(p),b=d.record.name);else{if(d=g.name?r.get(g.name):n.find(_=>_.re.test(g.path)),!d)throw an(1,{location:h,currentLocation:g});b=d.record.name,y=Oe({},g.params,h.params),p=d.stringify(y)}const m=[];let w=d;for(;w;)m.unshift(w.record),w=w.parent;return{name:b,path:p,params:y,matched:m,meta:Yu(m)}}e.forEach(h=>i(h));function f(){n.length=0,r.clear()}return{addRoute:i,resolve:u,removeRoute:a,clearRoutes:f,getRoutes:o,getRecordMatcher:s}}function xi(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function Ku(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:qu(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function qu(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function ki(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Yu(e){return e.reduce((t,n)=>Oe(t,n.meta),{})}function Ei(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function Xu(e,t){let n=0,r=t.length;for(;n!==r;){const i=n+r>>1;na(e,t[i])<0?r=i:n=i+1}const s=Zu(e);return s&&(r=t.lastIndexOf(s,r-1)),r}function Zu(e){let t=e;for(;t=t.parent;)if(ra(t)&&na(e,t)===0)return t}function ra({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Gu(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(Yo," "),a=i.indexOf("="),o=Ln(a<0?i:i.slice(0,a)),c=a<0?null:Ln(i.slice(a+1));if(o in t){let u=t[o];ct(u)||(u=t[o]=[u]),u.push(c)}else t[o]=c}return t}function Si(e){let t="";for(let n in e){const r=e[n];if(n=_u(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(ct(r)?r.map(i=>i&&es(i)):[r&&es(r)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+n,i!=null&&(t+="="+i))})}return t}function Ju(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=ct(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return t}const sa=Symbol(""),Oi=Symbol(""),Er=Symbol(""),ks=Symbol(""),ns=Symbol("");function pn(){let e=[];function t(r){return e.push(r),()=>{const s=e.indexOf(r);s>-1&&e.splice(s,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function Qu(e,t,n){const r=()=>{e[t].delete(n)};_t(r),Ro(r),Do(()=>{e[t].add(n)}),e[t].add(n)}function Qh(e){const t=tt(sa,{}).value;t&&Qu(t,"updateGuards",e)}function At(e,t,n,r,s,i=a=>a()){const a=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((o,c)=>{const u=g=>{g===!1?c(an(4,{from:n,to:t})):g instanceof Error?c(g):zu(g)?c(an(2,{from:t,to:g})):(a&&r.enterCallbacks[s]===a&&typeof g=="function"&&a.push(g),o())},f=i(()=>e.call(r&&r.instances[s],t,n,u));let h=Promise.resolve(f);e.length<3&&(h=h.then(u)),h.catch(g=>c(g))})}function Mr(e,t,n,r,s=i=>i()){const i=[];for(const a of e)for(const o in a.components){let c=a.components[o];if(!(t!=="beforeRouteEnter"&&!a.instances[o]))if(ef(c)){const f=(c.__vccOpts||c)[t];f&&i.push(At(f,n,r,a,o,s))}else{let u=c();i.push(()=>u.then(f=>{if(!f)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${a.path}"`));const h=iu(f)?f.default:f;a.components[o]=h;const d=(h.__vccOpts||h)[t];return d&&At(d,n,r,a,o,s)()}))}}return i}function ef(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Ci(e){const t=tt(Er),n=tt(ks),r=rt(()=>{const c=Ee(e.to);return t.resolve(c)}),s=rt(()=>{const{matched:c}=r.value,{length:u}=c,f=c[u-1],h=n.matched;if(!f||!h.length)return-1;const g=h.findIndex(on.bind(null,f));if(g>-1)return g;const d=Ii(c[u-2]);return u>1&&Ii(f)===d&&h[h.length-1].path!==d?h.findIndex(on.bind(null,c[u-2])):g}),i=rt(()=>s.value>-1&&sf(n.params,r.value.params)),a=rt(()=>s.value>-1&&s.value===n.matched.length-1&&Jo(n.params,r.value.params));function o(c={}){return rf(c)?t[Ee(e.replace)?"replace":"push"](Ee(e.to)).catch(xn):Promise.resolve()}return{route:r,href:rt(()=>r.value.href),isActive:i,isExactActive:a,navigate:o}}const tf=Ve({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Ci,setup(e,{slots:t}){const n=Pn(Ci(e)),{options:r}=tt(Er),s=rt(()=>({[Ai(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Ai(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=t.default&&t.default(n);return e.custom?i:Fo("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),nf=tf;function rf(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function sf(e,t){for(const n in t){const r=t[n],s=e[n];if(typeof r=="string"){if(r!==s)return!1}else if(!ct(s)||s.length!==r.length||r.some((i,a)=>i!==s[a]))return!1}return!0}function Ii(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Ai=(e,t,n)=>e??t??n,of=Ve({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=tt(ns),s=rt(()=>e.route||r.value),i=tt(Oi,0),a=rt(()=>{let u=Ee(i);const{matched:f}=s.value;let h;for(;(h=f[u])&&!h.components;)u++;return u}),o=rt(()=>s.value.matched[a.value]);Zn(Oi,rt(()=>a.value+1)),Zn(sa,o),Zn(ns,s);const c=pe();return pt(()=>[c.value,o.value,e.name],([u,f,h],[g,d,y])=>{f&&(f.instances[h]=u,d&&d!==f&&u&&u===g&&(f.leaveGuards.size||(f.leaveGuards=d.leaveGuards),f.updateGuards.size||(f.updateGuards=d.updateGuards))),u&&f&&(!d||!on(f,d)||!g)&&(f.enterCallbacks[h]||[]).forEach(p=>p(u))},{flush:"post"}),()=>{const u=s.value,f=e.name,h=o.value,g=h&&h.components[f];if(!g)return Li(n.default,{Component:g,route:u});const d=h.props[f],y=d?d===!0?u.params:typeof d=="function"?d(u):d:null,b=Fo(g,Oe({},y,t,{onVnodeUnmounted:m=>{m.component.isUnmounted&&(h.instances[f]=null)},ref:c}));return Li(n.default,{Component:b,route:u})||b}}});function Li(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const af=of;function lf(e){const t=Vu(e.routes,e),n=e.parseQuery||Gu,r=e.stringifyQuery||Si,s=e.history,i=pn(),a=pn(),o=pn(),c=Ga(Et);let u=Et;Zt&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=Pr.bind(null,Y=>""+Y),h=Pr.bind(null,vu),g=Pr.bind(null,Ln);function d(Y,$){let F,ee;return ea(Y)?(F=t.getRecordMatcher(Y),ee=$):ee=Y,t.addRoute(ee,F)}function y(Y){const $=t.getRecordMatcher(Y);$&&t.removeRoute($)}function p(){return t.getRoutes().map(Y=>Y.record)}function b(Y){return!!t.getRecordMatcher(Y)}function m(Y,$){if($=Oe({},$||c.value),typeof Y=="string"){const l=Tr(n,Y,$.path),I=t.resolve({path:l.path},$),R=s.createHref(l.fullPath);return Oe(l,I,{params:g(I.params),hash:Ln(l.hash),redirectedFrom:void 0,href:R})}let F;if(Y.path!=null)F=Oe({},Y,{path:Tr(n,Y.path,$.path).path});else{const l=Oe({},Y.params);for(const I in l)l[I]==null&&delete l[I];F=Oe({},Y,{params:h(l)}),$.params=h($.params)}const ee=t.resolve(F,$),ie=Y.hash||"";ee.params=f(g(ee.params));const fe=wu(r,Oe({},Y,{hash:mu(ie),path:ee.path})),O=s.createHref(fe);return Oe({fullPath:fe,hash:ie,query:r===Si?Ju(Y.query):Y.query||{}},ee,{redirectedFrom:void 0,href:O})}function w(Y){return typeof Y=="string"?Tr(n,Y,c.value.path):Oe({},Y)}function _(Y,$){if(u!==Y)return an(8,{from:$,to:Y})}function S(Y){return M(Y)}function k(Y){return S(Oe(w(Y),{replace:!0}))}function C(Y){const $=Y.matched[Y.matched.length-1];if($&&$.redirect){const{redirect:F}=$;let ee=typeof F=="function"?F(Y):F;return typeof ee=="string"&&(ee=ee.includes("?")||ee.includes("#")?ee=w(ee):{path:ee},ee.params={}),Oe({query:Y.query,hash:Y.hash,params:ee.path!=null?{}:Y.params},ee)}}function M(Y,$){const F=u=m(Y),ee=c.value,ie=Y.state,fe=Y.force,O=Y.replace===!0,l=C(F);if(l)return M(Oe(w(l),{state:typeof l=="object"?Oe({},ie,l.state):ie,force:fe,replace:O}),$||F);const I=F;I.redirectedFrom=$;let R;return!fe&&xu(r,ee,F)&&(R=an(16,{to:I,from:ee}),N(ee,ee,!0,!1)),(R?Promise.resolve(R):V(I,ee)).catch(x=>gt(x)?gt(x,2)?x:se(x):X(x,I,ee)).then(x=>{if(x){if(gt(x,2))return M(Oe({replace:O},w(x.to),{state:typeof x.to=="object"?Oe({},ie,x.to.state):ie,force:fe}),$||I)}else x=D(I,ee,!0,O,ie);return ne(I,ee,x),x})}function T(Y,$){const F=_(Y,$);return F?Promise.reject(F):Promise.resolve()}function P(Y){const $=H.values().next().value;return $&&typeof $.runWithContext=="function"?$.runWithContext(Y):Y()}function V(Y,$){let F;const[ee,ie,fe]=cf(Y,$);F=Mr(ee.reverse(),"beforeRouteLeave",Y,$);for(const l of ee)l.leaveGuards.forEach(I=>{F.push(At(I,Y,$))});const O=T.bind(null,Y,$);return F.push(O),ue(F).then(()=>{F=[];for(const l of i.list())F.push(At(l,Y,$));return F.push(O),ue(F)}).then(()=>{F=Mr(ie,"beforeRouteUpdate",Y,$);for(const l of ie)l.updateGuards.forEach(I=>{F.push(At(I,Y,$))});return F.push(O),ue(F)}).then(()=>{F=[];for(const l of fe)if(l.beforeEnter)if(ct(l.beforeEnter))for(const I of l.beforeEnter)F.push(At(I,Y,$));else F.push(At(l.beforeEnter,Y,$));return F.push(O),ue(F)}).then(()=>(Y.matched.forEach(l=>l.enterCallbacks={}),F=Mr(fe,"beforeRouteEnter",Y,$,P),F.push(O),ue(F))).then(()=>{F=[];for(const l of a.list())F.push(At(l,Y,$));return F.push(O),ue(F)}).catch(l=>gt(l,8)?l:Promise.reject(l))}function ne(Y,$,F){o.list().forEach(ee=>P(()=>ee(Y,$,F)))}function D(Y,$,F,ee,ie){const fe=_(Y,$);if(fe)return fe;const O=$===Et,l=Zt?history.state:{};F&&(ee||O?s.replace(Y.fullPath,Oe({scroll:O&&l&&l.scroll},ie)):s.push(Y.fullPath,ie)),c.value=Y,N(Y,$,F,O),se()}let W;function v(){W||(W=s.listen((Y,$,F)=>{if(!Q.listening)return;const ee=m(Y),ie=C(ee);if(ie){M(Oe(ie,{replace:!0}),ee).catch(xn);return}u=ee;const fe=c.value;Zt&&Lu(gi(fe.fullPath,F.delta),kr()),V(ee,fe).catch(O=>gt(O,12)?O:gt(O,2)?(M(O.to,ee).then(l=>{gt(l,20)&&!F.delta&&F.type===Dn.pop&&s.go(-1,!1)}).catch(xn),Promise.reject()):(F.delta&&s.go(-F.delta,!1),X(O,ee,fe))).then(O=>{O=O||D(ee,fe,!1),O&&(F.delta&&!gt(O,8)?s.go(-F.delta,!1):F.type===Dn.pop&&gt(O,20)&&s.go(-1,!1)),ne(ee,fe,O)}).catch(xn)}))}let J=pn(),oe=pn(),G;function X(Y,$,F){se(Y);const ee=oe.list();return ee.length?ee.forEach(ie=>ie(Y,$,F)):console.error(Y),Promise.reject(Y)}function B(){return G&&c.value!==Et?Promise.resolve():new Promise((Y,$)=>{J.add([Y,$])})}function se(Y){return G||(G=!Y,v(),J.list().forEach(([$,F])=>Y?F(Y):$()),J.reset()),Y}function N(Y,$,F,ee){const{scrollBehavior:ie}=e;if(!Zt||!ie)return Promise.resolve();const fe=!F&&Du(gi(Y.fullPath,0))||(ee||!F)&&history.state&&history.state.scroll||null;return dr().then(()=>ie(Y,$,fe)).then(O=>O&&Au(O)).catch(O=>X(O,Y,$))}const z=Y=>s.go(Y);let K;const H=new Set,Q={currentRoute:c,listening:!0,addRoute:d,removeRoute:y,clearRoutes:t.clearRoutes,hasRoute:b,getRoutes:p,resolve:m,options:e,push:S,replace:k,go:z,back:()=>z(-1),forward:()=>z(1),beforeEach:i.add,beforeResolve:a.add,afterEach:o.add,onError:oe.add,isReady:B,install(Y){const $=this;Y.component("RouterLink",nf),Y.component("RouterView",af),Y.config.globalProperties.$router=$,Object.defineProperty(Y.config.globalProperties,"$route",{enumerable:!0,get:()=>Ee(c)}),Zt&&!K&&c.value===Et&&(K=!0,S(s.location).catch(ie=>{}));const F={};for(const ie in Et)Object.defineProperty(F,ie,{get:()=>c.value[ie],enumerable:!0});Y.provide(Er,$),Y.provide(ks,Ji(F)),Y.provide(ns,c);const ee=Y.unmount;H.add(Y),Y.unmount=function(){H.delete(Y),H.size<1&&(u=Et,W&&W(),W=null,c.value=Et,K=!1,G=!1),ee()}}};function ue(Y){return Y.reduce(($,F)=>$.then(()=>P(F)),Promise.resolve())}return Q}function cf(e,t){const n=[],r=[],s=[],i=Math.max(t.matched.length,e.matched.length);for(let a=0;a<i;a++){const o=t.matched[a];o&&(e.matched.find(u=>on(u,o))?r.push(o):n.push(o));const c=e.matched[a];c&&(t.matched.find(u=>on(u,c))||s.push(c))}return[n,r,s]}function uf(){return tt(Er)}function ff(e){return tt(ks)}const ia=[{path:"/",name:"Directory",component:()=>Ut(()=>import("./FileView_N-hII4ZYYJ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url),meta:{icon:"sysIcon_folderopen",deny_user:!1,deny_guest:!1}},{path:"/favourite",name:"Favourite",component:()=>Ut(()=>import("./Favourite-Dh2F0HGj.js"),__vite__mapDeps([8,3,2,4,5,6,9]),import.meta.url),meta:{icon:"sysIcon_star-o",deny_user:!1,deny_guest:!0}},{path:"/recycle",name:"Recycle",component:()=>Ut(()=>import("./FileView_R-D4rrWsud.js"),__vite__mapDeps([10,1,2,3,4,5,6,7]),import.meta.url),meta:{icon:"sysIcon_delete",deny_user:!1,deny_guest:!0}},{path:"/tag",name:"Tag",component:()=>Ut(()=>import("./TagView-CGUSsEPw.js"),__vite__mapDeps([11,3,4,5,12]),import.meta.url),meta:{icon:"sysIcon_tagso",deny_user:!1,deny_guest:!0}},{path:"/group",name:"User",component:()=>Ut(()=>import("./UserView-8-ktx_Z1.js"),__vite__mapDeps([13,3,4,5,14]),import.meta.url),meta:{icon:"sysIcon_team",deny_user:!0,deny_guest:!0}},{path:"/log",name:"ProcessLog",component:()=>Ut(()=>import("./LogView-6ZM-QGy5.js"),__vite__mapDeps([15,16]),import.meta.url),meta:{icon:"sysIcon_filetext",deny_user:!0,deny_guest:!0}},{path:"/setting",name:"Setting",component:()=>Ut(()=>import("./SettingView-zBlismw_.js"),__vite__mapDeps([17,3,18]),import.meta.url),meta:{icon:"sysIcon_setting",deny_user:!0,deny_guest:!0}}],df=lf({history:Mu("./"),routes:ia}),hf=["onClick"],pf={class:"content"},mf=Ve({__name:"NaviContent",props:{depth:{},records:{}},setup(e){const t=e;t.depth&&t.depth;const n=t.records,r=uf(),s=ff();async function i(c){console.info("go",c);const u=await r.push(c.path);console.info(u)}const o=un().get();return(c,u)=>(ae(!0),le(_e,null,Ne(Ee(n),(f,h)=>{var g,d,y,p,b,m;return ae(),le(_e,{key:h},[(g=f.meta)!=null&&g.hide?(ae(),le(_e,{key:0},[],64)):(d=f.meta)!=null&&d.deny_guest&&((y=Ee(o))==null?void 0:y.group.title)=="guest"?(ae(),le(_e,{key:1},[],64)):(p=f.meta)!=null&&p.deny_user&&!((b=Ee(o))!=null&&b.group.admin)?(ae(),le(_e,{key:2},[],64)):(ae(),le("p",{key:3,onClick:w=>i(f),class:Ae({title:!0,active:f.path===Ee(s).path})},[re("span",{class:Ae(["icon","sysIcon",(m=f.meta)==null?void 0:m.icon])},null,2),re("span",pf,Se(f.name),1)],10,hf))],64)}),128))}}),_f=Ko(mf,[["__scopeId","data-v-8438e462"]]),gf=Ve({__name:"Navi",setup(e){return(t,n)=>(ae(),le("div",{class:Ae(["fr_navi",{folded:!1}])},[je(_f,{records:Ee(ia),depth:1},null,8,["records"])]))}}),Hn=new Map,Re={send:function(e){const t=new XMLHttpRequest;t.withCredentials=!!e.withCredentials;{if(e.get instanceof Array){const s={};for(let i=0;i<e.get.length;i++)s[e.get[i].k]=e.get[i].v;e.get=s}let n=e.path.split(/#/ig);n=n[0].split(/\?/ig),(n.length===1||n[n.length-1].length===0)&&(e.path+="?");let r=0;for(const s in e.get)Object.prototype.hasOwnProperty.call(e.get,s)&&(r++!==0&&(e.path+="&"),e.path+=`${s}=${e.get[s]}`)}if(e.post instanceof Array){const n=new FormData;for(let r=0;r<e.post.length;r++)n.append(e.post[r].k,e.post[r].v);e.post=n}else if(typeof e.post!="string"){if(!(e.post instanceof FormData)){const n=new FormData;let r=!1;for(const s in e.post)Object.prototype.hasOwnProperty.call(e.post,s)&&(r=!0,n.append(s,e.post[s]));r&&(e.post=n)}}if(e.method||(e.method="get"),e.post&&(e.method="post"),e.method=e.method.toLocaleUpperCase(),e.header instanceof Array){const n={};for(let r=0;r<e.header.length;r++){const s=e.header[r].indexOf(":");s!==-1&&(n[e.header[r].slice(0,s).trim()]=e.header[r].slice(s+1).trim())}e.header=n}t.onreadystatechange=function(){if(t.readyState===4&&e.async)return t.status<400?e.success?e.success(t.responseText,t.status):!0:e.error?e.error(t.responseText,t.status):!1},e.onUploadProgress&&(t.upload.onprogress=e.onUploadProgress),e.onProgress&&(t.onprogress=e.onProgress),t.open(e.method,e.path,!!e.async);for(const n in e.header)Object.prototype.hasOwnProperty.call(e.header,n)&&t.setRequestHeader(n,e.header[n]);return e.method==="GET"?t.send():t.send(e.post),e.async?t:t.responseText},mergeArray:function(...e){const t={};for(let n=0;n<e.length;n++)for(const r in e[n])Object.prototype.hasOwnProperty.call(e[n],r)&&(t[r]=e[n][r]);return t},explode:function(e,t,n){return e.split(t,n)},implode:function(e,t){t||(t=",");let n="";for(let r=0;r<e.length;r++)n+=e[r],r!==e.length-1&&(n+=t);return n},removeVal:function(e,t){if(typeof t=="string")t=[t];else if(typeof t!="object"||!t.length)return[];const n=e.slice();for(let r=0;r<t.length;r++)for(let s=0;s<n.length;s++)n[s]===t[r]&&(n.splice(s,1),--s);return n},sort2DTable:function(e,t,n,r){return e.sort(function(s,i){return n?r?s[t]-i[t]:i[t]-s[t]:r?s[t].localeCompare(i[t]):i[t].localeCompare(s[t])})},toMap:function(e,t,n){const r=new Map;return e.forEach(s=>{n&&n(s),r.set(s[t],s)}),r},setCookie:function(e,t,n,r){console.warn("setCookie");const s=new Date;s.setDate(s.getDate()+n),document.cookie=e+"="+escape(t)+";"+(n==null?"":"expires="+s.toUTCString())+";"+(r==null?"":";path="+r)+";"},getCookie:function(e){if(console.info(document.cookie),document.cookie.length>0){let t=document.cookie.indexOf(e+"=");if(t!==-1){t=t+e.length+1;let n=document.cookie.indexOf(";",t);return n===-1&&(n=document.cookie.length),unescape(document.cookie.substring(t,n))}}return""},getRequests:function(){const e=location.search,t={};if(e.indexOf("?")!==-1){const r=e.substr(1).split("&");for(let s=0;s<r.length;s++){const i=r[s].split("=");i.length===2&&(t[i[0]]=unescape(i[1]))}}return t},mergeRequests:function(e){const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n+"="+e[n]);return Re.implode(t,"&")},trim:function(e,t){t||(t="\\s");const n="^["+t+"]*(.*?)["+t+"]*$";return e.replace(new RegExp(n,"igm"),"$1")},prefix:function(e,t,n){return(Array(t).join(n)+e).slice(-t)},encodeGBKurl:function(e){const t=document.createElement("img");function n(r){return r?(t.src="nothing.action?separator="+r,t.src.split("?separator=").pop()):""}return e.replace(/([^\x00-\xff]+)|([\x00-\xff]+)/g,function(r,s,i){return n(s)+encodeURIComponent(i||"")})},getUrlParam:function(e){const t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substring(1).match(t);return n!=null?unescape(n[2]):null},randStr:function(e,t){e=e||32;const n=t||"abcdefghijklmnopqrstuvwxyz0123456789",r=n.length;let s="";for(let i=0;i<e;i++)s+=n.charAt(Math.floor(Math.random()*r));return s},randInt:function(e,t){const n=Math.random(),r=e;return e>t&&(e=t,t=r),Math.floor(e+n*(t-e))},kmgt:function(e,t){typeof e!="number"&&(e=parseFloat(e)),t||(t=0);const n=e<0;n&&(t=-1*t);let r;return e<1e3?r=e.toFixed(t):e<1e3*1e3?r=(e/1e3).toFixed(t)+" K":e<1e3*1e3*1e3?r=(e/(1e3*1e3)).toFixed(t)+" M":r=(e/(1e3*1e3*1e3)).toFixed(t)+" G",(n?"-":"")+r},nodeOffsetX:function(e){let t=e.offsetLeft?e.offsetLeft:0;return e.offsetParent&&(t+=this.nodeOffsetX(e.offsetParent)),t},nodeOffsetY:function(e){let t=e.offsetTop?e.offsetTop:0;return e.offsetParent&&(t+=this.nodeOffsetY(e.offsetParent)),t},nodeOffsetXY:function(e){let t=e.offsetLeft?e.offsetLeft:0,n=e.offsetTop?e.offsetTop:0;if(e.offsetParent){let{x:r,y:s}=this.nodeOffsetXY(e.offsetParent);t+=r,n+=s}return{x:t,y:n}},isEmpty:function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!0;return!1},copyObject:function(e){return JSON.parse(JSON.stringify(e))},toggleClass:function(e,t){const n=e.className;if(!n||!n.trim().length){e.className=t;return}const r=n.split(" ");let s=!1;for(let i=0;i<r.length;i++)r[i]===t&&(r.splice(i,1),s=!0);s||r.push(t),e.className=Array.prototype.join.call(r," ")},template:function(e,t){let n=e;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.replace("{"+r+"}",t[r]);return n},debounce:function(e,t,n){const r=Hn.get(n);r&&(clearTimeout(r),Hn.delete(n));const s=setTimeout(()=>{Hn.delete(n),e()},t);Hn.set(n,s)}},zr="tosho_config_",Sr=xr("localConfigure",()=>{let e=pe({});const t={};function n(a){if(a=zr+a,e[a])return e[a];const o=localStorage.getItem(a);if(!o)return null;try{e[a]=JSON.parse(o)}catch{e[a]=null}return e[a]}function r(a,o,c){return a=zr+a,c||(c=new Date().valueOf().toString(32)+Math.random().toString(32)),t[a]||(t[a]=new Map),t[a].set(c,o),c}function s(a,o){t[a]&&(t[a].delete(o),t[a].size==0&&delete t[a])}function i(a,o){a=zr+a,e[a]=o,t[a]&&t[a].forEach(c=>c(o)),localStorage.setItem(a,JSON.stringify(o))}return{get:n,set:i,listen:r,release:s}});let rs=null;const oa=xr("useContext",()=>({register:vf,trigger:yf}));function vf(e){rs=e}function yf(e,t){rs&&rs(e,t)}var Wn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Vn(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var aa={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,s,i){function a(u,f){if(!s[u]){if(!r[u]){var h=typeof Vn=="function"&&Vn;if(!f&&h)return h(u,!0);if(o)return o(u,!0);var g=new Error("Cannot find module '"+u+"'");throw g.code="MODULE_NOT_FOUND",g}var d=s[u]={exports:{}};r[u][0].call(d.exports,function(y){var p=r[u][1][y];return a(p||y)},d,d.exports,n,r,s,i)}return s[u].exports}for(var o=typeof Vn=="function"&&Vn,c=0;c<i.length;c++)a(i[c]);return a}({1:[function(n,r,s){var i=n("./utils"),a=n("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(c){for(var u,f,h,g,d,y,p,b=[],m=0,w=c.length,_=w,S=i.getTypeOf(c)!=="string";m<c.length;)_=w-m,h=S?(u=c[m++],f=m<w?c[m++]:0,m<w?c[m++]:0):(u=c.charCodeAt(m++),f=m<w?c.charCodeAt(m++):0,m<w?c.charCodeAt(m++):0),g=u>>2,d=(3&u)<<4|f>>4,y=1<_?(15&f)<<2|h>>6:64,p=2<_?63&h:64,b.push(o.charAt(g)+o.charAt(d)+o.charAt(y)+o.charAt(p));return b.join("")},s.decode=function(c){var u,f,h,g,d,y,p=0,b=0,m="data:";if(c.substr(0,m.length)===m)throw new Error("Invalid base64 input, it looks like a data url.");var w,_=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===o.charAt(64)&&_--,c.charAt(c.length-2)===o.charAt(64)&&_--,_%1!=0)throw new Error("Invalid base64 input, bad content length.");for(w=a.uint8array?new Uint8Array(0|_):new Array(0|_);p<c.length;)u=o.indexOf(c.charAt(p++))<<2|(g=o.indexOf(c.charAt(p++)))>>4,f=(15&g)<<4|(d=o.indexOf(c.charAt(p++)))>>2,h=(3&d)<<6|(y=o.indexOf(c.charAt(p++))),w[b++]=u,d!==64&&(w[b++]=f),y!==64&&(w[b++]=h);return w}},{"./support":30,"./utils":32}],2:[function(n,r,s){var i=n("./external"),a=n("./stream/DataWorker"),o=n("./stream/Crc32Probe"),c=n("./stream/DataLengthProbe");function u(f,h,g,d,y){this.compressedSize=f,this.uncompressedSize=h,this.crc32=g,this.compression=d,this.compressedContent=y}u.prototype={getContentWorker:function(){var f=new a(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),h=this;return f.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),f},getCompressedWorker:function(){return new a(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(f,h,g){return f.pipe(new o).pipe(new c("uncompressedSize")).pipe(h.compressWorker(g)).pipe(new c("compressedSize")).withStreamInfo("compression",h)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,s){var i=n("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},s.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,s){var i=n("./utils"),a=function(){for(var o,c=[],u=0;u<256;u++){o=u;for(var f=0;f<8;f++)o=1&o?3988292384^o>>>1:o>>>1;c[u]=o}return c}();r.exports=function(o,c){return o!==void 0&&o.length?i.getTypeOf(o)!=="string"?function(u,f,h,g){var d=a,y=g+h;u^=-1;for(var p=g;p<y;p++)u=u>>>8^d[255&(u^f[p])];return-1^u}(0|c,o,o.length,0):function(u,f,h,g){var d=a,y=g+h;u^=-1;for(var p=g;p<y;p++)u=u>>>8^d[255&(u^f.charCodeAt(p))];return-1^u}(0|c,o,o.length,0):0}},{"./utils":32}],5:[function(n,r,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(n,r,s){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=n("pako"),o=n("./utils"),c=n("./stream/GenericWorker"),u=i?"uint8array":"array";function f(h,g){c.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=g,this.meta={}}s.magic="\b\0",o.inherits(f,c),f.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(u,h.data),!1)},f.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},f.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},f.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(g){h.push({data:g,meta:h.meta})}},s.compressWorker=function(h){return new f("Deflate",h)},s.uncompressWorker=function(){return new f("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,s){function i(d,y){var p,b="";for(p=0;p<y;p++)b+=String.fromCharCode(255&d),d>>>=8;return b}function a(d,y,p,b,m,w){var _,S,k=d.file,C=d.compression,M=w!==u.utf8encode,T=o.transformTo("string",w(k.name)),P=o.transformTo("string",u.utf8encode(k.name)),V=k.comment,ne=o.transformTo("string",w(V)),D=o.transformTo("string",u.utf8encode(V)),W=P.length!==k.name.length,v=D.length!==V.length,J="",oe="",G="",X=k.dir,B=k.date,se={crc32:0,compressedSize:0,uncompressedSize:0};y&&!p||(se.crc32=d.crc32,se.compressedSize=d.compressedSize,se.uncompressedSize=d.uncompressedSize);var N=0;y&&(N|=8),M||!W&&!v||(N|=2048);var z=0,K=0;X&&(z|=16),m==="UNIX"?(K=798,z|=function(Q,ue){var Y=Q;return Q||(Y=ue?16893:33204),(65535&Y)<<16}(k.unixPermissions,X)):(K=20,z|=function(Q){return 63&(Q||0)}(k.dosPermissions)),_=B.getUTCHours(),_<<=6,_|=B.getUTCMinutes(),_<<=5,_|=B.getUTCSeconds()/2,S=B.getUTCFullYear()-1980,S<<=4,S|=B.getUTCMonth()+1,S<<=5,S|=B.getUTCDate(),W&&(oe=i(1,1)+i(f(T),4)+P,J+="up"+i(oe.length,2)+oe),v&&(G=i(1,1)+i(f(ne),4)+D,J+="uc"+i(G.length,2)+G);var H="";return H+=`
\0`,H+=i(N,2),H+=C.magic,H+=i(_,2),H+=i(S,2),H+=i(se.crc32,4),H+=i(se.compressedSize,4),H+=i(se.uncompressedSize,4),H+=i(T.length,2),H+=i(J.length,2),{fileRecord:h.LOCAL_FILE_HEADER+H+T+J,dirRecord:h.CENTRAL_FILE_HEADER+i(K,2)+H+i(ne.length,2)+"\0\0\0\0"+i(z,4)+i(b,4)+T+J+ne}}var o=n("../utils"),c=n("../stream/GenericWorker"),u=n("../utf8"),f=n("../crc32"),h=n("../signature");function g(d,y,p,b){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=y,this.zipPlatform=p,this.encodeFileName=b,this.streamFiles=d,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(g,c),g.prototype.push=function(d){var y=d.meta.percent||0,p=this.entriesCount,b=this._sources.length;this.accumulate?this.contentBuffer.push(d):(this.bytesWritten+=d.data.length,c.prototype.push.call(this,{data:d.data,meta:{currentFile:this.currentFile,percent:p?(y+100*(p-b-1))/p:100}}))},g.prototype.openedSource=function(d){this.currentSourceOffset=this.bytesWritten,this.currentFile=d.file.name;var y=this.streamFiles&&!d.file.dir;if(y){var p=a(d,y,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:p.fileRecord,meta:{percent:0}})}else this.accumulate=!0},g.prototype.closedSource=function(d){this.accumulate=!1;var y=this.streamFiles&&!d.file.dir,p=a(d,y,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(p.dirRecord),y)this.push({data:function(b){return h.DATA_DESCRIPTOR+i(b.crc32,4)+i(b.compressedSize,4)+i(b.uncompressedSize,4)}(d),meta:{percent:100}});else for(this.push({data:p.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},g.prototype.flush=function(){for(var d=this.bytesWritten,y=0;y<this.dirRecords.length;y++)this.push({data:this.dirRecords[y],meta:{percent:100}});var p=this.bytesWritten-d,b=function(m,w,_,S,k){var C=o.transformTo("string",k(S));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(m,2)+i(m,2)+i(w,4)+i(_,4)+i(C.length,2)+C}(this.dirRecords.length,p,d,this.zipComment,this.encodeFileName);this.push({data:b,meta:{percent:100}})},g.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},g.prototype.registerPrevious=function(d){this._sources.push(d);var y=this;return d.on("data",function(p){y.processChunk(p)}),d.on("end",function(){y.closedSource(y.previous.streamInfo),y._sources.length?y.prepareNextSource():y.end()}),d.on("error",function(p){y.error(p)}),this},g.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},g.prototype.error=function(d){var y=this._sources;if(!c.prototype.error.call(this,d))return!1;for(var p=0;p<y.length;p++)try{y[p].error(d)}catch{}return!0},g.prototype.lock=function(){c.prototype.lock.call(this);for(var d=this._sources,y=0;y<d.length;y++)d[y].lock()},r.exports=g},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,s){var i=n("../compressions"),a=n("./ZipFileWorker");s.generateWorker=function(o,c,u){var f=new a(c.streamFiles,u,c.platform,c.encodeFileName),h=0;try{o.forEach(function(g,d){h++;var y=function(w,_){var S=w||_,k=i[S];if(!k)throw new Error(S+" is not a valid compression method !");return k}(d.options.compression,c.compression),p=d.options.compressionOptions||c.compressionOptions||{},b=d.dir,m=d.date;d._compressWorker(y,p).withStreamInfo("file",{name:g,dir:b,date:m,comment:d.comment||"",unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions}).pipe(f)}),f.entriesCount=h}catch(g){f.error(g)}return f}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,s){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new i;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(a,o){return new i().loadAsync(a,o)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,s){var i=n("./utils"),a=n("./external"),o=n("./utf8"),c=n("./zipEntries"),u=n("./stream/Crc32Probe"),f=n("./nodejsUtils");function h(g){return new a.Promise(function(d,y){var p=g.decompressed.getContentWorker().pipe(new u);p.on("error",function(b){y(b)}).on("end",function(){p.streamInfo.crc32!==g.decompressed.crc32?y(new Error("Corrupted zip : CRC32 mismatch")):d()}).resume()})}r.exports=function(g,d){var y=this;return d=i.extend(d||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),f.isNode&&f.isStream(g)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",g,!0,d.optimizedBinaryString,d.base64).then(function(p){var b=new c(d);return b.load(p),b}).then(function(p){var b=[a.Promise.resolve(p)],m=p.files;if(d.checkCRC32)for(var w=0;w<m.length;w++)b.push(h(m[w]));return a.Promise.all(b)}).then(function(p){for(var b=p.shift(),m=b.files,w=0;w<m.length;w++){var _=m[w],S=_.fileNameStr,k=i.resolve(_.fileNameStr);y.file(k,_.decompressed,{binary:!0,optimizedBinaryString:!0,date:_.date,dir:_.dir,comment:_.fileCommentStr.length?_.fileCommentStr:null,unixPermissions:_.unixPermissions,dosPermissions:_.dosPermissions,createFolders:d.createFolders}),_.dir||(y.file(k).unsafeOriginalName=S)}return b.zipComment.length&&(y.comment=b.zipComment),y})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,s){var i=n("../utils"),a=n("../stream/GenericWorker");function o(c,u){a.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(u)}i.inherits(o,a),o.prototype._bindStream=function(c){var u=this;(this._stream=c).pause(),c.on("data",function(f){u.push({data:f,meta:{percent:0}})}).on("error",function(f){u.isPaused?this.generatedError=f:u.error(f)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},o.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,s){var i=n("readable-stream").Readable;function a(o,c,u){i.call(this,c),this._helper=o;var f=this;o.on("data",function(h,g){f.push(h)||f._helper.pause(),u&&u(g)}).on("error",function(h){f.emit("error",h)}).on("end",function(){f.push(null)})}n("../utils").inherits(a,i),a.prototype._read=function(){this._helper.resume()},r.exports=a},{"../utils":32,"readable-stream":16}],14:[function(n,r,s){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,a);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,a)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var a=new Buffer(i);return a.fill(0),a},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,s){function i(k,C,M){var T,P=o.getTypeOf(C),V=o.extend(M||{},f);V.date=V.date||new Date,V.compression!==null&&(V.compression=V.compression.toUpperCase()),typeof V.unixPermissions=="string"&&(V.unixPermissions=parseInt(V.unixPermissions,8)),V.unixPermissions&&16384&V.unixPermissions&&(V.dir=!0),V.dosPermissions&&16&V.dosPermissions&&(V.dir=!0),V.dir&&(k=m(k)),V.createFolders&&(T=b(k))&&w.call(this,T,!0);var ne=P==="string"&&V.binary===!1&&V.base64===!1;M&&M.binary!==void 0||(V.binary=!ne),(C instanceof h&&C.uncompressedSize===0||V.dir||!C||C.length===0)&&(V.base64=!1,V.binary=!0,C="",V.compression="STORE",P="string");var D=null;D=C instanceof h||C instanceof c?C:y.isNode&&y.isStream(C)?new p(k,C):o.prepareContent(k,C,V.binary,V.optimizedBinaryString,V.base64);var W=new g(k,D,V);this.files[k]=W}var a=n("./utf8"),o=n("./utils"),c=n("./stream/GenericWorker"),u=n("./stream/StreamHelper"),f=n("./defaults"),h=n("./compressedObject"),g=n("./zipObject"),d=n("./generate"),y=n("./nodejsUtils"),p=n("./nodejs/NodejsStreamInputAdapter"),b=function(k){k.slice(-1)==="/"&&(k=k.substring(0,k.length-1));var C=k.lastIndexOf("/");return 0<C?k.substring(0,C):""},m=function(k){return k.slice(-1)!=="/"&&(k+="/"),k},w=function(k,C){return C=C!==void 0?C:f.createFolders,k=m(k),this.files[k]||i.call(this,k,null,{dir:!0,createFolders:C}),this.files[k]};function _(k){return Object.prototype.toString.call(k)==="[object RegExp]"}var S={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(k){var C,M,T;for(C in this.files)T=this.files[C],(M=C.slice(this.root.length,C.length))&&C.slice(0,this.root.length)===this.root&&k(M,T)},filter:function(k){var C=[];return this.forEach(function(M,T){k(M,T)&&C.push(T)}),C},file:function(k,C,M){if(arguments.length!==1)return k=this.root+k,i.call(this,k,C,M),this;if(_(k)){var T=k;return this.filter(function(V,ne){return!ne.dir&&T.test(V)})}var P=this.files[this.root+k];return P&&!P.dir?P:null},folder:function(k){if(!k)return this;if(_(k))return this.filter(function(P,V){return V.dir&&k.test(P)});var C=this.root+k,M=w.call(this,C),T=this.clone();return T.root=M.name,T},remove:function(k){k=this.root+k;var C=this.files[k];if(C||(k.slice(-1)!=="/"&&(k+="/"),C=this.files[k]),C&&!C.dir)delete this.files[k];else for(var M=this.filter(function(P,V){return V.name.slice(0,k.length)===k}),T=0;T<M.length;T++)delete this.files[M[T].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(k){var C,M={};try{if((M=o.extend(k||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=M.type.toLowerCase(),M.compression=M.compression.toUpperCase(),M.type==="binarystring"&&(M.type="string"),!M.type)throw new Error("No output type specified.");o.checkSupport(M.type),M.platform!=="darwin"&&M.platform!=="freebsd"&&M.platform!=="linux"&&M.platform!=="sunos"||(M.platform="UNIX"),M.platform==="win32"&&(M.platform="DOS");var T=M.comment||this.comment||"";C=d.generateWorker(this,M,T)}catch(P){(C=new c("error")).error(P)}return new u(C,M.type||"string",M.mimeType)},generateAsync:function(k,C){return this.generateInternalStream(k).accumulate(C)},generateNodeStream:function(k,C){return(k=k||{}).type||(k.type="nodebuffer"),this.generateInternalStream(k).toNodejsStream(C)}};r.exports=S},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,s){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,s){var i=n("./DataReader");function a(o){i.call(this,o);for(var c=0;c<this.data.length;c++)o[c]=255&o[c]}n("../utils").inherits(a,i),a.prototype.byteAt=function(o){return this.data[this.zero+o]},a.prototype.lastIndexOfSignature=function(o){for(var c=o.charCodeAt(0),u=o.charCodeAt(1),f=o.charCodeAt(2),h=o.charCodeAt(3),g=this.length-4;0<=g;--g)if(this.data[g]===c&&this.data[g+1]===u&&this.data[g+2]===f&&this.data[g+3]===h)return g-this.zero;return-1},a.prototype.readAndCheckSignature=function(o){var c=o.charCodeAt(0),u=o.charCodeAt(1),f=o.charCodeAt(2),h=o.charCodeAt(3),g=this.readData(4);return c===g[0]&&u===g[1]&&f===g[2]&&h===g[3]},a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},r.exports=a},{"../utils":32,"./DataReader":18}],18:[function(n,r,s){var i=n("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var c,u=0;for(this.checkOffset(o),c=this.index+o-1;c>=this.index;c--)u=(u<<8)+this.byteAt(c);return this.index+=o,u},readString:function(o){return i.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},r.exports=a},{"../utils":32}],19:[function(n,r,s){var i=n("./Uint8ArrayReader");function a(o){i.call(this,o)}n("../utils").inherits(a,i),a.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},r.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,s){var i=n("./DataReader");function a(o){i.call(this,o)}n("../utils").inherits(a,i),a.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},a.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},a.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},a.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},r.exports=a},{"../utils":32,"./DataReader":18}],21:[function(n,r,s){var i=n("./ArrayReader");function a(o){i.call(this,o)}n("../utils").inherits(a,i),a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},r.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,s){var i=n("../utils"),a=n("../support"),o=n("./ArrayReader"),c=n("./StringReader"),u=n("./NodeBufferReader"),f=n("./Uint8ArrayReader");r.exports=function(h){var g=i.getTypeOf(h);return i.checkSupport(g),g!=="string"||a.uint8array?g==="nodebuffer"?new u(h):a.uint8array?new f(i.transformTo("uint8array",h)):new o(i.transformTo("array",h)):new c(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,s){var i=n("./GenericWorker"),a=n("../utils");function o(c){i.call(this,"ConvertWorker to "+c),this.destType=c}a.inherits(o,i),o.prototype.processChunk=function(c){this.push({data:a.transformTo(this.destType,c.data),meta:c.meta})},r.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,s){var i=n("./GenericWorker"),a=n("../crc32");function o(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(o,i),o.prototype.processChunk=function(c){this.streamInfo.crc32=a(c.data,this.streamInfo.crc32||0),this.push(c)},r.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,s){var i=n("../utils"),a=n("./GenericWorker");function o(c){a.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}i.inherits(o,a),o.prototype.processChunk=function(c){if(c){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+c.data.length}a.prototype.processChunk.call(this,c)},r.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,s){var i=n("../utils"),a=n("./GenericWorker");function o(c){a.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(f){u.dataIsReady=!0,u.data=f,u.max=f&&f.length||0,u.type=i.getTypeOf(f),u.isPaused||u._tickAndRepeat()},function(f){u.error(f)})}i.inherits(o,a),o.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,u);break;case"uint8array":c=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":c=this.data.slice(this.index,u)}return this.index=u,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,s){function i(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var c=0;c<this._listeners[a].length;c++)this._listeners[a][c].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(c){o.processChunk(c)}),a.on("end",function(){o.end()}),a.on("error",function(c){o.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},r.exports=i},{}],29:[function(n,r,s){var i=n("../utils"),a=n("./ConvertWorker"),o=n("./GenericWorker"),c=n("../base64"),u=n("../support"),f=n("../external"),h=null;if(u.nodestream)try{h=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function g(y,p){return new f.Promise(function(b,m){var w=[],_=y._internalType,S=y._outputType,k=y._mimeType;y.on("data",function(C,M){w.push(C),p&&p(M)}).on("error",function(C){w=[],m(C)}).on("end",function(){try{var C=function(M,T,P){switch(M){case"blob":return i.newBlob(i.transformTo("arraybuffer",T),P);case"base64":return c.encode(T);default:return i.transformTo(M,T)}}(S,function(M,T){var P,V=0,ne=null,D=0;for(P=0;P<T.length;P++)D+=T[P].length;switch(M){case"string":return T.join("");case"array":return Array.prototype.concat.apply([],T);case"uint8array":for(ne=new Uint8Array(D),P=0;P<T.length;P++)ne.set(T[P],V),V+=T[P].length;return ne;case"nodebuffer":return Buffer.concat(T);default:throw new Error("concat : unsupported type '"+M+"'")}}(_,w),k);b(C)}catch(M){m(M)}w=[]}).resume()})}function d(y,p,b){var m=p;switch(p){case"blob":case"arraybuffer":m="uint8array";break;case"base64":m="string"}try{this._internalType=m,this._outputType=p,this._mimeType=b,i.checkSupport(m),this._worker=y.pipe(new a(m)),y.lock()}catch(w){this._worker=new o("error"),this._worker.error(w)}}d.prototype={accumulate:function(y){return g(this,y)},on:function(y,p){var b=this;return y==="data"?this._worker.on(y,function(m){p.call(b,m.data,m.meta)}):this._worker.on(y,function(){i.delay(p,arguments,b)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(y){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},y)}},r.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var i=new ArrayBuffer(0);try{s.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(i),s.blob=a.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!n("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,s){for(var i=n("./utils"),a=n("./support"),o=n("./nodejsUtils"),c=n("./stream/GenericWorker"),u=new Array(256),f=0;f<256;f++)u[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;u[254]=u[254]=1;function h(){c.call(this,"utf-8 decode"),this.leftOver=null}function g(){c.call(this,"utf-8 encode")}s.utf8encode=function(d){return a.nodebuffer?o.newBufferFrom(d,"utf-8"):function(y){var p,b,m,w,_,S=y.length,k=0;for(w=0;w<S;w++)(64512&(b=y.charCodeAt(w)))==55296&&w+1<S&&(64512&(m=y.charCodeAt(w+1)))==56320&&(b=65536+(b-55296<<10)+(m-56320),w++),k+=b<128?1:b<2048?2:b<65536?3:4;for(p=a.uint8array?new Uint8Array(k):new Array(k),w=_=0;_<k;w++)(64512&(b=y.charCodeAt(w)))==55296&&w+1<S&&(64512&(m=y.charCodeAt(w+1)))==56320&&(b=65536+(b-55296<<10)+(m-56320),w++),b<128?p[_++]=b:(b<2048?p[_++]=192|b>>>6:(b<65536?p[_++]=224|b>>>12:(p[_++]=240|b>>>18,p[_++]=128|b>>>12&63),p[_++]=128|b>>>6&63),p[_++]=128|63&b);return p}(d)},s.utf8decode=function(d){return a.nodebuffer?i.transformTo("nodebuffer",d).toString("utf-8"):function(y){var p,b,m,w,_=y.length,S=new Array(2*_);for(p=b=0;p<_;)if((m=y[p++])<128)S[b++]=m;else if(4<(w=u[m]))S[b++]=65533,p+=w-1;else{for(m&=w===2?31:w===3?15:7;1<w&&p<_;)m=m<<6|63&y[p++],w--;1<w?S[b++]=65533:m<65536?S[b++]=m:(m-=65536,S[b++]=55296|m>>10&1023,S[b++]=56320|1023&m)}return S.length!==b&&(S.subarray?S=S.subarray(0,b):S.length=b),i.applyFromCharCode(S)}(d=i.transformTo(a.uint8array?"uint8array":"array",d))},i.inherits(h,c),h.prototype.processChunk=function(d){var y=i.transformTo(a.uint8array?"uint8array":"array",d.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var p=y;(y=new Uint8Array(p.length+this.leftOver.length)).set(this.leftOver,0),y.set(p,this.leftOver.length)}else y=this.leftOver.concat(y);this.leftOver=null}var b=function(w,_){var S;for((_=_||w.length)>w.length&&(_=w.length),S=_-1;0<=S&&(192&w[S])==128;)S--;return S<0||S===0?_:S+u[w[S]]>_?S:_}(y),m=y;b!==y.length&&(a.uint8array?(m=y.subarray(0,b),this.leftOver=y.subarray(b,y.length)):(m=y.slice(0,b),this.leftOver=y.slice(b,y.length))),this.push({data:s.utf8decode(m),meta:d.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=h,i.inherits(g,c),g.prototype.processChunk=function(d){this.push({data:s.utf8encode(d.data),meta:d.meta})},s.Utf8EncodeWorker=g},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,s){var i=n("./support"),a=n("./base64"),o=n("./nodejsUtils"),c=n("./external");function u(p){return p}function f(p,b){for(var m=0;m<p.length;++m)b[m]=255&p.charCodeAt(m);return b}n("setimmediate"),s.newBlob=function(p,b){s.checkSupport("blob");try{return new Blob([p],{type:b})}catch{try{var m=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return m.append(p),m.getBlob(b)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(p,b,m){var w=[],_=0,S=p.length;if(S<=m)return String.fromCharCode.apply(null,p);for(;_<S;)b==="array"||b==="nodebuffer"?w.push(String.fromCharCode.apply(null,p.slice(_,Math.min(_+m,S)))):w.push(String.fromCharCode.apply(null,p.subarray(_,Math.min(_+m,S)))),_+=m;return w.join("")},stringifyByChar:function(p){for(var b="",m=0;m<p.length;m++)b+=String.fromCharCode(p[m]);return b},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function g(p){var b=65536,m=s.getTypeOf(p),w=!0;if(m==="uint8array"?w=h.applyCanBeUsed.uint8array:m==="nodebuffer"&&(w=h.applyCanBeUsed.nodebuffer),w)for(;1<b;)try{return h.stringifyByChunk(p,m,b)}catch{b=Math.floor(b/2)}return h.stringifyByChar(p)}function d(p,b){for(var m=0;m<p.length;m++)b[m]=p[m];return b}s.applyFromCharCode=g;var y={};y.string={string:u,array:function(p){return f(p,new Array(p.length))},arraybuffer:function(p){return y.string.uint8array(p).buffer},uint8array:function(p){return f(p,new Uint8Array(p.length))},nodebuffer:function(p){return f(p,o.allocBuffer(p.length))}},y.array={string:g,array:u,arraybuffer:function(p){return new Uint8Array(p).buffer},uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return o.newBufferFrom(p)}},y.arraybuffer={string:function(p){return g(new Uint8Array(p))},array:function(p){return d(new Uint8Array(p),new Array(p.byteLength))},arraybuffer:u,uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return o.newBufferFrom(new Uint8Array(p))}},y.uint8array={string:g,array:function(p){return d(p,new Array(p.length))},arraybuffer:function(p){return p.buffer},uint8array:u,nodebuffer:function(p){return o.newBufferFrom(p)}},y.nodebuffer={string:g,array:function(p){return d(p,new Array(p.length))},arraybuffer:function(p){return y.nodebuffer.uint8array(p).buffer},uint8array:function(p){return d(p,new Uint8Array(p.length))},nodebuffer:u},s.transformTo=function(p,b){if(b=b||"",!p)return b;s.checkSupport(p);var m=s.getTypeOf(b);return y[m][p](b)},s.resolve=function(p){for(var b=p.split("/"),m=[],w=0;w<b.length;w++){var _=b[w];_==="."||_===""&&w!==0&&w!==b.length-1||(_===".."?m.pop():m.push(_))}return m.join("/")},s.getTypeOf=function(p){return typeof p=="string"?"string":Object.prototype.toString.call(p)==="[object Array]"?"array":i.nodebuffer&&o.isBuffer(p)?"nodebuffer":i.uint8array&&p instanceof Uint8Array?"uint8array":i.arraybuffer&&p instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(p){if(!i[p.toLowerCase()])throw new Error(p+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(p){var b,m,w="";for(m=0;m<(p||"").length;m++)w+="\\x"+((b=p.charCodeAt(m))<16?"0":"")+b.toString(16).toUpperCase();return w},s.delay=function(p,b,m){setImmediate(function(){p.apply(m||null,b||[])})},s.inherits=function(p,b){function m(){}m.prototype=b.prototype,p.prototype=new m},s.extend=function(){var p,b,m={};for(p=0;p<arguments.length;p++)for(b in arguments[p])Object.prototype.hasOwnProperty.call(arguments[p],b)&&m[b]===void 0&&(m[b]=arguments[p][b]);return m},s.prepareContent=function(p,b,m,w,_){return c.Promise.resolve(b).then(function(S){return i.blob&&(S instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(S))!==-1)&&typeof FileReader<"u"?new c.Promise(function(k,C){var M=new FileReader;M.onload=function(T){k(T.target.result)},M.onerror=function(T){C(T.target.error)},M.readAsArrayBuffer(S)}):S}).then(function(S){var k=s.getTypeOf(S);return k?(k==="arraybuffer"?S=s.transformTo("uint8array",S):k==="string"&&(_?S=a.decode(S):m&&w!==!0&&(S=function(C){return f(C,i.uint8array?new Uint8Array(C.length):new Array(C.length))}(S))),S):c.Promise.reject(new Error("Can't read the data of '"+p+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,s){var i=n("./reader/readerFor"),a=n("./utils"),o=n("./signature"),c=n("./zipEntry"),u=n("./support");function f(h){this.files=[],this.loadOptions=h}f.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var g=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(g)+", expected "+a.pretty(h)+")")}},isSignature:function(h,g){var d=this.reader.index;this.reader.setIndex(h);var y=this.reader.readString(4)===g;return this.reader.setIndex(d),y},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),g=u.uint8array?"uint8array":"array",d=a.transformTo(g,h);this.zipComment=this.loadOptions.decodeFileName(d)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,g,d,y=this.zip64EndOfCentralSize-44;0<y;)h=this.reader.readInt(2),g=this.reader.readInt(4),d=this.reader.readData(g),this.zip64ExtensibleData[h]={id:h,length:g,value:d}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,g;for(h=0;h<this.files.length;h++)g=this.files[h],this.reader.setIndex(g.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),g.readLocalPart(this.reader),g.handleUTF8(),g.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(h=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var g=h;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var y=g-d;if(0<y)this.isSignature(g,o.CENTRAL_FILE_HEADER)||(this.reader.zero=y);else if(y<0)throw new Error("Corrupted zip: missing "+Math.abs(y)+" bytes.")},prepareReader:function(h){this.reader=i(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=f},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,s){var i=n("./reader/readerFor"),a=n("./utils"),o=n("./compressedObject"),c=n("./crc32"),u=n("./utf8"),f=n("./compressions"),h=n("./support");function g(d,y){this.options=d,this.loadOptions=y}g.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(d){var y,p;if(d.skip(22),this.fileNameLength=d.readInt(2),p=d.readInt(2),this.fileName=d.readData(this.fileNameLength),d.skip(p),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((y=function(b){for(var m in f)if(Object.prototype.hasOwnProperty.call(f,m)&&f[m].magic===b)return f[m];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,y,d.readData(this.compressedSize))},readCentralPart:function(d){this.versionMadeBy=d.readInt(2),d.skip(2),this.bitFlag=d.readInt(2),this.compressionMethod=d.readString(2),this.date=d.readDate(),this.crc32=d.readInt(4),this.compressedSize=d.readInt(4),this.uncompressedSize=d.readInt(4);var y=d.readInt(2);if(this.extraFieldsLength=d.readInt(2),this.fileCommentLength=d.readInt(2),this.diskNumberStart=d.readInt(2),this.internalFileAttributes=d.readInt(2),this.externalFileAttributes=d.readInt(4),this.localHeaderOffset=d.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");d.skip(y),this.readExtraFields(d),this.parseZIP64ExtraField(d),this.fileComment=d.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var d=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),d==0&&(this.dosPermissions=63&this.externalFileAttributes),d==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var d=i(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(d){var y,p,b,m=d.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});d.index+4<m;)y=d.readInt(2),p=d.readInt(2),b=d.readData(p),this.extraFields[y]={id:y,length:p,value:b};d.setIndex(m)},handleUTF8:function(){var d=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var y=this.findExtraFieldUnicodePath();if(y!==null)this.fileNameStr=y;else{var p=a.transformTo(d,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(p)}var b=this.findExtraFieldUnicodeComment();if(b!==null)this.fileCommentStr=b;else{var m=a.transformTo(d,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(m)}}},findExtraFieldUnicodePath:function(){var d=this.extraFields[28789];if(d){var y=i(d.value);return y.readInt(1)!==1||c(this.fileName)!==y.readInt(4)?null:u.utf8decode(y.readData(d.length-5))}return null},findExtraFieldUnicodeComment:function(){var d=this.extraFields[25461];if(d){var y=i(d.value);return y.readInt(1)!==1||c(this.fileComment)!==y.readInt(4)?null:u.utf8decode(y.readData(d.length-5))}return null}},r.exports=g},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,s){function i(y,p,b){this.name=y,this.dir=b.dir,this.date=b.date,this.comment=b.comment,this.unixPermissions=b.unixPermissions,this.dosPermissions=b.dosPermissions,this._data=p,this._dataBinary=b.binary,this.options={compression:b.compression,compressionOptions:b.compressionOptions}}var a=n("./stream/StreamHelper"),o=n("./stream/DataWorker"),c=n("./utf8"),u=n("./compressedObject"),f=n("./stream/GenericWorker");i.prototype={internalStream:function(y){var p=null,b="string";try{if(!y)throw new Error("No output type specified.");var m=(b=y.toLowerCase())==="string"||b==="text";b!=="binarystring"&&b!=="text"||(b="string"),p=this._decompressWorker();var w=!this._dataBinary;w&&!m&&(p=p.pipe(new c.Utf8EncodeWorker)),!w&&m&&(p=p.pipe(new c.Utf8DecodeWorker))}catch(_){(p=new f("error")).error(_)}return new a(p,b,"")},async:function(y,p){return this.internalStream(y).accumulate(p)},nodeStream:function(y,p){return this.internalStream(y||"nodebuffer").toNodejsStream(p)},_compressWorker:function(y,p){if(this._data instanceof u&&this._data.compression.magic===y.magic)return this._data.getCompressedWorker();var b=this._decompressWorker();return this._dataBinary||(b=b.pipe(new c.Utf8EncodeWorker)),u.createWorkerFrom(b,y,p)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof f?this._data:new o(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],g=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<h.length;d++)i.prototype[h[d]]=g;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,s){(function(i){var a,o,c=i.MutationObserver||i.WebKitMutationObserver;if(c){var u=0,f=new c(y),h=i.document.createTextNode("");f.observe(h,{characterData:!0}),a=function(){h.data=u=++u%2}}else if(i.setImmediate||i.MessageChannel===void 0)a="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var p=i.document.createElement("script");p.onreadystatechange=function(){y(),p.onreadystatechange=null,p.parentNode.removeChild(p),p=null},i.document.documentElement.appendChild(p)}:function(){setTimeout(y,0)};else{var g=new i.MessageChannel;g.port1.onmessage=y,a=function(){g.port2.postMessage(0)}}var d=[];function y(){var p,b;o=!0;for(var m=d.length;m;){for(b=d,d=[],p=-1;++p<m;)b[p]();m=d.length}o=!1}r.exports=function(p){d.push(p)!==1||o||a()}}).call(this,typeof Wn<"u"?Wn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,s){var i=n("immediate");function a(){}var o={},c=["REJECTED"],u=["FULFILLED"],f=["PENDING"];function h(m){if(typeof m!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,m!==a&&p(this,m)}function g(m,w,_){this.promise=m,typeof w=="function"&&(this.onFulfilled=w,this.callFulfilled=this.otherCallFulfilled),typeof _=="function"&&(this.onRejected=_,this.callRejected=this.otherCallRejected)}function d(m,w,_){i(function(){var S;try{S=w(_)}catch(k){return o.reject(m,k)}S===m?o.reject(m,new TypeError("Cannot resolve promise with itself")):o.resolve(m,S)})}function y(m){var w=m&&m.then;if(m&&(typeof m=="object"||typeof m=="function")&&typeof w=="function")return function(){w.apply(m,arguments)}}function p(m,w){var _=!1;function S(M){_||(_=!0,o.reject(m,M))}function k(M){_||(_=!0,o.resolve(m,M))}var C=b(function(){w(k,S)});C.status==="error"&&S(C.value)}function b(m,w){var _={};try{_.value=m(w),_.status="success"}catch(S){_.status="error",_.value=S}return _}(r.exports=h).prototype.finally=function(m){if(typeof m!="function")return this;var w=this.constructor;return this.then(function(_){return w.resolve(m()).then(function(){return _})},function(_){return w.resolve(m()).then(function(){throw _})})},h.prototype.catch=function(m){return this.then(null,m)},h.prototype.then=function(m,w){if(typeof m!="function"&&this.state===u||typeof w!="function"&&this.state===c)return this;var _=new this.constructor(a);return this.state!==f?d(_,this.state===u?m:w,this.outcome):this.queue.push(new g(_,m,w)),_},g.prototype.callFulfilled=function(m){o.resolve(this.promise,m)},g.prototype.otherCallFulfilled=function(m){d(this.promise,this.onFulfilled,m)},g.prototype.callRejected=function(m){o.reject(this.promise,m)},g.prototype.otherCallRejected=function(m){d(this.promise,this.onRejected,m)},o.resolve=function(m,w){var _=b(y,w);if(_.status==="error")return o.reject(m,_.value);var S=_.value;if(S)p(m,S);else{m.state=u,m.outcome=w;for(var k=-1,C=m.queue.length;++k<C;)m.queue[k].callFulfilled(w)}return m},o.reject=function(m,w){m.state=c,m.outcome=w;for(var _=-1,S=m.queue.length;++_<S;)m.queue[_].callRejected(w);return m},h.resolve=function(m){return m instanceof this?m:o.resolve(new this(a),m)},h.reject=function(m){var w=new this(a);return o.reject(w,m)},h.all=function(m){var w=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=m.length,S=!1;if(!_)return this.resolve([]);for(var k=new Array(_),C=0,M=-1,T=new this(a);++M<_;)P(m[M],M);return T;function P(V,ne){w.resolve(V).then(function(D){k[ne]=D,++C!==_||S||(S=!0,o.resolve(T,k))},function(D){S||(S=!0,o.reject(T,D))})}},h.race=function(m){var w=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=m.length,S=!1;if(!_)return this.resolve([]);for(var k=-1,C=new this(a);++k<_;)M=m[k],w.resolve(M).then(function(T){S||(S=!0,o.resolve(C,T))},function(T){S||(S=!0,o.reject(C,T))});var M;return C}},{immediate:36}],38:[function(n,r,s){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,s){var i=n("./zlib/deflate"),a=n("./utils/common"),o=n("./utils/strings"),c=n("./zlib/messages"),u=n("./zlib/zstream"),f=Object.prototype.toString,h=0,g=-1,d=0,y=8;function p(m){if(!(this instanceof p))return new p(m);this.options=a.assign({level:g,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},m||{});var w=this.options;w.raw&&0<w.windowBits?w.windowBits=-w.windowBits:w.gzip&&0<w.windowBits&&w.windowBits<16&&(w.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var _=i.deflateInit2(this.strm,w.level,w.method,w.windowBits,w.memLevel,w.strategy);if(_!==h)throw new Error(c[_]);if(w.header&&i.deflateSetHeader(this.strm,w.header),w.dictionary){var S;if(S=typeof w.dictionary=="string"?o.string2buf(w.dictionary):f.call(w.dictionary)==="[object ArrayBuffer]"?new Uint8Array(w.dictionary):w.dictionary,(_=i.deflateSetDictionary(this.strm,S))!==h)throw new Error(c[_]);this._dict_set=!0}}function b(m,w){var _=new p(w);if(_.push(m,!0),_.err)throw _.msg||c[_.err];return _.result}p.prototype.push=function(m,w){var _,S,k=this.strm,C=this.options.chunkSize;if(this.ended)return!1;S=w===~~w?w:w===!0?4:0,typeof m=="string"?k.input=o.string2buf(m):f.call(m)==="[object ArrayBuffer]"?k.input=new Uint8Array(m):k.input=m,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new a.Buf8(C),k.next_out=0,k.avail_out=C),(_=i.deflate(k,S))!==1&&_!==h)return this.onEnd(_),!(this.ended=!0);k.avail_out!==0&&(k.avail_in!==0||S!==4&&S!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(k.output,k.next_out))):this.onData(a.shrinkBuf(k.output,k.next_out)))}while((0<k.avail_in||k.avail_out===0)&&_!==1);return S===4?(_=i.deflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===h):S!==2||(this.onEnd(h),!(k.avail_out=0))},p.prototype.onData=function(m){this.chunks.push(m)},p.prototype.onEnd=function(m){m===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},s.Deflate=p,s.deflate=b,s.deflateRaw=function(m,w){return(w=w||{}).raw=!0,b(m,w)},s.gzip=function(m,w){return(w=w||{}).gzip=!0,b(m,w)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,s){var i=n("./zlib/inflate"),a=n("./utils/common"),o=n("./utils/strings"),c=n("./zlib/constants"),u=n("./zlib/messages"),f=n("./zlib/zstream"),h=n("./zlib/gzheader"),g=Object.prototype.toString;function d(p){if(!(this instanceof d))return new d(p);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},p||{});var b=this.options;b.raw&&0<=b.windowBits&&b.windowBits<16&&(b.windowBits=-b.windowBits,b.windowBits===0&&(b.windowBits=-15)),!(0<=b.windowBits&&b.windowBits<16)||p&&p.windowBits||(b.windowBits+=32),15<b.windowBits&&b.windowBits<48&&!(15&b.windowBits)&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var m=i.inflateInit2(this.strm,b.windowBits);if(m!==c.Z_OK)throw new Error(u[m]);this.header=new h,i.inflateGetHeader(this.strm,this.header)}function y(p,b){var m=new d(b);if(m.push(p,!0),m.err)throw m.msg||u[m.err];return m.result}d.prototype.push=function(p,b){var m,w,_,S,k,C,M=this.strm,T=this.options.chunkSize,P=this.options.dictionary,V=!1;if(this.ended)return!1;w=b===~~b?b:b===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof p=="string"?M.input=o.binstring2buf(p):g.call(p)==="[object ArrayBuffer]"?M.input=new Uint8Array(p):M.input=p,M.next_in=0,M.avail_in=M.input.length;do{if(M.avail_out===0&&(M.output=new a.Buf8(T),M.next_out=0,M.avail_out=T),(m=i.inflate(M,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&P&&(C=typeof P=="string"?o.string2buf(P):g.call(P)==="[object ArrayBuffer]"?new Uint8Array(P):P,m=i.inflateSetDictionary(this.strm,C)),m===c.Z_BUF_ERROR&&V===!0&&(m=c.Z_OK,V=!1),m!==c.Z_STREAM_END&&m!==c.Z_OK)return this.onEnd(m),!(this.ended=!0);M.next_out&&(M.avail_out!==0&&m!==c.Z_STREAM_END&&(M.avail_in!==0||w!==c.Z_FINISH&&w!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(_=o.utf8border(M.output,M.next_out),S=M.next_out-_,k=o.buf2string(M.output,_),M.next_out=S,M.avail_out=T-S,S&&a.arraySet(M.output,M.output,_,S,0),this.onData(k)):this.onData(a.shrinkBuf(M.output,M.next_out)))),M.avail_in===0&&M.avail_out===0&&(V=!0)}while((0<M.avail_in||M.avail_out===0)&&m!==c.Z_STREAM_END);return m===c.Z_STREAM_END&&(w=c.Z_FINISH),w===c.Z_FINISH?(m=i.inflateEnd(this.strm),this.onEnd(m),this.ended=!0,m===c.Z_OK):w!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(M.avail_out=0))},d.prototype.onData=function(p){this.chunks.push(p)},d.prototype.onEnd=function(p){p===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},s.Inflate=d,s.inflate=y,s.inflateRaw=function(p,b){return(b=b||{}).raw=!0,y(p,b)},s.ungzip=y},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(c){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var f=u.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(var h in f)f.hasOwnProperty(h)&&(c[h]=f[h])}}return c},s.shrinkBuf=function(c,u){return c.length===u?c:c.subarray?c.subarray(0,u):(c.length=u,c)};var a={arraySet:function(c,u,f,h,g){if(u.subarray&&c.subarray)c.set(u.subarray(f,f+h),g);else for(var d=0;d<h;d++)c[g+d]=u[f+d]},flattenChunks:function(c){var u,f,h,g,d,y;for(u=h=0,f=c.length;u<f;u++)h+=c[u].length;for(y=new Uint8Array(h),u=g=0,f=c.length;u<f;u++)d=c[u],y.set(d,g),g+=d.length;return y}},o={arraySet:function(c,u,f,h,g){for(var d=0;d<h;d++)c[g+d]=u[f+d]},flattenChunks:function(c){return[].concat.apply([],c)}};s.setTyped=function(c){c?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,a)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,o))},s.setTyped(i)},{}],42:[function(n,r,s){var i=n("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var c=new i.Buf8(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function f(h,g){if(g<65537&&(h.subarray&&o||!h.subarray&&a))return String.fromCharCode.apply(null,i.shrinkBuf(h,g));for(var d="",y=0;y<g;y++)d+=String.fromCharCode(h[y]);return d}c[254]=c[254]=1,s.string2buf=function(h){var g,d,y,p,b,m=h.length,w=0;for(p=0;p<m;p++)(64512&(d=h.charCodeAt(p)))==55296&&p+1<m&&(64512&(y=h.charCodeAt(p+1)))==56320&&(d=65536+(d-55296<<10)+(y-56320),p++),w+=d<128?1:d<2048?2:d<65536?3:4;for(g=new i.Buf8(w),p=b=0;b<w;p++)(64512&(d=h.charCodeAt(p)))==55296&&p+1<m&&(64512&(y=h.charCodeAt(p+1)))==56320&&(d=65536+(d-55296<<10)+(y-56320),p++),d<128?g[b++]=d:(d<2048?g[b++]=192|d>>>6:(d<65536?g[b++]=224|d>>>12:(g[b++]=240|d>>>18,g[b++]=128|d>>>12&63),g[b++]=128|d>>>6&63),g[b++]=128|63&d);return g},s.buf2binstring=function(h){return f(h,h.length)},s.binstring2buf=function(h){for(var g=new i.Buf8(h.length),d=0,y=g.length;d<y;d++)g[d]=h.charCodeAt(d);return g},s.buf2string=function(h,g){var d,y,p,b,m=g||h.length,w=new Array(2*m);for(d=y=0;d<m;)if((p=h[d++])<128)w[y++]=p;else if(4<(b=c[p]))w[y++]=65533,d+=b-1;else{for(p&=b===2?31:b===3?15:7;1<b&&d<m;)p=p<<6|63&h[d++],b--;1<b?w[y++]=65533:p<65536?w[y++]=p:(p-=65536,w[y++]=55296|p>>10&1023,w[y++]=56320|1023&p)}return f(w,y)},s.utf8border=function(h,g){var d;for((g=g||h.length)>h.length&&(g=h.length),d=g-1;0<=d&&(192&h[d])==128;)d--;return d<0||d===0?g:d+c[h[d]]>g?d:g}},{"./common":41}],43:[function(n,r,s){r.exports=function(i,a,o,c){for(var u=65535&i|0,f=i>>>16&65535|0,h=0;o!==0;){for(o-=h=2e3<o?2e3:o;f=f+(u=u+a[c++]|0)|0,--h;);u%=65521,f%=65521}return u|f<<16|0}},{}],44:[function(n,r,s){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,s){var i=function(){for(var a,o=[],c=0;c<256;c++){a=c;for(var u=0;u<8;u++)a=1&a?3988292384^a>>>1:a>>>1;o[c]=a}return o}();r.exports=function(a,o,c,u){var f=i,h=u+c;a^=-1;for(var g=u;g<h;g++)a=a>>>8^f[255&(a^o[g])];return-1^a}},{}],46:[function(n,r,s){var i,a=n("../utils/common"),o=n("./trees"),c=n("./adler32"),u=n("./crc32"),f=n("./messages"),h=0,g=4,d=0,y=-2,p=-1,b=4,m=2,w=8,_=9,S=286,k=30,C=19,M=2*S+1,T=15,P=3,V=258,ne=V+P+1,D=42,W=113,v=1,J=2,oe=3,G=4;function X(l,I){return l.msg=f[I],I}function B(l){return(l<<1)-(4<l?9:0)}function se(l){for(var I=l.length;0<=--I;)l[I]=0}function N(l){var I=l.state,R=I.pending;R>l.avail_out&&(R=l.avail_out),R!==0&&(a.arraySet(l.output,I.pending_buf,I.pending_out,R,l.next_out),l.next_out+=R,I.pending_out+=R,l.total_out+=R,l.avail_out-=R,I.pending-=R,I.pending===0&&(I.pending_out=0))}function z(l,I){o._tr_flush_block(l,0<=l.block_start?l.block_start:-1,l.strstart-l.block_start,I),l.block_start=l.strstart,N(l.strm)}function K(l,I){l.pending_buf[l.pending++]=I}function H(l,I){l.pending_buf[l.pending++]=I>>>8&255,l.pending_buf[l.pending++]=255&I}function Q(l,I){var R,x,E=l.max_chain_length,A=l.strstart,j=l.prev_length,U=l.nice_match,L=l.strstart>l.w_size-ne?l.strstart-(l.w_size-ne):0,q=l.window,te=l.w_mask,Z=l.prev,ce=l.strstart+V,de=q[A+j-1],he=q[A+j];l.prev_length>=l.good_match&&(E>>=2),U>l.lookahead&&(U=l.lookahead);do if(q[(R=I)+j]===he&&q[R+j-1]===de&&q[R]===q[A]&&q[++R]===q[A+1]){A+=2,R++;do;while(q[++A]===q[++R]&&q[++A]===q[++R]&&q[++A]===q[++R]&&q[++A]===q[++R]&&q[++A]===q[++R]&&q[++A]===q[++R]&&q[++A]===q[++R]&&q[++A]===q[++R]&&A<ce);if(x=V-(ce-A),A=ce-V,j<x){if(l.match_start=I,U<=(j=x))break;de=q[A+j-1],he=q[A+j]}}while((I=Z[I&te])>L&&--E!=0);return j<=l.lookahead?j:l.lookahead}function ue(l){var I,R,x,E,A,j,U,L,q,te,Z=l.w_size;do{if(E=l.window_size-l.lookahead-l.strstart,l.strstart>=Z+(Z-ne)){for(a.arraySet(l.window,l.window,Z,Z,0),l.match_start-=Z,l.strstart-=Z,l.block_start-=Z,I=R=l.hash_size;x=l.head[--I],l.head[I]=Z<=x?x-Z:0,--R;);for(I=R=Z;x=l.prev[--I],l.prev[I]=Z<=x?x-Z:0,--R;);E+=Z}if(l.strm.avail_in===0)break;if(j=l.strm,U=l.window,L=l.strstart+l.lookahead,q=E,te=void 0,te=j.avail_in,q<te&&(te=q),R=te===0?0:(j.avail_in-=te,a.arraySet(U,j.input,j.next_in,te,L),j.state.wrap===1?j.adler=c(j.adler,U,te,L):j.state.wrap===2&&(j.adler=u(j.adler,U,te,L)),j.next_in+=te,j.total_in+=te,te),l.lookahead+=R,l.lookahead+l.insert>=P)for(A=l.strstart-l.insert,l.ins_h=l.window[A],l.ins_h=(l.ins_h<<l.hash_shift^l.window[A+1])&l.hash_mask;l.insert&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[A+P-1])&l.hash_mask,l.prev[A&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=A,A++,l.insert--,!(l.lookahead+l.insert<P)););}while(l.lookahead<ne&&l.strm.avail_in!==0)}function Y(l,I){for(var R,x;;){if(l.lookahead<ne){if(ue(l),l.lookahead<ne&&I===h)return v;if(l.lookahead===0)break}if(R=0,l.lookahead>=P&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+P-1])&l.hash_mask,R=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart),R!==0&&l.strstart-R<=l.w_size-ne&&(l.match_length=Q(l,R)),l.match_length>=P)if(x=o._tr_tally(l,l.strstart-l.match_start,l.match_length-P),l.lookahead-=l.match_length,l.match_length<=l.max_lazy_match&&l.lookahead>=P){for(l.match_length--;l.strstart++,l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+P-1])&l.hash_mask,R=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart,--l.match_length!=0;);l.strstart++}else l.strstart+=l.match_length,l.match_length=0,l.ins_h=l.window[l.strstart],l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+1])&l.hash_mask;else x=o._tr_tally(l,0,l.window[l.strstart]),l.lookahead--,l.strstart++;if(x&&(z(l,!1),l.strm.avail_out===0))return v}return l.insert=l.strstart<P-1?l.strstart:P-1,I===g?(z(l,!0),l.strm.avail_out===0?oe:G):l.last_lit&&(z(l,!1),l.strm.avail_out===0)?v:J}function $(l,I){for(var R,x,E;;){if(l.lookahead<ne){if(ue(l),l.lookahead<ne&&I===h)return v;if(l.lookahead===0)break}if(R=0,l.lookahead>=P&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+P-1])&l.hash_mask,R=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart),l.prev_length=l.match_length,l.prev_match=l.match_start,l.match_length=P-1,R!==0&&l.prev_length<l.max_lazy_match&&l.strstart-R<=l.w_size-ne&&(l.match_length=Q(l,R),l.match_length<=5&&(l.strategy===1||l.match_length===P&&4096<l.strstart-l.match_start)&&(l.match_length=P-1)),l.prev_length>=P&&l.match_length<=l.prev_length){for(E=l.strstart+l.lookahead-P,x=o._tr_tally(l,l.strstart-1-l.prev_match,l.prev_length-P),l.lookahead-=l.prev_length-1,l.prev_length-=2;++l.strstart<=E&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+P-1])&l.hash_mask,R=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart),--l.prev_length!=0;);if(l.match_available=0,l.match_length=P-1,l.strstart++,x&&(z(l,!1),l.strm.avail_out===0))return v}else if(l.match_available){if((x=o._tr_tally(l,0,l.window[l.strstart-1]))&&z(l,!1),l.strstart++,l.lookahead--,l.strm.avail_out===0)return v}else l.match_available=1,l.strstart++,l.lookahead--}return l.match_available&&(x=o._tr_tally(l,0,l.window[l.strstart-1]),l.match_available=0),l.insert=l.strstart<P-1?l.strstart:P-1,I===g?(z(l,!0),l.strm.avail_out===0?oe:G):l.last_lit&&(z(l,!1),l.strm.avail_out===0)?v:J}function F(l,I,R,x,E){this.good_length=l,this.max_lazy=I,this.nice_length=R,this.max_chain=x,this.func=E}function ee(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=w,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*M),this.dyn_dtree=new a.Buf16(2*(2*k+1)),this.bl_tree=new a.Buf16(2*(2*C+1)),se(this.dyn_ltree),se(this.dyn_dtree),se(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(T+1),this.heap=new a.Buf16(2*S+1),se(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*S+1),se(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ie(l){var I;return l&&l.state?(l.total_in=l.total_out=0,l.data_type=m,(I=l.state).pending=0,I.pending_out=0,I.wrap<0&&(I.wrap=-I.wrap),I.status=I.wrap?D:W,l.adler=I.wrap===2?0:1,I.last_flush=h,o._tr_init(I),d):X(l,y)}function fe(l){var I=ie(l);return I===d&&function(R){R.window_size=2*R.w_size,se(R.head),R.max_lazy_match=i[R.level].max_lazy,R.good_match=i[R.level].good_length,R.nice_match=i[R.level].nice_length,R.max_chain_length=i[R.level].max_chain,R.strstart=0,R.block_start=0,R.lookahead=0,R.insert=0,R.match_length=R.prev_length=P-1,R.match_available=0,R.ins_h=0}(l.state),I}function O(l,I,R,x,E,A){if(!l)return y;var j=1;if(I===p&&(I=6),x<0?(j=0,x=-x):15<x&&(j=2,x-=16),E<1||_<E||R!==w||x<8||15<x||I<0||9<I||A<0||b<A)return X(l,y);x===8&&(x=9);var U=new ee;return(l.state=U).strm=l,U.wrap=j,U.gzhead=null,U.w_bits=x,U.w_size=1<<U.w_bits,U.w_mask=U.w_size-1,U.hash_bits=E+7,U.hash_size=1<<U.hash_bits,U.hash_mask=U.hash_size-1,U.hash_shift=~~((U.hash_bits+P-1)/P),U.window=new a.Buf8(2*U.w_size),U.head=new a.Buf16(U.hash_size),U.prev=new a.Buf16(U.w_size),U.lit_bufsize=1<<E+6,U.pending_buf_size=4*U.lit_bufsize,U.pending_buf=new a.Buf8(U.pending_buf_size),U.d_buf=1*U.lit_bufsize,U.l_buf=3*U.lit_bufsize,U.level=I,U.strategy=A,U.method=R,fe(l)}i=[new F(0,0,0,0,function(l,I){var R=65535;for(R>l.pending_buf_size-5&&(R=l.pending_buf_size-5);;){if(l.lookahead<=1){if(ue(l),l.lookahead===0&&I===h)return v;if(l.lookahead===0)break}l.strstart+=l.lookahead,l.lookahead=0;var x=l.block_start+R;if((l.strstart===0||l.strstart>=x)&&(l.lookahead=l.strstart-x,l.strstart=x,z(l,!1),l.strm.avail_out===0)||l.strstart-l.block_start>=l.w_size-ne&&(z(l,!1),l.strm.avail_out===0))return v}return l.insert=0,I===g?(z(l,!0),l.strm.avail_out===0?oe:G):(l.strstart>l.block_start&&(z(l,!1),l.strm.avail_out),v)}),new F(4,4,8,4,Y),new F(4,5,16,8,Y),new F(4,6,32,32,Y),new F(4,4,16,16,$),new F(8,16,32,32,$),new F(8,16,128,128,$),new F(8,32,128,256,$),new F(32,128,258,1024,$),new F(32,258,258,4096,$)],s.deflateInit=function(l,I){return O(l,I,w,15,8,0)},s.deflateInit2=O,s.deflateReset=fe,s.deflateResetKeep=ie,s.deflateSetHeader=function(l,I){return l&&l.state?l.state.wrap!==2?y:(l.state.gzhead=I,d):y},s.deflate=function(l,I){var R,x,E,A;if(!l||!l.state||5<I||I<0)return l?X(l,y):y;if(x=l.state,!l.output||!l.input&&l.avail_in!==0||x.status===666&&I!==g)return X(l,l.avail_out===0?-5:y);if(x.strm=l,R=x.last_flush,x.last_flush=I,x.status===D)if(x.wrap===2)l.adler=0,K(x,31),K(x,139),K(x,8),x.gzhead?(K(x,(x.gzhead.text?1:0)+(x.gzhead.hcrc?2:0)+(x.gzhead.extra?4:0)+(x.gzhead.name?8:0)+(x.gzhead.comment?16:0)),K(x,255&x.gzhead.time),K(x,x.gzhead.time>>8&255),K(x,x.gzhead.time>>16&255),K(x,x.gzhead.time>>24&255),K(x,x.level===9?2:2<=x.strategy||x.level<2?4:0),K(x,255&x.gzhead.os),x.gzhead.extra&&x.gzhead.extra.length&&(K(x,255&x.gzhead.extra.length),K(x,x.gzhead.extra.length>>8&255)),x.gzhead.hcrc&&(l.adler=u(l.adler,x.pending_buf,x.pending,0)),x.gzindex=0,x.status=69):(K(x,0),K(x,0),K(x,0),K(x,0),K(x,0),K(x,x.level===9?2:2<=x.strategy||x.level<2?4:0),K(x,3),x.status=W);else{var j=w+(x.w_bits-8<<4)<<8;j|=(2<=x.strategy||x.level<2?0:x.level<6?1:x.level===6?2:3)<<6,x.strstart!==0&&(j|=32),j+=31-j%31,x.status=W,H(x,j),x.strstart!==0&&(H(x,l.adler>>>16),H(x,65535&l.adler)),l.adler=1}if(x.status===69)if(x.gzhead.extra){for(E=x.pending;x.gzindex<(65535&x.gzhead.extra.length)&&(x.pending!==x.pending_buf_size||(x.gzhead.hcrc&&x.pending>E&&(l.adler=u(l.adler,x.pending_buf,x.pending-E,E)),N(l),E=x.pending,x.pending!==x.pending_buf_size));)K(x,255&x.gzhead.extra[x.gzindex]),x.gzindex++;x.gzhead.hcrc&&x.pending>E&&(l.adler=u(l.adler,x.pending_buf,x.pending-E,E)),x.gzindex===x.gzhead.extra.length&&(x.gzindex=0,x.status=73)}else x.status=73;if(x.status===73)if(x.gzhead.name){E=x.pending;do{if(x.pending===x.pending_buf_size&&(x.gzhead.hcrc&&x.pending>E&&(l.adler=u(l.adler,x.pending_buf,x.pending-E,E)),N(l),E=x.pending,x.pending===x.pending_buf_size)){A=1;break}A=x.gzindex<x.gzhead.name.length?255&x.gzhead.name.charCodeAt(x.gzindex++):0,K(x,A)}while(A!==0);x.gzhead.hcrc&&x.pending>E&&(l.adler=u(l.adler,x.pending_buf,x.pending-E,E)),A===0&&(x.gzindex=0,x.status=91)}else x.status=91;if(x.status===91)if(x.gzhead.comment){E=x.pending;do{if(x.pending===x.pending_buf_size&&(x.gzhead.hcrc&&x.pending>E&&(l.adler=u(l.adler,x.pending_buf,x.pending-E,E)),N(l),E=x.pending,x.pending===x.pending_buf_size)){A=1;break}A=x.gzindex<x.gzhead.comment.length?255&x.gzhead.comment.charCodeAt(x.gzindex++):0,K(x,A)}while(A!==0);x.gzhead.hcrc&&x.pending>E&&(l.adler=u(l.adler,x.pending_buf,x.pending-E,E)),A===0&&(x.status=103)}else x.status=103;if(x.status===103&&(x.gzhead.hcrc?(x.pending+2>x.pending_buf_size&&N(l),x.pending+2<=x.pending_buf_size&&(K(x,255&l.adler),K(x,l.adler>>8&255),l.adler=0,x.status=W)):x.status=W),x.pending!==0){if(N(l),l.avail_out===0)return x.last_flush=-1,d}else if(l.avail_in===0&&B(I)<=B(R)&&I!==g)return X(l,-5);if(x.status===666&&l.avail_in!==0)return X(l,-5);if(l.avail_in!==0||x.lookahead!==0||I!==h&&x.status!==666){var U=x.strategy===2?function(L,q){for(var te;;){if(L.lookahead===0&&(ue(L),L.lookahead===0)){if(q===h)return v;break}if(L.match_length=0,te=o._tr_tally(L,0,L.window[L.strstart]),L.lookahead--,L.strstart++,te&&(z(L,!1),L.strm.avail_out===0))return v}return L.insert=0,q===g?(z(L,!0),L.strm.avail_out===0?oe:G):L.last_lit&&(z(L,!1),L.strm.avail_out===0)?v:J}(x,I):x.strategy===3?function(L,q){for(var te,Z,ce,de,he=L.window;;){if(L.lookahead<=V){if(ue(L),L.lookahead<=V&&q===h)return v;if(L.lookahead===0)break}if(L.match_length=0,L.lookahead>=P&&0<L.strstart&&(Z=he[ce=L.strstart-1])===he[++ce]&&Z===he[++ce]&&Z===he[++ce]){de=L.strstart+V;do;while(Z===he[++ce]&&Z===he[++ce]&&Z===he[++ce]&&Z===he[++ce]&&Z===he[++ce]&&Z===he[++ce]&&Z===he[++ce]&&Z===he[++ce]&&ce<de);L.match_length=V-(de-ce),L.match_length>L.lookahead&&(L.match_length=L.lookahead)}if(L.match_length>=P?(te=o._tr_tally(L,1,L.match_length-P),L.lookahead-=L.match_length,L.strstart+=L.match_length,L.match_length=0):(te=o._tr_tally(L,0,L.window[L.strstart]),L.lookahead--,L.strstart++),te&&(z(L,!1),L.strm.avail_out===0))return v}return L.insert=0,q===g?(z(L,!0),L.strm.avail_out===0?oe:G):L.last_lit&&(z(L,!1),L.strm.avail_out===0)?v:J}(x,I):i[x.level].func(x,I);if(U!==oe&&U!==G||(x.status=666),U===v||U===oe)return l.avail_out===0&&(x.last_flush=-1),d;if(U===J&&(I===1?o._tr_align(x):I!==5&&(o._tr_stored_block(x,0,0,!1),I===3&&(se(x.head),x.lookahead===0&&(x.strstart=0,x.block_start=0,x.insert=0))),N(l),l.avail_out===0))return x.last_flush=-1,d}return I!==g?d:x.wrap<=0?1:(x.wrap===2?(K(x,255&l.adler),K(x,l.adler>>8&255),K(x,l.adler>>16&255),K(x,l.adler>>24&255),K(x,255&l.total_in),K(x,l.total_in>>8&255),K(x,l.total_in>>16&255),K(x,l.total_in>>24&255)):(H(x,l.adler>>>16),H(x,65535&l.adler)),N(l),0<x.wrap&&(x.wrap=-x.wrap),x.pending!==0?d:1)},s.deflateEnd=function(l){var I;return l&&l.state?(I=l.state.status)!==D&&I!==69&&I!==73&&I!==91&&I!==103&&I!==W&&I!==666?X(l,y):(l.state=null,I===W?X(l,-3):d):y},s.deflateSetDictionary=function(l,I){var R,x,E,A,j,U,L,q,te=I.length;if(!l||!l.state||(A=(R=l.state).wrap)===2||A===1&&R.status!==D||R.lookahead)return y;for(A===1&&(l.adler=c(l.adler,I,te,0)),R.wrap=0,te>=R.w_size&&(A===0&&(se(R.head),R.strstart=0,R.block_start=0,R.insert=0),q=new a.Buf8(R.w_size),a.arraySet(q,I,te-R.w_size,R.w_size,0),I=q,te=R.w_size),j=l.avail_in,U=l.next_in,L=l.input,l.avail_in=te,l.next_in=0,l.input=I,ue(R);R.lookahead>=P;){for(x=R.strstart,E=R.lookahead-(P-1);R.ins_h=(R.ins_h<<R.hash_shift^R.window[x+P-1])&R.hash_mask,R.prev[x&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=x,x++,--E;);R.strstart=x,R.lookahead=P-1,ue(R)}return R.strstart+=R.lookahead,R.block_start=R.strstart,R.insert=R.lookahead,R.lookahead=0,R.match_length=R.prev_length=P-1,R.match_available=0,l.next_in=U,l.input=L,l.avail_in=j,R.wrap=A,d},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,s){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,s){r.exports=function(i,a){var o,c,u,f,h,g,d,y,p,b,m,w,_,S,k,C,M,T,P,V,ne,D,W,v,J;o=i.state,c=i.next_in,v=i.input,u=c+(i.avail_in-5),f=i.next_out,J=i.output,h=f-(a-i.avail_out),g=f+(i.avail_out-257),d=o.dmax,y=o.wsize,p=o.whave,b=o.wnext,m=o.window,w=o.hold,_=o.bits,S=o.lencode,k=o.distcode,C=(1<<o.lenbits)-1,M=(1<<o.distbits)-1;e:do{_<15&&(w+=v[c++]<<_,_+=8,w+=v[c++]<<_,_+=8),T=S[w&C];t:for(;;){if(w>>>=P=T>>>24,_-=P,(P=T>>>16&255)===0)J[f++]=65535&T;else{if(!(16&P)){if(!(64&P)){T=S[(65535&T)+(w&(1<<P)-1)];continue t}if(32&P){o.mode=12;break e}i.msg="invalid literal/length code",o.mode=30;break e}V=65535&T,(P&=15)&&(_<P&&(w+=v[c++]<<_,_+=8),V+=w&(1<<P)-1,w>>>=P,_-=P),_<15&&(w+=v[c++]<<_,_+=8,w+=v[c++]<<_,_+=8),T=k[w&M];n:for(;;){if(w>>>=P=T>>>24,_-=P,!(16&(P=T>>>16&255))){if(!(64&P)){T=k[(65535&T)+(w&(1<<P)-1)];continue n}i.msg="invalid distance code",o.mode=30;break e}if(ne=65535&T,_<(P&=15)&&(w+=v[c++]<<_,(_+=8)<P&&(w+=v[c++]<<_,_+=8)),d<(ne+=w&(1<<P)-1)){i.msg="invalid distance too far back",o.mode=30;break e}if(w>>>=P,_-=P,(P=f-h)<ne){if(p<(P=ne-P)&&o.sane){i.msg="invalid distance too far back",o.mode=30;break e}if(W=m,(D=0)===b){if(D+=y-P,P<V){for(V-=P;J[f++]=m[D++],--P;);D=f-ne,W=J}}else if(b<P){if(D+=y+b-P,(P-=b)<V){for(V-=P;J[f++]=m[D++],--P;);if(D=0,b<V){for(V-=P=b;J[f++]=m[D++],--P;);D=f-ne,W=J}}}else if(D+=b-P,P<V){for(V-=P;J[f++]=m[D++],--P;);D=f-ne,W=J}for(;2<V;)J[f++]=W[D++],J[f++]=W[D++],J[f++]=W[D++],V-=3;V&&(J[f++]=W[D++],1<V&&(J[f++]=W[D++]))}else{for(D=f-ne;J[f++]=J[D++],J[f++]=J[D++],J[f++]=J[D++],2<(V-=3););V&&(J[f++]=J[D++],1<V&&(J[f++]=J[D++]))}break}}break}}while(c<u&&f<g);c-=V=_>>3,w&=(1<<(_-=V<<3))-1,i.next_in=c,i.next_out=f,i.avail_in=c<u?u-c+5:5-(c-u),i.avail_out=f<g?g-f+257:257-(f-g),o.hold=w,o.bits=_}},{}],49:[function(n,r,s){var i=n("../utils/common"),a=n("./adler32"),o=n("./crc32"),c=n("./inffast"),u=n("./inftrees"),f=1,h=2,g=0,d=-2,y=1,p=852,b=592;function m(D){return(D>>>24&255)+(D>>>8&65280)+((65280&D)<<8)+((255&D)<<24)}function w(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _(D){var W;return D&&D.state?(W=D.state,D.total_in=D.total_out=W.total=0,D.msg="",W.wrap&&(D.adler=1&W.wrap),W.mode=y,W.last=0,W.havedict=0,W.dmax=32768,W.head=null,W.hold=0,W.bits=0,W.lencode=W.lendyn=new i.Buf32(p),W.distcode=W.distdyn=new i.Buf32(b),W.sane=1,W.back=-1,g):d}function S(D){var W;return D&&D.state?((W=D.state).wsize=0,W.whave=0,W.wnext=0,_(D)):d}function k(D,W){var v,J;return D&&D.state?(J=D.state,W<0?(v=0,W=-W):(v=1+(W>>4),W<48&&(W&=15)),W&&(W<8||15<W)?d:(J.window!==null&&J.wbits!==W&&(J.window=null),J.wrap=v,J.wbits=W,S(D))):d}function C(D,W){var v,J;return D?(J=new w,(D.state=J).window=null,(v=k(D,W))!==g&&(D.state=null),v):d}var M,T,P=!0;function V(D){if(P){var W;for(M=new i.Buf32(512),T=new i.Buf32(32),W=0;W<144;)D.lens[W++]=8;for(;W<256;)D.lens[W++]=9;for(;W<280;)D.lens[W++]=7;for(;W<288;)D.lens[W++]=8;for(u(f,D.lens,0,288,M,0,D.work,{bits:9}),W=0;W<32;)D.lens[W++]=5;u(h,D.lens,0,32,T,0,D.work,{bits:5}),P=!1}D.lencode=M,D.lenbits=9,D.distcode=T,D.distbits=5}function ne(D,W,v,J){var oe,G=D.state;return G.window===null&&(G.wsize=1<<G.wbits,G.wnext=0,G.whave=0,G.window=new i.Buf8(G.wsize)),J>=G.wsize?(i.arraySet(G.window,W,v-G.wsize,G.wsize,0),G.wnext=0,G.whave=G.wsize):(J<(oe=G.wsize-G.wnext)&&(oe=J),i.arraySet(G.window,W,v-J,oe,G.wnext),(J-=oe)?(i.arraySet(G.window,W,v-J,J,0),G.wnext=J,G.whave=G.wsize):(G.wnext+=oe,G.wnext===G.wsize&&(G.wnext=0),G.whave<G.wsize&&(G.whave+=oe))),0}s.inflateReset=S,s.inflateReset2=k,s.inflateResetKeep=_,s.inflateInit=function(D){return C(D,15)},s.inflateInit2=C,s.inflate=function(D,W){var v,J,oe,G,X,B,se,N,z,K,H,Q,ue,Y,$,F,ee,ie,fe,O,l,I,R,x,E=0,A=new i.Buf8(4),j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!D||!D.state||!D.output||!D.input&&D.avail_in!==0)return d;(v=D.state).mode===12&&(v.mode=13),X=D.next_out,oe=D.output,se=D.avail_out,G=D.next_in,J=D.input,B=D.avail_in,N=v.hold,z=v.bits,K=B,H=se,I=g;e:for(;;)switch(v.mode){case y:if(v.wrap===0){v.mode=13;break}for(;z<16;){if(B===0)break e;B--,N+=J[G++]<<z,z+=8}if(2&v.wrap&&N===35615){A[v.check=0]=255&N,A[1]=N>>>8&255,v.check=o(v.check,A,2,0),z=N=0,v.mode=2;break}if(v.flags=0,v.head&&(v.head.done=!1),!(1&v.wrap)||(((255&N)<<8)+(N>>8))%31){D.msg="incorrect header check",v.mode=30;break}if((15&N)!=8){D.msg="unknown compression method",v.mode=30;break}if(z-=4,l=8+(15&(N>>>=4)),v.wbits===0)v.wbits=l;else if(l>v.wbits){D.msg="invalid window size",v.mode=30;break}v.dmax=1<<l,D.adler=v.check=1,v.mode=512&N?10:12,z=N=0;break;case 2:for(;z<16;){if(B===0)break e;B--,N+=J[G++]<<z,z+=8}if(v.flags=N,(255&v.flags)!=8){D.msg="unknown compression method",v.mode=30;break}if(57344&v.flags){D.msg="unknown header flags set",v.mode=30;break}v.head&&(v.head.text=N>>8&1),512&v.flags&&(A[0]=255&N,A[1]=N>>>8&255,v.check=o(v.check,A,2,0)),z=N=0,v.mode=3;case 3:for(;z<32;){if(B===0)break e;B--,N+=J[G++]<<z,z+=8}v.head&&(v.head.time=N),512&v.flags&&(A[0]=255&N,A[1]=N>>>8&255,A[2]=N>>>16&255,A[3]=N>>>24&255,v.check=o(v.check,A,4,0)),z=N=0,v.mode=4;case 4:for(;z<16;){if(B===0)break e;B--,N+=J[G++]<<z,z+=8}v.head&&(v.head.xflags=255&N,v.head.os=N>>8),512&v.flags&&(A[0]=255&N,A[1]=N>>>8&255,v.check=o(v.check,A,2,0)),z=N=0,v.mode=5;case 5:if(1024&v.flags){for(;z<16;){if(B===0)break e;B--,N+=J[G++]<<z,z+=8}v.length=N,v.head&&(v.head.extra_len=N),512&v.flags&&(A[0]=255&N,A[1]=N>>>8&255,v.check=o(v.check,A,2,0)),z=N=0}else v.head&&(v.head.extra=null);v.mode=6;case 6:if(1024&v.flags&&(B<(Q=v.length)&&(Q=B),Q&&(v.head&&(l=v.head.extra_len-v.length,v.head.extra||(v.head.extra=new Array(v.head.extra_len)),i.arraySet(v.head.extra,J,G,Q,l)),512&v.flags&&(v.check=o(v.check,J,Q,G)),B-=Q,G+=Q,v.length-=Q),v.length))break e;v.length=0,v.mode=7;case 7:if(2048&v.flags){if(B===0)break e;for(Q=0;l=J[G+Q++],v.head&&l&&v.length<65536&&(v.head.name+=String.fromCharCode(l)),l&&Q<B;);if(512&v.flags&&(v.check=o(v.check,J,Q,G)),B-=Q,G+=Q,l)break e}else v.head&&(v.head.name=null);v.length=0,v.mode=8;case 8:if(4096&v.flags){if(B===0)break e;for(Q=0;l=J[G+Q++],v.head&&l&&v.length<65536&&(v.head.comment+=String.fromCharCode(l)),l&&Q<B;);if(512&v.flags&&(v.check=o(v.check,J,Q,G)),B-=Q,G+=Q,l)break e}else v.head&&(v.head.comment=null);v.mode=9;case 9:if(512&v.flags){for(;z<16;){if(B===0)break e;B--,N+=J[G++]<<z,z+=8}if(N!==(65535&v.check)){D.msg="header crc mismatch",v.mode=30;break}z=N=0}v.head&&(v.head.hcrc=v.flags>>9&1,v.head.done=!0),D.adler=v.check=0,v.mode=12;break;case 10:for(;z<32;){if(B===0)break e;B--,N+=J[G++]<<z,z+=8}D.adler=v.check=m(N),z=N=0,v.mode=11;case 11:if(v.havedict===0)return D.next_out=X,D.avail_out=se,D.next_in=G,D.avail_in=B,v.hold=N,v.bits=z,2;D.adler=v.check=1,v.mode=12;case 12:if(W===5||W===6)break e;case 13:if(v.last){N>>>=7&z,z-=7&z,v.mode=27;break}for(;z<3;){if(B===0)break e;B--,N+=J[G++]<<z,z+=8}switch(v.last=1&N,z-=1,3&(N>>>=1)){case 0:v.mode=14;break;case 1:if(V(v),v.mode=20,W!==6)break;N>>>=2,z-=2;break e;case 2:v.mode=17;break;case 3:D.msg="invalid block type",v.mode=30}N>>>=2,z-=2;break;case 14:for(N>>>=7&z,z-=7&z;z<32;){if(B===0)break e;B--,N+=J[G++]<<z,z+=8}if((65535&N)!=(N>>>16^65535)){D.msg="invalid stored block lengths",v.mode=30;break}if(v.length=65535&N,z=N=0,v.mode=15,W===6)break e;case 15:v.mode=16;case 16:if(Q=v.length){if(B<Q&&(Q=B),se<Q&&(Q=se),Q===0)break e;i.arraySet(oe,J,G,Q,X),B-=Q,G+=Q,se-=Q,X+=Q,v.length-=Q;break}v.mode=12;break;case 17:for(;z<14;){if(B===0)break e;B--,N+=J[G++]<<z,z+=8}if(v.nlen=257+(31&N),N>>>=5,z-=5,v.ndist=1+(31&N),N>>>=5,z-=5,v.ncode=4+(15&N),N>>>=4,z-=4,286<v.nlen||30<v.ndist){D.msg="too many length or distance symbols",v.mode=30;break}v.have=0,v.mode=18;case 18:for(;v.have<v.ncode;){for(;z<3;){if(B===0)break e;B--,N+=J[G++]<<z,z+=8}v.lens[j[v.have++]]=7&N,N>>>=3,z-=3}for(;v.have<19;)v.lens[j[v.have++]]=0;if(v.lencode=v.lendyn,v.lenbits=7,R={bits:v.lenbits},I=u(0,v.lens,0,19,v.lencode,0,v.work,R),v.lenbits=R.bits,I){D.msg="invalid code lengths set",v.mode=30;break}v.have=0,v.mode=19;case 19:for(;v.have<v.nlen+v.ndist;){for(;F=(E=v.lencode[N&(1<<v.lenbits)-1])>>>16&255,ee=65535&E,!(($=E>>>24)<=z);){if(B===0)break e;B--,N+=J[G++]<<z,z+=8}if(ee<16)N>>>=$,z-=$,v.lens[v.have++]=ee;else{if(ee===16){for(x=$+2;z<x;){if(B===0)break e;B--,N+=J[G++]<<z,z+=8}if(N>>>=$,z-=$,v.have===0){D.msg="invalid bit length repeat",v.mode=30;break}l=v.lens[v.have-1],Q=3+(3&N),N>>>=2,z-=2}else if(ee===17){for(x=$+3;z<x;){if(B===0)break e;B--,N+=J[G++]<<z,z+=8}z-=$,l=0,Q=3+(7&(N>>>=$)),N>>>=3,z-=3}else{for(x=$+7;z<x;){if(B===0)break e;B--,N+=J[G++]<<z,z+=8}z-=$,l=0,Q=11+(127&(N>>>=$)),N>>>=7,z-=7}if(v.have+Q>v.nlen+v.ndist){D.msg="invalid bit length repeat",v.mode=30;break}for(;Q--;)v.lens[v.have++]=l}}if(v.mode===30)break;if(v.lens[256]===0){D.msg="invalid code -- missing end-of-block",v.mode=30;break}if(v.lenbits=9,R={bits:v.lenbits},I=u(f,v.lens,0,v.nlen,v.lencode,0,v.work,R),v.lenbits=R.bits,I){D.msg="invalid literal/lengths set",v.mode=30;break}if(v.distbits=6,v.distcode=v.distdyn,R={bits:v.distbits},I=u(h,v.lens,v.nlen,v.ndist,v.distcode,0,v.work,R),v.distbits=R.bits,I){D.msg="invalid distances set",v.mode=30;break}if(v.mode=20,W===6)break e;case 20:v.mode=21;case 21:if(6<=B&&258<=se){D.next_out=X,D.avail_out=se,D.next_in=G,D.avail_in=B,v.hold=N,v.bits=z,c(D,H),X=D.next_out,oe=D.output,se=D.avail_out,G=D.next_in,J=D.input,B=D.avail_in,N=v.hold,z=v.bits,v.mode===12&&(v.back=-1);break}for(v.back=0;F=(E=v.lencode[N&(1<<v.lenbits)-1])>>>16&255,ee=65535&E,!(($=E>>>24)<=z);){if(B===0)break e;B--,N+=J[G++]<<z,z+=8}if(F&&!(240&F)){for(ie=$,fe=F,O=ee;F=(E=v.lencode[O+((N&(1<<ie+fe)-1)>>ie)])>>>16&255,ee=65535&E,!(ie+($=E>>>24)<=z);){if(B===0)break e;B--,N+=J[G++]<<z,z+=8}N>>>=ie,z-=ie,v.back+=ie}if(N>>>=$,z-=$,v.back+=$,v.length=ee,F===0){v.mode=26;break}if(32&F){v.back=-1,v.mode=12;break}if(64&F){D.msg="invalid literal/length code",v.mode=30;break}v.extra=15&F,v.mode=22;case 22:if(v.extra){for(x=v.extra;z<x;){if(B===0)break e;B--,N+=J[G++]<<z,z+=8}v.length+=N&(1<<v.extra)-1,N>>>=v.extra,z-=v.extra,v.back+=v.extra}v.was=v.length,v.mode=23;case 23:for(;F=(E=v.distcode[N&(1<<v.distbits)-1])>>>16&255,ee=65535&E,!(($=E>>>24)<=z);){if(B===0)break e;B--,N+=J[G++]<<z,z+=8}if(!(240&F)){for(ie=$,fe=F,O=ee;F=(E=v.distcode[O+((N&(1<<ie+fe)-1)>>ie)])>>>16&255,ee=65535&E,!(ie+($=E>>>24)<=z);){if(B===0)break e;B--,N+=J[G++]<<z,z+=8}N>>>=ie,z-=ie,v.back+=ie}if(N>>>=$,z-=$,v.back+=$,64&F){D.msg="invalid distance code",v.mode=30;break}v.offset=ee,v.extra=15&F,v.mode=24;case 24:if(v.extra){for(x=v.extra;z<x;){if(B===0)break e;B--,N+=J[G++]<<z,z+=8}v.offset+=N&(1<<v.extra)-1,N>>>=v.extra,z-=v.extra,v.back+=v.extra}if(v.offset>v.dmax){D.msg="invalid distance too far back",v.mode=30;break}v.mode=25;case 25:if(se===0)break e;if(Q=H-se,v.offset>Q){if((Q=v.offset-Q)>v.whave&&v.sane){D.msg="invalid distance too far back",v.mode=30;break}ue=Q>v.wnext?(Q-=v.wnext,v.wsize-Q):v.wnext-Q,Q>v.length&&(Q=v.length),Y=v.window}else Y=oe,ue=X-v.offset,Q=v.length;for(se<Q&&(Q=se),se-=Q,v.length-=Q;oe[X++]=Y[ue++],--Q;);v.length===0&&(v.mode=21);break;case 26:if(se===0)break e;oe[X++]=v.length,se--,v.mode=21;break;case 27:if(v.wrap){for(;z<32;){if(B===0)break e;B--,N|=J[G++]<<z,z+=8}if(H-=se,D.total_out+=H,v.total+=H,H&&(D.adler=v.check=v.flags?o(v.check,oe,H,X-H):a(v.check,oe,H,X-H)),H=se,(v.flags?N:m(N))!==v.check){D.msg="incorrect data check",v.mode=30;break}z=N=0}v.mode=28;case 28:if(v.wrap&&v.flags){for(;z<32;){if(B===0)break e;B--,N+=J[G++]<<z,z+=8}if(N!==(4294967295&v.total)){D.msg="incorrect length check",v.mode=30;break}z=N=0}v.mode=29;case 29:I=1;break e;case 30:I=-3;break e;case 31:return-4;case 32:default:return d}return D.next_out=X,D.avail_out=se,D.next_in=G,D.avail_in=B,v.hold=N,v.bits=z,(v.wsize||H!==D.avail_out&&v.mode<30&&(v.mode<27||W!==4))&&ne(D,D.output,D.next_out,H-D.avail_out)?(v.mode=31,-4):(K-=D.avail_in,H-=D.avail_out,D.total_in+=K,D.total_out+=H,v.total+=H,v.wrap&&H&&(D.adler=v.check=v.flags?o(v.check,oe,H,D.next_out-H):a(v.check,oe,H,D.next_out-H)),D.data_type=v.bits+(v.last?64:0)+(v.mode===12?128:0)+(v.mode===20||v.mode===15?256:0),(K==0&&H===0||W===4)&&I===g&&(I=-5),I)},s.inflateEnd=function(D){if(!D||!D.state)return d;var W=D.state;return W.window&&(W.window=null),D.state=null,g},s.inflateGetHeader=function(D,W){var v;return D&&D.state&&2&(v=D.state).wrap?((v.head=W).done=!1,g):d},s.inflateSetDictionary=function(D,W){var v,J=W.length;return D&&D.state?(v=D.state).wrap!==0&&v.mode!==11?d:v.mode===11&&a(1,W,J,0)!==v.check?-3:ne(D,W,J,J)?(v.mode=31,-4):(v.havedict=1,g):d},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,s){var i=n("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(f,h,g,d,y,p,b,m){var w,_,S,k,C,M,T,P,V,ne=m.bits,D=0,W=0,v=0,J=0,oe=0,G=0,X=0,B=0,se=0,N=0,z=null,K=0,H=new i.Buf16(16),Q=new i.Buf16(16),ue=null,Y=0;for(D=0;D<=15;D++)H[D]=0;for(W=0;W<d;W++)H[h[g+W]]++;for(oe=ne,J=15;1<=J&&H[J]===0;J--);if(J<oe&&(oe=J),J===0)return y[p++]=20971520,y[p++]=20971520,m.bits=1,0;for(v=1;v<J&&H[v]===0;v++);for(oe<v&&(oe=v),D=B=1;D<=15;D++)if(B<<=1,(B-=H[D])<0)return-1;if(0<B&&(f===0||J!==1))return-1;for(Q[1]=0,D=1;D<15;D++)Q[D+1]=Q[D]+H[D];for(W=0;W<d;W++)h[g+W]!==0&&(b[Q[h[g+W]]++]=W);if(M=f===0?(z=ue=b,19):f===1?(z=a,K-=257,ue=o,Y-=257,256):(z=c,ue=u,-1),D=v,C=p,X=W=N=0,S=-1,k=(se=1<<(G=oe))-1,f===1&&852<se||f===2&&592<se)return 1;for(;;){for(T=D-X,V=b[W]<M?(P=0,b[W]):b[W]>M?(P=ue[Y+b[W]],z[K+b[W]]):(P=96,0),w=1<<D-X,v=_=1<<G;y[C+(N>>X)+(_-=w)]=T<<24|P<<16|V|0,_!==0;);for(w=1<<D-1;N&w;)w>>=1;if(w!==0?(N&=w-1,N+=w):N=0,W++,--H[D]==0){if(D===J)break;D=h[g+b[W]]}if(oe<D&&(N&k)!==S){for(X===0&&(X=oe),C+=v,B=1<<(G=D-X);G+X<J&&!((B-=H[G+X])<=0);)G++,B<<=1;if(se+=1<<G,f===1&&852<se||f===2&&592<se)return 1;y[S=N&k]=oe<<24|G<<16|C-p|0}}return N!==0&&(y[C+N]=D-X<<24|64<<16|0),m.bits=oe,0}},{"../utils/common":41}],51:[function(n,r,s){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,s){var i=n("../utils/common"),a=0,o=1;function c(E){for(var A=E.length;0<=--A;)E[A]=0}var u=0,f=29,h=256,g=h+1+f,d=30,y=19,p=2*g+1,b=15,m=16,w=7,_=256,S=16,k=17,C=18,M=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],T=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ne=new Array(2*(g+2));c(ne);var D=new Array(2*d);c(D);var W=new Array(512);c(W);var v=new Array(256);c(v);var J=new Array(f);c(J);var oe,G,X,B=new Array(d);function se(E,A,j,U,L){this.static_tree=E,this.extra_bits=A,this.extra_base=j,this.elems=U,this.max_length=L,this.has_stree=E&&E.length}function N(E,A){this.dyn_tree=E,this.max_code=0,this.stat_desc=A}function z(E){return E<256?W[E]:W[256+(E>>>7)]}function K(E,A){E.pending_buf[E.pending++]=255&A,E.pending_buf[E.pending++]=A>>>8&255}function H(E,A,j){E.bi_valid>m-j?(E.bi_buf|=A<<E.bi_valid&65535,K(E,E.bi_buf),E.bi_buf=A>>m-E.bi_valid,E.bi_valid+=j-m):(E.bi_buf|=A<<E.bi_valid&65535,E.bi_valid+=j)}function Q(E,A,j){H(E,j[2*A],j[2*A+1])}function ue(E,A){for(var j=0;j|=1&E,E>>>=1,j<<=1,0<--A;);return j>>>1}function Y(E,A,j){var U,L,q=new Array(b+1),te=0;for(U=1;U<=b;U++)q[U]=te=te+j[U-1]<<1;for(L=0;L<=A;L++){var Z=E[2*L+1];Z!==0&&(E[2*L]=ue(q[Z]++,Z))}}function $(E){var A;for(A=0;A<g;A++)E.dyn_ltree[2*A]=0;for(A=0;A<d;A++)E.dyn_dtree[2*A]=0;for(A=0;A<y;A++)E.bl_tree[2*A]=0;E.dyn_ltree[2*_]=1,E.opt_len=E.static_len=0,E.last_lit=E.matches=0}function F(E){8<E.bi_valid?K(E,E.bi_buf):0<E.bi_valid&&(E.pending_buf[E.pending++]=E.bi_buf),E.bi_buf=0,E.bi_valid=0}function ee(E,A,j,U){var L=2*A,q=2*j;return E[L]<E[q]||E[L]===E[q]&&U[A]<=U[j]}function ie(E,A,j){for(var U=E.heap[j],L=j<<1;L<=E.heap_len&&(L<E.heap_len&&ee(A,E.heap[L+1],E.heap[L],E.depth)&&L++,!ee(A,U,E.heap[L],E.depth));)E.heap[j]=E.heap[L],j=L,L<<=1;E.heap[j]=U}function fe(E,A,j){var U,L,q,te,Z=0;if(E.last_lit!==0)for(;U=E.pending_buf[E.d_buf+2*Z]<<8|E.pending_buf[E.d_buf+2*Z+1],L=E.pending_buf[E.l_buf+Z],Z++,U===0?Q(E,L,A):(Q(E,(q=v[L])+h+1,A),(te=M[q])!==0&&H(E,L-=J[q],te),Q(E,q=z(--U),j),(te=T[q])!==0&&H(E,U-=B[q],te)),Z<E.last_lit;);Q(E,_,A)}function O(E,A){var j,U,L,q=A.dyn_tree,te=A.stat_desc.static_tree,Z=A.stat_desc.has_stree,ce=A.stat_desc.elems,de=-1;for(E.heap_len=0,E.heap_max=p,j=0;j<ce;j++)q[2*j]!==0?(E.heap[++E.heap_len]=de=j,E.depth[j]=0):q[2*j+1]=0;for(;E.heap_len<2;)q[2*(L=E.heap[++E.heap_len]=de<2?++de:0)]=1,E.depth[L]=0,E.opt_len--,Z&&(E.static_len-=te[2*L+1]);for(A.max_code=de,j=E.heap_len>>1;1<=j;j--)ie(E,q,j);for(L=ce;j=E.heap[1],E.heap[1]=E.heap[E.heap_len--],ie(E,q,1),U=E.heap[1],E.heap[--E.heap_max]=j,E.heap[--E.heap_max]=U,q[2*L]=q[2*j]+q[2*U],E.depth[L]=(E.depth[j]>=E.depth[U]?E.depth[j]:E.depth[U])+1,q[2*j+1]=q[2*U+1]=L,E.heap[1]=L++,ie(E,q,1),2<=E.heap_len;);E.heap[--E.heap_max]=E.heap[1],function(he,ge){var Pe,$e,nt,Te,ut,Yt,Me=ge.dyn_tree,Qe=ge.max_code,Mn=ge.stat_desc.static_tree,fa=ge.stat_desc.has_stree,da=ge.stat_desc.extra_bits,Cs=ge.stat_desc.extra_base,dn=ge.stat_desc.max_length,zn=0;for(Te=0;Te<=b;Te++)he.bl_count[Te]=0;for(Me[2*he.heap[he.heap_max]+1]=0,Pe=he.heap_max+1;Pe<p;Pe++)dn<(Te=Me[2*Me[2*($e=he.heap[Pe])+1]+1]+1)&&(Te=dn,zn++),Me[2*$e+1]=Te,Qe<$e||(he.bl_count[Te]++,ut=0,Cs<=$e&&(ut=da[$e-Cs]),Yt=Me[2*$e],he.opt_len+=Yt*(Te+ut),fa&&(he.static_len+=Yt*(Mn[2*$e+1]+ut)));if(zn!==0){do{for(Te=dn-1;he.bl_count[Te]===0;)Te--;he.bl_count[Te]--,he.bl_count[Te+1]+=2,he.bl_count[dn]--,zn-=2}while(0<zn);for(Te=dn;Te!==0;Te--)for($e=he.bl_count[Te];$e!==0;)Qe<(nt=he.heap[--Pe])||(Me[2*nt+1]!==Te&&(he.opt_len+=(Te-Me[2*nt+1])*Me[2*nt],Me[2*nt+1]=Te),$e--)}}(E,A),Y(q,de,E.bl_count)}function l(E,A,j){var U,L,q=-1,te=A[1],Z=0,ce=7,de=4;for(te===0&&(ce=138,de=3),A[2*(j+1)+1]=65535,U=0;U<=j;U++)L=te,te=A[2*(U+1)+1],++Z<ce&&L===te||(Z<de?E.bl_tree[2*L]+=Z:L!==0?(L!==q&&E.bl_tree[2*L]++,E.bl_tree[2*S]++):Z<=10?E.bl_tree[2*k]++:E.bl_tree[2*C]++,q=L,de=(Z=0)===te?(ce=138,3):L===te?(ce=6,3):(ce=7,4))}function I(E,A,j){var U,L,q=-1,te=A[1],Z=0,ce=7,de=4;for(te===0&&(ce=138,de=3),U=0;U<=j;U++)if(L=te,te=A[2*(U+1)+1],!(++Z<ce&&L===te)){if(Z<de)for(;Q(E,L,E.bl_tree),--Z!=0;);else L!==0?(L!==q&&(Q(E,L,E.bl_tree),Z--),Q(E,S,E.bl_tree),H(E,Z-3,2)):Z<=10?(Q(E,k,E.bl_tree),H(E,Z-3,3)):(Q(E,C,E.bl_tree),H(E,Z-11,7));q=L,de=(Z=0)===te?(ce=138,3):L===te?(ce=6,3):(ce=7,4)}}c(B);var R=!1;function x(E,A,j,U){H(E,(u<<1)+(U?1:0),3),function(L,q,te,Z){F(L),K(L,te),K(L,~te),i.arraySet(L.pending_buf,L.window,q,te,L.pending),L.pending+=te}(E,A,j)}s._tr_init=function(E){R||(function(){var A,j,U,L,q,te=new Array(b+1);for(L=U=0;L<f-1;L++)for(J[L]=U,A=0;A<1<<M[L];A++)v[U++]=L;for(v[U-1]=L,L=q=0;L<16;L++)for(B[L]=q,A=0;A<1<<T[L];A++)W[q++]=L;for(q>>=7;L<d;L++)for(B[L]=q<<7,A=0;A<1<<T[L]-7;A++)W[256+q++]=L;for(j=0;j<=b;j++)te[j]=0;for(A=0;A<=143;)ne[2*A+1]=8,A++,te[8]++;for(;A<=255;)ne[2*A+1]=9,A++,te[9]++;for(;A<=279;)ne[2*A+1]=7,A++,te[7]++;for(;A<=287;)ne[2*A+1]=8,A++,te[8]++;for(Y(ne,g+1,te),A=0;A<d;A++)D[2*A+1]=5,D[2*A]=ue(A,5);oe=new se(ne,M,h+1,g,b),G=new se(D,T,0,d,b),X=new se(new Array(0),P,0,y,w)}(),R=!0),E.l_desc=new N(E.dyn_ltree,oe),E.d_desc=new N(E.dyn_dtree,G),E.bl_desc=new N(E.bl_tree,X),E.bi_buf=0,E.bi_valid=0,$(E)},s._tr_stored_block=x,s._tr_flush_block=function(E,A,j,U){var L,q,te=0;0<E.level?(E.strm.data_type===2&&(E.strm.data_type=function(Z){var ce,de=4093624447;for(ce=0;ce<=31;ce++,de>>>=1)if(1&de&&Z.dyn_ltree[2*ce]!==0)return a;if(Z.dyn_ltree[18]!==0||Z.dyn_ltree[20]!==0||Z.dyn_ltree[26]!==0)return o;for(ce=32;ce<h;ce++)if(Z.dyn_ltree[2*ce]!==0)return o;return a}(E)),O(E,E.l_desc),O(E,E.d_desc),te=function(Z){var ce;for(l(Z,Z.dyn_ltree,Z.l_desc.max_code),l(Z,Z.dyn_dtree,Z.d_desc.max_code),O(Z,Z.bl_desc),ce=y-1;3<=ce&&Z.bl_tree[2*V[ce]+1]===0;ce--);return Z.opt_len+=3*(ce+1)+5+5+4,ce}(E),L=E.opt_len+3+7>>>3,(q=E.static_len+3+7>>>3)<=L&&(L=q)):L=q=j+5,j+4<=L&&A!==-1?x(E,A,j,U):E.strategy===4||q===L?(H(E,2+(U?1:0),3),fe(E,ne,D)):(H(E,4+(U?1:0),3),function(Z,ce,de,he){var ge;for(H(Z,ce-257,5),H(Z,de-1,5),H(Z,he-4,4),ge=0;ge<he;ge++)H(Z,Z.bl_tree[2*V[ge]+1],3);I(Z,Z.dyn_ltree,ce-1),I(Z,Z.dyn_dtree,de-1)}(E,E.l_desc.max_code+1,E.d_desc.max_code+1,te+1),fe(E,E.dyn_ltree,E.dyn_dtree)),$(E),U&&F(E)},s._tr_tally=function(E,A,j){return E.pending_buf[E.d_buf+2*E.last_lit]=A>>>8&255,E.pending_buf[E.d_buf+2*E.last_lit+1]=255&A,E.pending_buf[E.l_buf+E.last_lit]=255&j,E.last_lit++,A===0?E.dyn_ltree[2*j]++:(E.matches++,A--,E.dyn_ltree[2*(v[j]+h+1)]++,E.dyn_dtree[2*z(A)]++),E.last_lit===E.lit_bufsize-1},s._tr_align=function(E){H(E,2,3),Q(E,_,ne),function(A){A.bi_valid===16?(K(A,A.bi_buf),A.bi_buf=0,A.bi_valid=0):8<=A.bi_valid&&(A.pending_buf[A.pending++]=255&A.bi_buf,A.bi_buf>>=8,A.bi_valid-=8)}(E)}},{"../utils/common":41}],53:[function(n,r,s){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,s){(function(i){(function(a,o){if(!a.setImmediate){var c,u,f,h,g=1,d={},y=!1,p=a.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(a);b=b&&b.setTimeout?b:a,c={}.toString.call(a.process)==="[object process]"?function(S){process.nextTick(function(){w(S)})}:function(){if(a.postMessage&&!a.importScripts){var S=!0,k=a.onmessage;return a.onmessage=function(){S=!1},a.postMessage("","*"),a.onmessage=k,S}}()?(h="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",_,!1):a.attachEvent("onmessage",_),function(S){a.postMessage(h+S,"*")}):a.MessageChannel?((f=new MessageChannel).port1.onmessage=function(S){w(S.data)},function(S){f.port2.postMessage(S)}):p&&"onreadystatechange"in p.createElement("script")?(u=p.documentElement,function(S){var k=p.createElement("script");k.onreadystatechange=function(){w(S),k.onreadystatechange=null,u.removeChild(k),k=null},u.appendChild(k)}):function(S){setTimeout(w,0,S)},b.setImmediate=function(S){typeof S!="function"&&(S=new Function(""+S));for(var k=new Array(arguments.length-1),C=0;C<k.length;C++)k[C]=arguments[C+1];var M={callback:S,args:k};return d[g]=M,c(g),g++},b.clearImmediate=m}function m(S){delete d[S]}function w(S){if(y)setTimeout(w,0,S);else{var k=d[S];if(k){y=!0;try{(function(C){var M=C.callback,T=C.args;switch(T.length){case 0:M();break;case 1:M(T[0]);break;case 2:M(T[0],T[1]);break;case 3:M(T[0],T[1],T[2]);break;default:M.apply(o,T)}})(k)}finally{m(S),y=!1}}}}function _(S){S.source===a&&typeof S.data=="string"&&S.data.indexOf(h)===0&&w(+S.data.slice(h.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof Wn<"u"?Wn:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(aa);var la=aa.exports;const wf=bf(la),xf=ma({__proto__:null,default:wf},[la]);class kf{constructor(t){we(this,"nodeList");we(this,"ws");we(this,"payload");we(this,"title","");we(this,"downTotal",0);we(this,"downFile",0);we(this,"downCur",0);we(this,"fileMap",new Map);we(this,"zipRoot");this.nodeList=t,this.title=this.buildTitle()}async prepare(){this.nodeList=await this.getFullSubList(),console.info(this.nodeList)}buildTitle(){let t="";if(this.nodeList.length==1)t=this.nodeList[0].title;else{let n=[];for(let r=0;r<this.nodeList.length&&(n.push(this.nodeList[r].title),!(r>3));r++);t=n.join("")}return t.length>150&&(t=t.substring(0,150)+""),t+=".zip",t}async getFullSubList(){const t=new Set;this.nodeList.forEach(r=>{r.type==="directory"&&t.add(r.id)});const n=Array.from(t);for(let r=0;r<n.length;r++){const s=n[r],i=await Ce("file/get",Object.assign({mode:"id_iterate",cascade_dir:"1",pid:s.toString(),with:"file"}));i&&this.nodeList.push(...i.list)}return this.nodeList.sort((r,s)=>{let i=r.type==="directory"?"0":"1";r.node_id_list.forEach(o=>i+=o.toString().padStart(15,"0"));let a=s.type==="directory"?"0":"1";return s.node_id_list.forEach(o=>a+=o.toString().padStart(15,"0")),i>a}),this.nodeList.forEach(r=>{var s,i;return this.downTotal+=((i=(s=r.file_index)==null?void 0:s.raw)==null?void 0:i.size)??0}),this.nodeList}async download(){var t,n;for(let r=0;r<this.nodeList.length;r++){const s=this.nodeList[r];if(!((t=s.file_index)!=null&&t.raw))continue;const i=(n=s.file_index)==null?void 0:n.raw;if(!i.path)continue;const a=i.path+"?filename="+s.title;if(!a)continue;const o=await this.basename(a,this.downloadProcess.bind(this));this.fileMap.set(s.id,o),this.downCur=0,this.downFile+=i.size}console.info(this.fileMap)}downloadProcess(t){this.downCur=t.loaded}basename(t,n){return new Promise(r=>{const s=new XMLHttpRequest;s.withCredentials=!0,s.responseType="arraybuffer",s.onreadystatechange=function(){if(s.readyState===4){if(s.status>=400)return Qr(`${s.status}:${s.statusText}`);r(s.response)}},n&&(s.onprogress=n),s.open("GET",t),s.send()})}async build(){this.zipRoot=new xf;const t=new Map;this.nodeList.forEach(n=>{let r=n.title;const s=t.get(n.id_parent);if(s&&(r=s[0]+"/"+r),n.type!="directory"){const i=this.fileMap.get(n.id);if(!i)return;t.set(n.id,[r,this.zipRoot.file(r,i)])}else t.set(n.id,[r,this.zipRoot.folder(r)])})}complete(){return new Promise(t=>{this.zipRoot.generateAsync({type:"blob"}).then(n=>{let r=document.createElement("a");r.style.display="none",r.href=URL.createObjectURL(n),r.target="_blank",r.setAttribute("download",this.title),r.click(),t()})})}}const $r=["scroll_log","image_rotate"];let Kn=null,Tt=null;function Ef(){Kn=window.indexedDB.open(Be.indexedDBName,4),Kn.onupgradeneeded=Sf,Kn.onerror=e=>{},Kn.onsuccess=e=>{Tt=e.target.result}}function Sf(e){return console.info("onupgradeneeded",e),new Promise(t=>{Tt=e.target.result,Of(Tt);let n=0;for(let r=0;r<$r.length;r++){const s=$r[r],i=Tt.createObjectStore(s,{keyPath:"key"});i.transaction.oncomplete=a=>{n+=1,n==$r.length-1&&t()}}})}function Of(e){if(!e)return;const t=e==null?void 0:e.objectStoreNames;if(t)for(let n=0;n<t.length;n++)e.deleteObjectStore(t[n])}function Es(e,t){return new Promise(n=>{if(!Tt)return n(null);const r=Tt.transaction([e],"readonly").objectStore(e).get(t);r.onerror=s=>n(null),r.onsuccess=s=>s.target.result?n(s.target.result.val):n(null)})}function Ss(e,t,n){return new Promise(r=>{if(!Tt)return r(null);const s=Tt.transaction([e],"readwrite").objectStore(e).put({key:t,val:n});s.onerror=i=>r(null),s.onsuccess=i=>r(null)})}var ca={};Object.defineProperty(ca,"__esModule",{value:!0});function Cf(e){e===void 0&&(e={});var t=/^0/,n=/\s+/g,r=/^\s+|\s+$/g,s=/[^\x00-\x80]/,i=/^0x[0-9a-f]+$/i,a=/(0x[\da-fA-F]+|(^[\+\-]?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?(?=\D|\s|$))|\d+)/g,o=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,c=String.prototype.toLocaleLowerCase||String.prototype.toLowerCase,u=e.desc?-1:1,f=-u,h=e.insensitive?function(y){return c.call(""+y).replace(r,"")}:function(y){return(""+y).replace(r,"")};function g(y){return y.replace(a,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0")}function d(y,p){return(!y.match(t)||p===1)&&parseFloat(y)||y.replace(n," ").replace(r,"")||0}return function(y,p){var b=h(y),m=h(p);if(!b&&!m)return 0;if(!b&&m)return f;if(b&&!m)return u;var w=g(b),_=g(m),S=b.match(i),k=m.match(i),C=S&&k?parseInt(S[0],16):w.length!==1&&Date.parse(b),M=S&&k?parseInt(k[0],16):C&&m.match(o)&&Date.parse(m)||null;if(M){if(C===M)return 0;if(C<M)return f;if(C>M)return u}for(var T=w.length,P=_.length,V=0,ne=Math.max(T,P);V<ne;V+=1){var D=d(w[V]||"",T),W=d(_[V]||"",P);if(isNaN(D)!==isNaN(W))return isNaN(D)?u:f;if(s.test(D+W)&&D.localeCompare){var v=D.localeCompare(W);if(v>0)return u;if(v<0)return f;if(V===ne-1)return 0}if(D<W)return f;if(D>W)return u;if(""+D<""+W)return f;if(""+D>""+W)return u}return 0}}var If=ca.default=Cf;let ve;class ep{constructor(t){we(this,"nodeList",pe([]));we(this,"getList");we(this,"route");we(this,"router");we(this,"contentDOM");we(this,"emitGo");we(this,"modalStore");we(this,"localConfigure");we(this,"contextStore");we(this,"mode",pe(""));we(this,"modeKey","");we(this,"sortVal",pe(""));we(this,"selecting",!1);we(this,"selectingMovEvtCount",0);we(this,"selectingOffset",[[0,0],[0,0]]);we(this,"preSelectedNodeIndexSet",new Set);we(this,"selectingKeyDef","");we(this,"showSelectionOp",pe(!1));we(this,"lastSelectIndex",-1);we(this,"reloadOffset_timer",0);we(this,"reloadOffset_count",0);we(this,"startScroll",!1);console.info(t),this.contentDOM=t.contentDOM,this.getList=t.getList,this.route=t.route,this.router=t.router,this.emitGo=t.emitGo,this.modalStore=fn(),this.localConfigure=Sr(),this.contextStore=oa(),this.mode.value=this.localConfigure.get("file_view_mode")??"detail",this.modeKey=this.localConfigure.listen("file_view_mode",n=>this.mode.value=n),this.sortVal=pe(this.localConfigure.get("file_view_sort")??"name_asc"),this.contextMenuEvt=this.contextMenuEvt.bind(this),this.mouseDownEvt=this.mouseDownEvt.bind(this),this.mouseMoveEvt=this.mouseMoveEvt.bind(this),this.mouseUpEvt=this.mouseUpEvt.bind(this),this.keymap=this.keymap.bind(this),this.reloadOffset=this.reloadOffset.bind(this),this.scrollEvt=this.scrollEvt.bind(this),addEventListener("contextmenu",this.contextMenuEvt),addEventListener("pointerdown",this.mouseDownEvt),addEventListener("pointermove",this.mouseMoveEvt),addEventListener("pointerup",this.mouseUpEvt),addEventListener("keydown",this.keymap),addEventListener("resize",this.reloadOffset),this.contentDOM.addEventListener("scroll",this.scrollEvt),ve=this}destructor(){console.info("destructor loaded"),this.localConfigure.release("file_view_mode",this.modeKey),removeEventListener("contextmenu",this.contextMenuEvt),removeEventListener("mousedown",this.mouseDownEvt),removeEventListener("mousemove",this.mouseMoveEvt),removeEventListener("mouseup",this.mouseUpEvt),removeEventListener("keydown",this.keymap),removeEventListener("resize",this.reloadOffset),this.contentDOM&&this.contentDOM.removeEventListener("scroll",this.scrollEvt),ve=null}setList(t){this.nodeList.value=t,setTimeout(()=>{this.reloadOffset(void 0)},Be.timeouts.offsetDebounce)}deleteFromList(t){const n=[];this.nodeList.value.forEach(r=>n.push(r)),t.forEach(r=>{for(let s=0;s<n.length;s++)if(r===n[s].id){n.splice(s,1);break}}),this.getList(n)}inDetailView(t){let n=!1,r=t.target;for(;r;){if(r.contentEditable==="true"){n=!1;break}if(r.classList.contains("rater")){n=!1;break}if(r.classList.contains("list_fav")){n=!0;break}if(r.classList.contains("view_fav")){n=!1;break}if(r.classList.contains("content_meta")){n=!1;break}if(r.classList.contains("fr_content")){n=!0;break}if(!r.parentElement)break;r=r.parentElement}return n}inTaggingDOM(t){let n=!1,r=t.target;for(;r;){if(r.classList.contains("content_detail"))return!1;if(r.classList.contains("tag_list")){n=!0;break}if(!r.parentElement)break;r=r.parentElement}return n}mouseDownEvt(t){var a,o,c,u;if(!this.inDetailView(t)||t.button===1)return;if(this.selectingOffset[0]=[t.x+(((a=this.contentDOM)==null?void 0:a.scrollLeft)??0),t.y+(((o=this.contentDOM)==null?void 0:o.scrollTop)??0)],this.selectingOffset[1]=[t.x+(((c=this.contentDOM)==null?void 0:c.scrollLeft)??0),t.y+(((u=this.contentDOM)==null?void 0:u.scrollTop)??0)],this.preSelectedNodeIndexSet.clear(),t.preventDefault(),t.button!==0)return this.rightMouseDownEvt(t);this.nodeList.value.forEach((f,h)=>{f._selected&&this.preSelectedNodeIndexSet.add(h)}),this.selecting=!0,this.selectingMovEvtCount=0;const n=this.getSelection(this.selectingOffset),r=[];t.ctrlKey&&r.push("ctrl"),t.shiftKey&&r.push("shift"),this.selectingKeyDef=r.join("_");let s=-1;const i=Array.from(n);switch(i.length&&(s=i.pop()??-1),this.selectingKeyDef){case"shift":this.preSelectedNodeIndexSet.clear();case"ctrl_shift":if(s==-1||this.lastSelectIndex==-1)break;const f=Math.min(s,this.lastSelectIndex),h=Math.max(s,this.lastSelectIndex);for(let g=f;g<=h;g++)n.has(g)||this.preSelectedNodeIndexSet.add(g);break;default:this.preSelectedNodeIndexSet.clear();break;case"ctrl":break}this.nodeList.value.forEach((f,h)=>{let g=0;this.preSelectedNodeIndexSet.has(h)&&(g+=1),n.has(h)&&(g+=1),f._selected=g===1}),this.lastSelectIndex=s,this.showSelectionOp.value=this.preSelectedNodeIndexSet.size+n.size>0}rightMouseDownEvt(t){const n=this.getSelection(this.selectingOffset);let r=!1;const s=new Set;this.nodeList.value.forEach((i,a)=>{i._selected&&(s.add(a),n.has(a)&&(r=!0))}),r?this.preSelectedNodeIndexSet=s:this.preSelectedNodeIndexSet=n,this.nodeList.value.forEach((i,a)=>{i._selected=this.preSelectedNodeIndexSet.has(a)})}mouseMoveEvt(t){var s,i;if(!this.selecting||(this.selectingMovEvtCount+=1,this.selectingMovEvtCount<10))return;t.preventDefault(),this.selectingOffset[1]=[t.x+(((s=this.contentDOM)==null?void 0:s.scrollLeft)??0),t.y+(((i=this.contentDOM)==null?void 0:i.scrollTop)??0)];const n=this.getSelection(this.selectingOffset);this.nodeList.value.forEach((a,o)=>{let c=0;this.preSelectedNodeIndexSet.has(o)&&(c+=1),n.has(o)&&(c+=1),a._selected=c===1});const r=this.getSelection([this.selectingOffset[1],this.selectingOffset[1]]);r.size&&(this.lastSelectIndex=Array.from(r).pop()??-1),this.showSelectionOp.value=this.preSelectedNodeIndexSet.size+n.size>0}mouseUpEvt(t){this.selecting&&(t.preventDefault(),setTimeout(()=>{this.selecting=!1,this.selectingMovEvtCount=0,this.selectingOffset=[[0,0],[0,0]],this.preSelectedNodeIndexSet.clear(),this.selectingKeyDef=""},Be.timeouts.selectEvt))}async contextMenuEvt(t){if(!this.inDetailView(t))return;let n=this.route.name==="Recycle",r=this.getSelected();if(!r.nodeLs||!r.nodeLs.length)return;let s=r.nodeLs.length!==1;const i=r.nodeLs,a=r.idSet;let o=this.localConfigure.get("file_view_mode")??"detail";this.route.name!=="Directory"&&(o="detail");let c=o==="detail";this.route.name==="Recycle"&&(c=!1),t.preventDefault(),t.stopPropagation(),this.contextStore.trigger([{title:"Open",auth:"guest",method:async u=>{console.info("Open",u),s?await xe.op_bath_browser(a,i):this.emitGo("node",i[0].id)}},{title:"Download",auth:s||i[0].type=="directory"?"none":"guest",method:u=>{var y,p;console.info("Download",u);const f=i[0];let h=(p=(y=f.file_index)==null?void 0:y.raw)==null?void 0:p.path,g=(f==null?void 0:f.title)??"";if(!h)return;let d=document.createElement("a");d.style.display="none",d.href=h+"?filename="+g,d.target="_blank",d.setAttribute("download",g),d.click()}},{title:"Download Selected",auth:s||i[0].type=="directory"?"guest":"none",method:async u=>{if(console.info("DownloadSelected",u),console.info(this,i),!ve||!ve.modalStore)return;const f=new kf(i),h=pe("downloading 0/0 (0%)"),g=ve.modalStore.set({title:f.title,alpha:!1,key:"",single:!1,w:400,h:150,minW:400,minH:150,allow_resize:!0,allow_move:!0,allow_fullscreen:!1,auto_focus:!0,text:h});await f.prepare();const d=setInterval(()=>{const y=f.downFile+f.downCur,p=f.downTotal,b=Math.round(1e4*y/p)/100+"%";g.content.text.value=`downloading ${y}/${p} (${b})`},500);await f.download(),await f.build(),await f.complete(),clearInterval(d),ve.modalStore.close(g.nid)}},{title:"Rename",auth:c?"user":"none",method:async u=>{console.info("Rename",u),s?await xe.op_bath_rename(a,i):await xe.op_rename(i[0])}},{title:"Move",auth:c?"user":"none",method:async u=>{console.info("Move",u),s?await xe.op_bath_move(a,i):await xe.op_move(i[0])}},{title:"Delete",auth:n?"none":"user",method:async u=>{console.info("Delete",u),s?await xe.op_bath_delete(a,i):await xe.op_delete(i[0])}},{title:"Recover",auth:n?"user":"none",method:async u=>{console.info("Recover",u),s?await xe.op_bath_delete(a,i,!0):await xe.op_delete(i[0],!0)}},{title:"Delete Forever",auth:n?"user":"none",method:async u=>{console.info("Delete Forever",u),s?await xe.op_bath_delete_forever(a,i):await xe.op_delete_forever(i[0])}},{title:"Favourite",auth:c?"user":"none",method:async u=>{console.info("Favourite",u),s?await xe.op_bath_favourite(a,i):await xe.op_toggle_favourite(i[0])}},{title:"Extra",auth:"guest",method:u=>{console.info("Extra",u)},child:[{title:"Tagging",auth:c?"user":"none",method:async u=>{console.info("Tagging",u),i.forEach(f=>{xe.op_tag(f)})}},{title:"Set Cover",auth:s?"none":"user",method:async u=>{console.info("Set Cover",u),await xe.op_set_cover(i[0])}},{title:"Import EHT",auth:"admin",method:async u=>{console.info("Import EHT",u),await xe.op_imp_tag_eh(Array.from(a))}},{title:"Cascade Tag",auth:"user",method:async u=>{console.info("Cascade Tag",u),await xe.op_cascade_tag(Array.from(a))}}]},{title:"Admin",auth:"admin",method:u=>{console.info("Extra",u)},child:[{title:"ReBuild",auth:"admin",method:async u=>{console.info("ReBuild",u),await xe.op_rebuild(Array.from(a))}},{title:"ReCheck",auth:s?"none":"admin",method:async u=>{console.info("ReCheck",u),await xe.op_recheck(Array.from(a))}},{title:"RM RAW",auth:"admin",method:async u=>{console.info("RMRAW",u),await xe.op_rm_raw(Array.from(a))}}]}],t)}getSelection(t){let n=t[0][0]>t[1][0]?t[1][0]:t[0][0],r=t[0][1]>t[1][1]?t[1][1]:t[0][1],s=t[0][0]<t[1][0]?t[1][0]:t[0][0],i=t[0][1]<t[1][1]?t[1][1]:t[0][1];const a=new Set;return this.nodeList.value.forEach((o,c)=>{if(!o._offsets)return;let u=o==null?void 0:o._offsets[0],f=o==null?void 0:o._offsets[1],h=o==null?void 0:o._offsets[2],g=o==null?void 0:o._offsets[3],d=u>=n&&u<=s||h>=n&&h<=s||u<=s&&h>=n,y=f>=r&&f<=i||g>=r&&g<=i||f<=i&&g>=r;!d||!y||a.add(c)}),a}clearSelect(t){t.target.classList.contains("content_detail")&&(this.nodeList.value.forEach(n=>{n._selected=!1}),this.showSelectionOp.value=!1)}async bathOp(t){let{idSet:n,nodeLs:r}=this.getSelected();if(n.size)switch(t){case"rename":await xe.op_bath_rename(n,r);break;case"move":await xe.op_bath_move(n,r);break;case"delete":await xe.op_bath_delete(n,r);break;case"delete_forever":await xe.op_bath_delete_forever(n,r);break;case"browser":await xe.op_bath_browser(n,r);break;case"favourite":await xe.op_bath_favourite(n,r);break}}getSelected(){const t=[],n=new Set;return this.nodeList.value.forEach(r=>{r._selected&&(t.push(r),n.add((r==null?void 0:r.id)??0))}),{nodeLs:t,idSet:n}}arrowSelection(t){if(!this.nodeList.value.length)return;let n=this.lastSelectIndex;if(n===-1){const u=this.getSelected();u.idSet.size?n=Array.from(u.idSet).pop()??0:n=0}this.localConfigure.get("file_view_mode"),this.route.name;const r=this.nodeList.value[n];if(!r)return;r._offsets||(r._offsets=[]);const s=r._offsets[2]-r._offsets[0],i=this.contentDOM.offsetWidth,a=Math.floor(i/s);let o=n;switch(t.key){case"ArrowRight":o+=1;break;case"ArrowLeft":o-=1;break;case"ArrowUp":o-=1*a;break;case"ArrowDown":o+=1*a;break}let c=!1;(t.ctrlKey||t.shiftKey)&&(c=!0),o<0&&(o=0),o>this.nodeList.value.length-1&&(o=this.nodeList.value.length-1),this.lastSelectIndex=o,this.nodeList.value.forEach((u,f)=>{if(o===f)return u._selected=!0;u._selected&&!c&&(u._selected=!1)})}setMode(t){this.localConfigure.set("file_view_mode",t),this.setList(this.nodeList.value)}setSort(t){console.info("setSort",t),this.localConfigure.set("file_view_sort",t);const n=this.nodeList.value;this.nodeList.value=[],setTimeout(()=>{this.nodeList.value=this.sortList(n,this.sortVal.value),this.setList(this.nodeList.value)},Be.timeouts.sort)}sortList(t,n){return t=ua(t,n),t}async keymap(t){let n;const r=t.target;switch(t.key){case"F2":if(Dt(r)||_n(r))return;n=this.getSelected(),await xe.op_bath_rename(n.idSet,n.nodeLs);break;case"Delete":if(Dt(r)||_n(r))return;n=this.getSelected(),this.route.name==="Recycle"?await xe.op_bath_delete_forever(n.idSet,n.nodeLs):await xe.op_bath_delete(n.idSet,n.nodeLs);break;case"NumpadEnter":case"Enter":if(Dt(r)||_n(r)||(n=this.getSelected(),!n.idSet.size))return;if(console.info(n.idSet.size),t.altKey&&n.idSet.size==1)return this.emitGo("node",Array.from(n.idSet)[0]);await xe.op_bath_browser(n.idSet,n.nodeLs);break;case"ArrowRight":case"ArrowLeft":case"ArrowUp":case"ArrowDown":return Dt(r)||_n(r)?void 0:this.arrowSelection(t)}}reloadOffset(t){if(this.reloadOffset_count>100)return;let n=!0;if(this.nodeList.value.forEach(r=>{r._dom||(n=!1)}),clearTimeout(this.reloadOffset_timer),!n){this.reloadOffset_timer=setTimeout(()=>{this.reloadOffset_count+=1,this.reloadOffset(t)},Be.timeouts.offsetDebounce);return}this.nodeList.value.forEach(r=>{if(!r._dom)return;const s=r._dom;let i=0,a=0,o=0,c=0;i=Re.nodeOffsetX(s),a=Re.nodeOffsetY(s),o=i+s.offsetWidth,c=a+s.offsetHeight,r._offsets=[i,a,o,c]}),this.scrollEvt(t)}go(t){const n=Object.assign({id_dir:"",id_tag:""},t);this.router.push({path:"/",query:n})}scrollEvt(t){Re.debounce(()=>{this.saveScroll(),this.reloadLazyLoad()},Be.timeouts.scrollEvt,"debounce_scroll_view")}saveScroll(){const t=this.route.query??{},n=[this.route.path,t.mode?t.mode:"",t.pid?t.pid:"",t.id?t.id:"",t.id?t.id:"",t.tag_id?t.tag_id:""].join(":"),r=[this.contentDOM.scrollTop,this.contentDOM.scrollLeft];!r[0]&&!r[1]||Re.debounce(()=>{Ss("scroll_log",n,r)},Be.timeouts.scrollSave,"debounce_scroll_save")}async reloadScroll(){const t=this.route.query??{},n=[this.route.path,t.mode?t.mode:"",t.pid?t.pid:"",t.id?t.id:"",t.id?t.id:"",t.tag_id?t.tag_id:""].join(":"),r=await Es("scroll_log",n);r&&(this.contentDOM.scrollTop=r[0]??0,this.contentDOM.scrollLeft=r[1]??0)}reloadLazyLoad(){if(!this.contentDOM)return;const t=this.contentDOM,n=Re.nodeOffsetY(t),r=t.scrollTop+n,s=r+t.clientHeight+n;this.nodeList.value.forEach(i=>{let a=!0,o=i._offsets;o[1]>s&&(a=!1),o[3]<r&&(a=!1),i._in_screen=a})}}class xe{static async op_download(t){var r,s;let n=(s=(r=t.file_index)==null?void 0:r.raw)==null?void 0:s.path;n&&window.open(`${n}?filename=${t.title}`)}static async op_rename(t){if(t._renaming){const n=new FormData;n.set("id",`${t.id}`),n.set("title",t.title??""),n.set("description",t.description??""),await Ce("file/mod",n),ve&&ve.emitGo("reload")}t._renaming=!t._renaming,setTimeout(()=>{let n=document.body.querySelector('[contenteditable="true"]');n&&n.focus()},50)}static async op_bath_rename(t,n){ve&&ve.modalStore.set({title:"bath rename",alpha:!1,key:"",single:!1,w:400,h:275,minW:400,minH:275,allow_resize:!0,allow_move:!0,allow_fullscreen:!1,auto_focus:!0,component:[{componentName:"renameUtil",data:{node_list:n,callback:()=>{ve&&ve.getList()}}}]})}static async op_move(t){ve&&ve.modalStore.set({title:`locator | move ${t.title} to:`,alpha:!1,key:"",single:!1,w:400,h:60,minW:400,minH:60,allow_resize:!0,allow_move:!0,allow_fullscreen:!1,auto_focus:!0,component:[{componentName:"locator",data:{query:{type:"directory"},call:async n=>{const r=new FormData;r.set("id_node",`${t.id}`),r.set("id_target",`${n.id}`),await Ce("file/mov",r),ve&&ve.emitGo("reload")}}}]})}static async op_bath_move(t,n){ve&&ve.modalStore.set({title:`locator | move ${t.size} files to:`,alpha:!1,key:"",single:!1,w:400,h:60,minW:400,minH:60,allow_resize:!0,allow_move:!0,allow_fullscreen:!1,auto_focus:!0,component:[{componentName:"locator",data:{query:{type:"directory"},call:async r=>{const s={id_list:Array.from(t).join(","),id_parent:`${r.id}`},i=await Ce("file/bath_move",s);ve&&ve.getList()}}}]})}static async op_delete(t,n=!1){const r=new FormData;r.set("id",`${t.id}`);const s=await Ce("file/delete",r);return console.info(ve),ve&&ve.deleteFromList([t.id]),s}static async op_bath_delete(t,n,r=!1,s){ve&&ve.modalStore.set({title:`confirm to ${r?"recover":"delete"} ${t.size} files`,alpha:!1,key:"",single:!1,w:400,h:100,minW:400,minH:100,allow_resize:!1,allow_move:!0,allow_fullscreen:!1,auto_focus:!0,text:"conform to "+(r?"recover":"delete"),callback:{confirm:async i=>{const a=Array.from(t),o={id_list:a.join(",")},c=await Ce("file/bath_delete",o);ve&&ve.deleteFromList(a),s&&s()}}})}static async op_delete_forever(t){const n=new FormData;n.set("id",`${t.id}`);const r=await Ce("file/delete_forever",n);return ve&&ve.deleteFromList([t.id]),r}static async op_bath_delete_forever(t,n){ve&&ve.modalStore.set({title:`confirm to delete ${t.size} files forever`,alpha:!1,key:"",single:!1,w:400,h:100,minW:400,minH:100,allow_resize:!1,allow_move:!0,allow_fullscreen:!1,auto_focus:!0,text:"conform to delete forever",callback:{confirm:async r=>{const s=Array.from(t),i={id_list:s.join(",")},a=await Ce("file/bath_delete_forever",i);ve&&ve.deleteFromList(s)}}})}static async op_toggle_favourite(t){const n=await Ce("favourite_group/get",{}),r={};n&&n.forEach(s=>{s.auto||(r[s.id??0]=s.title??"")}),ve&&ve.modalStore.set({title:"select fav group:",alpha:!1,key:"",single:!1,w:400,h:150,minW:400,minH:150,allow_resize:!0,allow_move:!0,allow_fullscreen:!1,auto_focus:!0,form:[{type:"checkbox",label:"attach to",key:"target_group",value:t.list_fav,options:r}],callback:{submit:async function(s){const a=s.content.form[0].value.join(",");await Ce("favourite/attach",{id_node:t.id,list_group:a}),location.reload()}}})}static async op_bath_favourite(t,n){const r=await Ce("favourite_group/get",{}),s={};r&&r.forEach(i=>{i.auto||(s[i.id??0]=i.title??"")}),ve&&ve.modalStore.set({title:"select fav group:",alpha:!1,key:"",single:!1,w:400,h:150,minW:400,minH:150,allow_resize:!0,allow_move:!0,allow_fullscreen:!1,auto_focus:!0,form:[{type:"checkbox",label:"attach to:",key:"target_group",value:[],options:s}],callback:{submit:async function(i){const a=i.content.form[0].value.join(",");await Ce("favourite/bath_attach",{node_id_list:Array.from(t),list_group:a})}}})}static async op_bath_browser(t,n){let r=Array.from(t),s={};s.with="crumb,file",r.length==1?(s.mode="directory",s.id_dir=`${r[0]}`):(s.mode="id_iterate",s.keyword=r.join(",")),s.cascade_dir=0,Af(s,r[0])}static async op_tag(t){if(t._tagging){const n=new Set;if(t.tag)for(let s=0;s<t.tag.length;s++)for(let i=0;i<t.tag[s].sub.length;i++){const a=t.tag[s].sub[i].id;a&&n.add(a)}const r=new FormData;r.set("id_node",`${t.id}`),r.set("tag_list",Array.from(n).join(",")),await Ce("tag/attach",r)}t._tagging=!t._tagging}static async op_set_cover(t){const n=new FormData;return n.set("id",`${t.id}`),await Ce("file/cover",n)}static async op_rebuild(t){const n=new FormData;return n.set("id_list",t.join(",")),await Ce("file/rebuild",n)}static async op_recheck(t){const n=new FormData;return n.set("id_list",t.join(",")),await Ce("file/rehash",n)}static async op_cascade_tag(t){const n=new FormData;return n.set("id_list",t.join(",")),await Ce("file/cascade_tag",n)}static async op_rm_raw(t){const n=new FormData;return n.set("id_list",t.join(",")),await Ce("file/rm_raw",n)}static async op_imp_tag_eh(t){const n=new FormData;return n.set("id_list",t.join(",")),await Ce("file/import_eht",n)}static async op_rate(t,n){if(!ve)return;let r=ve.getSelected();n&&!r.idSet.size&&(r.idSet.add((n==null?void 0:n.id)??0),r.nodeLs.push(n)),r.nodeLs.forEach(i=>{i.rate=t});const s=new FormData;s.set("node_id_list",Array.from(r.idSet).join(",")),s.set("rate",`${t}`),await Ce("rate/attach",s)}}function Af(e,t){if(!ve)return;let n=ve.localConfigure.get("browser_layout_w"),r=ve.localConfigure.get("browser_layout_h");const s=window.innerWidth,i=window.innerHeight;s<n&&(n=0),i<r&&(r=0),ve.modalStore.set({title:"file browser",alpha:!1,key:"",single:!1,w:n||400,h:r||400,minW:400>window.innerWidth?window.innerWidth*.9:400,minH:400>window.innerHeight?window.innerHeight*.9:400,allow_resize:!0,allow_move:!0,allow_fullscreen:!0,auto_focus:!1,component:[{componentName:"fileBrowser",data:{query:Re.copyObject(e),curId:t}}]})}function ua(e,t){let n=["id","asc"];switch(t){default:case"id_asc":n=["id","asc"];break;case"id_desc":n=["id","desc"];break;case"name_asc":n=["title","asc"];break;case"name_desc":n=["title","desc"];break;case"crt_asc":n=["time_create","asc"];break;case"crt_desc":n=["time_create","desc"];break;case"upd_asc":n=["time_update","asc"];break;case"upd_desc":n=["time_update","desc"];break;case"rate_asc":n=["rate","asc"];break;case"rate_desc":n=["rate","desc"];break}return e.sort((r,s)=>{let i="",a="";const o=n[1]=="desc"?-1:1;switch(n[0]){default:i=r[n[0]],a=s[n[0]];break;case"title":return i=r.node_path+"/"+r.title,a=s.node_path+"/"+s.title,If({desc:o!=1,insensitive:!0})(i,a)}return(i||0)>(a||0)?o*1:o*-1}),e}const Lf={class:"modal_browser base"},Df={class:"base"},Rf={class:"l"},Pf={class:"r"},Tf={class:"content"},Mf=Ve({__name:"browserBase",props:{data:{},modalData:{},nodeList:{},curIndex:{},curNode:{}},setup(e){const t=e;return(n,r)=>(ae(),le("div",Lf,[re("div",Df,[re("div",Rf,[He(n.$slots,"info")]),re("div",Pf,[He(n.$slots,"btnContainer")])]),He(n.$slots,"navigator"),re("div",Tf,[re("span",{class:Ae(["listIcon",`listIcon_file_${t.curNode.type}`]),style:Ge({fontSize:t.modalData.layout.h*.5+"px",lineHeight:t.modalData.layout.h*.8+"px"})},null,6)])]))}}),zf={class:"modal_browser image"},$f={class:"base"},Nf={class:"l"},jf={class:"btnContainer"},Ff={class:"r"},Bf={key:0,class:"loader sysIcon sysIcon_sync"},Uf=["data-ref-node-id","src","data-rotate"],Hf=Ve({__name:"browserImage",props:{data:{},modalData:{},nodeList:{},curIndex:{},curNode:{}},setup(e){const t=e,n=[.1,.25,.5,.75,1,1.25,1.5,2],r=pe(null),s=pe(null),i=pe({loaded:0,w:0,h:0,x:0,y:0,rotate:0,orgRatio:0,ratio:0,ratioTxt:"0 %",orgW:0,orgH:0});async function a(m){const w=s.value;if(!w)return;if(!w.complete)return setTimeout(a,50);const _=await Es("image_rotate",t.curNode.id);Object.assign(i.value,{loaded:t.curNode.id,orgH:w.naturalHeight,orgW:w.naturalWidth,rotate:_}),await o()}ot(()=>{Object.assign(i.value,{loaded:0,w:0,h:0,x:0,y:0,rotate:0,orgW:0,orgH:0}),document.addEventListener(`modal_resizing_${t.modalData.nid}`,o),document.addEventListener("pointerup",h),document.addEventListener("pointermove",f),document.addEventListener("wheel",d),document.addEventListener("keydown",p),document.addEventListener("pointercancel",h),document.addEventListener("pointerout",h)}),pt(()=>t.curNode,async m=>{console.info("onMod props.curNode"),i.value.loaded=0}),_t(()=>{document.removeEventListener(`modal_resizing_${t.modalData.nid}`,o),document.removeEventListener("pointerup",h),document.removeEventListener("pointermove",f),document.removeEventListener("wheel",d),document.removeEventListener("keydown",p),document.removeEventListener("pointercancel",h),document.removeEventListener("pointerout",h)});async function o(){if(!i.value.loaded)return;const m=t.modalData.layout,w=m.w??0;let _=m.h??0;_-=16;const S=i.value,k=Math.abs(S.rotate%180-90)<45,C=w/(k?S.orgH:S.orgW),M=_/(k?S.orgW:S.orgH),T={w:0,h:0,x:0,y:0,ratio:0,orgRatio:0,ratioTxt:"0 %"},P=Math.min(C,M);T.w=S.orgW*P,T.h=S.orgH*P,T.x=(w-T.w)/2,T.y=(_-T.h)/2,T.ratio=P,T.orgRatio=P,T.ratioTxt=Math.round(P*1e3)/10+" %",Object.assign(i.value,T)}const c=new Map;function u(m){if(!t.modalData.layout.active||!m.pointerId)return;m.preventDefault(),m.stopPropagation(),i.value;const w={x:m.clientX,y:m.clientY};c.set(m.pointerId,w)}function f(m){t.modalData.layout.active&&m.pointerId&&(m.preventDefault(),m.stopPropagation(),g(m))}function h(m){c.get(m.pointerId)&&c.delete(m.pointerId)}function g(m){const w=c.get(m.pointerId);if(!w||Math.abs(m.clientX-w.x)<1&&Math.abs(m.clientY-w.y)<1)return;const _=i.value,S=s.value,k=r.value;if(!S||!k)return;if(c.size==1){const K={x:m.clientX-w.x+_.x,y:m.clientY-w.y+_.y};Object.assign(i.value,K),c.set(m.pointerId,{x:m.clientX,y:m.clientY});return}const C={x:0,y:0,pointerCount:0};c.forEach((K,H,Q)=>{H!=m.pointerId&&(C.x+=K.x,C.y+=K.y,C.pointerCount+=1)}),C.x=C.x/C.pointerCount,C.y=C.y/C.pointerCount;const M={orgX:w.x-C.x,orgY:w.y-C.y,tgtX:m.clientX-C.x,tgtY:m.clientY-C.y},T={x:0,y:0,w:0,h:0,ratio:_.ratio*Math.sqrt((M.tgtX*M.tgtX+M.tgtY*M.tgtY)/(M.orgX*M.orgX+M.orgY*M.orgY)),ratioTxt:"0 %"};T.ratio>5&&(T.ratio=5),T.w=_.orgW*T.ratio,T.h=_.orgH*T.ratio;const P=k.clientWidth??0,V=k.clientHeight??0,{x:ne,y:D}=Re.nodeOffsetXY(k),W=S.clientWidth??0,v=S.clientHeight??0,{x:J,y:oe}=Re.nodeOffsetXY(S),G=(m.clientX-w.x)/2,X=(m.clientY-w.y)/2,B=C.x-ne-P/2,se=C.y-D-V/2,N=(C.x-(J+W/2))/_.ratio*T.ratio,z=(C.y-(oe+v/2))/_.ratio*T.ratio;T.x=(P-T.w)/2+B-N+G,T.y=(V-T.h)/2+se-z+X,T.ratioTxt=Math.round(T.ratio*1e4)/100+" %",Object.assign(i.value,T),c.set(m.pointerId,{x:m.clientX,y:m.clientY})}function d(m){let w=m==null?void 0:m.target,_;do if(_=w.getAttribute("data-ref-id"),_||!w.parentElement||(w=w.parentElement,w.tagName==="BODY"))break;while(!0);if(_!==t.modalData.nid)return;const S=m.deltaY<0?1:-1;y(S,m.clientX,m.clientY)}function y(m,w,_){const S=i.value,k=s.value,C=r.value;if(!k||!C)return;let M=[];const T=S.ratio;M.push(...n,S.ratio,S.orgRatio);const P=new Set(M);M=Array.from(P),M.sort();const V=M.indexOf(S.ratio)+m;if(V<0||V>=M.length)return;const ne=M[V],D=C.clientWidth??0,W=C.clientHeight??0,{x:v,y:J}=Re.nodeOffsetXY(C);Math.abs(S.rotate%180-90)<45;const oe={w:S.orgW*ne,h:S.orgH*ne,x:0,y:0,ratio:ne,ratioTxt:Math.round(ne*1e4)/100+" %"};if(w===void 0||_===void 0){oe.x=(D-oe.w)/2,oe.y=(W-oe.h)/2,Object.assign(i.value,oe);return}const G=k.clientWidth??0,X=k.clientHeight??0,{x:B,y:se}=Re.nodeOffsetXY(k),N=w-v-D/2,z=_-J-W/2,K=(w-(B+G/2))/T*oe.ratio,H=(_-(se+X/2))/T*oe.ratio;oe.x=(D-oe.w)/2+N-K,oe.y=(W-oe.h)/2+z-H,Object.assign(i.value,oe)}function p(m){if(!Dt(m.target)&&t.modalData.layout.active)switch(m.code){case"KeyQ":b(-90);break;case"KeyE":b(90);break}}function b(m){let w={rotate:i.value.rotate},_=w.rotate+m;for(;_<0;)_+=360;for(;_>360;)_-=360;w.rotate=_,Ss("image_rotate",t.curNode.id,_),Object.assign(i.value,w),o()}return(m,w)=>{var _,S;return ae(),le("div",zf,[re("div",$f,[re("div",Nf,[He(m.$slots,"info"),re("div",jf,[re("button",{class:Ae(["sysIcon","sysIcon_zoomout"]),onClick:w[0]||(w[0]=k=>y(-1))}),re("button",{onClick:o},Se(i.value.ratioTxt),1),re("button",{class:Ae(["sysIcon","sysIcon_zoomin"]),onClick:w[1]||(w[1]=k=>y(1))})])]),re("div",Ff,[He(m.$slots,"btnContainer")])]),He(m.$slots,"navigator"),re("div",{class:"content",ref_key:"contentDOM",ref:r},[i.value.loaded?Ie("",!0):(ae(),le("span",Bf)),re("img",{"data-ref-node-id":t.curNode.id,src:`${(S=(_=t.curNode.file_index)==null?void 0:_.normal)==null?void 0:S.path}?filename=${t.curNode.title}`,"data-rotate":i.value.rotate,onPointerdown:u,onDblclick:w[2]||(w[2]=(...k)=>m.resetImgresetImg&&m.resetImgresetImg(...k)),onLoad:a,style:Ge(i.value.loaded?{width:i.value.w+"px",height:i.value.h+"px",left:i.value.x+"px",top:i.value.y+"px",rotate:i.value.rotate+"deg"}:{}),ref_key:"imgDOM",ref:s},null,44,Uf)],512)])}}}),Wf={class:"modal_browser audio"},Vf={class:"base"},Kf={class:"l"},qf={class:"btnContainer"},Yf={class:"r"},Xf={key:0,class:"loader sysIcon sysIcon_sync"},Zf=["src"],Gf=["data-item-id","poster"],Jf=["src"],Qf=Ve({__name:"browserAudio",props:{data:{},modalData:{},nodeList:{},curIndex:{},curNode:{}},emits:["nav"],setup(e,{emit:t}){var oe,G,X,B,se,N,z;const n=Sr(),r=e,s=t,i=pe(null),a=pe(null),o=pe(null),c=pe("");(X=(G=(oe=r.curNode)==null?void 0:oe.file_index)==null?void 0:G.normal)!=null&&X.path?c.value=`${(se=(B=r.curNode.file_index)==null?void 0:B.normal)==null?void 0:se.path}?filename=${r.curNode.title}`:c.value=`${(z=(N=r.curNode.file_index)==null?void 0:N.raw)==null?void 0:z.path}?filename=${r.curNode.title}`;const u=pe({duration:0,buffered:0,time:0,volume:n.get("browser_play_volume")?n.get("browser_play_volume"):100,brightness:n.get("browser_play_brightness")?n.get("browser_play_brightness"):1,mute:!1,play:!1,loading:!0,loop:n.get("browser_play_mode")==="single"}),f=n.listen("browser_play_mode",K=>Object.assign(u.value,{loop:K==="single"})),h=n.listen("browser_play_volume",K=>Object.assign(u.value,{volume:K})),g=n.listen("browser_play_brightness",K=>Object.assign(u.value,{brightness:K}));function d(){var ue;console.info("onInit");const K=o.value;if(!K)return;if(K.readyState!==4)return setTimeout(d,50);const H=u.value,Q={time:0,duration:K.duration};Object.assign(u.value,Q),H.play&&K.play(),K.volume=H.mute?0:H.volume/100,(ue=i.value)==null||ue.addEventListener("wheel",W)}function y(K){console.info("onCanplay"),o.value&&(document.addEventListener("keydown",v),Object.assign(u.value,{loading:!1}))}function p(K=!0){var H;document.removeEventListener("wheel",W),document.removeEventListener("keydown",v),c.value="",o.value&&((H=o.value)==null||H.load()),K&&Object.assign(u.value,{loading:!0})}function b(){const K=o.value;if(!K)return;const H=u.value;H.play?K.pause():K.play(),Object.assign(u.value,{play:!H.play})}function m(K){console.info("onEnd",K);const H=o.value;if(!H)return;if(u.value.loop){H.currentTime=0,H.play();return}s("nav",r.curIndex+1)}ot(async()=>{var K;o.value&&((K=o.value)==null||K.load()),w=setInterval(_,200)}),pt(()=>r.curNode,async K=>{var H,Q,ue,Y,$,F,ee,ie;p(),(ue=(Q=(H=r.curNode)==null?void 0:H.file_index)==null?void 0:Q.normal)!=null&&ue.path?c.value=`${($=(Y=K.file_index)==null?void 0:Y.normal)==null?void 0:$.path}?filename=${K.title}`:c.value=`${(ee=(F=K.file_index)==null?void 0:F.raw)==null?void 0:ee.path}?filename=${K.title}`,o.value&&((ie=o.value)==null||ie.load())}),_r(()=>{p(!1),n.release("browser_play_mode",f),n.release("browser_play_volume",h),n.release("browser_play_brightness",g),clearInterval(w)});let w=0;function _(){if(!o.value||!o.value.buffered||!o.value.buffered.length)return;let K=0;for(let H=0;H<o.value.buffered.length;H++){const Q=o.value.buffered.end(H);if(!(u.value.time>Q)){K=Q;break}}Object.assign(u.value,{buffered:K})}function S(K){const H=o.value;H&&Object.assign(u.value,{time:H.currentTime})}const k={active:!1,x:0,y:0,w:0,h:0,orgX:0,orgY:0,left:0,right:0,t:0};let C=0;function M(K){if(C)return;const H=o.value;if(!H)return;const Q=a.value;if(!Q)return;C=K.pointerId,document.addEventListener("pointermove",T),document.addEventListener("pointerup",P);const ue={active:!0,x:K.clientX,w:Q.clientWidth,orgX:Re.nodeOffsetX(Q)};Object.assign(k,ue);const Y=(ue.x-ue.orgX)/ue.w;H.currentTime=H.duration*Y,Object.assign(u.value,{time:H.currentTime})}function T(K){if(K.pointerId!=C||(K.preventDefault(),K.stopPropagation(),!k.active))return;const H=o.value;if(!H)return;Object.assign(k,{x:K.clientX});let Q=(k.x-k.orgX)/k.w;Q>1&&(Q=1),Q<0&&(Q=0),H.currentTime=H.duration*Q,Object.assign(u.value,{time:H.currentTime})}function P(K){K.pointerId==C&&(C=0,Object.assign(k,{active:!1}),document.removeEventListener("pointermove",T),document.removeEventListener("pointerup",P))}function V(K){if(C||!o.value)return;const Q=i.value;if(!Q)return;C=K.pointerId,K.preventDefault(),K.stopPropagation(),document.addEventListener("pointermove",ne),document.addEventListener("pointerup",D);const ue={active:!0,x:K.clientX,y:K.clientY,w:Q.clientWidth,h:Q.clientHeight,orgX:Re.nodeOffsetX(Q),orgY:Re.nodeOffsetX(Q),left:0,right:0,t:new Date().valueOf()},Y=(ue.x-ue.orgX)/ue.w;Y>.5&&(ue.right=1),Y<.5&&(ue.left=1),Object.assign(k,ue)}function ne(K){if(K.pointerId!=C||(K.preventDefault(),K.stopPropagation(),!k.active))return;const H=o.value;if(!H||!i.value)return;const ue=(K.clientY-k.y)/k.h;Object.assign(k,{y:K.clientY});const Y=u.value;if(k.right){let $=Y.volume-ue*100*1.5;$<0&&($=0),$>100&&($=100),H.volume=$/100,n.set("browser_play_volume",$)}if(k.left){let $=Y.brightness-ue;$<0&&($=0),$>1&&($=1),Y.brightness=$,n.set("browser_play_brightness",$)}}function D(K){if(K.pointerId!=C)return;C=0;const H=new Date().valueOf();k.t>H-250&&b(),Object.assign(k,{active:!1}),document.removeEventListener("pointermove",ne),document.removeEventListener("pointerup",D)}function W(K){const H=o.value;if(!H)return;let ue=u.value.volume+(K.deltaY<0?5:-5);ue<0&&(ue=0),ue>100&&(ue=100),H.volume=ue/100,n.set("browser_play_volume",ue)}function v(K){if(!Dt(K.target)&&r.modalData.layout.active)switch(K.key){case" ":b();break;case"ArrowUp":W({deltaY:-1});break;case"ArrowDown":W({deltaY:1});break;case"ArrowLeft":case"ArrowRight":const H=o.value;if(!H)return;H.currentTime+=K.key==="ArrowLeft"?-5:5,Object.assign(u.value,{time:H.currentTime});break}}function J(K){const H={h:""+Math.floor(K/3600),m:""+Math.floor(K/60%60),s:""+Math.floor(K%60)};H.m.length<2&&(H.m="0"+H.m),H.s.length<2&&(H.s="0"+H.s);let Q=""+H.s;return(H.m||H.h)&&(Q=`${H.m}:${Q}`),H.h!=="0"&&(Q=`${H.h}:${Q}`),Q}return(K,H)=>{var Q,ue,Y,$,F;return ae(),le("div",Wf,[re("div",Vf,[re("div",Kf,[He(K.$slots,"info"),re("div",qf,[re("button",{class:Ae({sysIcon:!0,sysIcon_volume:!u.value.mute&&u.value.volume,sysIcon_mute:u.value.mute,sysIcon_mutemode:!u.value.mute&&!u.value.volume})},Se(Math.round(u.value.volume)),3),re("button",{class:Ae({sysIcon:!0,sysIcon_caretright:u.value.play,sysIcon_pause:!u.value.play})},Se(J(u.value.time)),3),re("div",{class:Ae(["audio_bar"]),onPointerdown:M,ref_key:"timelineDOM",ref:a},[re("span",{class:"duration",style:Ge({left:100*u.value.time/u.value.duration+"%"})},null,4),re("span",{class:"buffer",style:Ge({width:100*u.value.buffered/u.value.duration+"%"})},null,4)],544)])]),re("div",Yf,[He(K.$slots,"btnContainer")])]),He(K.$slots,"navigator"),re("div",{class:"content",ref_key:"contentDOM",ref:i,onPointerdown:V},[u.value.loading?(ae(),le("span",Xf)):Ie("",!0),(Q=r.curNode.file_index)!=null&&Q.preview?(ae(),le("img",{key:1,src:(Y=(ue=r.curNode.file_index)==null?void 0:ue.preview)==null?void 0:Y.path,style:Ge({filter:`brightness(${u.value.brightness})`})},null,12,Zf)):(ae(),le("span",{key:2,class:Ae(["listIcon",`listIcon_file_${r.curNode.type}`]),style:Ge({fontSize:r.modalData.layout.h*.5+"px",lineHeight:r.modalData.layout.h*.8+"px"})},null,6)),re("audio",{ref_key:"mediaDOM",ref:o,preload:"metadata","data-item-id":r.curNode.id,poster:(F=($=r.curNode.file_index)==null?void 0:$.preview)==null?void 0:F.path,onLoadedmetadata:d,onCanplay:y,onEnded:m,onTimeupdate:S},[re("source",{src:c.value},null,8,Jf)],40,Gf)],544)])}}}),ed={class:"modal_browser video"},td={class:"base"},nd={class:"l"},rd={class:"btnContainer"},sd=["value"],id={class:"r"},od={key:0,class:"loader sysIcon sysIcon_sync"},ad=["data-item-id","poster"],ld=["src"],cd=["default","src","srclang","label"],ud=["default","src","srclang","label"],fd=Ve({__name:"browserVideo",props:{data:{},modalData:{},nodeList:{},curIndex:{},curNode:{}},emits:["nav"],setup(e,{emit:t}){var N,z,K,H,Q,ue,Y;const n=Sr(),r=e,s=t,i=pe(null),a=pe(null),o=pe(null),c=pe("");(K=(z=(N=r.curNode)==null?void 0:N.file_index)==null?void 0:z.normal)!=null&&K.path?c.value=`${(Q=(H=r.curNode.file_index)==null?void 0:H.normal)==null?void 0:Q.path}?filename=${r.curNode.title}`:c.value=`${(Y=(ue=r.curNode.file_index)==null?void 0:ue.raw)==null?void 0:Y.path}?filename=${r.curNode.title}`;const u=pe({duration:0,buffered:0,time:0,volume:n.get("browser_play_volume")?n.get("browser_play_volume"):100,brightness:n.get("browser_play_brightness")?n.get("browser_play_brightness"):1,mute:!1,play:!1,loading:!0,loop:n.get("browser_play_mode")==="single"}),f=n.listen("browser_play_mode",$=>Object.assign(u.value,{loop:$==="single"})),h=n.listen("browser_play_volume",$=>Object.assign(u.value,{volume:$})),g=n.listen("browser_play_brightness",$=>Object.assign(u.value,{brightness:$}));function d(){var ie;console.info("onInit");const $=o.value;if(!$)return;if($.readyState!==4)return setTimeout(d,50);const F=u.value,ee={time:0,duration:$.duration};Object.assign(u.value,ee),F.play&&$.play(),$.volume=F.mute?0:F.volume/100,(ie=i.value)==null||ie.addEventListener("wheel",v)}function y($){console.info("onCanplay"),o.value&&(document.addEventListener("keydown",J),Object.assign(u.value,{loading:!1}))}function p($=!0){var F;document.removeEventListener("wheel",v),document.removeEventListener("keydown",J),c.value="",o.value&&((F=o.value)==null||F.load()),$&&Object.assign(u.value,{loading:!0})}function b(){const $=o.value;if(!$)return;const F=u.value;F.play?$.pause():$.play(),Object.assign(u.value,{play:!F.play})}function m($){console.info("onEnd",$);const F=o.value;if(!F)return;if(u.value.loop){F.currentTime=0,F.play();return}s("nav",r.curIndex+1)}ot(async()=>{var $;await w(),o.value&&(($=o.value)==null||$.load()),_=setInterval(S,200)});async function w(){X.value=[],B()}pt(()=>r.curNode,async $=>{var F,ee,ie,fe,O,l,I,R;p(),w(),(ie=(ee=(F=r.curNode)==null?void 0:F.file_index)==null?void 0:ee.normal)!=null&&ie.path?c.value=`${(O=(fe=$.file_index)==null?void 0:fe.normal)==null?void 0:O.path}?filename=${$.title}`:c.value=`${(I=(l=$.file_index)==null?void 0:l.raw)==null?void 0:I.path}?filename=${$.title}`,o.value&&((R=o.value)==null||R.load())}),_r(()=>{p(!1),n.release("browser_play_mode",f),n.release("browser_play_volume",h),n.release("browser_play_brightness",g),clearInterval(_)});let _=0;function S(){if(!o.value||!o.value.buffered||!o.value.buffered.length)return;let $=0;for(let F=0;F<o.value.buffered.length;F++){const ee=o.value.buffered.end(F);if(!(u.value.time>ee)){$=ee;break}}Object.assign(u.value,{buffered:$})}function k($){const F=o.value;F&&Object.assign(u.value,{time:F.currentTime})}const C={active:!1,x:0,y:0,w:0,h:0,orgX:0,orgY:0,left:0,right:0,t:0};let M=0;function T($){if(M)return;const F=o.value;if(!F)return;const ee=a.value;if(!ee)return;M=$.pointerId,document.addEventListener("pointermove",P),document.addEventListener("pointerup",V);const ie={active:!0,x:$.clientX,w:ee.clientWidth,orgX:Re.nodeOffsetX(ee)};Object.assign(C,ie);const fe=(ie.x-ie.orgX)/ie.w;F.currentTime=F.duration*fe,Object.assign(u.value,{time:F.currentTime})}function P($){if($.pointerId!=M||($.preventDefault(),$.stopPropagation(),!C.active))return;const F=o.value;if(!F)return;Object.assign(C,{x:$.clientX});let ee=(C.x-C.orgX)/C.w;ee>1&&(ee=1),ee<0&&(ee=0),F.currentTime=F.duration*ee,Object.assign(u.value,{time:F.currentTime})}function V($){$.pointerId==M&&(M=0,Object.assign(C,{active:!1}),document.removeEventListener("pointermove",P),document.removeEventListener("pointerup",V))}function ne($){if(M||!o.value)return;const ee=i.value;if(!ee)return;M=$.pointerId,$.preventDefault(),$.stopPropagation(),document.addEventListener("pointermove",D),document.addEventListener("pointerup",W);const ie={active:!0,x:$.clientX,y:$.clientY,w:ee.clientWidth,h:ee.clientHeight,orgX:Re.nodeOffsetX(ee),orgY:Re.nodeOffsetX(ee),left:0,right:0,t:new Date().valueOf()},fe=(ie.x-ie.orgX)/ie.w;fe>.5&&(ie.right=1),fe<.5&&(ie.left=1),Object.assign(C,ie)}function D($){if($.pointerId!=M||($.preventDefault(),$.stopPropagation(),!C.active))return;const F=o.value;if(!F||!i.value)return;const ie=($.clientY-C.y)/C.h;Object.assign(C,{y:$.clientY});const fe=u.value;if(C.right){let O=fe.volume-ie*100*1.5;O<0&&(O=0),O>100&&(O=100),F.volume=O/100,n.set("browser_play_volume",O)}if(C.left){let O=fe.brightness-ie;O<0&&(O=0),O>1&&(O=1),fe.brightness=O,n.set("browser_play_brightness",O)}}function W($){if($.pointerId!=M)return;M=0;const F=new Date().valueOf();C.t>F-250&&b(),Object.assign(C,{active:!1}),document.removeEventListener("pointermove",D),document.removeEventListener("pointerup",W)}function v($){const F=o.value;if(!F)return;let ie=u.value.volume+($.deltaY<0?5:-5);ie<0&&(ie=0),ie>100&&(ie=100),F.volume=ie/100,n.set("browser_play_volume",ie)}function J($){if(!Dt($.target)&&r.modalData.layout.active)switch($.key){case" ":b();break;case"ArrowUp":v({deltaY:-1});break;case"ArrowDown":v({deltaY:1});break;case"ArrowLeft":case"ArrowRight":const F=o.value;if(!F)return;F.currentTime+=$.key==="ArrowLeft"?-5:5,Object.assign(u.value,{time:F.currentTime});break}}function oe($){const F={h:""+Math.floor($/3600),m:""+Math.floor($/60%60),s:""+Math.floor($%60)};F.m.length<2&&(F.m="0"+F.m),F.s.length<2&&(F.s="0"+F.s);let ee=""+F.s;return(F.m||F.h)&&(ee=`${F.m}:${ee}`),F.h!=="0"&&(ee=`${F.h}:${ee}`),ee}const G=pe(0),X=pe([]);function B(){var ie,fe;let $=(ie=r.curNode.title)==null?void 0:ie.lastIndexOf("."),F=((fe=r.curNode.title)==null?void 0:fe.substring(0,$))??"";if(!F)return X.value=[];const ee=[];r.nodeList.forEach(O=>{var I,R,x,E,A,j;if(O.type!=="subtitle"||!((R=(I=O.file_index)==null?void 0:I.normal)!=null&&R.path||(E=(x=O.file_index)==null?void 0:x.raw)!=null&&E.path))return;let l=(A=O.title)==null?void 0:A.substring(F.length);((j=O.title)==null?void 0:j.indexOf(F))===0&&ee.push(Object.assign({label:l},O))}),X.value=ee}function se($){var ee;const F=(ee=o.value)==null?void 0:ee.textTracks;if(F)for(let ie=0;ie<F.length;ie++)$==ie?F[ie].mode="showing":F[ie].mode="disabled"}return($,F)=>{var ee,ie;return ae(),le("div",ed,[re("div",td,[re("div",nd,[He($.$slots,"info"),re("div",rd,[re("button",{class:Ae({sysIcon:!0,sysIcon_volume:!u.value.mute&&u.value.volume,sysIcon_mute:u.value.mute,sysIcon_mutemode:!u.value.mute&&!u.value.volume})},Se(Math.round(u.value.volume)),3),re("button",{class:Ae({sysIcon:!0,sysIcon_caretright:u.value.play,sysIcon_pause:!u.value.play})},Se(oe(u.value.time)),3),re("div",{class:Ae(["video_bar"]),onPointerdown:T,ref_key:"timelineDOM",ref:a},[re("span",{class:"duration",style:Ge({left:100*u.value.time/u.value.duration+"%"})},null,4),re("span",{class:"buffer",style:Ge({width:100*u.value.buffered/u.value.duration+"%"})},null,4)],544),X.value&&X.value.length?qe((ae(),le("select",{key:0,"onUpdate:modelValue":F[0]||(F[0]=fe=>G.value=fe),onChange:F[1]||(F[1]=fe=>se(G.value))},[(ae(!0),le(_e,null,Ne(X.value,(fe,O)=>(ae(),le("option",{value:O,key:"MO_BS_VDO_"+$.modalData.nid+"_sub_"+O},Se(fe.label),9,sd))),128))],544)),[[Jt,G.value]]):Ie("",!0)])]),re("div",id,[He($.$slots,"btnContainer")])]),He($.$slots,"navigator"),re("div",{class:"content",ref_key:"contentDOM",ref:i,onPointerdown:ne},[u.value.loading?(ae(),le("span",od)):Ie("",!0),re("video",{ref_key:"mediaDOM",ref:o,preload:"metadata","data-item-id":r.curNode.id,poster:(ie=(ee=r.curNode.file_index)==null?void 0:ee.preview)==null?void 0:ie.path,onLoadedmetadata:d,onCanplay:y,onEnded:m,onTimeupdate:k,style:Ge({filter:`brightness(${u.value.brightness})`})},[re("source",{src:c.value},null,8,ld),(ae(!0),le(_e,null,Ne(X.value,(fe,O)=>{var l;return ae(),le(_e,null,[(l=fe.file_index)!=null&&l.normal?(ae(),le("track",{key:"MO_BS_VDO_"+$.modalData.nid+"_track_"+O,default:G.value==O,src:fe.file_index.normal.path,kind:"subtitles",srclang:fe.label,label:fe.label},null,8,cd)):(ae(),le("track",{key:"MO_BS_VDO_"+$.modalData.nid+"_track_"+O,default:G.value==O,src:fe.file_index.raw.path,kind:"subtitles",srclang:fe.label,label:fe.label},null,8,ud))],64)}),256))],44,ad)],544)])}}}),dd={class:"modal_browser txt"},hd={class:"base"},pd={class:"l"},md={class:"r"},_d={class:"content"},gd=Ve({__name:"browserText",props:{data:{},modalData:{},nodeList:{},curIndex:{},curNode:{}},setup(e){const t=e,n=pe(""),r=pe(null);async function s(o){const u=await(await fetch(o.path,{method:"GET",headers:{}})).text();n.value=u,await a()}async function i(o){Re.debounce(()=>{if(!r.value)return;const c=[r.value.scrollTop,r.value.scrollLeft];if(!c[0]&&!c[1])return;const u=`browser:${t.curNode.id}`;Re.debounce(()=>{Ss("scroll_log",u,c)},Be.timeouts.scrollSave,"debounce_scroll_save")},Be.timeouts.scrollEvt,"debounce_scroll_view")}async function a(){if(!r.value)return;r.value.scrollTop=0,r.value.scrollLeft=0;const o=`browser:${t.curNode.id}`,c=await Es("scroll_log",o);c&&(r.value.scrollTop=c[0],r.value.scrollLeft=c[1])}return ot(async()=>{var o;t.curNode&&t.curNode.file_index&&t.curNode.file_index.raw&&await s(t.curNode.file_index.raw),r.value&&((o=r.value)==null||o.addEventListener("scroll",i))}),pt(()=>t.curNode,async o=>{o.file_index&&o.file_index.raw&&await s(o.file_index.raw)}),_r(()=>{}),(o,c)=>(ae(),le("div",dd,[re("div",hd,[re("div",pd,[He(o.$slots,"info")]),re("div",md,[He(o.$slots,"btnContainer")])]),He(o.$slots,"navigator"),re("div",_d,[re("div",{class:"textContent",ref_key:"contentDOM",ref:r},Se(n.value),513)])]))}}),vd={class:"modal_browser pdf"},yd={class:"base"},bd={class:"l"},wd={class:"r"},xd={class:"content"},kd=["src"],Ed=Ve({__name:"browserPDF",props:{data:{},modalData:{},nodeList:{},curIndex:{},curNode:{}},setup(e){const t=e;""+t.modalData.nid,pe(null);const n=pe(null);return ot(()=>{var r,s;console.warn("mounted"),n.value="/pdfjs/web/viewer.html?file="+((s=(r=t.curNode.file_index)==null?void 0:r.raw)==null?void 0:s.path)+"&filename="+t.curNode.title}),pt(()=>t.curNode,async r=>{var s,i;console.info("onMod props.curNode"),n.value="/pdfjs/web/viewer.html?file="+((i=(s=r.file_index)==null?void 0:s.raw)==null?void 0:i.path)+"&filename="+r.title}),_t(()=>{n.value=null}),(r,s)=>(ae(),le("div",vd,[re("div",yd,[re("div",bd,[He(r.$slots,"info")]),re("div",wd,[He(r.$slots,"btnContainer")])]),He(r.$slots,"navigator"),re("div",xd,[n.value?(ae(),le("iframe",{key:0,src:n.value,width:"100%",height:"100%",allowfullscreen:""},null,8,kd)):Ie("",!0)])]))}}),Sd={key:0},Od={key:1},Cd={key:2},Id={key:3,class:"preLine"},Ad={class:"btnContainer"},Ld=["value"],Dd=["value","innerHTML"],Rd=["value"],Pd=re("br",null,null,-1),Td=["value"],Md=re("span",{class:"sysIcon sysIcon_arrowleft"},null,-1),zd=[Md],$d=re("span",{class:"sysIcon sysIcon_arrowright"},null,-1),Nd=[$d],jd=Ve({__name:"browser",props:{data:{},modalData:{}},setup(e){const t=e,n=window.navigator.userAgent.toLowerCase().indexOf("mobile")!==-1,r={audio:Qf,video:fd,image:Hf,pdf:Ed,text:gd,base:Mf},s=Sr();let i=!1;function a(){if(i&&!t.modalData.layout.fullscreen){let X=s.get("browser_layout_w"),B=s.get("browser_layout_h");t.modalData.layout.w=X,t.modalData.layout.h=B,t.modalData.layout.x=(window.innerWidth-X)/2,t.modalData.layout.y=(window.innerHeight-B)/2}else t.modalData.layout.fullscreen||(s.set("browser_layout_w",t.modalData.layout.w),s.set("browser_layout_h",t.modalData.layout.h));i=t.modalData.layout.fullscreen}const o=pe(s.get("browser_play_mode")??"loop");function c(){let X=Be.playMode.indexOf(o.value);X+=1,X>Be.playMode.length-1&&(X=0),o.value=Be.playMode[X],s.set("browser_play_mode",o.value)}const u=pe(s.get("browser_show_detail")??!1);function f(){u.value=!u.value,s.set("browser_show_detail",u.value)}ot(()=>{document.addEventListener("keydown",P),document.addEventListener(`modal_resizing_${t.modalData.nid}`,a),setTimeout(()=>{document.activeElement&&document.activeElement.blur()},100)}),_t(()=>{document.removeEventListener("keydown",P),document.removeEventListener(`modal_resizing_${t.modalData.nid}`,a)});const h=pe([]),g=pe([]),d=pe([]);let y=0;const p=pe(0),b=pe({});async function m(X){const B=await Ce("file/get",{node_type:"directory",id_dir:`${X}`,with:"none"});return B||{path:[],list:[]}}_();function w(){let X=[];return y=0,g.value.forEach(B=>{if(!C(B))return;const se=B.rate?B.rate+2:2;X.push(Object.assign(B,{_weight_stack:y})),y+=se}),X=W(X,ne.value),X}async function _(X={}){X&&(t.data.query=Object.assign(t.data.query,X));let B;if(B=await Ce("file/get",t.data.query),!B||!B.list.length)return!1;let se=[];if(B.list.forEach(H=>{H.is_file&&se.push(H)}),B.list=se,!B.list.length){if(t.data.query.cascade_dir)return!1;const H=Re.copyObject(t.data.query);if(H.cascade_dir=1,B=await Ce("file/get",H),!B||!B.list.length)return!1;se=[],B.list.forEach(Q=>{Q.is_file&&se.push(Q)}),B.list=se}if(!B.list.length)return!1;let N=0,z=null;for(let H=0;H<B.list.length;H++)if(B.list[H].id===t.data.curId){N=H,z=B.list[H];break}console.info(N,z),h.value=B.path,g.value=B.list;let K=w();return d.value=W(K,ne.value),z||(z=d.value[0]),p.value=V(d.value,z),console.info(p.value),M(),!0}function S(X,B,se=0){let N=d.value.length;if(N<1)return;let z=0;if(o.value==="shuffle"){let K=Math.random()*y;B=0;for(let H=0;H<N&&(B=H,!(d.value[H]._weight_stack>K));H++);z=B}else z=X+B;for(;z<0;)z+=N;for(;z>N-1;)z-=N;se||(se=0),se+=1,!(se>N)&&(p.value=z,M())}function k(X){let B=X-p.value;S(p.value,B)}function C(X){const B=parseInt(oe.value)??0;if((X.rate??0)<B)return!1;switch(v.value){case"any":case"file":return Be.ignoreFileType.indexOf(X.type??"directory")===-1;default:return v.value==X.type}}function M(){d.value.length&&(b.value.type,d.value[p.value].type,b.value=d.value[p.value]),T()}function T(){t.modalData.base.title=p.value+1+"/"+d.value.length+" "+(b.value.title??"")}async function P(X){if(Dt(X.target)||!t.modalData.layout.active)return;let B,se,N,z,K,H;switch(X.key){case"ArrowLeft":if(X.preventDefault(),X.stopPropagation(),["audio","video"].indexOf(b.value.type??"")!==-1)return;S(p.value,-1);break;case"ArrowRight":if(X.preventDefault(),X.stopPropagation(),["audio","video"].indexOf(b.value.type??"")!==-1)return;S(p.value,1);break;case"a":case"PageUp":X.preventDefault(),X.stopPropagation(),S(p.value,-1);break;case"d":case"PageDown":X.preventDefault(),X.stopPropagation(),S(p.value,1);break;case"w":case"[":switch(t.data.query.mode){default:const ue=h.value.length?h.value[h.value.length-1]:{id:0,id_parent:0,type:"directory",title:"root",description:"",status:1,building:0};if(B=await m(ue.id_parent),se=W(B.list,ne.value),N=se.length,N<2)return;z=0,se.forEach((O,l)=>{O.id==t.data.query.id_dir&&(z=l)}),H=se.length;do{for(z-=1;z<0;)z+=N;for(;z>N-1;)z-=N;if(K=se[z],t.data.query.id_dir=`${K.id}`,await _())break}while(--H>0);break;case"id_iterate":const Y=t.data.query.keyword.split(","),$=[];Y.forEach(O=>$.push(parseInt(O)));let F=null;for(let O=0;O<b.value.crumb_node.length;O++){const l=b.value.crumb_node[O];if($.indexOf(l.id)!==-1){F=l.id;break}}if(!F)break;const ee=$.indexOf(F);N=$.length;let ie=ee-1;for(;ie<0;)ie+=N;for(;ie>N-1;)ie-=N;const fe=$[ie];for(let O=0;O<d.value.length;O++){const l=d.value[O];for(let I=0;I<l.crumb_node.length;I++)if(l.crumb_node[I].id===fe)return S(O,0)}}break;case"s":case"]":switch(t.data.query.mode){default:const ue=h.value.length?h.value[h.value.length-1]:{id:0,id_parent:0,type:"directory",title:"root",description:"",status:1,building:0};if(B=await m(ue.id_parent),se=W(B.list,ne.value),N=se.length,N<2)return;z=0,se.forEach((O,l)=>{O.id==t.data.query.id_dir&&(z=l)}),H=se.length;do{for(z+=1;z<0;)z+=N;for(;z>N-1;)z-=N;if(K=se[z],t.data.query.id_dir=`${K.id}`,await _())break}while(--H>0);break;case"id_iterate":const Y=t.data.query.keyword.split(","),$=[];Y.forEach(O=>$.push(parseInt(O)));let F=null;for(let O=0;O<b.value.crumb_node.length;O++){const l=b.value.crumb_node[O];if($.indexOf(l.id)!==-1){F=l.id;break}}if(!F)break;const ee=$.indexOf(F);N=$.length;let ie=ee+1;for(;ie<0;)ie+=N;for(;ie>N-1;)ie-=N;const fe=$[ie];for(let O=0;O<d.value.length;O++){const l=d.value[O];for(let I=0;I<l.crumb_node.length;I++)if(l.crumb_node[I].id===fe)return S(O,0)}break}break;case"NumpadEnter":case"Enter":break;case"Delete":X.preventDefault(),X.stopPropagation();const Q=new Set;b.value&&b.value.id&&Q.add(b.value.id),await xe.op_bath_delete(Q,[],!1,()=>{S(p.value,1)});break}}function V(X,B){let se=0;return X.forEach((N,z)=>{N.id===B.id&&(se=z)}),se}const ne=pe(s.get("browser_list_sort")??"name_asc");function D(X){var se;console.info("setSort",ne.value,X),(se=X.target)==null||se.blur();const B=d.value;d.value=[],W(B,ne.value),d.value=B,p.value=V(B,b.value),T()}function W(X,B){return X=ua(X,B),p.value=V(X,b.value),s.set("browser_list_sort",ne.value),X}const v=pe(s.get("browser_list_filter")??"any");function J(X){s.set("browser_list_filter",X);let B=d.value[p.value],se=w();d.value=W(se,ne.value),p.value=V(d.value,B),console.info(p.value),M()}const oe=pe("0");function G(X){let B=d.value[p.value],se=w();d.value=W(se,ne.value),p.value=V(d.value,B),console.info(p.value),M()}return(X,B)=>(ae(),vr(ho(b.value.type&&r[b.value.type]?r[b.value.type]:r.base),{data:t.data,modalData:t.modalData,nodeList:g.value,curNode:b.value,curIndex:p.value,onNav:k},{info:Xn(()=>{var se,N;return[re("div",{class:Ae({info:!0,detail:u.value})},[u.value?(ae(),le("p",Sd,Se(b.value.title)+" ("+Se(Ee(Re).kmgt(((N=(se=b.value.file_index)==null?void 0:se.raw)==null?void 0:N.size)??0,2))+") ",1)):(ae(),le("p",Od,Se(b.value.title),1)),b.value.crumb_node?(ae(),le("p",Cd,[qr("Dir : "),(ae(!0),le(_e,null,Ne(b.value.crumb_node,z=>(ae(),le(_e,null,[qr("/"+Se(z.title),1)],64))),256))])):Ie("",!0),u.value?(ae(),le("p",Id,Se(b.value.description),1)):Ie("",!0)],2)]}),btnContainer:Xn(()=>{var se,N;return[re("div",Ad,[n?qe((ae(),le("select",{key:0,"onUpdate:modelValue":B[0]||(B[0]=z=>oe.value=z),onChange:B[1]||(B[1]=z=>G(oe.value))},[(ae(!0),le(_e,null,Ne(Ee(Be).rateMobile,(z,K)=>(ae(),le("option",{value:K,key:"BROWSER_RATE_"+X.modalData.nid+"_"+K},Se(z),9,Ld))),128))],544)),[[Jt,oe.value]]):qe((ae(),le("select",{key:1,class:"sysIcon","onUpdate:modelValue":B[2]||(B[2]=z=>oe.value=z),onChange:B[3]||(B[3]=z=>G(oe.value))},[(ae(!0),le(_e,null,Ne(Ee(Be).rate,(z,K)=>(ae(),le("option",{class:"sysIcon_A sysIcon",value:K,innerHTML:z,key:"BROWSER_RATE_"+X.modalData.nid+"_"+K},null,8,Dd))),128))],544)),[[Jt,oe.value]]),qe(re("select",{"onUpdate:modelValue":B[4]||(B[4]=z=>v.value=z),onChange:B[5]||(B[5]=z=>J(v.value))},[(ae(!0),le(_e,null,Ne(Ee(Be).fileType,(z,K)=>(ae(),le("option",{value:z,key:"BROWSER_TYPE_"+X.modalData.nid+"_"+K},Se(z),9,Rd))),128))],544),[[Jt,v.value]]),Pd,qe(re("select",{"onUpdate:modelValue":B[6]||(B[6]=z=>ne.value=z),onChange:B[7]||(B[7]=z=>D(z))},[(ae(!0),le(_e,null,Ne(Ee(Be).sort,(z,K)=>(ae(),le("option",{value:K,key:"BROWSER_SORT_"+X.modalData.nid+"_"+K},Se(z),9,Td))),128))],544),[[Jt,ne.value]]),re("button",{class:Ae(["sysIcon",`sysIcon_player_${o.value}`]),onClick:c},null,2),re("button",{class:Ae(["sysIcon","sysIcon_info-cirlce-o"]),onClick:f}),(N=(se=b.value.file_index)==null?void 0:se.raw)!=null&&N.path?(ae(),le("button",{key:2,class:Ae(["sysIcon","sysIcon_download"]),onClick:B[8]||(B[8]=z=>Ee(xe).op_download(b.value))})):Ie("",!0)])]}),navigator:Xn(()=>[re("div",{class:Ae({pagination:1,isMobile:n})},[re("div",{class:"left",onClick:B[9]||(B[9]=se=>S(p.value,-1))},zd),re("div",{class:"right",onClick:B[10]||(B[10]=se=>S(p.value,1))},Nd)],2)]),_:1},40,["data","modalData","nodeList","curNode","curIndex"]))}}),Fd={class:"modal_locator"},Bd={class:"locator_list"},Ud=["onClick"],Hd={class:"type"},Wd={class:"tree"},Vd={class:"title"},Kd=Ve({__name:"locator",props:{data:{},modalData:{}},setup(e){const t=pe(null);let n={mode:"directory",id_dir:"",keyword:"",id_tag:"",cascade_dir:"",node_type:"directory",with:"crumb",limit:"20"};const r=e,s=pe([]);ot(()=>{var u;Object.assign(n,JSON.parse(JSON.stringify(r.data.id_dir))),(u=t.value)==null||u.focus()}),_t(()=>{});async function i(){const u=await Ce("file/get",n);!u||!u.list||(n.keyword&&"root".indexOf(n.keyword)!==-1&&u.list.unshift({id:0,title:"root",status:1,type:"directory",crumb_node:[]}),s.value=u.list,s.value.length&&(s.value[0]._sel=!0,r.modalData.layout.h<220&&(r.modalData.layout.h=220)))}async function a(u){console.info(u),!await c(u)&&Re.debounce(()=>{var g;let h=(g=t.value)==null?void 0:g.value;if(!h||!h.length){s.value=[];return}console.info(h),console.info(r.modalData),n.keyword=h,i()},200,"locator")}async function o(u){console.info(u);const f=fn();if(!await r.data.call(u))return f.close(r.modalData.nid)}async function c(u){let f,h,g=!1;switch(u.code){case"ArrowDown":if(g=!0,u.stopPropagation(),u.preventDefault(),!s.value.length)break;for(f=-1,s.value.forEach((y,p)=>{y._sel&&(f=p)}),h=f+1;h<0;)h+=s.value.length;for(;h>=s.value.length;)h-=s.value.length;s.value.forEach((y,p)=>{y._sel=p==h});break;case"ArrowUp":if(g=!0,u.stopPropagation(),u.preventDefault(),!s.value.length)break;for(f=0,s.value.forEach((y,p)=>{y._sel&&(f=p)}),h=f-1;h<0;)h+=s.value.length;for(;h>=s.value.length;)h-=s.value.length;s.value.forEach((y,p)=>{y._sel=p==h});break;case"NumpadEnter":case"Enter":if(g=!0,u.stopPropagation(),u.preventDefault(),!s.value.length||(f=-1,s.value.forEach((y,p)=>{y._sel&&(f=p)}),f==-1))break;const d=s.value[f];o(d);break}return g}return(u,f)=>(ae(),le("div",Fd,[re("input",{type:"text",class:"locator_input",placeholder:"type title/desc here ...",ref_key:"locatorInput",ref:t,onKeydown:a},null,544),re("div",Bd,[(ae(!0),le(_e,null,Ne(s.value,h=>(ae(),le("div",{onClick:g=>o(h),class:Ae({active:h._sel})},[re("p",Hd,Se(h.type),1),re("p",Wd,[re("span",Vd,Se(h.title),1),h.crumb_node?(ae(!0),le(_e,{key:0},Ne(h.crumb_node,g=>(ae(),le("span",null,Se(g.title),1))),256)):Ie("",!0)])],10,Ud))),256))])]))}}),qd={class:"upload_list"},Yd={class:"title"},Xd={class:"meta"},Zd={key:0},Gd={key:1},Jd=["onClick"],Qd=re("div",null,"drag / drop files here...",-1),eh={class:"upload_menu"},th={key:1},nh=Ve({__name:"uploader",props:{data:{},modalData:{}},setup(e){const t=e,n=pe([]),r=new Map;ot(()=>{}),_t(()=>{});function s(y){var p,b,m;if(console.debug("onDrop",y.type,(p=y.dataTransfer)==null?void 0:p.files,y),y.preventDefault(),y.stopPropagation(),!(!y.dataTransfer||!y.dataTransfer.files.length))for(let w=0;w<((b=y.dataTransfer)==null?void 0:b.files.length);w++){const _=(m=y.dataTransfer)==null?void 0:m.items[w],S=_.webkitGetAsEntry();S.isFile?n.value.push({name:S.fullPath,size:_.size,file:_,isDir:!1,status:"waiting",start:0,loaded:0}):i(S).then(k=>{k.forEach(C=>n.value.push(C))})}}async function i(y){const p=[];p.push({name:y.fullPath,size:0,file:null,isDir:!0,status:"waiting",start:0,loaded:0});const b=y.createReader(),m=await o(b);for(let w=0;w<m.length;w++){const _=m[w];if(_.isFile){const S=await a(_);p.push({name:_.fullPath,size:S.size,file:S,isDir:!1,status:"waiting",start:0,loaded:0})}_.isDirectory&&(await i(_)).forEach(k=>p.push(k))}return p}function a(y){return new Promise(p=>{y.file(b=>p(b))})}function o(y){return new Promise(p=>{y.readEntries(b=>{p(b)})})}function c(y){y.stopPropagation(),y.preventDefault()}let u=pe(!1);async function f(){if(n.value.length){u.value=!0;for(let y=0;y<n.value.length;y++)n.value[y].status==="waiting"&&await h(n.value[y]);u.value=!1,t.data.emitGo("reload")}}async function h(y){let p=null,[b,m,w]=g(y.name);if(y.isDir){const _=new FormData;_.set("pid",b),_.set("title",w),y.status="uploading",p=await Ce("file/mkdir",_),r.set(m+w+"/",p.id)}else{const _=new FormData;_.set("pid",b),_.set("file",y.file),y.status="uploading",p=await Ce("file/upd",_,{upload:S=>{y.loaded=S.loaded}})}return y.status="complete",p}function g(y){const p=y.replace(/[\\/]+$/i).split(/[\\/]/i),b=p.pop();if(!p.length)return[t.data.pid,"/",b];let m="";for(let _=0;_<p.length;_++)m+=p[_]+"/";return m=="/"?[t.data.pid,m,b]:[r.get(m),m,b]}function d(y){n.value.splice(y,1)}return(y,p)=>(ae(),le("div",{class:"modal_uploader",onDrop:s,onDragover:c},[re("div",qd,[(ae(!0),le(_e,null,Ne(n.value,(b,m)=>(ae(),le("div",{key:`file_upload_${m}`},[re("div",Yd,Se(b.name),1),re("div",Xd,[b.status==="uploading"?(ae(),le("span",Zd,Se(Math.round(100*b.loaded/b.size))+" % ",1)):(ae(),le("span",Gd,Se(b.status),1)),re("span",null,Se(Ee(Re).kmgt(b.size)),1),b.status==="waiting"?(ae(),le("span",{key:2,onClick:w=>d(m),class:"pointer"},"X",8,Jd)):Ie("",!0)])]))),128)),Qd]),re("div",eh,[Ee(u)?(ae(),le("button",th,"uploading")):(ae(),le("button",{key:0,onClick:f},"upload"))])],32))}}),rh={class:"modal_rename_util"},sh={class:"mode_selector"},ih=["id","name"],oh=["for"],ah=["id","name"],lh=["for"],ch=$o("<p>rename pattern:</p><table><tbody><tr><td>code</td><td>description</td></tr><tr><td>{filename}</td><td>file name</td></tr><tr><td>{index}</td><td>index by sort, prefix by max len+1</td></tr><tr><td>{index:n}</td><td>index by sort, prefix len by [n]</td></tr><tr><td>{directory}</td><td>parent directory name</td></tr></tbody></table>",2),uh=re("span",null,"pattern",-1),fh=re("p",null,"rename bath:",-1),dh=Ve({__name:"renameUtil",props:{data:{},modalData:{}},setup(e){pe(null);const t=e;let n=pe("pattern"),r=pe("{index}_{filename}"),s=pe("");ot(()=>{const o=[];t.data.node_list.forEach(c=>{o.push((c==null?void 0:c.title)??"")}),s.value=o.join(`\r
`),console.info(s)}),_t(()=>{});function i(o){let c=o.length.toString().length+1,u=0,f="",h=r.value.match(/\{index:(\d+)}/);h&&(u=parseInt(h[1]),f=h[0]);const g=new Map;o.forEach((y,p)=>{const b=y.crumb_node?y.crumb_node[y.crumb_node.length-1]:null,m=b?b.title:"";let w=new Map;w.set("{filename}",y.title??""),w.set("{index}",Re.prefix(p+1,c,"0")),w.set("{directory}",m??""),w.set(`{index:${f}}`,Re.prefix(p+1,u,"0"));let _=r.value;w.forEach((S,k)=>{_=_.replace(k,S)}),g.set(y.id??0,_)});const d=[];return g.forEach((y,p)=>{d.push({id:p,title:y})}),d}async function a(){const o=fn();let c=[];switch(n.value){default:case"pattern":c=i(t.data.node_list);break;case"bath":const h=s.value.split(/[\r\n]+/);c=[],t.data.node_list.forEach((g,d)=>{h[d]&&h[d].trim().length&&c.push({id:g.id??0,title:h[d].trim()})});break}const u={list:JSON.stringify(c)},f=await Ce("file/bath_rename",u);return console.info(f),t.data.callback(c),o.close(t.modalData.nid)}return(o,c)=>(ae(),le("div",rh,[re("div",sh,[qe(re("input",{id:`P_${t.modalData.nid}_MODE_PATTERN`,name:`P_${t.modalData.nid}_MODE`,value:"pattern",type:"radio","onUpdate:modelValue":c[0]||(c[0]=u=>ze(n)?n.value=u:n=u)},null,8,ih),[[Xr,Ee(n)]]),re("label",{for:`P_${t.modalData.nid}_MODE_PATTERN`},"pattern",8,oh),qe(re("input",{id:`P_${t.modalData.nid}_MODE_BATH`,name:`P_${t.modalData.nid}_MODE`,value:"bath",type:"radio","onUpdate:modelValue":c[1]||(c[1]=u=>ze(n)?n.value=u:n=u)},null,8,ah),[[Xr,Ee(n)]]),re("label",{for:`P_${t.modalData.nid}_MODE_BATH`},"bath",8,lh)]),Ee(n)=="pattern"?(ae(),le(_e,{key:0},[ch,re("label",null,[uh,qe(re("input",{type:"text","onUpdate:modelValue":c[2]||(c[2]=u=>ze(r)?r.value=u:r=u)},null,512),[[Gt,Ee(r)]])])],64)):Ie("",!0),Ee(n)=="bath"?(ae(),le(_e,{key:1},[fh,qe(re("textarea",{"onUpdate:modelValue":c[3]||(c[3]=u=>ze(s)?s.value=u:s=u)},null,512),[[Gt,Ee(s)]])],64)):Ie("",!0),re("label",{class:"confirm"},[re("button",{onClick:a},"submit")])]))}}),hh={class:"fr_popup"},ph=["data-ref-id","onClick"],mh=["onPointerdown","onDblclick"],_h={class:"modal_title"},gh={class:"modal_menu"},vh=["onClick"],yh=["onClick"],bh=["onClick"],wh={class:"modal_content"},xh=["innerHTML"],kh={key:1,class:"modal_content_form"},Eh={key:0},Sh=re("span",null,null,-1),Oh=["onUpdate:modelValue"],Ch=["onUpdate:modelValue"],Ih=["onUpdate:modelValue"],Ah=["onUpdate:modelValue"],Lh=["id","name","value","onUpdate:modelValue"],Dh=["for"],Rh=["id","name","value","onUpdate:modelValue"],Ph=["for"],Th=["onUpdate:modelValue","multiple"],Mh=["value"],zh={key:2,class:"modal_content_callback"},$h=["onClick"],Nh=["onPointerdown"],jh=$o('<div class="c_l"></div><div class="c_r"></div><div class="c_t"></div><div class="c_b"></div><div class="c_lt"></div><div class="c_lb"></div><div class="c_rt"></div><div class="c_rb"></div>',8),Fh=[jh],Bh={key:0,class:"fr_alpha"},St=20,Uh=Ve({__name:"Popup",setup(e){const t={fileBrowser:jd,uploader:nh,locator:Kd,renameUtil:dh},n=new Date().valueOf(),r=pe(new Map);function s(_){const S=Math.floor((new Date().valueOf()-n)/100),k=window.innerWidth,C=window.innerHeight,M={nid:"",base:{title:_.title??"",alpha:_.alpha??!1,key:_.key??"",single:_.single??!1},layout:{w:0,h:0,x:0,y:0,minW:0,minH:0,allow_resize:!1,allow_move:!1,allow_escape:!1,allow_fullscreen:!1,auto_focus:!1,active:!1,index:0,fullscreen:!1},content:{text:pe(""),form:[],component:[]},callback:[],closed:!1,event:{}};M.nid=(S+Math.random()).toString(32),M.event.resize=new Event(`modal_resizing_${M.nid}`),console.info(S,M.nid);const T={};if(T.w=_.w??400,T.h=_.h??160,T.x=(k-T.w)/2,T.y=(C-T.h)/2,T.minW=_.minW??400,T.minH=_.minH??160,T.allow_resize=_.allow_resize??!0,T.allow_move=_.allow_move??!0,T.allow_escape=_.allow_escape??!0,T.allow_fullscreen=_.allow_fullscreen??!1,T.auto_focus=_.auto_focus??!0,T.active=!1,T.index=S,T.fullscreen=_.fullscreen??!1,Object.assign(M.layout,T),_.text&&(typeof _.text=="string"?M.content.text.value=_.text:M.content.text=_.text),_.form&&(Array.isArray(_.form)?M.content.form.push(..._.form):M.content.form.push(_.form),M.content.form.forEach(P=>{if(P.value=P.value??null,P.options=P.options??null,P.default=P.default??null,P.multiple=!!P.multiple,P.disabled=!!P.disabled,P.options&&Array.isArray(P.options)){let V={};P.options.forEach(ne=>{V[ne]=ne}),P.options=V}})),_.component&&(Array.isArray(_.component)?_.component.forEach(P=>{let V;typeof P=="string"?V={key:"",componentName:P,data:{}}:V=Object.assign({key:"",componentName:null,data:{}},P),M.content.component.push(V)}):typeof _.component=="string"?M.content.component.push({key:"",componentName:_.component,data:{}}):M.content.component.push(Object.assign({key:"",componentName:null,data:{}},_.component))),_.callback){if(Array.isArray(_.callback))_.callback.forEach((P,V)=>{let ne;typeof P=="function"?ne={key:"",name:"",func:P}:ne=Object.assign({key:"",name:"",func:null},P),M.callback.push(ne)});else if(typeof _.callback=="function")M.callback.push({key:"",name:"",func:_.callback});else if(_.callback.func)M.callback.push(Object.assign({key:"",name:"",func:null},_.callback));else for(const P in _.callback){if(!Object.prototype.hasOwnProperty.call(_.callback,P))continue;const V=_.callback[P];M.callback.push(Object.assign({key:P,name:P,func:V}))}M.callback.forEach((P,V)=>{if(P.name&&!P.key)P.key=P.name;else if(!P.name&&P.key)P.name=P.key;else if(!P.name&&!P.key){let ne="button";M.callback.length>1&&(ne+=" "+V),P.name=ne,P.key=ne}})}return console.debug(M),M}window.addEventListener("resize",_=>{r.value.forEach(S=>{if(S.layout.fullscreen){const k={x:St,y:St,w:window.innerWidth-St*2,h:window.innerHeight-St*2};Object.assign(S.layout,k),document.dispatchEvent(S.event.resize)}})});const i=fn();i.handleEvent("set",_=>{let S=null,k=null;return _.single&&r.value.forEach((C,M,T)=>{C.base.key==_.key&&(S=M,k=C)}),S?setTimeout(()=>{a(S)}):(k=s(_),r.value.set(k.nid,k),setTimeout(()=>{a(k.nid)})),m(),k}),i.handleEvent("close",_=>u(_)),document.body.addEventListener("click",_=>{let S=_.target;_n(S)||a(0)});function a(_){const S=Math.floor((new Date().valueOf()-n)/100);r.value.forEach(k=>{if(k.nid===_){k.layout.index=S;let C=!k.layout.active;k.layout.active=!0,k.layout.auto_focus&&C&&setTimeout(()=>{const M=document.querySelector(`.modal_dom[data-ref-id="${k.nid}"] input,.modal_dom[data-ref-id="${k.nid}"] button,.modal_dom[data-ref-id="${k.nid}"] textarea`);M&&M.focus()},100)}else k.layout.active=!1})}function o(_){const S=r.value.get(_);if(!S)return;const k={x:St,y:St,w:window.innerWidth-St*2,h:window.innerHeight-St*2,fullscreen:!0};Object.assign(S.layout,k),document.dispatchEvent(S.event.resize)}function c(_){const S=r.value.get(_);if(!S)return;const k={x:0,y:0,w:S.layout.minW,h:S.layout.minH,fullscreen:!1};k.x=(window.innerWidth-k.w)/2,k.y=(window.innerHeight-k.h)/2,Object.assign(S.layout,k),document.dispatchEvent(S.event.resize)}function u(_){const S=r.value.get(_);if(!S||!S.layout.allow_escape)return;r.value.delete(_),m();let k=-1,C=-1;return r.value.forEach(M=>{k>M.layout.index||(k=M.layout.index,C=M.nid)}),C!=-1&&a(C),S}let f={x:0,y:0,d:"",modalX:0,modalY:0,modalW:0,modalH:0,modal:null},h=0;function g(_,S){S.preventDefault(),S.stopPropagation(),S.pointerId&&(h=S.pointerId,S.target.hasPointerCapture(S.pointerId)),f.x=S.clientX,f.y=S.clientY,f.d=S.target.className,r.value.forEach(k=>{k.nid===_&&(f.modal=k)}),f.modal&&(f.modal.layout.fullscreen||(f.modalX=f.modal.layout.x,f.modalY=f.modal.layout.y,f.modalW=f.modal.layout.w,f.modalH=f.modal.layout.h,document.addEventListener("pointerup",y),document.addEventListener("pointermove",d)))}function d(_){if(_.preventDefault(),!f.modal||!_.pointerId||h!=_.pointerId)return;const S={x:_.clientX-f.x,y:_.clientY-f.y},k={x:f.modal.layout.x,y:f.modal.layout.y,w:f.modal.layout.w,h:f.modal.layout.h};switch(f.d){case"c_l":k.x=f.modalX+S.x,k.w=f.modalW-S.x;break;case"c_r":k.x=f.modalX,k.w=f.modalW+S.x;break;case"c_t":k.y=f.modalY+S.y,k.h=f.modalH-S.y;break;case"c_b":k.y=f.modalY,k.h=f.modalH+S.y;break;case"c_lt":k.x=f.modalX+S.x,k.w=f.modalW-S.x,k.y=f.modalY+S.y,k.h=f.modalH-S.y;break;case"c_lb":k.x=f.modalX+S.x,k.w=f.modalW-S.x,k.y=f.modalY,k.h=f.modalH+S.y;break;case"c_rt":k.x=f.modalX,k.w=f.modalW+S.x,k.y=f.modalY+S.y,k.h=f.modalH-S.y;break;case"c_rb":k.x=f.modalX,k.w=f.modalW+S.x,k.y=f.modalY,k.h=f.modalH+S.y;break;case"modal_header":case"modal_title":k.x=f.modalX+S.x,k.y=f.modalY+S.y;break}const C={l:0,r:window.innerWidth,t:0,b:window.innerHeight};k.w<100&&(k.w=100),k.h<80&&(k.h=80),k.y<0&&(k.y=0),k.y>C.b-k.h/2&&(k.y=C.b-k.h/2),k.x<0-k.w/2&&(k.x=0-k.w/2),k.x>C.r-k.w/2&&(k.x=C.r-k.w/2),f.modal.layout.minW&&k.w<f.modal.layout.minW&&(k.w=f.modal.layout.minW),f.modal.layout.minH&&k.h<f.modal.layout.minH&&(k.h=f.modal.layout.minH),Object.assign(f.modal.layout,k),document.dispatchEvent(f.modal.event.resize)}function y(_){_.preventDefault(),_.stopPropagation(),!(!_.pointerId||h!=_.pointerId)&&(document.removeEventListener("pointerup",y),document.removeEventListener("pointermove",d),h=0,f.modal=null)}function p(_,S){const k=r.value.get(_);k&&k.callback.forEach(async C=>{C.key!==S||await C.func(k)||u(_)})}const b=pe(!1);function m(){let _=!1;r.value.forEach(S=>{S.base.alpha&&(_=!0)}),b.value=_}ot(()=>{console.info("Popup mounted"),document.addEventListener("keydown",w)}),_t(()=>{console.info("unmounted"),document.removeEventListener("keydown",w)});function w(_){switch(_.key){case"Escape":r.value.forEach((k,C)=>{if(k.layout.active){if(!k.layout.allow_escape)return;setTimeout(()=>u(k.nid))}});break;case"NumpadEnter":case"Enter":if(_.target.tagName==="BODY"||_.target.tagName==="BUTTON"||_.isComposing)return;let S=_.target;for(;S.parentElement;){if(S=S.parentElement,!S.classList.contains("modal_dom"))continue;const C=S.getAttribute("data-ref-id");if(!C)break;const M=r.value.get(C);if(!M)break;for(let T=0;T<M.callback.length;T++){const P=M.callback[T].key;return p(C,P)}}break}}return(_,S)=>(ae(),le(_e,null,[re("div",hh,[(ae(!0),le(_e,null,Ne(r.value,([k,C])=>{var M;return ae(),le("div",{key:`_modal_${k}`,class:Ae({modal_dom:!0,active:C.layout.active,resizing:((M=Ee(f).modal)==null?void 0:M.nid)==C.nid}),"data-ref-id":C.nid,style:Ge({zIndex:C.layout.index,width:C.layout.w+"px",height:C.layout.h+"px",left:C.layout.x+"px",top:C.layout.y+"px"}),onClick:Rc(T=>a(C.nid),["stop"])},[re("div",{class:"modal_header",onPointerdown:T=>g(C.nid,T),onDblclick:T=>C.layout.fullscreen?c(C.nid):o(C.nid)},[re("div",_h,Se(C.base.title),1),re("div",gh,[C.layout.allow_move&&C.layout.allow_fullscreen?(ae(),le(_e,{key:0},[C.layout.fullscreen?(ae(),le("span",{key:1,class:"buttonStyle sysIcon sysIcon_windowize",onClick:T=>c(C.nid)},null,8,yh)):(ae(),le("span",{key:0,class:"buttonStyle sysIcon sysIcon_maximize",onClick:T=>o(C.nid)},null,8,vh))],64)):Ie("",!0),re("span",{class:"buttonStyle sysIcon sysIcon_close",onClick:T=>u(C.nid)},null,8,bh)])],40,mh),re("div",wh,[C.content.text&&C.content.text.length?(ae(),le("div",{key:0,class:"modal_content_text",innerHTML:C.content.text},null,8,xh)):Ie("",!0),C.content.form&&C.content.form.length?(ae(),le("div",kh,[(ae(!0),le(_e,null,Ne(C.content.form,(T,P)=>(ae(),le("label",{key:`_modal_${k}_form_${P}`},[T.label?(ae(),le("span",Eh,Se(T.label),1)):Ie("",!0),Sh,re("span",null,[T.type==="text"?qe((ae(),le("input",{key:0,type:"text","onUpdate:modelValue":V=>T.value=V},null,8,Oh)),[[Gt,T.value]]):Ie("",!0),T.type==="textarea"?qe((ae(),le("textarea",{key:1,"onUpdate:modelValue":V=>T.value=V},null,8,Ch)),[[Gt,T.value]]):Ie("",!0),T.type==="date"?qe((ae(),le("input",{key:2,type:"date","onUpdate:modelValue":V=>T.value=V},null,8,Ih)),[[Gt,T.value]]):Ie("",!0),T.type==="datetime"?qe((ae(),le("input",{key:3,type:"datetime-local","onUpdate:modelValue":V=>T.value=V},null,8,Ah)),[[Gt,T.value]]):Ie("",!0),T.type==="checkbox"?(ae(!0),le(_e,{key:4},Ne(T.options,(V,ne)=>(ae(),le(_e,{key:`P_${k}_C_${P}_CB_${ne}`},[qe(re("input",{id:`P_${k}_C_${P}_CB_${ne}`,name:`P_${k}_C_${P}_CB`,value:ne,type:"checkbox","onUpdate:modelValue":D=>T.value=D},null,8,Lh),[[Ac,T.value]]),re("label",{for:`P_${k}_C_${P}_CB_${ne}`},Se(V),9,Dh)],64))),128)):Ie("",!0),T.type==="radio"?(ae(!0),le(_e,{key:5},Ne(T.options,(V,ne)=>(ae(),le(_e,{key:`P_${k}_C_${P}_RD_${ne}`},[qe(re("input",{id:`P_${k}_C_${P}_RD_${ne}`,name:`P_${k}_C_${P}_RD`,value:ne,type:"radio","onUpdate:modelValue":D=>T.value=D},null,8,Rh),[[Xr,T.value]]),re("label",{for:`P_${k}_C_${P}_RD_${ne}`},Se(V),9,Ph)],64))),128)):Ie("",!0),T.type==="select"?qe((ae(),le("select",{key:6,"onUpdate:modelValue":V=>T.value=V,multiple:T.multiple},[(ae(!0),le(_e,null,Ne(T.options,(V,ne)=>(ae(),le("option",{key:`P_${k}_C_${P}_SL_${ne}`,value:ne},Se(V),9,Mh))),128))],8,Th)),[[Jt,T.value]]):Ie("",!0)])]))),128))])):Ie("",!0),(ae(!0),le(_e,null,Ne(C.content.component,(T,P)=>(ae(),vr(ho(t[T.componentName]),{key:`CMP_${k}_${P}`,data:T.data,modalData:C},null,8,["data","modalData"]))),128)),C.callback&&C.callback.length?(ae(),le("div",zh,[(ae(!0),le(_e,null,Ne(C.callback,(T,P)=>(ae(),le("button",{key:`BTN_${k}_${P}`,onClick:V=>p(C.nid,T.key)},Se(T.name),9,$h))),128))])):Ie("",!0)]),C.layout.allow_resize?(ae(),le("div",{key:0,class:"modal_border",onPointerdown:T=>g(C.nid,T)},Fh,40,Nh)):Ie("",!0)],14,ph)}),128))]),b.value?(ae(),le("div",Bh)):Ie("",!0)],64))}}),Hh={class:"fr_context"},Wh=["onClick"],Vh=["innerHTML"],Kh={key:0,class:"context_menu_sub"},qh=["onClick"],Yh=["innerHTML"],Xh=Ve({__name:"Context",setup(e){const n=un().get(),r=n?n!=null&&n.group.admin?2:1:0,s=oa(),i=pe([]),a=pe(null),o=pe(!0),c=pe({x:-1e3,y:0,w:0,h:0,sx:0,sy:0,direction:"lb"});s.register(u);function u(b,m){o.value=!1;const w=[];b.forEach(_=>{if(f(_)){if(_.child){let S=[];if(_.child.forEach(k=>{f(k)&&S.push(k)}),!S.length)return;_.child=S}w.push(_)}}),i.value=w,console.info(w),setTimeout(()=>h(m),20)}function f(b){switch(b.auth){case"none":return!1;default:case"guest":return!0;case"user":if(r<1)break;return!0;case"admin":if(r<2)break;return!0}}function h(b){if(!a.value)return;const m=a.value;let w=p();const _={x:b.clientX,y:b.clientY,w:m==null?void 0:m.offsetWidth,h:m==null?void 0:m.offsetHeight,sx:w.scrollTop,sy:w.scrollLeft,direction:"rb"};let S=["r","b"];switch(_.w+_.x>window.innerWidth&&(S[0]="l"),_.h+_.y>window.innerHeight&&(S[1]="t"),_.direction=S.join(""),_.direction){case"rb":break;case"rt":_.y-=_.h;break;case"lb":_.x-=_.w;break;case"lt":_.x-=_.w,_.y-=_.h;break}c.value=_,p().addEventListener("scroll",y),setTimeout(()=>o.value=!0,10)}function g(){p().removeEventListener("scroll",y),o.value=!1,d=null,setTimeout(()=>{i.value=[],c.value={x:-1e3,y:0,w:0,h:0,sx:0,sy:0,direction:"lb"}},10)}ot(()=>{console.info(d)});let d=null;function y(b){const m=p();if(!m)return;let w=c.value,_=m.scrollLeft,S=m.scrollTop,k=_-w.sx,C=S-w.sy;c.value=Object.assign(w,{x:w.x-k,y:w.y-C,sx:_,sy:S})}function p(){return d||(d=document.querySelector(".fr_content"),d)}return addEventListener("contextmenu",b=>{console.info("triggerMenu"),u([],b)}),addEventListener("click",b=>{g()}),(b,m)=>(ae(),le("div",Hh,[re("div",{class:Ae(["context_menu",o.value?"show":"",c.value.direction]),style:Ge({left:c.value.x+"px",top:c.value.y+"px"}),ref_key:"contextDOM",ref:a},[(ae(!0),le(_e,{key:0},Ne(i.value,w=>{var _;return ae(),le("div",{class:Ae(["context_item",(_=w.child)!=null&&_.length?"has_sub":""]),onClick:w.method},[re("span",{innerHTML:w.title},null,8,Vh),w.child&&w.child.length?(ae(),le("div",Kh,[(ae(!0),le(_e,{key:0},Ne(w.child,S=>(ae(),le("div",{class:Ae({context_item:!0}),onClick:S.method},[re("span",{innerHTML:S.title},null,8,Yh)],8,qh))),256))])):Ie("",!0)],10,Wh)}),256))],6)]))}}),Zh={class:"fr_body"},Gh=Ve({__name:"App",setup(e){const n=un().get();return n&&(document.cookie=`token=${n.token}; max-age=31536000`),(r,s)=>{const i=ml("router-view");return ae(),le(_e,null,[je(nu,{class:"fr_header"}),je(Uh),je(Xh),re("div",Zh,[je(gf,{class:"fr_navi"}),je(i)])],64)}}});Ef();const Os=Mc(Gh);Os.use(jc());Os.use(df);Os.mount("#app");export{Ac as A,pt as B,Be as C,xe as D,cl as E,_e as F,Re as G,ul as H,Xr as I,qr as J,Ko as _,fn as a,ot as b,vr as c,Ve as d,ep as e,_t as f,Qh as g,le as h,re as i,Ne as j,Ee as k,Jt as l,Ie as m,Ae as n,ae as o,Af as p,Ce as q,pe as r,uf as s,ff as t,Sr as u,Gt as v,qe as w,Se as x,Rc as y,je as z};
